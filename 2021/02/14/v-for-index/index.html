<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>å…³äºv-forçš„keyå€¼ä¸ºä»€ä¹ˆä¸èƒ½æ˜¯indexï¼Ÿ</title><meta name="description" content="ğŸ¯ ğŸ¯ ğŸ¯ ğŸ¯ ğŸ¯"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="ä»å®é™…çš„æ¡ˆä¾‹å‘ç°åˆ°åœ¨ä½¿ç”¨ v-for æ—¶ï¼Œå°† key å€¼å†™æˆäº† indexï¼Œå‡ºç°çš„é—®é¢˜ã€‚ä¸å…¶ä½¿ç”¨ index ä½œä¸º key ï¼Œä¸å¦‚å®Œå…¨ä¸å†™ keyï¼Œå› ä¸ºä»–ä»¬çš„æ€§èƒ½æ˜¯ä¸€æ ·ã€‚æ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨é•¿åº¦ä¸º 10ï¼Œç”¨ index ä½œä¸º key ï¼Œå„ item çš„ key å€¼ä¾æ¬¡å°±æ˜¯ 0-9ï¼Œ ç„¶å reverse() ä¸€ä¸‹ï¼Œåˆ—è¡¨çš„çš„ key è¿˜æ˜¯ 0-9ã€‚åœ¨ä¾æ¬¡ patch è¿™ 10 ä¸ª item çš„æ—¶å€™ï¼ŒsameVnode() å…¨éƒ¨è¿”å›çœŸï¼ˆå› ä¸º tag å’Œ key éƒ½ä¸€æ ·ï¼‰ã€‚å†çœ‹å¦å¤–ä¸€ç§æƒ…å†µï¼Œå¦‚æœä¸å†™ key ï¼Œ é‚£è¿™ 10 ä¸ª item çš„ key å…¨éƒ¨æ˜¯ undefined, åœ¨ sameVnode() ä¹Ÿæ˜¯å…¨éƒ¨è¿”å›çœŸï¼ˆå› ä¸º tag ç›¸åŒï¼Œkey ä¹Ÿç›¸åŒï¼škey éƒ½æ˜¯ undefinedï¼‰ã€‚æ‰€ä»¥å¾—å‡ºç»“è®ºï¼Œå¦‚æœä½¿ç”¨ in.."><meta name="generator" content="Hexo 5.4.1"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Jude's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">å…³äºv-forçš„keyå€¼ä¸ºä»€ä¹ˆä¸èƒ½æ˜¯indexï¼Ÿ</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">ç‚¹å‡»è¿”å›é¡¶éƒ¨</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/about">å…³äº</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/about">å…³äº</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A1%88%E4%BE%8B-bug-%E5%A4%8D%E7%8E%B0"><span class="toc-text">ä¸€ã€æ¡ˆä¾‹ bug å¤ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">äºŒã€æ€»ç»“</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/vue"><i class="tag post-item-tag">vue</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">å…³äºv-forçš„keyå€¼ä¸ºä»€ä¹ˆä¸èƒ½æ˜¯indexï¼Ÿ</h1><time class="has-text-grey" datetime="2021-02-13T16:00:00.000Z">2021-02-14</time><article class="mt-2 post-content"><p>ä»å®é™…çš„æ¡ˆä¾‹å‘ç°åˆ°åœ¨ä½¿ç”¨ v-for æ—¶ï¼Œå°† key å€¼å†™æˆäº† indexï¼Œå‡ºç°çš„é—®é¢˜ã€‚ä¸å…¶ä½¿ç”¨ index ä½œä¸º key ï¼Œä¸å¦‚å®Œå…¨ä¸å†™ keyï¼Œå› ä¸ºä»–ä»¬çš„æ€§èƒ½æ˜¯ä¸€æ ·ã€‚æ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨é•¿åº¦ä¸º 10ï¼Œç”¨ index ä½œä¸º key ï¼Œå„ item çš„ key å€¼ä¾æ¬¡å°±æ˜¯ 0-9ï¼Œ ç„¶å reverse() ä¸€ä¸‹ï¼Œåˆ—è¡¨çš„çš„ key è¿˜æ˜¯ 0-9ã€‚åœ¨ä¾æ¬¡ patch è¿™ 10 ä¸ª item çš„æ—¶å€™ï¼ŒsameVnode() å…¨éƒ¨è¿”å›çœŸï¼ˆå› ä¸º tag å’Œ key éƒ½ä¸€æ ·ï¼‰ã€‚å†çœ‹å¦å¤–ä¸€ç§æƒ…å†µï¼Œå¦‚æœä¸å†™ key ï¼Œ é‚£è¿™ 10 ä¸ª item çš„ key å…¨éƒ¨æ˜¯ undefined, åœ¨ sameVnode() ä¹Ÿæ˜¯å…¨éƒ¨è¿”å›çœŸï¼ˆå› ä¸º tag ç›¸åŒï¼Œkey ä¹Ÿç›¸åŒï¼škey éƒ½æ˜¯ undefinedï¼‰ã€‚æ‰€ä»¥å¾—å‡ºç»“è®ºï¼Œå¦‚æœä½¿ç”¨ index ä½œä¸º keyï¼Œä¸å¦‚å¹²è„†ä¸å†™ key äº†ï¼Œè¿˜èƒ½çœä¸‹ä»£ç ã€‚</p>
<span id="more"></span>

<h3 id="ä¸€ã€æ¡ˆä¾‹-bug-å¤ç°"><a href="#ä¸€ã€æ¡ˆä¾‹-bug-å¤ç°" class="headerlink" title="ä¸€ã€æ¡ˆä¾‹ bug å¤ç°"></a>ä¸€ã€æ¡ˆä¾‹ bug å¤ç°</h3><p>çˆ¶ç»„ä»¶ä»£ç ï¼š</p>
<pre><code class="js">// çˆ¶ç»„ä»¶
&lt;Child
    v-for=&quot;(item,index) in list&quot;
    :key=&quot;index&quot;
    :count=&quot;item.count&quot;
    :name=&quot;item.name&quot;
    @delete=&quot;handleDelete(index)&quot;
/&gt;

// data
list:[
    &#123;
        count:1,
        name:&quot;1&quot;
    &#125;,
    &#123;
        count:2,
        name:&quot;2&quot;
    &#125;,
       &#123;
        count:3,
        name:&quot;3&quot;
    &#125;,
]
// method
handelDelete(index)&#123;
    this.list.splice(index,1)
&#125;
</code></pre>
<p>å­ç»„ä»¶ä»£ç ï¼š</p>
<pre><code class="js">// å­ç»„ä»¶
&lt;div&gt;
&lt;span&gt;
    &#123;&#123;name&#125;&#125;
&lt;/span&gt;
countï¼š&#123;&#123; innerCount &#125;&#125;
&lt;button @click=&quot;$emit(&#39;delete)&quot;&gt;&lt;/button&gt;delete&lt;/button&gt;
&lt;/div&gt;
// props
props:&#123;
    count:&#123;
        type:Number,
        default:0
    &#125;,
    name:&#123;
        type:String,
        default:&#39;&#39;
    &#125;
&#125;
// data
data()&#123;
    retrun&#123;
        // å­ç»„ä»¶ä¸‹é¢çš„è¿™è¡Œä»£ç å®šä¹‰äº†è‡ªå·±çš„çŠ¶æ€ï¼Œæ— æ³•ä½¿ç”¨indexä½œä¸ºkeyå€¼
        innerCount:this.count
    &#125;
&#125;
</code></pre>
<p>å½“åˆ é™¤çš„æ—¶å€™ï¼Œçœ‹ä¸Šå»æ˜¯æˆåŠŸäº†ï¼Œå…¶å®å­˜åœ¨é—®é¢˜ã€‚åŠ ä¸Šæ’åºä¹Ÿæ˜¯å­˜åœ¨é—®é¢˜ã€‚</p>
<p>å°† v-for é‡Œé¢çš„ key æ¢æˆ item åï¼Œæ˜¯æ­£å¸¸çš„ã€‚</p>
<p>Vue å®˜ç½‘çš„æè¿°ï¼š</p>
<blockquote>
<p>å½“ Vue æ­£åœ¨æ›´æ–°ä½¿ç”¨ v-for æ¸²æŸ“çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨â€œå°±åœ°æ›´æ–°â€çš„ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯å°±åœ°æ›´æ–°æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒä»¬åœ¨æ¯ä¸ªç´¢å¼•ä½ç½®æ­£ç¡®æ¸²æŸ“ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™ä¸ªé»˜è®¤çš„æ¨¡å¼æ˜¯é«˜æ•ˆçš„ï¼Œä½†æ˜¯åªé€‚ç”¨äºä¸ä¾èµ–å­ç»„ä»¶è£…å¡«æˆ–ä¸´æ—¶ DOM çŠ¶æ€çš„åˆ—è¡¨æ¸²æŸ“è¾“å‡ºã€‚</p>
</blockquote>
<h3 id="äºŒã€æ€»ç»“"><a href="#äºŒã€æ€»ç»“" class="headerlink" title="äºŒã€æ€»ç»“"></a>äºŒã€æ€»ç»“</h3><p>å†™åˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œä¾èµ–å­ç»„ä»¶çŠ¶æ€æˆ–è€…ä¸´æ—¶ DOM çŠ¶æ€çš„æƒ…å†µï¼Œå¦‚æœå­˜åœ¨åˆ é™¤ã€å¢åŠ ã€æ’åºè¿™æ ·çš„åŠŸèƒ½ï¼Œä¸èƒ½å°† index ä½œä¸º key å€¼ã€‚</p>
<p>è¿™é‡Œè¿˜åŒ…æ‹¬ diff ç®—æ³•â€¦(å¾…æ·»åŠ )</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2021/02/20/vue-component/" title="vueç»„ä»¶åŒ–å®è·µä¹‹ç»„ä»¶é€šä¿¡ï¼ˆä¸€ï¼‰"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">ä¸Šä¸€é¡µ: vueç»„ä»¶åŒ–å®è·µä¹‹ç»„ä»¶é€šä¿¡ï¼ˆä¸€ï¼‰</span></a><a class="button is-default" href="/2021/01/08/hls/" title="vueä½¿ç”¨hls.jså¤„ç†m3u8æ ¼å¼çš„è§†é¢‘"><span class="has-text-weight-semibold">ä¸‹ä¸€é¡µ: vueä½¿ç”¨hls.jså¤„ç†m3u8æ ¼å¼çš„è§†é¢‘</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/Jude"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- çŸ¥ä¹--><!-- é¢†è‹±--><!-- è„¸ä¹¦--></section><p><span>Copyright Â©</span><span> Jude 2022</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>