<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug</title><meta name="description" content="ğŸ¯ ğŸ¯ ğŸ¯ ğŸ¯ ğŸ¯"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="åœ¨ç§»åŠ¨ç«¯ç‚¹å‡»ä¸€ä¸ªå…ƒç´ è§¦å‘äº‹ä»¶çš„é¡ºåºä¸ºï¼štouchstart â€“&amp;gt; touchmove â€“&amp;gt; touchend â€“&amp;gt; click


ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug
è§£å†³æ–¹æ¡ˆ

1ã€ç¦ç”¨ç¼©æ”¾ æ›´æ”¹é»˜è®¤è§†å£å®½åº¦
&amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1&amp;quot;&amp;gt;

2ã€fastclickè§£å†³300mså»¶è¿Ÿé—®é¢˜        é¦–å…ˆï¼Œéœ€è¦å®‰è£…fastclickæ’ä»¶
npm install fastclick

3ã€åœ¨main.jsæ–‡ä»¶ä¸­å¼•å…¥fastclickï¼Œç»‘å®šåˆ°bodyä¸Š
impor.."><meta name="generator" content="Hexo 6.0.0"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Jude's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">ç‚¹å‡»è¿”å›é¡¶éƒ¨</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/about">å…³äº</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/about">å…³äº</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF300ms%E5%BB%B6%E8%BF%9F%E5%9C%A8IOS11%E4%B8%AD%E7%9A%84bug"><span class="toc-text">ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/dev"><i class="tag post-item-tag">dev</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug</h1><time class="has-text-grey" datetime="2020-02-20T12:00:00.000Z">2020-02-20</time><article class="mt-2 post-content"><p>åœ¨ç§»åŠ¨ç«¯ç‚¹å‡»ä¸€ä¸ªå…ƒç´ è§¦å‘äº‹ä»¶çš„é¡ºåºä¸ºï¼štouchstart â€“&gt; touchmove â€“&gt; touchend â€“&gt; click</p>
<span id="more"></span>

<h2 id="ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug"><a href="#ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug" class="headerlink" title="ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug"></a>ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug</h2><blockquote>
<p>è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<p>1ã€ç¦ç”¨ç¼©æ”¾ æ›´æ”¹é»˜è®¤è§†å£å®½åº¦</p>
<pre><code class="js">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1&quot;&gt;
</code></pre>
<p>2ã€fastclickè§£å†³300mså»¶è¿Ÿé—®é¢˜<br>        é¦–å…ˆï¼Œéœ€è¦å®‰è£…fastclickæ’ä»¶</p>
<pre><code class="js">npm install fastclick
</code></pre>
<p>3ã€åœ¨main.jsæ–‡ä»¶ä¸­å¼•å…¥fastclickï¼Œç»‘å®šåˆ°bodyä¸Š</p>
<pre><code class="js">import FastClick from &quot;fastclick&quot;
FastClick.attach(document.body);
</code></pre>
<p>è¿™å°±æ˜¯å¸¸ç”¨æ¥è§£å†³ç§»åŠ¨ç«¯300mså»¶è¿Ÿçš„æ–¹æ³•ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•åœ¨iOS11çš„ç³»ç»Ÿä¸­å­˜åœ¨bugã€‚</p>
<p>4ã€iOS11ç³»ç»Ÿä¸­å‡ºç°çš„bug<br>    åœ¨iOS11ç³»ç»Ÿä¸‹ï¼Œç‚¹å‡»inputè¾“å…¥æ¡†çš„æ—¶å€™ä¼šå‡ºç°ä¸çµæ•çš„ç°è±¡ã€‚</p>
<blockquote>
<p>è§£å†³æ–¹æ¡ˆ:</p>
</blockquote>
<details>
<summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary>

<pre><code class="js">&lt;script&gt;
FastClick.prototype.focus = function (targetElement) &#123;
  var length;
  var deviceIsWindowsPhone = navigator.userAgent.indexOf(&quot;Windows Phone&quot;) &gt;= 0;
  var deviceIsIos = /iP(ad|hone|od)/.test(navigator.userAgent) &amp;&amp; !deviceIsWindowsPhone;
  //å…¼å®¹å¤„ç†:åœ¨iOS7ä¸­ï¼Œæœ‰ä¸€äº›å…ƒç´ ï¼ˆå¦‚dateã€datetimeã€monthç­‰ï¼‰åœ¨setSelectionRangeä¼šå‡ºç°TypeError
  //è¿™æ˜¯å› ä¸ºè¿™äº›å…ƒç´ å¹¶æ²¡æœ‰selectionStartå’ŒselectionEndçš„æ•´å‹æ•°å­—å±æ€§ï¼Œæ‰€ä»¥ä¸€æ—¦å¼•ç”¨å°±ä¼šæŠ¥é”™ï¼Œå› æ­¤æ’é™¤è¿™äº›å±æ€§æ‰ä½¿ç”¨setSelectionRangeæ–¹æ³•
  if (deviceIsIOS &amp;&amp; targetElement.setSelectionRange &amp;&amp; targetElement.type.indexOf(&#39;date&#39;) !== 0 &amp;&amp; targetElement.type !== &#39;time&#39; &amp;&amp; targetElement.type !== &#39;month&#39;) &#123;
    length = targetElement.value.length;
    // ä¿®å¤bug ios 11.3ä¸å¼¹å‡ºé”®ç›˜ï¼Œè¿™é‡ŒåŠ ä¸Šèšç„¦ä»£ç ï¼Œè®©å…¶å¼ºåˆ¶èšç„¦å¼¹å‡ºé”®ç›˜
    targetElement.setSelectionRange(length, length);
  &#125; else &#123;
    targetElement.focus();
  &#125;
&#125;
&lt;/script&gt;
</code></pre>
</details>

<blockquote>
<p>æ³¨æ„ï¼š<br>setSelectionRangeæ˜¯HTMLInputElementçš„ä¸€ä¸ªæ–¹æ³•,ç”¨æ¥è®¾å®šinput textareçš„å½“å‰æ–‡æœ¬çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚<br>(<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLInputElement/setSelectionRange">MDNæ–‡æ¡£</a>ï¼‰<br>å¯¹setSelectionRangeæ–¹æ³•åªèƒ½ç”¨äºç±»å‹ä¸ºæ–‡æœ¬ã€æœç´¢ã€è¿æ¥ã€ç”µè¯å·ç ã€å¯†ç çš„è¾“å…¥ï¼Œä»¥åŠåœ¨Chrome33å¼€å§‹è®¿é—®å…¶ä½™ç±»å‹çš„å±æ€§å’Œæ–¹æ³•æŠ›å‡ºå¼‚å¸¸ã€‚<br>è¾“å…¥ç±»å‹ä¸ºæ•°å­—æ—¶ä¼šæŠ›å‡ºï¼šâ€œä¸èƒ½ä»â€™HTMLInputElementâ€™ä¸­è¯»å–â€™selectionStartâ€™å±æ€§ï¼šè¾“å…¥å…ƒç´ çš„ç±»å‹(â€˜numberâ€™)ä¸æ”¯æŒé€‰æ‹©ï¼ˆFailed to read the â€˜selectionStartâ€™ property from â€˜HTMLInputElementâ€™: The input elementâ€™s type (â€˜numberâ€™) does not support selectionï¼‰â€ã€‚</p>
</blockquote>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2020/04/10/canvas/" title="å¦‚ä½•ä½¿ç”¨canvaså‹ç¼©å›¾ç‰‡ï¼Ÿ"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">ä¸Šä¸€é¡µ: å¦‚ä½•ä½¿ç”¨canvaså‹ç¼©å›¾ç‰‡ï¼Ÿ</span></a><a class="button is-default" href="/2020/02/12/v-cloak/" title="v-cloakè§£å†³é¡µé¢é—ªçƒé—®é¢˜"><span class="has-text-weight-semibold">ä¸‹ä¸€é¡µ: v-cloakè§£å†³é¡µé¢é—ªçƒé—®é¢˜</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/Jude"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- çŸ¥ä¹--><!-- é¢†è‹±--><!-- è„¸ä¹¦--></section><p><span>Copyright Â©</span><span> Jude 2022</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>