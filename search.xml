<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>80ã€ä½¿ç”¨ element-plus ç‰ˆæœ¬å‡çº§åçš„é—®é¢˜æ¸…å•</title>
      <link href="/2022/08/01/element-plus/"/>
      <url>/2022/08/01/element-plus/</url>
      
        <content type="html"><![CDATA[<p>element-plus ç‰ˆæœ¬å‡çº§ç”±@1.1.0-beta.15 å‡çº§åˆ°@2.0.4 ç‰ˆæœ¬æ—¶ï¼Œåœ¨å¼€å‘æ—¶é‡åˆ°çš„é—®é¢˜æ•´ç†åŠè§£å†³æ–¹æ³•</p><span id="more"></span><h2 id="ä¸€ã€é”™è¯¯ï¼š-Can-39-t-reexport-the-named-export-39-xxx-39-from-non-EcmaScript-module-only-default-export-is-available-å¤„ç†"><a href="#ä¸€ã€é”™è¯¯ï¼š-Can-39-t-reexport-the-named-export-39-xxx-39-from-non-EcmaScript-module-only-default-export-is-available-å¤„ç†" class="headerlink" title="ä¸€ã€é”™è¯¯ï¼š Can&#39;t reexport the named export &#39;xxx&#39; from non EcmaScript module (only default export is available) å¤„ç†"></a>ä¸€ã€é”™è¯¯ï¼š <code>Can&#39;t reexport the named export &#39;xxx&#39; from non EcmaScript module (only default export is available)</code> å¤„ç†</h2><p>è¿™ä¸ªé—®é¢˜æ˜¯ element plus ç‰ˆæœ¬å‡çº§åï¼Œå†è¿è¡Œé¡¹ç›®ï¼Œelement plus å¯¹ webpack çš„ä¸€ä¸ªç¼–è¯‘å¤„ç†ã€‚</p><p>è§£å†³æ–¹å¼ï¼š</p><p>åœ¨ vue.config.js çš„ chainWebpack ä¸‹å¢åŠ ä¸€ä¸ªè§„åˆ™ï¼š</p><pre><code class="js">chainWebpack(config)&#123;  config.module  .rule(&quot;element-plus-2&quot;)  .test(/\.mjs$/)  // https://webpack.docschina.org/configuration/module/#ruletype  .type(&quot;javascript/auto&quot;)  .include.add(/node_modules/)  .end();&#125;</code></pre><h2 id="äºŒã€æ ·å¼é”™è¯¯é—®é¢˜ï¼šinputçš„ç™½-è“è¾¹ã€å›¾ç‰‡çš„ç°è‰²åº•"><a href="#äºŒã€æ ·å¼é”™è¯¯é—®é¢˜ï¼šinputçš„ç™½-è“è¾¹ã€å›¾ç‰‡çš„ç°è‰²åº•" class="headerlink" title="äºŒã€æ ·å¼é”™è¯¯é—®é¢˜ï¼šinputçš„ç™½/è“è¾¹ã€å›¾ç‰‡çš„ç°è‰²åº•"></a>äºŒã€æ ·å¼é”™è¯¯é—®é¢˜ï¼šinputçš„ç™½/è“è¾¹ã€å›¾ç‰‡çš„ç°è‰²åº•</h2><p>åœ¨åšç”¨æˆ·ç™»å½•å‘ç°çš„el-input å­˜åœ¨çš„2ä¸ªæ ·å¼é—®é¢˜</p><pre><code class="css">// å¤„ç† input çš„ç™½/è“è¾¹.el-input__inner &#123;  box-shadow: none !important;  --el-select-input-focus-border-color: none !important;&#125;// å¤„ç†å›¾ç‰‡çš„ç°è‰²åº•.el-avatar &#123;  --el-avatar-bg-color: none !important;&#125;</code></pre><h2 id="ä¸‰ã€tbodyè·¯å¾„çš„å˜æ›´"><a href="#ä¸‰ã€tbodyè·¯å¾„çš„å˜æ›´" class="headerlink" title="ä¸‰ã€tbodyè·¯å¾„çš„å˜æ›´"></a>ä¸‰ã€tbodyè·¯å¾„çš„å˜æ›´</h2><p>1.xç‰ˆæœ¬çš„element plusè·å–elå…ƒç´ çš„æ–¹å¼ä¸ºï¼š</p><pre><code class="js">const el = tableRef.value.$el.querySelectorAll(&#39;.el-table__body-wrapper &gt; table &gt; tbody&#39;)[0]</code></pre><p>2.xç‰ˆæœ¬çš„element plusè·å–elå…ƒç´ çš„æ–¹å¼ä¸º</p><pre><code class="js">const el = tableRef.value.$el.querySelectorAll(&#39;.el-table__body &gt; tbody&#39;)[0]</code></pre><h2 id="å››ã€ä¸­å°é¡¹ç›®ä¾§è¾¹æ æ”¶èµ·å›¾æ ‡ä¸æ˜¾ç¤ºé—®é¢˜"><a href="#å››ã€ä¸­å°é¡¹ç›®ä¾§è¾¹æ æ”¶èµ·å›¾æ ‡ä¸æ˜¾ç¤ºé—®é¢˜" class="headerlink" title="å››ã€ä¸­å°é¡¹ç›®ä¾§è¾¹æ æ”¶èµ·å›¾æ ‡ä¸æ˜¾ç¤ºé—®é¢˜"></a>å››ã€ä¸­å°é¡¹ç›®ä¾§è¾¹æ æ”¶èµ·å›¾æ ‡ä¸æ˜¾ç¤ºé—®é¢˜</h2><p>æŸ¥çœ‹æ§åˆ¶å°å‘ç°ï¼Œ#app .sidebar-container .svg-icon{margin-left:16px} è¿™ä¸ªæ ·å¼å­˜åœ¨é—®é¢˜</p><p>è§£å†³æ–¹å¼ï¼šåœ¨ä¾§è¾¹æ menuæ”¶èµ·æ—¶ï¼Œå–æ¶ˆmargin-left</p><pre><code class="css">.el-menu--collapse&#123;  .svg-icon&#123;    margin-right:0px;  &#125;&#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>79ã€ref-reactive</title>
      <link href="/2022/07/31/ref-reactive/"/>
      <url>/2022/07/31/ref-reactive/</url>
      
        <content type="html"><![CDATA[<p>ref/reactiveéƒ½èƒ½åˆ›å»ºä¸€ä¸ªå“åº”å¯¹è±¡ï¼Œè¿™äºŒè€…çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢</p><span id="more"></span><h2 id="ä¸€ã€reactive"><a href="#ä¸€ã€reactive" class="headerlink" title="ä¸€ã€reactive"></a>ä¸€ã€reactive</h2><blockquote><p>reactiveéƒ½èƒ½åˆ›å»ºä¸€ä¸ªå“åº”å¯¹è±¡æˆ–æ•°ç»„</p></blockquote><pre><code class="html">&lt;tempalte&gt;  &lt;div&gt;&#123;&#123; state.count &#125;&#125;&lt;/div&gt;&lt;/tempalte&gt;</code></pre><pre><code class="js">// script è¿™é‡ŒåŠ äº†setup  æ²¡å†™setupéœ€è¦åœ¨setup()&#123;&#125;å†…éƒ¨å®šä¹‰ å¹¶è¿”å›ï¼ˆreturnï¼‰&lt;script setup&gt;import &#123; reactive &#125; from &quot;vue&quot;const state = reactive(&#123;count:0&#125;)&lt;/script&gt;</code></pre><h2 id="äºŒã€ref"><a href="#äºŒã€ref" class="headerlink" title="äºŒã€ref"></a>äºŒã€ref</h2><blockquote><p>vue3æä¾›äº†ä¸€ä¸ªref()æ–¹æ³•å…è®¸æˆ‘ä»¬åˆ›å»ºä½¿ç”¨ä»»ä½•å€¼ç±»å‹çš„å“åº”å¼ref</p></blockquote><pre><code class="js">import &#123;ref&#125; from &quot;vue&quot;const count = ref(0)console.log(count) // &#123; value:0 &#125;count.value++console.log(count.value) // 2</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>78ã€js-cheat-sheet</title>
      <link href="/2022/07/30/js-cheat/"/>
      <url>/2022/07/30/js-cheat/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä¼ åˆ°å›¾åºŠä¸Šçš„4å¼ å›¾:JavaScript-Cheet-Sheet</p><span id="more"></span><h3 id="1ã€å›¾1"><a href="#1ã€å›¾1" class="headerlink" title="1ã€å›¾1"></a>1ã€å›¾1</h3><blockquote><p>-document/element/node/attr()/event()/EventTarget/clientRect()</p></blockquote><p><img src="https://cdn.staticaly.com/gh/HeyJudeYQ/Image-Host@master/20220919/JS-Cheat-Sheet_4.7j1b1pmevio0.webp" alt="JavaScript wiki1" title="js"></p><h3 id="2ã€å›¾2"><a href="#2ã€å›¾2" class="headerlink" title="2ã€å›¾2"></a>2ã€å›¾2</h3><blockquote><p>-window/screen/console/preformance/navigator/location/history</p></blockquote><p><img src="https://cdn.staticaly.com/gh/HeyJudeYQ/Image-Host@master/20220919/JS-Cheat-Sheet_3.5xvltiz2kh40.webp" alt="JavaScript wiki2"></p><h3 id="3ã€å›¾3"><a href="#3ã€å›¾3" class="headerlink" title="3ã€å›¾3"></a>3ã€å›¾3</h3><blockquote><p>-Math/Object/Set/Map/Promise/Generator/Proxy/Symbol/BigInt/Modules/json/</p></blockquote><p><img src="https://cdn.staticaly.com/gh/HeyJudeYQ/Image-Host@master/20220919/JS-Cheat-Sheet_2.lhqvhvi6fsg.webp" alt="JavaScript wiki3"></p><h3 id="4ã€å›¾4"><a href="#4ã€å›¾4" class="headerlink" title="4ã€å›¾4"></a>4ã€å›¾4</h3><blockquote><p>-number/string/array/date/function/Reg</p></blockquote><p><img src="https://cdn.staticaly.com/gh/HeyJudeYQ/Image-Host@master/20220919/JS-Cheat-Sheet_1.21ramjzckheo.webp" alt="JavaScript wiki4"></p>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>77ã€ä½¿ç”¨element-uiå¼€å‘é—®é¢˜æ¸…å•</title>
      <link href="/2022/07/30/element-ui/"/>
      <url>/2022/07/30/element-ui/</url>
      
        <content type="html"><![CDATA[<p>æ•´ç†ä½¿ç”¨ element-ui å¼€å‘æ—¶é‡åˆ°çš„é—®é¢˜ï¼ˆåŒ…å«â€œæ‘˜æŠ„â€å…¶ä»–å¼€å‘äººå‘˜å¼€å‘é‡åˆ°çš„é—®é¢˜ ğŸ˜ï¼‰</p><span id="more"></span><h2 id="1ã€å»é™¤-el-input-ç»„ä»¶-type-â€numberâ€è¾“å…¥æ¡†èšç„¦æ—¶çš„ä¸Šä¸‹ç®­å¤´"><a href="#1ã€å»é™¤-el-input-ç»„ä»¶-type-â€numberâ€è¾“å…¥æ¡†èšç„¦æ—¶çš„ä¸Šä¸‹ç®­å¤´" class="headerlink" title="1ã€å»é™¤ el-input ç»„ä»¶ type=â€numberâ€è¾“å…¥æ¡†èšç„¦æ—¶çš„ä¸Šä¸‹ç®­å¤´"></a>1ã€å»é™¤ el-input ç»„ä»¶ type=â€numberâ€è¾“å…¥æ¡†èšç„¦æ—¶çš„ä¸Šä¸‹ç®­å¤´</h2><pre><code class="css">/* è®¾ç½®å…¨å±€ */.clear-number-input.el-input::-webkit-outer-spin-button,.clear-number-input.el-input::-webkit-inner-spin-button &#123;  margin: 0;  -webkit-appearance: none !important;&#125;.clear-number-input.el-input input[type=&quot;number&quot;]::-webkit-outer-spin-button,.clear-number-input.el-input input[type=&quot;number&quot;]::-webkit-inner-spin-button &#123;  margin: 0;  -webkit-appearance: none !important;&#125;.clear-number-input.el-input &#123;  -moz-appearance: textfield;&#125;.clear-number-input.el-input input[type=&quot;number&quot;] &#123;  -moz-appearance: textfield;&#125;</code></pre><h2 id="2ã€el-input-è¾“å…¥æ¡†æ­£åˆ™é™åˆ¶ï¼Œç»‘å®šå€¼æœªæ›´æ–°"><a href="#2ã€el-input-è¾“å…¥æ¡†æ­£åˆ™é™åˆ¶ï¼Œç»‘å®šå€¼æœªæ›´æ–°" class="headerlink" title="2ã€el-input è¾“å…¥æ¡†æ­£åˆ™é™åˆ¶ï¼Œç»‘å®šå€¼æœªæ›´æ–°"></a>2ã€el-input è¾“å…¥æ¡†æ­£åˆ™é™åˆ¶ï¼Œç»‘å®šå€¼æœªæ›´æ–°</h2><p>è¾“å…¥æ¡†ä»…æ”¯æŒæ•°å­—</p><pre><code class="html">&lt;el-input  v-model=&quot;form.num&quot;  placeholder=&quot;è¯·è¾“å…¥æ•°å­—&quot;  @keyup.native=&quot;form.num=form.num.replace(/[^\d.]/g,&#39;&#39;)&quot;&gt;&lt;/el-input&gt;</code></pre><h2 id="3ã€el-form-å›è½¦åˆ·æ–°é¡µé¢ï¼ˆè§¦å‘äº†è¡¨å•é»˜è®¤çš„æäº¤è¡Œä¸ºï¼‰"><a href="#3ã€el-form-å›è½¦åˆ·æ–°é¡µé¢ï¼ˆè§¦å‘äº†è¡¨å•é»˜è®¤çš„æäº¤è¡Œä¸ºï¼‰" class="headerlink" title="3ã€el-form å›è½¦åˆ·æ–°é¡µé¢ï¼ˆè§¦å‘äº†è¡¨å•é»˜è®¤çš„æäº¤è¡Œä¸ºï¼‰"></a>3ã€el-form å›è½¦åˆ·æ–°é¡µé¢ï¼ˆè§¦å‘äº†è¡¨å•é»˜è®¤çš„æäº¤è¡Œä¸ºï¼‰</h2><pre><code class="html">&lt;el-form inline @submit.native.prevent&gt;  &lt;el-form-item label=&quot;è®¢å•å·&quot;&gt;    &lt;el-input      v-model=&quot;query.orderNo&quot;      :placeholder=&quot;è¾“å…¥è®¢å•å·æŸ¥è¯¢&quot;      clearable      @keyup.enter.native=&quot;enterInput&quot;    /&gt;  &lt;/el-form-item&gt;&lt;/el-form&gt;</code></pre><h2 id="4ã€el-tableå›ºå®šåˆ—æœ€åä¸€è¡Œæ˜¾ç¤ºä¸å®Œå…¨ã€è¡¨å¤´ä¸å†…å®¹é”™ä½"><a href="#4ã€el-tableå›ºå®šåˆ—æœ€åä¸€è¡Œæ˜¾ç¤ºä¸å®Œå…¨ã€è¡¨å¤´ä¸å†…å®¹é”™ä½" class="headerlink" title="4ã€el-tableå›ºå®šåˆ—æœ€åä¸€è¡Œæ˜¾ç¤ºä¸å®Œå…¨ã€è¡¨å¤´ä¸å†…å®¹é”™ä½"></a>4ã€el-tableå›ºå®šåˆ—æœ€åä¸€è¡Œæ˜¾ç¤ºä¸å®Œå…¨ã€è¡¨å¤´ä¸å†…å®¹é”™ä½</h2><pre><code class="css">.el-table__fixed-right &#123;  height:100% !important;&#125;// å…¨å±€è®¾ç½® è¡¨å¤´å†…å®¹é”™ä½.el-table--scrollable-y .el-table__body-wrapper &#123; overflow-y: overlay !important;&#125;</code></pre><h2 id="5ã€è¡¨å•æ ¡éªŒåªå…¶ä¸­ä¸€ä¸ªå­—æ®µ"><a href="#5ã€è¡¨å•æ ¡éªŒåªå…¶ä¸­ä¸€ä¸ªå­—æ®µ" class="headerlink" title="5ã€è¡¨å•æ ¡éªŒåªå…¶ä¸­ä¸€ä¸ªå­—æ®µ"></a>5ã€è¡¨å•æ ¡éªŒåªå…¶ä¸­ä¸€ä¸ªå­—æ®µ</h2><p>ä»…æ ¡éªŒæ‰‹æœºå·ç ï¼ˆå¦‚æœéœ€è¦å¤šä¸ªå‚æ•°ï¼Œå°†å‚æ•°æ”¹ä¸ºæ•°ç»„å½¢å¼å³å¯ã€‚ï¼‰</p><pre><code class="js">this.$refs[&#39;form&#39;].validateField(&#39;mobile&#39;, valid =&gt; &#123;  if (valid) &#123;    // do something  &#125;&#125;)</code></pre><h2 id="6ã€el-tableè·¨åˆ†é¡µå¤šé€‰"><a href="#6ã€el-tableè·¨åˆ†é¡µå¤šé€‰" class="headerlink" title="6ã€el-tableè·¨åˆ†é¡µå¤šé€‰"></a>6ã€el-tableè·¨åˆ†é¡µå¤šé€‰</h2><pre><code class="html">&lt;el-table row-key=&quot;id&quot;&gt;  &lt;el-table-column type=&quot;selection&quot; reserve-selection&gt;&lt;/el-table-column&gt;&lt;/el-table&gt;</code></pre><h2 id="7ã€el-tableå†…åµŒel-input-focuså¤±æ•ˆ"><a href="#7ã€el-tableå†…åµŒel-input-focuså¤±æ•ˆ" class="headerlink" title="7ã€el-tableå†…åµŒel-input focuså¤±æ•ˆ"></a>7ã€el-tableå†…åµŒel-input focuså¤±æ•ˆ</h2><pre><code class="html">&lt;el-table&gt;  &lt;el-table-column label=&quot;åç§°&quot;&gt;    &lt;template&gt;      &lt;el-input ref=&quot;inputRef&quot; /&gt;    &lt;/template&gt;  &lt;/el-table-column&gt;&lt;/el-table&gt;// æ— æ•ˆthis.$refs[&#39;inputRef&#39;].focus()this.$refs[&#39;inputRef&#39;][0].focus()this.$refs[&#39;inputRef&#39;].$el.children[0].focus()// æœ‰æ•ˆ&lt;el-input id=&quot;inputRef&quot; /&gt;document.getElementById(&#39;inputRef&#39;).focus()</code></pre><h2 id="8ã€el-dialog-çš„-destroy-on-close-å±æ€§è®¾ç½®æ— æ•ˆ"><a href="#8ã€el-dialog-çš„-destroy-on-close-å±æ€§è®¾ç½®æ— æ•ˆ" class="headerlink" title="8ã€el-dialog çš„ destroy-on-close å±æ€§è®¾ç½®æ— æ•ˆ"></a>8ã€el-dialog çš„ destroy-on-close å±æ€§è®¾ç½®æ— æ•ˆ</h2><pre><code class="html">&lt;el-dialog :visible.sync=&quot;visible&quot; v-if=&quot;visible&quot; destroy-on-close&gt;&lt;/el-dialog&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>76ã€vue3çŠ¶æ€ç®¡ç†piniaåŠä½¿ç”¨piniaè§£æ„ä¸ç”Ÿæ•ˆè§£å†³æ–¹æ³•</title>
      <link href="/2022/07/29/pinia/"/>
      <url>/2022/07/29/pinia/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ pinia æ—¶ï¼Œè§£æ„ store é‡Œçš„ helloWorld å’Œ count æ—¶ï¼Œæ²¡æœ‰å‘ç”Ÿå“åº”å¼æ•°æ®å˜åŒ–çš„æƒ…å†µã€‚è¿™æ˜¯å› ä¸ºåœ¨ä½¿ç”¨ store çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç›´æ¥è¿›è¡Œè¿›è¡Œè§£æ„çš„è¯ï¼Œä¼šç ´åæ•°æ®çš„å“åº”ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä½¿ç”¨ storeToRefs æ¥è§£æ„ã€‚</p><span id="more"></span><h2 id="ä¸€ã€pinia-çš„ä½¿ç”¨æ—¶çš„é—®é¢˜å¤ç°"><a href="#ä¸€ã€pinia-çš„ä½¿ç”¨æ—¶çš„é—®é¢˜å¤ç°" class="headerlink" title="ä¸€ã€pinia çš„ä½¿ç”¨æ—¶çš„é—®é¢˜å¤ç°"></a>ä¸€ã€pinia çš„ä½¿ç”¨æ—¶çš„é—®é¢˜å¤ç°</h2><h3 id="1ã€stores-counter-js"><a href="#1ã€stores-counter-js" class="headerlink" title="1ã€stores:counter.js"></a>1ã€stores:counter.js</h3><pre><code class="js">import &#123; defineStore &#125; from &quot;pinia&quot;;// defineStore() ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›¸å½“äºä¸ºå®¹å™¨å–ä¸€ä¸ªåå­— ç¬¬äºŒä¸ªå‚æ•°ä¸ºé…ç½®å¯¹è±¡// state:å­˜å‚¨å…¨å±€çŠ¶æ€  getters:ç›‘è§†ã€è®¡ç®—çŠ¶æ€çš„å˜åŒ–ï¼Œå…·æœ‰ç¼“å­˜åŠŸèƒ½// actionsï¼šå¯¹stateé‡Œæ•°æ®å˜åŒ–è¿›è¡Œé€»è¾‘å¤„ç†   ï¼ˆä¿®æ”¹stateå…¨å±€çŠ¶æ€æ•°æ®ï¼‰export const mainStore = defineStore(&quot;main&quot;, &#123;  state: () =&gt; &#123;    return &#123;      helloWorld: &quot;hello world !!!&quot;,      count: 0,    &#125;;  &#125;,  getters: &#123;&#125;,  actions: &#123;&#125;,&#125;);</code></pre><h3 id="2ã€ç»„ä»¶ï¼šTest-vue"><a href="#2ã€ç»„ä»¶ï¼šTest-vue" class="headerlink" title="2ã€ç»„ä»¶ï¼šTest.vue"></a>2ã€ç»„ä»¶ï¼šTest.vue</h3><pre><code class="html">&lt;template&gt;  &lt;!-- éè§£æ„ --&gt;  &lt;!-- &lt;div&gt;&#123;&#123; store.helloWorld&#125;&#125;&#123;&#123;store.count&#125;&#125;&lt;/div&gt; --&gt;  &lt;!-- è§£æ„ --&gt;  &lt;div&gt;&#123;&#123; helloWorld &#125;&#125;&#123;&#123; count &#125;&#125;&lt;/div&gt;&lt;/template&gt;</code></pre><p>å¦‚æœä¸ä½¿ç”¨storeToRefsï¼Œç‚¹å‡»æŒ‰é’®ä¸ä¼šç”Ÿæ•ˆã€‚<br>storeToRefsçš„æºç ä¸­ï¼Œä¼šå…ˆè¿›è¡Œvueç‰ˆæœ¬çš„åˆ¤æ–­ï¼Œå¦‚æœæ˜¯Vue2ç‰ˆæœ¬ï¼Œä¼šç›´æ¥è¿”å›toRefs(store),éVue2ç¯å¢ƒï¼Œéå†å¯¹è±¡çš„é”®å€¼ï¼Œä¼šè¿‡æ»¤æ‰storeä¸­çš„éref/reactiveå¯¹è±¡ï¼Œå¯¹äºç¬¦åˆrefå’Œreactiveç±»å‹çš„å€¼ï¼Œå°†å…¶å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„å¯¹è±¡ä¸­refsä¸­ï¼Œæœ€åè¿”å›refs</p><pre><code class="js">&lt;script setup&gt;  import &#123;storeToRefs&#125; from &quot;pinia&quot;  import &#123;mainStore&#125; from&#39;../stores/counter&#39;  const store = mainStore()   const &#123;(helloWorld, count)&#125; = storeToRefs(store)&lt;/script&gt;</code></pre><h3 id="3ã€ç»„ä»¶ï¼šAddButton-vue"><a href="#3ã€ç»„ä»¶ï¼šAddButton-vue" class="headerlink" title="3ã€ç»„ä»¶ï¼šAddButton.vue"></a>3ã€ç»„ä»¶ï¼šAddButton.vue</h3><pre><code class="html">&lt;template&gt;  &lt;div&gt;&lt;button @click=&quot;handleClick&quot;&gt;Add&lt;/button&gt;&lt;/div&gt;&lt;/template&gt;</code></pre><pre><code class="js">&lt;script setup&gt;  import &#123;mainStore&#125; from &#39;../stores/counter&#39;  const store = mainStore()  const handleClick = () =&gt; &#123;store.count++&#125;&lt;/script&gt;</code></pre><h3 id="4ã€App-vue"><a href="#4ã€App-vue" class="headerlink" title="4ã€App.vue"></a>4ã€App.vue</h3><pre><code class="html">&lt;template&gt;  &lt;header&gt;    &lt;img      alt=&quot;Vue logo&quot;      class=&quot;logo&quot;      src=&quot;@/assets/logo.svg&quot;      width=&quot;125&quot;      height=&quot;125&quot;    /&gt;    &lt;div class=&quot;wrapper&quot;&gt;      &lt;Test&gt;&lt;/Test&gt;      &lt;add-button&gt;&lt;/add-button&gt;    &lt;/div&gt;  &lt;/header&gt;  &lt;RouterView /&gt;&lt;/template&gt;</code></pre><pre><code class="js">&lt;script setup&gt;  import &#123;(RouterLink, RouterView)&#125; from &#39;vue-router&#39;  import Test from &#39;./components/Test.vue&#39;  import AddButton from &quot;./components/AddButton.vue&quot;&lt;/script&gt;</code></pre><h2 id="äºŒã€piniaå¦‚ä½•ä¿®æ”¹çŠ¶æ€æ•°æ®"><a href="#äºŒã€piniaå¦‚ä½•ä¿®æ”¹çŠ¶æ€æ•°æ®" class="headerlink" title="äºŒã€piniaå¦‚ä½•ä¿®æ”¹çŠ¶æ€æ•°æ®"></a>äºŒã€piniaå¦‚ä½•ä¿®æ”¹çŠ¶æ€æ•°æ®</h2><h3 id="1ã€-patchä¿®æ”¹å•ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®"><a href="#1ã€-patchä¿®æ”¹å•ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®" class="headerlink" title="1ã€$patchä¿®æ”¹å•ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®"></a>1ã€$patchä¿®æ”¹å•ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®</h3><pre><code class="html">  &lt;div&gt;&lt;button @click=&quot;handleClickPatch&quot;&gt;Add handleClickPatch&lt;/button&gt;&lt;/div&gt;</code></pre><pre><code class="js">&lt;script setup&gt;import &#123; mainStore &#125; from &#39;../stores/counter&#39;;const store = mainStore()const handleClick = () =&gt; &#123;  store.count++;  // store.helloWorld = store.helloWorld === &#39;yq&#39; ? &#39;helloworld&#39; : &#39;yq&#39;&#125;// 1ã€ä¿®æ”¹çŠ¶æ€æ•°æ® $patch  å¯åŒæ—¶ä¿®æ”¹å¤šä¸ªæ•°æ®çš„çŠ¶æ€  å‚æ•°ä¸ºä¸€ä¸ªå¯¹è±¡const handleClickPatch = () =&gt; &#123;  store.$patch(&#123;    count:store.count + 2,    helloWorld:store.helloWorld === &#39;yq&#39; ? &#39;HelloWorld&#39; : &#39;yq&#39;  &#125;)&#125;&lt;/script&gt;</code></pre><h3 id="2ã€-patchåŠ å‡½æ•°å½¢å¼ä¿®æ”¹çŠ¶æ€æ•°æ®"><a href="#2ã€-patchåŠ å‡½æ•°å½¢å¼ä¿®æ”¹çŠ¶æ€æ•°æ®" class="headerlink" title="2ã€$patchåŠ å‡½æ•°å½¢å¼ä¿®æ”¹çŠ¶æ€æ•°æ®"></a>2ã€$patchåŠ å‡½æ•°å½¢å¼ä¿®æ”¹çŠ¶æ€æ•°æ®</h3><blockquote><blockquote><p>é€‚åˆä¿®æ”¹å¤æ‚æ•°æ®ï¼Œä¾‹å¦‚æ•°ç»„ã€å¯¹è±¡</p></blockquote></blockquote><pre><code class="html">  &lt;div&gt;&lt;button @click=&quot;handleClickMethod&quot;&gt;Add handleClickMethod&lt;/button&gt;&lt;/div&gt;</code></pre><pre><code class="js">&lt;script setup&gt;import &#123; mainStore &#125; from &#39;../stores/counter&#39;;const store = mainStore()const handleClick = () =&gt; &#123;  store.count++;  // store.helloWorld = store.helloWorld === &#39;yq&#39; ? &#39;helloworld&#39; : &#39;yq&#39;&#125;// 1ã€ä¿®æ”¹çŠ¶æ€æ•°æ® $patch  å¯åŒæ—¶ä¿®æ”¹å¤šä¸ªæ•°æ®çš„çŠ¶æ€  å‚æ•°ä¸ºä¸€ä¸ªå¯¹è±¡const handleClickPatch = () =&gt; &#123;  store.$patch(&#123;    count:store.count + 2,    helloWorld:store.helloWorld === &#39;yq&#39; ? &#39;HelloWorld&#39; : &#39;yq&#39;  &#125;)&#125;// 2ã€ä¼ é€’å‡½æ•°  é€‚åˆå¤æ‚æ•°æ®çš„ä¿®æ”¹ï¼Œæ¯”å¦‚æ•°ç»„ã€å¯¹è±¡çš„ä¿®æ”¹const handleClickMethod = () =&gt;&#123;  store.$patch((state) =&gt; &#123;    state.count++;    state.helloWorld = state.helloWorld === &#39;yq&#39; ? &#39;helloworld&#39; :&#39;yq&#39;  &#125;)&#125;&lt;/script&gt;</code></pre><h3 id="3ã€actions"><a href="#3ã€actions" class="headerlink" title="3ã€actions"></a>3ã€actions</h3><blockquote><p>åœ¨ä½¿ç”¨actionsçš„æ—¶å€™ï¼Œä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šçš„æ˜¯å¤–éƒ¨çš„this</p></blockquote><p>stores ï¼šcounter.js</p><pre><code class="js">export const mainStore = defineStore(&#39;main&#39;, &#123;  state:()=&gt;&#123;    return &#123;      helloWorld:&#39;hello world !!!&#39;,      count:0    &#125;  &#125;,  getters:&#123;  &#125;,  actions:&#123;    changeState()&#123;      this.count++      this.helloWorld = &#39;yq&#39;    &#125;  &#125;&#125;)</code></pre><p>ç»„ä»¶:AddButton.vue</p><pre><code class="html">  &lt;div&gt;&lt;button @click=&quot;handleClickAction&quot;&gt; Add handleClickAction&lt;/button&gt;&lt;/div&gt;</code></pre><pre><code class="js">const handleClickAction = () =&gt;&#123;  store.changeState()&#125;</code></pre><h3 id="4ã€getters"><a href="#4ã€getters" class="headerlink" title="4ã€getters"></a>4ã€getters</h3><p>store:counter.js</p><pre><code class="js">export const mainStore = defineStore(&#39;main&#39;, &#123;  state:()=&gt;&#123;    return &#123;      helloWorld:&#39;hello world !!!&#39;,      count:0,      phone:&#39;19542932249&#39;    &#125;  &#125;,  getters:&#123;    phoneHidden(state)&#123;      console.log(&quot;go  å…·æœ‰ç¼“å­˜ åªä¼šè°ƒç”¨ä¸€æ¬¡&quot;)      // ä½¿ç”¨thiså…³é”®å­—      // return this.phone.toString().replace(/^(\d&#123;3&#125;)\d&#123;4&#125;(\d&#123;4&#125;)$/, &#39;$1****$2&#39;)      return state.phone.toString().replace(/^(\d&#123;3&#125;)\d&#123;4&#125;(\d&#123;4&#125;)$/, &#39;$1****$2&#39;)    &#125;  &#125;,  actions:&#123;    // åœ¨ç”¨actionsçš„æ—¶å€™ï¼Œä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šçš„æ˜¯å¤–éƒ¨çš„this    changeState()&#123;      this.count++      this.helloWorld = &#39;yq&#39;    &#125;  &#125;&#125;)</code></pre><blockquote><p>æ³¨æ„ï¼šgettersé‡Œæ˜¯å¯ä»¥ä½¿ç”¨thisçš„</p></blockquote><p>å†™æ³•å¦‚ä¸‹ï¼š</p><pre><code class="ts">  getters:&#123;    phoneHidden():String&#123;      console.log(&quot;go  å…·æœ‰ç¼“å­˜ åªä¼šè°ƒç”¨ä¸€æ¬¡&quot;)      // ä½¿ç”¨thiså…³é”®å­—      // return this.phone.toString().replace(/^(\d&#123;3&#125;)\d&#123;4&#125;(\d&#123;4&#125;)$/, &#39;$1****$2&#39;)    &#125;  &#125;,</code></pre><p>ç»„ä»¶ï¼šTest.vue</p><pre><code class="html">&lt;template&gt;  &lt;div&gt;    &#123;&#123; store.helloWorld&#125;&#125;&#123;&#123;store.count&#125;&#125;  &lt;/div&gt;  &lt;div&gt;    &#123;&#123; phoneHidden &#125;&#125;  &lt;/div&gt;&lt;/template&gt;</code></pre><pre><code class="js">&lt;script setup&gt;import &#123; storeToRefs &#125; from &quot;pinia&quot;;import &#123; mainStore &#125; from &#39;../stores/counter&#39;;const store = mainStore()const &#123; helloWorld,count,phoneHidden &#125; = storeToRefs(store)&lt;/script&gt;</code></pre><p>ç»„ä»¶ï¼šAddButton.vue</p><pre><code class="html">  &lt;div&gt;&lt;button @click=&quot;handleClickChangePhone&quot;&gt;change phone&lt;/button&gt;&lt;/div&gt;</code></pre><pre><code class="js">&lt;script setup&gt;import &#123; mainStore &#125; from &#39;../stores/counter&#39;;const store = mainStore()const handleClickChangePhone = () =&gt; &#123;  store.phone = &quot;18775352722&quot;&#125;&lt;/script&gt;</code></pre><h3 id="5ã€Githubé¡¹ç›®ä»£ç ï¼š"><a href="#5ã€Githubé¡¹ç›®ä»£ç ï¼š" class="headerlink" title="5ã€Githubé¡¹ç›®ä»£ç ï¼š"></a>5ã€Githubé¡¹ç›®ä»£ç ï¼š</h3><blockquote><p>github: <a href="https://github.com/HeyJudeYQ/pinia-demo">https://github.com/HeyJudeYQ/pinia-demo</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>75ã€vue.$dataè¡¨å•æš‚å­˜</title>
      <link href="/2022/07/28/localStorage/"/>
      <url>/2022/07/28/localStorage/</url>
      
        <content type="html"><![CDATA[<p>æš‚å­˜è¡¨å•ä¿¡æ¯</p><span id="more"></span><pre><code class="html">&lt;template&gt;  &lt;div&gt;    &lt;el-form ref=&quot;form&quot; :model=&quot;form&quot; label-width=&quot;80px&quot;&gt;      &lt;el-form-item label=&quot;æ´»åŠ¨åç§°&quot;&gt;        &lt;el-input v-model=&quot;form.name&quot;&gt;&lt;/el-input&gt;      &lt;/el-form-item&gt;      &lt;el-form-item label=&quot;æ´»åŠ¨åŒºåŸŸ&quot;&gt;        &lt;el-select v-model=&quot;form.region&quot; placeholder=&quot;è¯·é€‰æ‹©æ´»åŠ¨åŒºåŸŸ&quot;&gt;          &lt;el-option label=&quot;åŒºåŸŸä¸€&quot; value=&quot;shanghai&quot;&gt;&lt;/el-option&gt;          &lt;el-option label=&quot;åŒºåŸŸäºŒ&quot; value=&quot;beijing&quot;&gt;&lt;/el-option&gt;        &lt;/el-select&gt;      &lt;/el-form-item&gt;      &lt;el-form-item label=&quot;æ´»åŠ¨æ—¶é—´&quot;&gt;        &lt;el-col :span=&quot;11&quot;&gt;          &lt;el-date-picker            type=&quot;date&quot;            placeholder=&quot;é€‰æ‹©æ—¥æœŸ&quot;            v-model=&quot;form.date1&quot;            style=&quot;width: 100%;&quot;          &gt;&lt;/el-date-picker&gt;        &lt;/el-col&gt;        &lt;el-col class=&quot;line&quot; :span=&quot;2&quot;&gt;-&lt;/el-col&gt;        &lt;el-col :span=&quot;11&quot;&gt;          &lt;el-time-picker            placeholder=&quot;é€‰æ‹©æ—¶é—´&quot;            v-model=&quot;form.date2&quot;            style=&quot;width: 100%;&quot;          &gt;&lt;/el-time-picker&gt;        &lt;/el-col&gt;      &lt;/el-form-item&gt;      &lt;el-form-item label=&quot;å³æ—¶é…é€&quot;&gt;        &lt;el-switch v-model=&quot;form.delivery&quot;&gt;&lt;/el-switch&gt;      &lt;/el-form-item&gt;      &lt;el-form-item label=&quot;æ´»åŠ¨æ€§è´¨&quot;&gt;        &lt;el-checkbox-group v-model=&quot;form.type&quot;&gt;          &lt;el-checkbox label=&quot;ç¾é£Ÿ/é¤å…çº¿ä¸Šæ´»åŠ¨&quot; name=&quot;type&quot;&gt;&lt;/el-checkbox&gt;          &lt;el-checkbox label=&quot;åœ°æ¨æ´»åŠ¨&quot; name=&quot;type&quot;&gt;&lt;/el-checkbox&gt;          &lt;el-checkbox label=&quot;çº¿ä¸‹ä¸»é¢˜æ´»åŠ¨&quot; name=&quot;type&quot;&gt;&lt;/el-checkbox&gt;          &lt;el-checkbox label=&quot;å•çº¯å“ç‰Œæ›å…‰&quot; name=&quot;type&quot;&gt;&lt;/el-checkbox&gt;        &lt;/el-checkbox-group&gt;      &lt;/el-form-item&gt;      &lt;el-form-item label=&quot;ç‰¹æ®Šèµ„æº&quot;&gt;        &lt;el-radio-group v-model=&quot;form.resource&quot;&gt;          &lt;el-radio label=&quot;çº¿ä¸Šå“ç‰Œå•†èµåŠ©&quot;&gt;&lt;/el-radio&gt;          &lt;el-radio label=&quot;çº¿ä¸‹åœºåœ°å…è´¹&quot;&gt;&lt;/el-radio&gt;        &lt;/el-radio-group&gt;      &lt;/el-form-item&gt;      &lt;el-form-item label=&quot;æ´»åŠ¨å½¢å¼&quot;&gt;        &lt;el-input type=&quot;textarea&quot; v-model=&quot;form.desc&quot;&gt;&lt;/el-input&gt;      &lt;/el-form-item&gt;      &lt;el-form-item&gt;        &lt;el-button type=&quot;primary&quot; @click=&quot;onSubmit&quot;&gt;ç«‹å³åˆ›å»º&lt;/el-button&gt;        &lt;el-button @click=&quot;stash&quot;&gt;æš‚å­˜&lt;/el-button&gt;      &lt;/el-form-item&gt;    &lt;/el-form&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><pre><code class="js">&lt;script&gt;export default &#123;    data() &#123;        const stashStr = localStorage.getItem(&#39;stash&#39;)        const stash = stashStr ? JSON.parse(stashStr) : &#123;&#125;        return Object.assign(&#123;            form: &#123;                name: &#39;&#39;,                region: &#39;&#39;,                date1: &#39;&#39;,                date2: &#39;&#39;,                delivery: false,                type: [],                resource: &#39;&#39;,                desc: &#39;&#39;            &#125;        &#125;, stash)    &#125;,    methods: &#123;        onSubmit() &#123;            console.log(&#39;submit!&#39;);        &#125;,        stash() &#123;            localStorage.setItem(&#39;stash&#39;, JSON.stringify(this.$data));        &#125;    &#125;&#125;&lt;/script&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>74ã€options-api &amp; composition-api</title>
      <link href="/2022/07/26/composition-api&amp;options-api/"/>
      <url>/2022/07/26/composition-api&amp;options-api/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Vue2ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Options Apiè¯­æ³•ï¼Œè€Œåœ¨Vue3ä¸­ï¼Œç¼–ç¨‹è¯­æ³•æ–¹é¢æ”¹å˜çš„æœ€å¤§äº®ç‚¹åº”è¯¥å°±æ˜¯Composition Apiäº†ã€‚</p><span id="more"></span><h2 id="ä¸€ã€options-api"><a href="#ä¸€ã€options-api" class="headerlink" title="ä¸€ã€options api"></a>ä¸€ã€options api</h2><blockquote><p>options api å³é€‰é¡¹å¼api,ä¹Ÿå°±æ˜¯ç»„ä»¶çš„å„ä¸ªé€‰é¡¹ï¼Œä¾‹å¦‚ï¼šdataã€methodsã€computedã€watchç­‰ç­‰ï¼Œå¯¹åº”çš„é€‰é¡¹åšå¯¹åº”çš„äº‹æƒ…ã€‚</p></blockquote><p>åœ¨å®é™…é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ•°æ®å®šä¹‰åœ¨dataä¸­ï¼Œæ–¹æ³•å®šä¹‰åœ¨methodsä¸­ï¼Œå½“æˆ‘ä»¬çš„ä»£ç å¤šèµ·æ¥ï¼Œæ¯”å¦‚è¾¾åˆ°å››ã€äº”ç™¾è¡Œçš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ”¹åŠ¨æŸä¸ªåŠŸèƒ½ï¼Œå°±è¦å»dataä¸­æ”¹æ•°æ®ï¼Œå†å»methodsä¸­æ”¹æ–¹æ³•ï¼Œæ¥å›åœ°å¯»æ‰¾ã€‚</p><p>ç›¸åŒåŠŸèƒ½çš„ä»£ç è¢«åˆ†å‰²ï¼Œå¯¹åæœŸçš„æ”¹åŠ¨å¾ˆä¸å‹å¥½ï¼Œå¦‚æœæ¢äº†ä¸€ä¸ªæ–°äººæ¥æ‰‹ï¼Œæˆ–è€…è‡ªå·±è¿‡ä¸€æ®µæ—¶é—´å†å»çœ‹è¿™æ®µä»£ç ï¼Œä¼°è®¡æ²¡æ³¨é‡Šçš„è¯ï¼Œé‚£æ˜¯ç›¸å½“è´¹åŠ²ã€‚ è€Œä¸”å› ä¸ºæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯æŒ‚è½½åœ¨thisä¸‹é¢ï¼Œtypescriptçš„ç±»å‹æ¨å¯¼ä¹Ÿå¾ˆéº»çƒ¦ï¼Œä»£ç çš„å¤ç”¨ã€å…¬å…±ç»„ä»¶çš„å¯¼å…¥å¯¼å‡ºä¹Ÿéƒ½å¾ˆå›°éš¾ã€‚Vue3æ–°å¢äº†Composition Apiæ¥è§£å†³è¿™äº›ç—›ç‚¹ã€‚</p><h2 id="äºŒã€composition-api"><a href="#äºŒã€composition-api" class="headerlink" title="äºŒã€composition api"></a>äºŒã€composition api</h2><blockquote><p>Composition Api:ç»„åˆå¼api,æ”¯æŒå°†ç›¸åŒçš„åŠŸèƒ½æ¨¡å—ä»£ç å†™åœ¨ä¸€èµ·ï¼Œç”šè‡³å¯ä»¥å°†æŸä¸ªåŠŸèƒ½å•ç‹¬çš„å°è£…æˆå‡½æ•°ï¼Œéšæ„å¯¼å…¥å¼•ç”¨ï¼›ä¹Ÿå¯ä»¥å°†ä»»æ„çš„æ•°æ®å®šä¹‰æˆå“åº”å¼ï¼Œå†ä¹Ÿä¸ç”¨å±€é™äºdataä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ¯ä¸ªå®ç°çš„åŠŸèƒ½ç»„åˆèµ·æ¥å°±å¯ä»¥äº†ã€‚</p></blockquote><p>watchï¼šä¾¦å¬ä¸€ä¸ªæˆ–å¤šä¸ªå“åº”å¼æ•°æ®æºï¼Œå¹¶åœ¨æ•°æ®æºå˜åŒ–æ—¶è°ƒç”¨æ‰€ç»™çš„å›è°ƒå‡½æ•°ã€‚</p><blockquote><p>watch() é»˜è®¤æ˜¯æ‡’ä¾¦å¬çš„ï¼Œå³ä»…åœ¨ä¾¦å¬æºå‘ç”Ÿå˜åŒ–æ—¶æ‰æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚(immediate:true ç«‹å³æ‰§è¡Œ)ï¼ŒåŒ…å«3ä¸ªå‚æ•°ï¼šä¾¦å¬å™¨çš„æºã€å‘ç”Ÿå˜åŒ–çš„å›è°ƒå‡½æ•°ï¼ˆè¿™ä¸ªå›è°ƒå‡½æ•°æ¥å—3ä¸ªå‚æ•°ï¼šæ–°å€¼ã€æ—§å€¼ã€ç”¨äºæ³¨å†Œå‰¯ä½œç”¨æ¸…ç†çš„å›è°ƒå‡½æ•°ã€‚ï¼‰ã€å¯é€‰å‚æ•°ï¼ˆimmediateï¼štrue/false ç«‹å³è§¦å‘ä¾¦å¬å™¨å›è°ƒå‡½æ•°ã€deep:æºæ˜¯å¯¹è±¡ï¼Œå¼ºåˆ¶æ·±åº¦éå†ï¼Œflush:è°ƒæ•´å›è°ƒçš„åˆ·æ–°æ—¶æœºã€onTrack/onTrigger:è°ƒè¯•ä¾¦å¬å™¨çš„ä¾èµ–ï¼‰</p></blockquote><p>æ³¨æ„ï¼š1ã€watchEffectæ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œä¸éœ€è¦æ·»åŠ immediateå±æ€§ã€‚<br>2ã€watchEffectä¸éœ€è¦æŒ‡å®šå¯¹æŸä¸ªå…·ä½“çš„æ•°æ®ç›‘å¬ï¼ŒwatchEffectä¼šæ ¹æ®å†…å®¹è‡ªåŠ¨å»æ„ŸçŸ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªwatchEffectä¸­æ·»åŠ å¤šä¸ªæ•°æ®çš„ç›‘å¬å¤„ç†ï¼ˆå¦‚æœwatchEffectä¸­æ²¡æœ‰ä»»ä½•å“åº”å¼æ•°æ®ï¼Œä¼šä¸ä¼šæ‰§è¡Œå‘¢ï¼Ÿå¤§å®¶å¯ä»¥è¯•ä¸€ä¸‹ï¼‰ã€‚<br>3ã€watchEffectä¸èƒ½è·å–æ•°æ®æ”¹å˜ä¹‹å‰çš„å€¼ã€‚</p><p>refå’Œreactiveçš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç®€å•ç†è§£ï¼Œå®ƒä»¬éƒ½æ˜¯ç”¨æ¥å®šä¹‰å“åº”å¼æ•°æ®çš„ï¼Œä½†æ˜¯refæ˜¯ç”¨æ¥ç»™ç®€å•çš„æ•°æ®ç±»å‹å®šä¹‰å“åº”å¼æ•°æ®çš„ï¼Œæ¯”å¦‚numberã€stringã€booleanç­‰ï¼Œè€Œreactiveæ˜¯é’ˆå¯¹å¤æ‚çš„æ•°æ®ç»“æ„çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>refå®šä¹‰çš„æ•°æ®ï¼Œä¿®æ”¹çš„æ—¶å€™æ˜¯éœ€æ”¹xxx.valueçš„ï¼Œè€Œreactiveå®šä¹‰çš„ä¸ç”¨</p>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>73ã€å…³äºä½¿ç”¨element-uiçš„el-tableç»„ä»¶ï¼šå¸¦åˆ†é¡µæ‰“å°è¡¨å¤´</title>
      <link href="/2022/07/25/print/"/>
      <url>/2022/07/25/print/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ commandï¼ˆwin : controlï¼‰ + p æ‰“å°æ—¶ï¼Œå¦‚æœé¡µé¢çš„ table åˆ†é¡µåï¼Œæƒ³è¦å°†ç¬¬äºŒé¡µä¹‹åçš„æ¯ä¸ªé¡µé¢éƒ½åŠ ä¸Šè¡¨å¤´ï¼Œå¯ä»¥å°è£…ä¸€ä¸ªå¯å¤ç”¨çš„ç»„ä»¶ã€‚</p><span id="more"></span><h2 id="ä¸€ã€ç¼–å†™å¯å¤ç”¨çš„ç»„ä»¶"><a href="#ä¸€ã€ç¼–å†™å¯å¤ç”¨çš„ç»„ä»¶" class="headerlink" title="ä¸€ã€ç¼–å†™å¯å¤ç”¨çš„ç»„ä»¶"></a>ä¸€ã€ç¼–å†™å¯å¤ç”¨çš„ç»„ä»¶</h2><p>ä»£ç å¦‚ä¸‹ï¼š</p><p>ElTableHeader.vue</p><pre><code class="js">import &#123; Table &#125; from &quot;element-ui&quot;;export default &#123;  extends: Table,  mounted() &#123;    this.$nextTick(function () &#123;      let thead = this.$el.querySelector(&quot;.el-table__header-wrapper thead&quot;);      let theadNew = thead.cloneNode(true);      this.$el        .querySelector(&quot;.el-table__body-wrapper table&quot;)        .appendChild(theadNew);    &#125;);  &#125;,&#125;;</code></pre><pre><code class="css"> .el-table &gt;&gt;&gt; .el-table__body-wrapper thead &#123;        display: none;    &#125;    @media print &#123;        .el-table &gt;&gt;&gt; .el-table__header-wrapper &#123;            display: none;        &#125;        .el-table &gt;&gt;&gt; .el-table__body-wrapper thead &#123;            display: table-header-group;        &#125;    &#125;</code></pre><h2 id="äºŒã€å…¨å±€æ³¨å†ŒåŠä½¿ç”¨"><a href="#äºŒã€å…¨å±€æ³¨å†ŒåŠä½¿ç”¨" class="headerlink" title="äºŒã€å…¨å±€æ³¨å†ŒåŠä½¿ç”¨"></a>äºŒã€å…¨å±€æ³¨å†ŒåŠä½¿ç”¨</h2><h4 id="1ã€main-jså¼•å…¥"><a href="#1ã€main-jså¼•å…¥" class="headerlink" title="1ã€main.jså¼•å…¥"></a>1ã€main.jså¼•å…¥</h4><pre><code>import ElTableHeader from &quot;./components/ElTableHeader.vue&quot;Vue.component(&quot;el-table-header&quot;,ElTableHeader)</code></pre><h4 id="2ã€ä½¿ç”¨"><a href="#2ã€ä½¿ç”¨" class="headerlink" title="2ã€ä½¿ç”¨"></a>2ã€ä½¿ç”¨</h4><pre><code class="html">&lt;template&gt;  &lt;el-table-header :data=&quot;tableData&quot;&gt;  &lt;/el-table-header&gt;&lt;/template&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> element-ui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>72ã€å…³äºä½¿ç”¨element-uiçš„el-selectç»„ä»¶ä¸‹æ‹‰æ¡†é”™ä½é—®é¢˜</title>
      <link href="/2022/07/11/el-select/"/>
      <url>/2022/07/11/el-select/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ element-uiçš„el-formç»„ä»¶é‡Œä½¿ç”¨el-selcetç»„ä»¶æ—¶ï¼Œä¸‹æ‹‰æ¡†çš„el-select-itemä¼šå‡ºç°å‘å³åç§»çš„é—®é¢˜ã€‚æœ‰2ç§æ–¹æ³•å¯ä»¥è§£å†³ä¸‹æ‹‰æ¡†é”™ä½çš„é—®é¢˜ã€‚</p><span id="more"></span><h2 id="ä¸€ã€æ–¹æ³•ä¸€ï¼šmargin-left-0px-important"><a href="#ä¸€ã€æ–¹æ³•ä¸€ï¼šmargin-left-0px-important" class="headerlink" title="ä¸€ã€æ–¹æ³•ä¸€ï¼šmargin-left:0px !important"></a>ä¸€ã€æ–¹æ³•ä¸€ï¼šmargin-left:0px !important</h2><p>åœ¨el-selectæ·»åŠ ä¸€ä¸ªç±»åï¼šselect-item</p><pre><code class="css">.select-item .el-form-item__content&#123;  margin-left:0px !important;&#125;</code></pre><h2 id="äºŒã€æ–¹æ³•äºŒï¼šposition-initial"><a href="#äºŒã€æ–¹æ³•äºŒï¼šposition-initial" class="headerlink" title="äºŒã€æ–¹æ³•äºŒï¼šposition:initial;"></a>äºŒã€æ–¹æ³•äºŒï¼šposition:initial;</h2><pre><code class="css">.select-item .el-form-item__content&#123;  position:initial;&#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> element-ui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>71ã€headerSearchç»„ä»¶</title>
      <link href="/2022/06/25/headerSearch/"/>
      <url>/2022/06/25/headerSearch/</url>
      
        <content type="html"><![CDATA[<p>headerSearchç»„ä»¶:åœ¨æŒ‡å®šæœç´¢æ¡†ä¸­å¯¹å½“å‰åº”ç”¨ä¸­æ‰€æœ‰é¡µé¢è¿›è¡Œæ£€ç´¢ï¼Œä»¥selectå½¢å¼å±•ç¤ºå‡ºè¢«æ£€ç´¢çš„é¡µé¢ï¼Œä»¥è¾¾åˆ°å¿«é€Ÿè¿›å…¥çš„ç›®çš„ï¼›</p><span id="more"></span><h2 id="ä¸€ã€åŸç†ï¼š"><a href="#ä¸€ã€åŸç†ï¼š" class="headerlink" title="ä¸€ã€åŸç†ï¼š"></a>ä¸€ã€åŸç†ï¼š</h2><p>1ã€æ ¹æ®æŒ‡å®šå†…å®¹å¯¹æ‰€æœ‰é¡µé¢è¿›è¡Œæ£€ç´¢ï¼›<br>2ã€ä»¥selectå½¢å¼å±•ç¤ºæ£€ç´¢å‡ºçš„é¡µé¢ï¼›<br>3ã€é€šè¿‡æ£€ç´¢é¡µé¢å¯å¿«é€Ÿè¿›å…¥å¯¹åº”é¡µé¢ã€‚</p><h2 id="äºŒã€æ–¹æ¡ˆï¼š"><a href="#äºŒã€æ–¹æ¡ˆï¼š" class="headerlink" title="äºŒã€æ–¹æ¡ˆï¼š"></a>äºŒã€æ–¹æ¡ˆï¼š</h2><p>1ã€åˆ›å»º headerSearch ç»„ä»¶ï¼Œç”¨ä½œæ ·å¼å±•ç¤ºå’Œç”¨æˆ·è¾“å…¥å†…å®¹è·å–<br>2ã€è·å–æ‰€æœ‰çš„é¡µé¢æ•°æ®ï¼Œç”¨ä½œè¢«æ£€ç´¢çš„æ•°æ®æº<br>3ã€æ ¹æ®ç”¨æˆ·è¾“å…¥å†…å®¹åœ¨æ•°æ®æºä¸­è¿›è¡Œæ¨¡ç³Šæœç´¢<br>4ã€æŠŠæœç´¢åˆ°çš„å†…å®¹ä»¥ select è¿›è¡Œå±•ç¤º<br>5ã€ç›‘å¬ select çš„ change äº‹ä»¶ï¼Œå®Œæˆå¯¹åº”è·³è½¬</p><h2 id="ä¸‰ã€ä»£ç ï¼š"><a href="#ä¸‰ã€ä»£ç ï¼š" class="headerlink" title="ä¸‰ã€ä»£ç ï¼š"></a>ä¸‰ã€ä»£ç ï¼š</h2><details><summary>ç‚¹å‡»å±•ç¤ºjsä»£ç </summary><pre><code class="html">&lt;template&gt;  &lt;div :class=&quot;&#123; show: isShow &#125;&quot; class=&quot;header-search&quot;&gt;    &lt;svg-icon      id=&quot;guide-search&quot;      class-name=&quot;search-icon&quot;      icon=&quot;search&quot;      @click.stop=&quot;onShowClick&quot;    /&gt;    &lt;el-select      ref=&quot;headerSearchSelectRef&quot;      class=&quot;header-search-select&quot;      v-model=&quot;search&quot;      filterable      default-first-option      remote      placeholder=&quot;Search&quot;      :remote-method=&quot;querySearch&quot;      @change=&quot;onSelectChange&quot;    &gt;      &lt;el-option        v-for=&quot;option in searchOptions&quot;        :key=&quot;option.item.path&quot;        :label=&quot;option.item.title.join(&#39; &gt; &#39;)&quot;        :value=&quot;option.item&quot;      &gt;&lt;/el-option&gt;    &lt;/el-select&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><pre><code class="js">&lt;script setup&gt;import &#123; computed, ref, watch &#125; from &#39;vue&#39;import &#123; generateRoutes &#125; from &#39;./FuseData&#39;import Fuse from &#39;fuse.js&#39;import &#123; filterRouters &#125; from &#39;@/utils/route&#39;import &#123; useRouter &#125; from &#39;vue-router&#39;import &#123; watchSwitchLang &#125; from &#39;@/utils/i18n&#39;// æ§åˆ¶ search æ˜¾ç¤ºconst isShow = ref(false)// el-select å®ä¾‹const headerSearchSelectRef = ref(null)const onShowClick = () =&gt; &#123;  isShow.value = !isShow.value  headerSearchSelectRef.value.focus()&#125;// search ç›¸å…³const search = ref(&#39;&#39;)// æœç´¢ç»“æœconst searchOptions = ref([])// æœç´¢æ–¹æ³•const querySearch = query =&gt; &#123;  if (query !== &#39;&#39;) &#123;    searchOptions.value = fuse.search(query)  &#125; else &#123;    searchOptions.value = []  &#125;&#125;// é€‰ä¸­å›è°ƒconst onSelectChange = val =&gt; &#123;  router.push(val.path)  onClose()&#125;// æ£€ç´¢æ•°æ®æºconst router = useRouter()let searchPool = computed(() =&gt; &#123;  const filterRoutes = filterRouters(router.getRoutes())  return generateRoutes(filterRoutes)&#125;)/** * æœç´¢åº“ç›¸å…³ */let fuseconst initFuse = searchPool =&gt; &#123;  fuse = new Fuse(searchPool, &#123;    // æ˜¯å¦æŒ‰ä¼˜å…ˆçº§è¿›è¡Œæ’åº    shouldSort: true,    // åŒ¹é…ç®—æ³•æ”¾å¼ƒçš„æ—¶æœºï¼Œ é˜ˆå€¼ 0.0 éœ€è¦å®Œç¾åŒ¹é…ï¼ˆå­—æ¯å’Œä½ç½®ï¼‰ï¼Œé˜ˆå€¼ 1.0 å°†åŒ¹é…ä»»ä½•å†…å®¹ã€‚    threshold: 0.4,    // åŒ¹é…é•¿åº¦è¶…è¿‡è¿™ä¸ªå€¼çš„æ‰ä¼šè¢«è®¤ä¸ºæ˜¯åŒ¹é…çš„    minMatchCharLength: 1,    // å°†è¢«æœç´¢çš„é”®åˆ—è¡¨ã€‚ è¿™æ”¯æŒåµŒå¥—è·¯å¾„ã€åŠ æƒæœç´¢ã€åœ¨å­—ç¬¦ä¸²å’Œå¯¹è±¡æ•°ç»„ä¸­æœç´¢ã€‚    // nameï¼šæœç´¢çš„é”®    // weightï¼šå¯¹åº”çš„æƒé‡    keys: [      &#123;        name: &#39;title&#39;,        weight: 0.7      &#125;,      &#123;        name: &#39;path&#39;,        weight: 0.3      &#125;    ]  &#125;)&#125;initFuse(searchPool.value)/** * å…³é—­ search çš„å¤„ç†äº‹ä»¶ */const onClose = () =&gt; &#123;  headerSearchSelectRef.value.blur()  isShow.value = false  searchOptions.value = []&#125;/** * ç›‘å¬ search æ‰“å¼€ï¼Œå¤„ç† close äº‹ä»¶ */watch(isShow, val =&gt; &#123;  if (val) &#123;    document.body.addEventListener(&#39;click&#39;, onClose)  &#125; else &#123;    document.body.removeEventListener(&#39;click&#39;, onClose)  &#125;&#125;)// å¤„ç†å›½é™…åŒ–watchSwitchLang(() =&gt; &#123;  searchPool = computed(() =&gt; &#123;    const filterRoutes = filterRouters(router.getRoutes())    return generateRoutes(filterRoutes)  &#125;)  initFuse(searchPool.value)&#125;)&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.header-search &#123;  font-size: 0 !important;  .search-icon &#123;    cursor: pointer;    font-size: 18px;    vertical-align: middle;  &#125;  .header-search-select &#123;    font-size: 18px;    transition: width 0.2s;    width: 0;    overflow: hidden;    background: transparent;    border-radius: 0;    display: inline-block;    vertical-align: middle;    ::v-deep .el-input__inner &#123;      border-radius: 0;      border: 0;      padding-left: 0;      padding-right: 0;      box-shadow: none !important;      border-bottom: 1px solid #d9d9d9;      vertical-align: middle;    &#125;  &#125;  &amp;.show &#123;    .header-search-select &#123;      width: 210px;      margin-left: 10px;    &#125;  &#125;&#125;&lt;/style&gt;</code></pre></details><h2 id="å››ã€æ•°æ®æºï¼š"><a href="#å››ã€æ•°æ®æºï¼š" class="headerlink" title="å››ã€æ•°æ®æºï¼š"></a>å››ã€æ•°æ®æºï¼š</h2><p>FuseData.js</p><details><summary>ç‚¹å‡»å±•ç¤ºjsä»£ç </summary><pre><code class="js">import path from &#39;path&#39;import i18n from &#39;@/i18n&#39;/** * ç­›é€‰å‡ºå¯ä¾›æœç´¢çš„è·¯ç”±å¯¹è±¡ * @param routes è·¯ç”±è¡¨ * @param basePath åŸºç¡€è·¯å¾„ï¼Œé»˜è®¤ä¸º / * @param prefixTitle */export const generateRoutes = (routes, basePath = &#39;/&#39;, prefixTitle = []) =&gt; &#123;  // åˆ›å»º result æ•°æ®  let res = []  // å¾ªç¯ routes è·¯ç”±  for (const route of routes) &#123;    // åˆ›å»ºåŒ…å« path å’Œ title çš„ item    const data = &#123;      path: path.resolve(basePath, route.path),      title: [...prefixTitle]    &#125;    // å½“å‰å­˜åœ¨ meta æ—¶ï¼Œä½¿ç”¨ i18n è§£æå›½é™…åŒ–æ•°æ®ï¼Œç»„åˆæˆæ–°çš„ title å†…å®¹    // åŠ¨æ€è·¯ç”±ä¸å…è®¸è¢«æœç´¢    // åŒ¹é…åŠ¨æ€è·¯ç”±çš„æ­£åˆ™    const re = /.*\/:.*/    if (      route.meta &amp;&amp;      route.meta.title &amp;&amp;      !re.exec(route.path) &amp;&amp;      !res.find(item =&gt; item.path === data.path)    ) &#123;      const i18ntitle = i18n.global.t(`msg.route.$&#123;route.meta.title&#125;`)      data.title = [...data.title, i18ntitle]      res.push(data)    &#125;    // å­˜åœ¨ children æ—¶ï¼Œè¿­ä»£è°ƒç”¨    if (route.children) &#123;      const tempRoutes = generateRoutes(route.children, data.path, data.title)      if (tempRoutes.length &gt;= 1) &#123;        res = [...res, ...tempRoutes]      &#125;    &#125;  &#125;  return res&#125;</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> element-ui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>70ã€åŠŸèƒ½å¼•å¯¼ç»„ä»¶</title>
      <link href="/2022/06/20/guide/"/>
      <url>/2022/06/20/guide/</url>
      
        <content type="html"><![CDATA[<p>åŠŸèƒ½å¼•å¯¼ç»„ä»¶å®ç°</p><span id="more"></span><h2 id="ä¸€ã€åŠŸèƒ½å¼•å¯¼ï¼šdriver-js"><a href="#ä¸€ã€åŠŸèƒ½å¼•å¯¼ï¼šdriver-js" class="headerlink" title="ä¸€ã€åŠŸèƒ½å¼•å¯¼ï¼šdriver.js"></a>ä¸€ã€åŠŸèƒ½å¼•å¯¼ï¼šdriver.js</h2><p>å®ç°æ€è·¯ï¼š</p><h4 id="1ã€å®šä¹‰å¯¼èˆªæ•°æ®"><a href="#1ã€å®šä¹‰å¯¼èˆªæ•°æ®" class="headerlink" title="1ã€å®šä¹‰å¯¼èˆªæ•°æ®"></a>1ã€å®šä¹‰å¯¼èˆªæ•°æ®</h4><pre><code class="html">&lt;svg-icon icon=&quot;guide&quot; @click=&quot;onClick&quot; /&gt;</code></pre><p>let driver = null</p><h4 id="2ã€å®ä¾‹åŒ–Driver"><a href="#2ã€å®ä¾‹åŒ–Driver" class="headerlink" title="2ã€å®ä¾‹åŒ–Driver"></a>2ã€å®ä¾‹åŒ–Driver</h4><p>éœ€è¦å®‰è£…driver.js</p><pre><code class="js">import Driver from &#39;driver.js&#39;import &#39;driver.js/dist/driver.min.css&#39;import &#123; onMounted &#125; from &#39;vue&#39;import &#123; useI18n &#125; from &#39;vue-i18n&#39;import steps from &#39;./steps&#39;import &#123; watchSwitchLang &#125; from &#39;@/utils/i18n&#39;const initDriver = () =&gt; &#123;  driver = new Driver(&#123;    animate: false,    // ç¦æ­¢ç‚¹å‡»è’™ç‰ˆå…³é—­    allowClose: false,    closeBtnText: i18n.t(&#39;msg.guide.close&#39;),    nextBtnText: i18n.t(&#39;msg.guide.next&#39;),    prevBtnText: i18n.t(&#39;msg.guide.prev&#39;)  &#125;)&#125;// è¯­è¨€åˆ‡æ¢æ—¶ï¼Œé‡æ–°åˆå§‹åŒ– DriverwatchSwitchLang(initDriver)</code></pre><h4 id="3ã€å®šä¹‰è§¦å‘æ–¹æ³•"><a href="#3ã€å®šä¹‰è§¦å‘æ–¹æ³•" class="headerlink" title="3ã€å®šä¹‰è§¦å‘æ–¹æ³•"></a>3ã€å®šä¹‰è§¦å‘æ–¹æ³•</h4><pre><code class="js">const onClick = () =&gt; &#123;  driver.defineSteps(steps(i18n))  driver.start()&#125;</code></pre><h4 id="4ã€stepsèµ„æºæ–‡ä»¶"><a href="#4ã€stepsèµ„æºæ–‡ä»¶" class="headerlink" title="4ã€stepsèµ„æºæ–‡ä»¶"></a>4ã€stepsèµ„æºæ–‡ä»¶</h4><details><summary>ç‚¹å‡»å±•ç¤ºjsä»£ç </summary><pre><code class="js">// æ­¤å¤„ä¸éœ€è¦å¯¼å…¥ @/i18n ä½¿ç”¨ i18n.global ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ router ä¸­ layout ä¸æ˜¯æŒ‰éœ€åŠ è½½ï¼Œæ‰€ä»¥ä¼šåœ¨ Guide ä¼šåœ¨ I18n åˆå§‹åŒ–å®Œæˆä¹‹å‰è¢«ç›´æ¥è°ƒç”¨ã€‚å¯¼è‡´ i18n ä¸º undefinedconst steps = i18n =&gt; &#123;  return [    // èµ·å§‹    &#123;      element: &#39;#guide-start&#39;,      popover: &#123;        title: i18n.t(&#39;msg.guide.guideTitle&#39;),        description: i18n.t(&#39;msg.guide.guideDesc&#39;),        position: &#39;bottom-right&#39;      &#125;    &#125;,    &#123;      element: &#39;#guide-hamburger&#39;,      popover: &#123;        title: i18n.t(&#39;msg.guide.hamburgerTitle&#39;),        description: i18n.t(&#39;msg.guide.hamburgerDesc&#39;)      &#125;    &#125;,    &#123;      element: &#39;#guide-breadcrumb&#39;,      popover: &#123;        title: i18n.t(&#39;msg.guide.breadcrumbTitle&#39;),        description: i18n.t(&#39;msg.guide.breadcrumbDesc&#39;)      &#125;    &#125;,    &#123;      element: &#39;#guide-search&#39;,      popover: &#123;        title: i18n.t(&#39;msg.guide.searchTitle&#39;),        description: i18n.t(&#39;msg.guide.searchDesc&#39;),        position: &#39;bottom-right&#39;      &#125;    &#125;,    &#123;      element: &#39;#guide-full&#39;,      popover: &#123;        title: i18n.t(&#39;msg.guide.fullTitle&#39;),        description: i18n.t(&#39;msg.guide.fullDesc&#39;),        position: &#39;bottom-right&#39;      &#125;    &#125;,    &#123;      element: &#39;#guide-theme&#39;,      popover: &#123;        title: i18n.t(&#39;msg.guide.themeTitle&#39;),        description: i18n.t(&#39;msg.guide.themeDesc&#39;),        position: &#39;bottom-right&#39;      &#125;    &#125;,    &#123;      element: &#39;#guide-lang&#39;,      popover: &#123;        title: i18n.t(&#39;msg.guide.langTitle&#39;),        description: i18n.t(&#39;msg.guide.langDesc&#39;),        position: &#39;bottom-right&#39;      &#125;    &#125;,    &#123;      element: &#39;#guide-tags&#39;,      popover: &#123;        title: i18n.t(&#39;msg.guide.tagTitle&#39;),        description: i18n.t(&#39;msg.guide.tagDesc&#39;)      &#125;    &#125;,    &#123;      element: &#39;#guide-sidebar&#39;,      popover: &#123;        title: i18n.t(&#39;msg.guide.sidebarTitle&#39;),        description: i18n.t(&#39;msg.guide.sidebarDesc&#39;),        position: &#39;right-center&#39;      &#125;    &#125;  ]&#125;export default steps</code></pre></details><h4 id="5ã€å¼•å¯¼é«˜äº®åŒºåŸŸæ·»åŠ ID"><a href="#5ã€å¼•å¯¼é«˜äº®åŒºåŸŸæ·»åŠ ID" class="headerlink" title="5ã€å¼•å¯¼é«˜äº®åŒºåŸŸæ·»åŠ ID"></a>5ã€å¼•å¯¼é«˜äº®åŒºåŸŸæ·»åŠ ID</h4><p>ç¤ºä¾‹ï¼š</p><pre><code class="html">&lt;svg-icon id=&quot;guide-hamburger&quot; class=&quot;hamburger&quot; :icon=&quot;icon&quot;&gt;&lt;/svg-icon&gt;&lt;!-- é¢åŒ…å±‘ --&gt;&lt;breadcrumb id=&quot;guide-breadcrumb&quot; class=&quot;breadcrumb-container&quot; /&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>69ã€screenfullç»„ä»¶</title>
      <link href="/2022/06/15/screenfull/"/>
      <url>/2022/06/15/screenfull/</url>
      
        <content type="html"><![CDATA[<p>screenfullç»„ä»¶:ä¸»è¦ä½¿ç”¨çš„æ˜¯æµè§ˆå™¨çš„2ä¸ªAPI:Document.exitFullscreen():è¯¥æ–¹æ³•ç”¨äºè¯·æ±‚ä»å…¨å±æ¨¡å¼åˆ‡æ¢åˆ°çª—å£æ¨¡å¼ï¼›<br>Element.requestFullscreen()ï¼šè¯¥æ–¹æ³•ç”¨äºè¯·æ±‚æµè§ˆå™¨ï¼ˆuser agentï¼‰å°†ç‰¹å®šå…ƒç´ ï¼ˆç”šè‡³å»¶ä¼¸åˆ°å®ƒçš„åä»£å…ƒç´ ï¼‰ç½®ä¸ºå…¨å±æ¨¡å¼ã€‚<br>å½“é€šè¿‡document.getElementById(â€˜appâ€™).requestFullscreen()åœ¨è·å–id=appçš„DOMä¹‹åï¼ŒæŠŠè¯¥åŒºåŸŸç½®ä¸ºå…¨å±</p><p>è¿™ç§æ–¹æ³•å­˜åœ¨ä¸€å®šçš„é—®é¢˜ï¼ˆå†…å®¹åŒºåŸŸçš„AppMainï¼‰åŒºåŸŸèƒŒæ™¯ä¸ºé»‘è‰²ã€‚</p><span id="more"></span><p>å®ç°å…¨å±æ˜¾ç¤ºæ¨¡å¼ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨åŒ…è£…åº“ï¼šscreenfullã€‚</p><h2 id="ä¸€ã€å®ç°"><a href="#ä¸€ã€å®ç°" class="headerlink" title="ä¸€ã€å®ç°"></a>ä¸€ã€å®ç°</h2><p>1ã€å®‰è£…screenfull</p><p>2ã€åˆ›å»ºå…¨å±ç»„ä»¶</p><pre><code class="html">&lt;template&gt;  &lt;div&gt;    &lt;svg-icon      :icon=&quot;isFullscreen ? &#39;exit-fullscreen&#39; : &#39;fullscreen&#39;&quot;      @click=&quot;onToggle&quot;    /&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><pre><code class="js">&lt;script setup&gt;import &#123; ref, onMounted, onUnmounted &#125; from &#39;vue&#39;import screenfull from &#39;screenfull&#39;// æ˜¯å¦å…¨å±const isFullscreen = ref(false)// ç›‘å¬å˜åŒ–const change = () =&gt; &#123;  isFullscreen.value = screenfull.isFullscreen&#125;// åˆ‡æ¢äº‹ä»¶const onToggle = () =&gt; &#123;  screenfull.toggle()&#125;// è®¾ç½®ä¾¦å¬å™¨onMounted(() =&gt; &#123;  screenfull.on(&#39;change&#39;, change)&#125;)// åˆ é™¤ä¾¦å¬å™¨onUnmounted(() =&gt; &#123;  screenfull.off(&#39;change&#39;, change)&#125;)&lt;/script&gt;</code></pre><p>3ã€å¼•å…¥å…¨å±ç»„ä»¶</p><pre><code class="html">&lt;screenfull class=&quot;right-menu-item hover-effect&quot; /&gt;</code></pre><pre><code class="js">import Screenfull from &#39;@/components/Screenfull&#39;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>68ã€ESlint+Prettier+VSCodeä»£ç æ ¼å¼è§„èŒƒã€gitæäº¤è§„èŒƒ</title>
      <link href="/2022/06/07/eslint/"/>
      <url>/2022/06/07/eslint/</url>
      
        <content type="html"><![CDATA[<p>ESlint+Prettier+VSCodeä»£ç æ ¼å¼è§„èŒƒã€gitæäº¤è§„èŒƒ</p><span id="more"></span><h2 id="ä¸€ã€ESlintè§„èŒƒã€Prettieræ ¼å¼åŒ–å·¥å…·è§„èŒƒ"><a href="#ä¸€ã€ESlintè§„èŒƒã€Prettieræ ¼å¼åŒ–å·¥å…·è§„èŒƒ" class="headerlink" title="ä¸€ã€ESlintè§„èŒƒã€Prettieræ ¼å¼åŒ–å·¥å…·è§„èŒƒ"></a>ä¸€ã€ESlintè§„èŒƒã€Prettieræ ¼å¼åŒ–å·¥å…·è§„èŒƒ</h2><h3 id="1-eslintrc-js"><a href="#1-eslintrc-js" class="headerlink" title="1.  .eslintrc.js"></a>1.  .eslintrc.js</h3><pre><code class="js">// ESLint é…ç½®æ–‡ä»¶éµå¾ª commonJS çš„å¯¼å‡ºè§„åˆ™ï¼Œæ‰€å¯¼å‡ºçš„å¯¹è±¡å°±æ˜¯ ESLint çš„é…ç½®å¯¹è±¡// æ–‡æ¡£ï¼šhttps://eslint.bootcss.com/docs/user-guide/configuringmodule.exports = &#123;  // è¡¨ç¤ºå½“å‰ç›®å½•å³ä¸ºæ ¹ç›®å½•ï¼ŒESLint è§„åˆ™å°†è¢«é™åˆ¶åˆ°è¯¥ç›®å½•ä¸‹  root: true,  // env è¡¨ç¤ºå¯ç”¨ ESLint æ£€æµ‹çš„ç¯å¢ƒ  env: &#123;    // åœ¨ node ç¯å¢ƒä¸‹å¯åŠ¨ ESLint æ£€æµ‹    node: true  &#125;,  // ESLint ä¸­åŸºç¡€é…ç½®éœ€è¦ç»§æ‰¿çš„é…ç½®  extends: [&quot;plugin:vue/vue3-essential&quot;, &quot;@vue/standard&quot;],  // è§£æå™¨  parserOptions: &#123;    parser: &quot;babel-eslint&quot;  &#125;,  // éœ€è¦ä¿®æ”¹çš„å¯ç”¨è§„åˆ™åŠå…¶å„è‡ªçš„é”™è¯¯çº§åˆ«  /**   * é”™è¯¯çº§åˆ«åˆ†ä¸ºä¸‰ç§ï¼š   * &quot;off&quot; æˆ– 0 - å…³é—­è§„åˆ™   * &quot;warn&quot; æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)   * &quot;error&quot; æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)   */  rules: &#123;    &quot;no-console&quot;: process.env.NODE_ENV === &quot;production&quot; ? &quot;warn&quot; : &quot;off&quot;,    &quot;no-debugger&quot;: process.env.NODE_ENV === &quot;production&quot; ? &quot;warn&quot; : &quot;off&quot;,    &#39;space-before-function-paren&#39;: &#39;off&#39;,    &#39;no-unused-expressions&#39;: &#39;off&#39;  &#125;&#125;;space-before-function-paren:off å…³é—­ã€Šæ–¹æ³•ååå¢åŠ ç©ºæ ¼ã€‹çš„è§„åˆ™</code></pre><h3 id="2ã€VSCodeå®‰è£…Prettieræ’ä»¶"><a href="#2ã€VSCodeå®‰è£…Prettieræ’ä»¶" class="headerlink" title="2ã€VSCodeå®‰è£…Prettieræ’ä»¶"></a>2ã€VSCodeå®‰è£…Prettieræ’ä»¶</h3><p>(1)æ–°å»º.prettierrc  </p><pre><code class="js">&#123;  // ä¸å°¾éšåˆ†å·  &quot;semi&quot;: false,  // ä½¿ç”¨å•å¼•å·  &quot;singleQuote&quot;: true,  // å¤šè¡Œé€—å·åˆ†å‰²çš„è¯­æ³•ä¸­ï¼Œæœ€åä¸€è¡Œä¸åŠ é€—å·  &quot;trailingComma&quot;: &quot;none&quot;&#125;</code></pre><p>(2)æ‰“å¼€VSCodeè®¾ç½®ï¼Œæœç´¢save,å‹¾é€‰Format On Save<br>VSCodeé»˜è®¤ä¸€ä¸ªtabæ˜¯4ä¸ªç©ºæ ¼ï¼Œå¯ä»¥ä¿®æ”¹æˆ2ä¸ªã€‚</p><p>è¿™æ ·æˆ‘ä»¬ä¿å­˜çš„ä»£ç ï¼Œprettierä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨æ ¼å¼åŒ–æˆç¬¦åˆESlintæ ¡éªŒè§„åˆ™çš„ä»£ç ã€‚</p><h3 id="3ã€gitæäº¤è§„èŒƒ"><a href="#3ã€gitæäº¤è§„èŒƒ" class="headerlink" title="3ã€gitæäº¤è§„èŒƒ"></a>3ã€gitæäº¤è§„èŒƒ</h3><h4 id="1-ã€å…¨å±€å®‰è£…Commitizen"><a href="#1-ã€å…¨å±€å®‰è£…Commitizen" class="headerlink" title="(1)ã€å…¨å±€å®‰è£…Commitizen"></a>(1)ã€å…¨å±€å®‰è£…Commitizen</h4><pre><code class="js">npm install -g commitizen@4.2.4</code></pre><h4 id="2-ã€å®‰è£…å¹¶é…ç½®cz-customizable"><a href="#2-ã€å®‰è£…å¹¶é…ç½®cz-customizable" class="headerlink" title="(2)ã€å®‰è£…å¹¶é…ç½®cz-customizable"></a>(2)ã€å®‰è£…å¹¶é…ç½®cz-customizable</h4><pre><code>npm i cz-customizable@6.3.0 --save-dev</code></pre><p>åœ¨package.jsonä¸­é…ç½®</p><pre><code class="json">  &quot;config&quot;: &#123;    &quot;commitizen&quot;: &#123;      &quot;path&quot;: &quot;node_modules/cz-customizable&quot;    &#125;  &#125;</code></pre><h4 id="3-ã€æ ¹ç›®å½•ä¸‹åˆ›å»º-cz-config-jsè‡ªå®šä¹‰æç¤ºæ–‡ä»¶"><a href="#3-ã€æ ¹ç›®å½•ä¸‹åˆ›å»º-cz-config-jsè‡ªå®šä¹‰æç¤ºæ–‡ä»¶" class="headerlink" title="(3)ã€æ ¹ç›®å½•ä¸‹åˆ›å»º.cz-config.jsè‡ªå®šä¹‰æç¤ºæ–‡ä»¶"></a>(3)ã€æ ¹ç›®å½•ä¸‹åˆ›å»º.cz-config.jsè‡ªå®šä¹‰æç¤ºæ–‡ä»¶</h4><pre><code class="js">module.exports = &#123;  // å¯é€‰ç±»å‹  types: [    &#123; value: &#39;feat&#39;, name: &#39;feat:     æ–°åŠŸèƒ½&#39; &#125;,    &#123; value: &#39;fix&#39;, name: &#39;fix:      ä¿®å¤&#39; &#125;,    &#123; value: &#39;docs&#39;, name: &#39;docs:     æ–‡æ¡£å˜æ›´&#39; &#125;,    &#123; value: &#39;style&#39;, name: &#39;style:    ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)&#39; &#125;,    &#123;      value: &#39;refactor&#39;,      name: &#39;refactor: é‡æ„(æ—¢ä¸æ˜¯å¢åŠ featureï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bug)&#39;    &#125;,    &#123; value: &#39;perf&#39;, name: &#39;perf:     æ€§èƒ½ä¼˜åŒ–&#39; &#125;,    &#123; value: &#39;test&#39;, name: &#39;test:     å¢åŠ æµ‹è¯•&#39; &#125;,    &#123; value: &#39;chore&#39;, name: &#39;chore:    æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨&#39; &#125;,    &#123; value: &#39;revert&#39;, name: &#39;revert:   å›é€€&#39; &#125;,    &#123; value: &#39;build&#39;, name: &#39;build:    æ‰“åŒ…&#39; &#125;  ],  // æ¶ˆæ¯æ­¥éª¤  messages: &#123;    type: &#39;è¯·é€‰æ‹©æäº¤ç±»å‹:&#39;,    customScope: &#39;è¯·è¾“å…¥ä¿®æ”¹èŒƒå›´(å¯é€‰):&#39;,    subject: &#39;è¯·ç®€è¦æè¿°æäº¤(å¿…å¡«):&#39;,    body: &#39;è¯·è¾“å…¥è¯¦ç»†æè¿°(å¯é€‰):&#39;,    footer: &#39;è¯·è¾“å…¥è¦å…³é—­çš„issue(å¯é€‰):&#39;,    confirmCommit: &#39;ç¡®è®¤ä½¿ç”¨ä»¥ä¸Šä¿¡æ¯æäº¤ï¼Ÿ(y/n/e/h)&#39;  &#125;,  // è·³è¿‡é—®é¢˜  skipQuestions: [&#39;body&#39;, &#39;footer&#39;],  // subjectæ–‡å­—é•¿åº¦é»˜è®¤æ˜¯72  subjectLimit: 72&#125;</code></pre><h4 id="4-ã€ä½¿ç”¨git-czä»£æ›¿git-commit"><a href="#4-ã€ä½¿ç”¨git-czä»£æ›¿git-commit" class="headerlink" title="(4)ã€ä½¿ç”¨git czä»£æ›¿git commit"></a>(4)ã€ä½¿ç”¨git czä»£æ›¿git commit</h4><p>å¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½è®°å¾—ä½¿ç”¨git cz  è¿˜éœ€è¦åŠ ä¸ŠGit Hooks</p><h3 id="4ã€Git-Hooks"><a href="#4ã€Git-Hooks" class="headerlink" title="4ã€Git Hooks"></a>4ã€Git Hooks</h3><p>Git Hookså¸¸ç”¨çš„2ä¸ªé’©å­ï¼š<br>1ã€commit-msgï¼šå¯ä»¥ç”¨æ¥è§„èŒƒåŒ–æ ‡å‡†æ ¼å¼ï¼Œå¹¶ä¸”å¯ä»¥æŒ‰éœ€æŒ‡å®šæ˜¯å¦è¦æ‹’ç»æœ¬æ¬¡æäº¤<br>2ã€pre-commitï¼šä¼šåœ¨æäº¤å‰è¢«è°ƒç”¨ï¼Œå¹¶ä¸”å¯ä»¥æŒ‰éœ€æŒ‡å®šæ˜¯å¦è¦æ‹’ç»æœ¬æ¬¡æäº¤</p><h4 id="ï¼ˆ1ï¼‰commitlintå’Œhusky-2ä¸ªå·¥å…·çš„å®‰è£…ä¸é…ç½®"><a href="#ï¼ˆ1ï¼‰commitlintå’Œhusky-2ä¸ªå·¥å…·çš„å®‰è£…ä¸é…ç½®" class="headerlink" title="ï¼ˆ1ï¼‰commitlintå’Œhusky 2ä¸ªå·¥å…·çš„å®‰è£…ä¸é…ç½®"></a>ï¼ˆ1ï¼‰commitlintå’Œhusky 2ä¸ªå·¥å…·çš„å®‰è£…ä¸é…ç½®</h4><pre><code>npm install --save-dev @commitlint/config-conventional@12.1.4 @commitlint/cli@12.1.4</code></pre><p>åˆ›å»ºcommitlint.config.js</p><pre><code>echo &quot;module.exports = &#123;extends: [&#39;@commitlint/config-conventional&#39;]&#125;&quot; &gt; commitlint.config.js</code></pre><p>é…ç½®commitlint.config.js</p><pre><code class="js">module.exports = &#123;  // ç»§æ‰¿çš„è§„åˆ™  extends: [&#39;@commitlint/config-conventional&#39;],  // å®šä¹‰è§„åˆ™ç±»å‹  rules: &#123;    // type ç±»å‹å®šä¹‰ï¼Œè¡¨ç¤º git æäº¤çš„ type å¿…é¡»åœ¨ä»¥ä¸‹ç±»å‹èŒƒå›´å†…    &#39;type-enum&#39;: [      2,      &#39;always&#39;,      [        &#39;feat&#39;, // æ–°åŠŸèƒ½ feature        &#39;fix&#39;, // ä¿®å¤ bug        &#39;docs&#39;, // æ–‡æ¡£æ³¨é‡Š        &#39;style&#39;, // ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)        &#39;refactor&#39;, // é‡æ„(æ—¢ä¸å¢åŠ æ–°åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bug)        &#39;perf&#39;, // æ€§èƒ½ä¼˜åŒ–        &#39;test&#39;, // å¢åŠ æµ‹è¯•        &#39;chore&#39;, // æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨        &#39;revert&#39;, // å›é€€        &#39;build&#39; // æ‰“åŒ…      ]    ],    // subject å¤§å°å†™ä¸åšæ ¡éªŒ    &#39;subject-case&#39;: [0]  &#125;&#125;</code></pre><blockquote><p>æ³¨æ„ï¼šç¡®ä¿æ­¤æ–‡ä»¶ä¸ºUTF-8ç¼–ç æ ¼å¼</p></blockquote><p>å®‰è£…husky:</p><pre><code>npm install husky@7.0.1 --save-dev</code></pre><p>å¯åŠ¨hooksï¼Œç”Ÿæˆ.huskyæ–‡ä»¶å¤¹</p><pre><code>npx husky install</code></pre><p>åœ¨package.jsonä¸­ç”ŸæˆprepareæŒ‡ä»¤ï¼ˆnpmç‰ˆæœ¬ &gt; 7.0ï¼‰</p><pre><code>npm set-script prepare &quot;husky install&quot;</code></pre><p>æ‰§è¡ŒprepareæŒ‡ä»¤</p><pre><code>npm run prepare</code></pre><p>æ·»åŠ  commitlint çš„ hook åˆ° huskyä¸­ï¼Œå¹¶æŒ‡ä»¤åœ¨ commit-msg çš„ hooks ä¸‹æ‰§è¡Œ npx â€“no-install commitlint â€“edit â€œ$1â€ æŒ‡ä»¤</p><pre><code>npx husky add .husky/commit-msg &#39;npx --no-install commitlint --edit &quot;$1&quot;&#39;</code></pre><p>pre-commitè§„é¿æ ¼å¼é”™è¯¯çš„æäº¤<br>é€šè¿‡ husky ç›‘æµ‹ pre-commit é’©å­ï¼Œåœ¨è¯¥é’©å­ä¸‹æ‰§è¡Œ npx eslint â€“ext .js,.vue src æŒ‡ä»¤æ¥å»è¿›è¡Œç›¸å…³æ£€æµ‹ï¼š</p><p>æ‰§è¡Œ npx husky add .husky/pre-commit â€œnpx eslint â€“ext .js,.vue srcâ€ æ·»åŠ  commit æ—¶çš„ hook ï¼ˆnpx eslint â€“ext .js,.vue src ä¼šåœ¨æ‰§è¡Œåˆ°è¯¥ hook æ—¶è¿è¡Œï¼‰</p><p>è¯¥æ“ä½œä¼šç”Ÿæˆå¯¹åº”æ–‡ä»¶ pre-commitï¼š</p><p>lint-staged è‡ªåŠ¨ä¿®å¤æ ¼å¼é”™è¯¯</p><pre><code class="json">  &quot;lint-staged&quot;: &#123;    &quot;src/**/*.&#123;js,vue&#125;&quot;: [      &quot;eslint --fix&quot;,      &quot;git add&quot;    ]  &#125;</code></pre><p>ä¿®æ”¹ .husky/pre-commit æ–‡ä»¶</p><pre><code class="js">#!/bin/sh. &quot;$(dirname &quot;$0&quot;)/_/husky.sh&quot;npx lint-staged</code></pre><h3 id="5ã€package-json"><a href="#5ã€package-json" class="headerlink" title="5ã€package.json"></a>5ã€package.json</h3><pre><code>  &quot;scripts&quot;: &#123;    &quot;prepare&quot;: &quot;husky install&quot;  &#125;,  &quot;config&quot;: &#123;    &quot;commitizen&quot;: &#123;      &quot;path&quot;: &quot;node_modules/cz-customizable&quot;    &#125;  &#125;,  &quot;gitHooks&quot;: &#123;    &quot;pre-commit&quot;: &quot;lint-staged&quot;  &#125;,  &quot;lint-staged&quot;: &#123;    &quot;src/**/*.&#123;js,vue&#125;&quot;: [      &quot;eslint --fix&quot;,      &quot;git add&quot;    ]  &#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> eslint </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>67ã€ant-design-vue-table</title>
      <link href="/2022/05/10/ant-design-vue-table/"/>
      <url>/2022/05/10/ant-design-vue-table/</url>
      
        <content type="html"><![CDATA[<p>columnåˆ—æè¿°æ•°æ®å¯¹è±¡ï¼ŒcustomRender:ç”Ÿæˆå¤æ‚æ•°æ®çš„æ¸²æŸ“å‡½æ•°ï¼Œå‚æ•°åˆ†åˆ«ä¸ºå½“å‰è¡Œçš„å€¼ï¼Œå½“å‰è¡Œæ•°æ®ï¼Œè¡Œç´¢å¼•ï¼Œ@return é‡Œé¢å¯ä»¥è®¾ç½®è¡¨æ ¼è¡Œ/åˆ—åˆå¹¶ã€‚</p><span id="more"></span><p>å°†åˆ—è¡¨é‡Œåç«¯è¿”å›çš„ç©ºæ•°æ®ä½¿ç”¨â€-â€œå¡«å……ã€‚</p><pre><code class="js">const columns = [&#123;    title:&#39;å¼€å§‹æ—¶é—´&#39;ï¼Œ    dataIndex:&#39;start_date&#39;,    key:&#39;start_date&#39;,    align:&#39;center&#39;,    ellipsis:true,    width:250,    customRender: function (text, row, index) &#123;        if (row.start_date == null) &#123;            return &#39;-&#39;        &#125; else &#123;            return row.start_date        &#125;    &#125;,&#125;]</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> ant-design-vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>66ã€Macç³»ç»Ÿå‡çº§åæ¡Œé¢æ–‡ä»¶å¤¹åŠæ–‡ä»¶æ¶ˆå¤±</title>
      <link href="/2022/04/19/mac-finder/"/>
      <url>/2022/04/19/mac-finder/</url>
      
        <content type="html"><![CDATA[<p>è§£å†³æ–¹å¼ï¼šç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤å³å¯</p><pre><code class="shell">defaults write com.apple.finder CreateDesktop -bool true; killall Finder// æ˜¾ç¤º/éšè—  éšè—æ–‡ä»¶command shift + .</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>65ã€å“åº”å¼åŸç†</title>
      <link href="/2022/04/12/reactive/"/>
      <url>/2022/04/12/reactive/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>1ã€ä»€ä¹ˆæ˜¯å“åº”å¼ï¼Ÿ</p><p>æ•°æ®å˜åŒ–å¯ä»¥è¢«æ£€æµ‹å¯¹è¿™ç§å˜åŒ–åšå‡ºå“åº”çš„æœºåˆ¶</p><p>2ã€Vueä¸ºä»€ä¹ˆéœ€è¦å“åº”å¼ï¼Ÿ</p><p>MVVMæ¡†æ¶éœ€è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜æŠ€æœ¯å°±æ˜¯è¿æ¥æ•°æ®å±‚å’Œè§†å›¾å±‚ï¼Œ<br>é€šè¿‡æ•°æ®é©±åŠ¨åº”ç”¨ï¼Œæ•°æ®å˜åŒ–ï¼Œè¯•å›¾æ›´æ–°ï¼Œè¦åšåˆ°è¿™ç‚¹å°±éœ€è¦å¯¹æ•°æ®åšå“åº”å¼å¤„ç†ï¼Œè¿™æ ·ä¸€æ—¦æ•°æ®å‘ç”Ÿå˜åŒ–å°±å¯ä»¥ç«‹å³åšå‡ºæ›´æ–°å¤„ç†ã€‚</p><p>3ã€å“åº”å¼çš„å¥½å¤„ï¼Ÿ</p><p>é€šè¿‡æ•°æ®å“åº”å¼åŠ ä¸Šè™šæ‹ŸDOMå’Œpatchç®—æ³•ï¼Œå¼€å‘äººå‘˜åªéœ€è¦æ“ä½œæ•°æ®ï¼Œå…³å¿ƒä¸šåŠ¡ï¼Œå®Œå…¨ä¸ç”¨æ¥è§¦ç¹ççš„DOMæ“ä½œï¼Œå¤§å¤§æå‡å¼€å‘æ•ˆç‡ï¼Œé™ä½å¼€å‘éš¾åº¦ã€‚</p><p>4ã€å¦‚ä½•å®ç°Vueçš„å“åº”å¼ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿ</p><p>Vue2è‚¿çš„æ•°æ®å“åº”å¼ä¼šæ ¹æ®æ•°æ®ç±»å‹æ¥åšä¸åŒå¤„ç†ï¼Œå¦‚æœæ˜¯å¯¹è±¡é‡‡ç”¨Object.defineProperty()çš„æ–¹å¼å®šä¹‰æ•°æ®æ‹¦æˆªï¼Œå½“æ•°æ®è¢«è®¿é—®æˆ–å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æ„ŸçŸ¥å¹¶åšå‡ºå“åº”ï¼›<br>å¦‚æœæ˜¯æ•°ç»„åˆ™é€šè¿‡è¦†ç›–æ•°ç»„å¯¹è±¡åŸå‹çš„7ä¸ªå˜æ›´æ–¹æ³•ï¼Œä½¿è¿™äº›æ–¹æ³•å¯ä»¥é¢å¤–çš„åšæ›´æ–°é€šçŸ¥ï¼Œä»è€Œä½œå‡ºå“åº”ã€‚<br>è¿™ç§æœºåˆ¶å¾ˆå¥½çš„è§£å†³äº†æ•°æ®å“åº”åŒ–é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼š<br>åˆå§‹åŒ–æ—¶çš„é€’å½’éå†ä¼šé€ æˆæ€§èƒ½æŸå¤±ï¼›æ–°å¢æˆ–è€…åˆ é™¤å±æ€§éœ€è¦ä½¿ç”¨Vue.set/deleteè¿™äº›ç‰¹æ®Šçš„APIæ‰èƒ½ç”Ÿæ•ˆï¼›å¯¹äºes6ä¸­æ–°äº§ç”Ÿçš„Mapã€Setè¿™äº›æ•°æ®ç»“æ„ä¸æ”¯æŒã€‚</p><pre><code class="js">function defineReactive(obj,key,val)&#123;  Object.defineProperty(obj,key,&#123;    get(key)&#123;&#125;,    set(key,val)&#123;&#125;  &#125;)&#125;</code></pre><p>5ã€Vue3å¦‚ä½•å®ç°å“åº”å¼ï¼Ÿ</p><p>åˆ©ç”¨es6çš„Proxyä»£ç†å“åº”å¼çš„æ•°æ®ã€‚<br>å¥½å¤„ï¼šä¸éœ€è¦ç‰¹æ®Šçš„apiï¼Œåˆå§‹åŒ–æ€§èƒ½å’Œå†…å­˜å°å·éƒ½å¾—åˆ°äº†å¤§å¹…æ”¹å–„<br>ç”±äºå“åº”åŒ–çš„å®ç°ä»£ç æŠ½å–ä¸ºç‹¬ç«‹çš„reactivityæŠ¥ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥çµæ´»çš„ä½¿ç”¨å®ƒï¼Œç¬¬ä¸‰æ–¹çš„æ‰©å±•å¼€å‘æ›´åŠ çš„çµæ´»</p><p>Proxyå±æ€§æ‹¦æˆªçš„åŸç†ï¼šåˆ©ç”¨getã€setã€deletePropertyè¿™3ä¸ªtrapå®ç°æ‹¦æˆª</p><pre><code class="js">function reactive(obj)&#123;  return new Proxy(obj,&#123;    get(target,key)&#123;&#125;,    set(target,key,val)&#123;&#125;,    deleteProperty(target,key)&#123;&#125;  &#125;)&#125;</code></pre><p>proxyæ›´å¿«çš„åŸå› ï¼šåˆå§‹åŒ–æ—¶æ‡’å¤„ç†ï¼Œç”¨æˆ·è®¿é—®æ‰åšæ‹¦æˆªå¤„ç†ï¼Œåˆå§‹åŒ–æ›´å¿«ã€‚</p><pre><code class="ts">// https://github1s.com/vuejs/core/blob/HEAD/packages/reactivity/src/baseHandlers.ts    if (isObject(res)) &#123;      // Convert returned value into a proxy as well. we do the isObject check      // here to avoid invalid value warning. Also need to lazy access readonly      // and reactive here to avoid circular dependency.      return isReadonly ? readonly(res) : reactive(res)    &#125;</code></pre><p>è½»é‡çš„ä¾èµ–å…³ç³»ä¿å­˜ï¼šåˆ©ç”¨WeakMap\Map\Setä¿å­˜å“åº”å¼æ•°æ®å’Œå‰¯ä½œç”¨ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>64ã€ant-design-vue-picker</title>
      <link href="/2022/04/06/ant-design-vue-picker/"/>
      <url>/2022/04/06/ant-design-vue-picker/</url>
      
        <content type="html"><![CDATA[<p>ant-design-vue é™åˆ¶æ—¶é—´é€‰æ‹©æ¡†,å±•ç¤º2å¤©å†…æ•°æ®ä¸”åªèƒ½é€‰æ‹©7æ—¥èŒƒå›´å†…ï¼ˆæˆªæ­¢æ—¶é—´ä¸å¾—è¶…è¿‡å½“æ—¥ï¼‰</p><span id="more"></span><p>1ã€template</p><pre><code class="html">&lt;a-form-item label=&quot;æ—¶é—´&quot;&gt;  &lt;a-range-picker    v-model=&quot;rangeTime&quot;    :allowClear=&quot;false&quot;    :disabled-date=&quot;disableDate&quot;    @change=&quot;onChange&quot;    @openChange=&quot;openChange&quot;    :placeholder=&quot;[&#39;å¼€å§‹æ—¶é—´&#39;, &#39;ç»“æŸæ—¶é—´&#39;]&quot;  /&gt;&lt;/a-form-item&gt;</code></pre><p>2ã€js</p><pre><code class="js">// datarangeTime: [moment(Date.now() - 1 * 24 * 3600 * 1000), moment(Date.now())],firstSelectTime: null,//  methods// æ—¥æœŸæ ¡éªŒdisableDate(current) &#123;  let nowDate = new Date()  nowDate.setMilliseconds(0)  nowDate.setSeconds(0)  nowDate.setMinutes(0)  nowDate.setHours(0)  let isOut30 = false  if (this.firstSelectTime) &#123;    if (      current &gt; this.firstSelectTime + 6 * 24 * 3600 * 1000 ||      current &lt; this.firstSelectTime - 6 * 24 * 3600 * 1000    ) &#123;      isOut30 = true    &#125;  &#125;  return current &amp;&amp; (current &gt; Date.now() || isOut30)&#125;,calendarChange(dates, dateStrings) &#123;  this.firstSelectTime = moment(Date.now() - 1 * 24 * 3600 * 1000)&#125;,openChange(status) &#123;  this.firstSelectTime = moment(Date.now() - 1 * 24 * 3600 * 1000)&#125;,</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> ant-design-vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>63ã€ant-design-vue v-model.trimä¸ç”Ÿæ•ˆ</title>
      <link href="/2022/04/06/ant-design-vue-trim/"/>
      <url>/2022/04/06/ant-design-vue-trim/</url>
      
        <content type="html"><![CDATA[<p>åŒelement-uiä¸€æ ·ï¼Œel-inputå’Œa-input  å‡ä¸æ”¯æŒv-modelä¿®é¥°ç¬¦ã€‚</p><span id="more"></span><p>è§£å†³åŠæ³•ï¼š</p><p>element-uiç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="html">&lt;el-form-item&gt;    &lt;el-input        placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot;        v-model=&quot;queryInfo.name&quot;        @blur=&quot;queryInfo.name=$event.target.value.trim()&quot;        clearable        maxlength=&quot;11&quot;    &gt;    &lt;/el-input&gt;&lt;/el-form-item&gt;</code></pre><p>ant-design-vueç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="html">&lt;a-form-item label=&quot;ç§Ÿæˆ·åç§°&quot;&gt;   &lt;a-input placeholder=&quot;è¯·è¾“å…¥ç§Ÿæˆ·åç§°&quot; v-model=&quot;queryInfo.name&quot; allowClear /&gt;&lt;/a-form-item&gt;</code></pre><p>å»ç©ºæ ¼å‡½æ•°</p><pre><code class="js">methods:&#123;    tirmHandler(target, prop)&#123;        if (target &amp;&amp; target[prop] &amp;&amp; target[prop].trim) &#123;            target[prop] = target[prop].trim()        &#125;    &#125;,    handleCnfirm()&#123;        this.trimHandler(this.queryInfo.name,&#39;name&#39;)    &#125;   &#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> ant-design-vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>62ã€æƒé™ç®¡ç†</title>
      <link href="/2022/03/12/permmsion/"/>
      <url>/2022/03/12/permmsion/</url>
      
        <content type="html"><![CDATA[<ol><li>æƒé™ç®¡ç†ä¸€èˆ¬éœ€æ±‚æ˜¯é¡µé¢æƒé™å’ŒæŒ‰é’®æƒé™çš„ç®¡ç†</li><li>å…·ä½“å®ç°çš„æ—¶å€™åˆ†åç«¯å’Œå‰ç«¯ä¸¤ç§æ–¹æ¡ˆï¼š<br>å‰ç«¯æ–¹æ¡ˆä¼šæŠŠæ‰€æœ‰è·¯ç”±ä¿¡æ¯åœ¨å‰ç«¯é…ç½®ï¼Œé€šè¿‡è·¯ç”±å®ˆå«è¦æ±‚ç”¨æˆ·ç™»å½•ï¼Œç”¨æˆ·ç™»å½•åæ ¹æ®è§’è‰²è¿‡æ»¤å‡ºè·¯ç”±è¡¨ã€‚æ¯”å¦‚æˆ‘ä¼šé…ç½®ä¸€ä¸ª asyncRoutesâ€˜æ•°ç»„ï¼Œéœ€è¦è®¤è¯çš„é¡µé¢åœ¨å…¶è·¯ç”±çš„â€˜metaâ€™ä¸­æ·»åŠ ä¸€ä¸ª roles*å­—æ®µï¼Œç­‰è·å–ç”¨æˆ·è§’è‰²ä¹‹åå–ä¸¤è€…çš„äº¤é›†ï¼Œè‹¥ç»“æœä¸ä¸ºç©ºåˆ™è¯´æ˜å¯ä»¥è®¿é—®ã€‚æ­¤è¿‡æ»¤è¿‡ç¨‹ç»“æŸï¼Œå‰©ä¸‹çš„è·¯ç”±å°±æ˜¯è¯¥ç”¨æˆ·èƒ½è®¿é—®çš„é¡µé¢ï¼Œæœ€åé€šè¿‡â€˜router.addRoutes(accessRoutes)Â°æ–¹å¼åŠ¨æ€æ·»åŠ è·¯ç”±å³å¯ã€‚<br>åç«¯æ–¹æ¡ˆä¼šæŠŠæ‰€æœ‰é¡µé¢è·¯ç”±ä¿¡æ¯å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·ç™»å½•çš„æ—¶å€™æ ¹æ®å…¶è§’è‰²æŸ¥è¯¢å¾—åˆ°å…¶èƒ½è®¿é—®çš„æ‰€æœ‰é¡µé¢è·¯ç”±ä¿¡æ¯è¿”å›ç»™å‰ç«¯ï¼Œå‰ç«¯å†é€šè¿‡ addRoutesâ€˜åŠ¨æ€æ·»åŠ è·¯ç”±ä¿¡æ¯<br>æŒ‰é’®æƒé™çš„æ§åˆ¶é€šå¸¸ä¼šå®ç°ä¸€ä¸ªæŒ‡ä»¤ï¼Œä¾‹å¦‚V-permissinâ€™ï¼Œå°†æŒ‰é’®è¦æ±‚è§’è‰²é€šè¿‡å€¼ä¼ ç»™vpermissionæŒ‡<br>ä»¤ï¼Œåœ¨æŒ‡ä»¤çš„ moutnedé’©å­ä¸­å¯ä»¥åˆ¤æ–­å½“å‰ç”¨æˆ·è§’è‰²å’ŒæŒ‰é’®æ˜¯å¦å­˜åœ¨äº¤é›†ï¼Œæœ‰åˆ™ä¿ç•™æŒ‰é’®ï¼Œæ— åˆ™ç§»é™¤æŒ‰é’®ã€‚</li><li>çº¯å‰ç«¯æ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œä¸éœ€è¦é¢å¤–æƒé™ç®¡ç†é¡µé¢ï¼Œä½†æ˜¯ç»´æŠ¤èµ·æ¥é—®é¢˜æ¯”è¾ƒå¤§ï¼Œæœ‰æ–°çš„é¡µé¢å’Œè§’è‰²éœ€æ±‚å°±è¦ä¿®æ”¹å‰ç«¯ä»£ç é‡æ–°æ‰“åŒ…éƒ¨ç½²ï¼›æœåŠ¡ç«¯æ–¹æ¡ˆå°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œé€šè¿‡ä¸“é—¨çš„è§’è‰²å’Œæƒé™ç®¡ç†é¡µé¢ï¼Œé…ç½®é¡µé¢å’ŒæŒ‰é’®æƒé™ä¿¡æ¯åˆ°æ•°æ®åº“ï¼Œåº”ç”¨æ¯æ¬¡ç™»é™†æ—¶è·å–çš„éƒ½æ˜¯æœ€æ–°çš„è·¯ç”±ä¿¡æ¯ï¼Œå¯è°“ä¸€åŠ³æ°¸é€¸ï¼</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>61ã€jså¦‚ä½•å°†base64è½¬æˆ16è¿›åˆ¶</title>
      <link href="/2022/03/01/base64To16/"/>
      <url>/2022/03/01/base64To16/</url>
      
        <content type="html"><![CDATA[<p>éœ€æ±‚ï¼šå°†base64å¯†æ–‡è§£å¯†æˆ16è¿›åˆ¶ã€‚</p><span id="more"></span><p>1ã€åŸç”Ÿjsçš„ç¼–ç (btoa)å’Œè§£ç (atob)</p><pre><code class="js">var baseStr = &quot;http://www.baidu.com&quot;var encodedData = window.btoa(baseStr)console.log(encodedData) //aHR0cDovL3d3dy5iYWlkdS5jb20=var decodedData = window.atob(encodedData)console.log(decodedData) // http://www.baidu.com</code></pre><p>2ã€base64è½¬16è¿›åˆ¶</p><pre><code class="js">    stringToHex(base64)&#123;      var raw = atob(base64)      var HEX = &#39;&#39;      for (var i = 0; i &lt; raw.length; i++) &#123;        var _hex = raw.charCodeAt(i).toString(16)        HEX += _hex.length == 2 ? _hex : &#39;0&#39; + _hex      &#125;      return HEX      // return HEX.toUpperCase()  å°†å­—ç¬¦ä¸²è½¬æ¢æˆå¤§å†™æ ¼å¼    &#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>60ã€ä»€ä¹ˆæ˜¯ä¸Šä½æœºã€ä¸‹ä½æœº?</title>
      <link href="/2022/02/28/Upper-Lower/"/>
      <url>/2022/02/28/Upper-Lower/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šä½æœºåœ¨ç³»ç»Ÿä¸­èµ·ä¸»æ§ä½œç”¨ï¼Œä¸»è¦ä½œä¸ºç³»ç»Ÿçš„è§„åˆ’æ§åˆ¶ï¼Œå±äºå†³ç­–å±‚ï¼›è€Œä¸‹ä½æœºæ˜¯å…·ä½“æ‰§è¡Œå±‚ï¼Œä¸»è¦å®Œæˆç³»ç»Ÿè§„åˆ’å±‚ä¸‹è¾¾çš„ä»»åŠ¡ã€‚</p><span id="more"></span><p>1.é€šå¸¸ä¸Šä½æœºå’Œä¸‹ä½æœºé€šè®¯å¯ä»¥é‡‡ç”¨ä¸åŒçš„é€šè®¯åè®®ï¼Œå¯ä»¥æœ‰RS232çš„ä¸²å£é€šè®¯æˆ–è€…é‡‡ç”¨RS485ä¸²è¡Œé€šè®¯ã€‚<br>å½“ç”¨è®¡ç®—æœºå’ŒPLCé€šè®¯çš„æ—¶å€™ï¼Œä¸ä½†å¯ä»¥é‡‡ç”¨ä¼ ç»Ÿçš„Då½¢å¼çš„ä¸²è¡Œé€šè®¯ï¼Œè¿˜å¯ä»¥é‡‡ç”¨æ›´é€‚åˆå·¥ä¸šæ§åˆ¶çš„åŒçº¿çš„PROFIBUS-DPé€šè®¯ã€‚</p><p>2.ä¸Šä½æœºä¸ä¸‹ä½æœºä¹‹é—´çš„å…³ç³»ï¼šä¸Šä½æœºç»™ä¸‹ä½æœºå‘é€æ§åˆ¶å‘½ä»¤ï¼Œä¸‹ä½æœºæ”¶åˆ°æ­¤å‘½ä»¤å¹¶æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œï¼›<br>ä¸Šä½æœºç»™ä¸‹ä½æœºå‘é€çŠ¶æ€è·å–å‘½ä»¤ï¼Œä¸‹ä½æœºæ”¶åˆ°æ­¤å‘½ä»¤åè°ƒç”¨ä¼ æ„Ÿå™¨æµ‹é‡ï¼Œç„¶åè½¬åŒ–ä¸ºæ•°å­—ä¿¡æ¯åé¦ˆç»™ä¸Šä½æœºï¼›ä¸‹ä½æœºä¸»åŠ¨å‘é€çŠ¶æ€ä¿¡æ¯æˆ–æŠ¥è­¦ä¿¡æ¯ç»™ä¸Šä½æœºã€‚</p><p>3.ä¸‹ä½æœºæŒ‡ç›´æ¥ä¸æœºå™¨ç›¸è¿æ¥çš„è®¡ç®—æœºæˆ–å•ç‰‡æœºï¼Œä¸€èˆ¬ç”¨äºæ¥æ”¶å’Œåé¦ˆä¸Šä½æœºçš„æŒ‡ä»¤ï¼Œå¹¶ä¸”æ ¹æ®æŒ‡ä»¤æ§åˆ¶æœºå™¨æ‰§è¡ŒåŠ¨ä½œä»¥åŠä»æœºå™¨ä¼ æ„Ÿå™¨è¯»å–æ•°æ®ã€‚<br>å…¸å‹è®¾å¤‡ç±»å‹ï¼šPLCï¼Œstm32ï¼Œ51ï¼ŒFPGAï¼ŒARMç­‰å„ç±»å¯ç¼–ç¨‹èŠ¯ç‰‡ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>59ã€ant-design-vue selectä¸‹æ‹‰æ¡†ç»„ä»¶</title>
      <link href="/2022/02/26/ant-design-vue/"/>
      <url>/2022/02/26/ant-design-vue/</url>
      
        <content type="html"><![CDATA[<p>é—®é¢˜ï¼šé€‰ä¸­selectçš„æŸä¸€é¡¹ï¼Œä¸‹æ‹‰æ¡†ä¸æ˜¾ç¤ºå·²é€‰æ‹©é¡¹ï¼Ÿ</p><span id="more"></span><p>è§£å†³æ–¹å¼ï¼š<br>    æ·»åŠ changäº‹ä»¶ï¼š</p><pre><code class="html">&lt;a-form-item label=&quot;çŠ¶æ€&quot;&gt;    &lt;a-select v-model=&quot;queryInfo.statusCode&quot; placeholder=&quot;è¯·é€‰æ‹©çŠ¶æ€&quot; allowClear @change=&quot;selectChange&quot;&gt;        &lt;a-select-option value=&quot;voltageStatusScope3&quot;&gt;ä¸€&lt;/a-select-option&gt;        &lt;a-select-option value=&quot;voltageStatusScope2&quot;&gt;äºŒ&lt;/a-select-option&gt;        &lt;a-select-option value=&quot;voltageStatusScope1&quot;&gt;ä¸‰&lt;/a-select-option&gt;    &lt;/a-select&gt;&lt;/a-form-item&gt;</code></pre><pre><code class="js">selectChange()&#123;    this.$forceUpdate();&#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> ant-design-vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>58ã€è§£å†³Homebrewå®‰è£…å¤±è´¥</title>
      <link href="/2022/02/25/homebrew/"/>
      <url>/2022/02/25/homebrew/</url>
      
        <content type="html"><![CDATA[<p>Homebrewæ˜¯ä¸€æ¬¾Mac OSå¹³å°ä¸‹çš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œæ‹¥æœ‰å®‰è£…ã€å¸è½½ã€æ›´æ–°ã€æŸ¥çœ‹ã€æœç´¢ç­‰å¾ˆå¤šå®ç”¨çš„åŠŸèƒ½ã€‚</p><span id="more"></span><h2 id="ä¸€ã€å®‰è£…"><a href="#ä¸€ã€å®‰è£…" class="headerlink" title="ä¸€ã€å®‰è£…"></a>ä¸€ã€å®‰è£…</h2><p>å®˜ç½‘å®‰è£…æ–¹å¼ï¼š</p><pre><code class="js">/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</code></pre><p>å®˜ç½‘å®‰è£…ä¸€ç›´å¤±è´¥ã€‚ã€‚ã€‚ã€‚(ä¸é€‚åˆå›½å†…ç”¨æˆ·)</p><h2 id="äºŒã€è§£å†³æ–¹å¼"><a href="#äºŒã€è§£å†³æ–¹å¼" class="headerlink" title="äºŒã€è§£å†³æ–¹å¼"></a>äºŒã€è§£å†³æ–¹å¼</h2><p>1ã€ç»ˆç«¯è¾“å…¥ï¼š</p><pre><code class="js">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</code></pre><p>2ã€é€‰æ‹©ä¸€ä¸ªé•œåƒ</p><blockquote><p>1ã€ä¸­ç§‘å¤§ä¸‹è½½æº<br>2ã€æ¸…åå¤§å­¦ä¸‹è½½æº â€¦</p></blockquote><p>3ã€æŸ¥çœ‹æœ¬åœ°è½¯ä»¶åº“åˆ—è¡¨</p><pre><code class="js">brew ls</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>57ã€Vue2/Vue3 å“åº”å¼åŸç†</title>
      <link href="/2022/02/24/vue2-defineProperty/"/>
      <url>/2022/02/24/vue2-defineProperty/</url>
      
        <content type="html"><![CDATA[<p>Vueå®˜ç½‘ï¼šå½“æŠŠä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ä¼ å…¥Vueå®ä¾‹ä½œä¸ºdataé€‰é¡¹ï¼ŒVueå°†éå†æ­¤å¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œå¹¶ä½¿ç”¨Object.definePropertyæŠŠè¿™äº›æ•°æ˜Ÿæ˜Ÿå…¨éƒ¨è½¬åŒ–ä¸ºgetter/setterã€‚Object.definePropertyæ˜¯ES5ä¸­ä¸€ä¸ªæ— æ³•shimçš„ç‰¹æ€§ï¼ˆæŸ¥äº†ä¸€ä¸‹shimçš„æ„æ€ï¼šå°±æ˜¯å¯ä»¥å°†æ–°çš„APIå¼•å…¥åˆ°æ—§çš„ç¯å¢ƒä¸­ï¼Œè€Œä¸”ä»…é ç¯å¢ƒä¸­çš„å·²æœ‰æ‰‹æ®µå®ç°ï¼ŒObejct.definePropertyæ— æ³•åœ¨ä½çº§æµè§ˆå™¨ä¸­çš„æ–¹æ³•å®ç°ï¼‰ï¼Œè¿™ä¹Ÿå°±æ˜¯Vueä¸æ”¯æŒIE8ä»¥åŠæ›´ä½ç‰ˆæœ¬æµè§ˆå™¨çš„åŸå› ã€‚</p><span id="more"></span><h2 id="ä¸€ã€Vueæ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§æ·»åŠ æˆ–åˆ é™¤"><a href="#ä¸€ã€Vueæ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§æ·»åŠ æˆ–åˆ é™¤" class="headerlink" title="ä¸€ã€Vueæ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§æ·»åŠ æˆ–åˆ é™¤"></a>ä¸€ã€Vueæ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§æ·»åŠ æˆ–åˆ é™¤</h2><p>Object.defineProperty æ²¡æœ‰å¯¹å¯¹è±¡çš„æ–°å±æ€§è¿›â¾å±æ€§åŠ«æŒ </p><blockquote><p>åŸå› ï¼šç”±äºVueä¼šåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹å¯¹è±¡çš„å±æ€§æ‰§è¡Œgetter/setterè½¬åŒ–ï¼Œæ‰€ä»¥å±æ€§å¿…é¡»åœ¨dataå¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®©Vueå°†å®ƒè½¬æ¢ä¸ºå“åº”å¼çš„ã€‚</p></blockquote><pre><code class="js">var vm = new Vue(&#123;    data:&#123;        a:1    &#125;&#125;)vm.a æ˜¯å“åº”å¼vm.b æ˜¯éå“åº”å¼</code></pre><p>è§£å†³æ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§çš„å¢åŠ ã€åˆ é™¤çš„æ–¹æ³•ï¼šVue.set(object,propertyName,value)(å¢åŠ å±æ€§)ã€Vue.delete()ï¼ˆåˆ é™¤å±æ€§ï¼‰</p><h2 id="äºŒã€Vueä¸èƒ½æ£€æµ‹æ•°ç»„çš„å˜åŠ¨"><a href="#äºŒã€Vueä¸èƒ½æ£€æµ‹æ•°ç»„çš„å˜åŠ¨" class="headerlink" title="äºŒã€Vueä¸èƒ½æ£€æµ‹æ•°ç»„çš„å˜åŠ¨"></a>äºŒã€Vueä¸èƒ½æ£€æµ‹æ•°ç»„çš„å˜åŠ¨</h2><p>æ•°ç»„æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„JavaScriptå¯¹è±¡ï¼ŒVueæ²¡æœ‰å¯¹æ•°ç»„è¿›â¾ Object.defineProperty çš„å±æ€§åŠ«æŒï¼Œæ‰€ä»¥ä¼šå­˜åœ¨çš„é—®é¢˜ï¼š</p><p>ä¸èƒ½æ£€æµ‹æ•°ç»„å˜åŠ¨çš„2ç±»é—®é¢˜ï¼š</p><blockquote><p>1ã€å½“ä½ åˆ©ç”¨ç´¢å¼•ç›´æ¥è®¾ç½®ä¸€ä¸ªæ•°ç»„é¡¹æ—¶ï¼Œä¾‹å¦‚ï¼švm.items[indexOfItem] = newValue<br>2ã€å½“ä½ ä¿®æ”¹æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œä¾‹å¦‚ï¼švm.items.length = newLength</p></blockquote><pre><code class="js">var vm = new Vue(&#123;    data:&#123;        items: [&#39;a&#39;&#39;,&#39;b&#39;,&#39;c&#39;]    &#125;&#125;)vvm.items[1] = &#39;x&#39; // éå“åº”å¼vm.items.length = 2 // éå“åº”å¼</code></pre><p>è§£å†³åˆ©ç”¨ç´¢å¼•å€¼è®¾ç½®ä¸€ä¸ªæ•°ç»„é¡¹çš„æ–¹æ³•ï¼š</p><blockquote><p>vm.$set(vm.items, indexOfItem, newValue)</p></blockquote><p>è§£å†³ç¬¬2ä¸ªé—®é¢˜ï¼š</p><blockquote><p>vm.items.splice(newLength)  // Array.prototype.slice</p></blockquote><h2 id="ä¸‰ã€Vue2-ä¸ºä»€ä¹ˆä¸åŠ«æŒæ•°ç»„ï¼Ÿ"><a href="#ä¸‰ã€Vue2-ä¸ºä»€ä¹ˆä¸åŠ«æŒæ•°ç»„ï¼Ÿ" class="headerlink" title="ä¸‰ã€Vue2 ä¸ºä»€ä¹ˆä¸åŠ«æŒæ•°ç»„ï¼Ÿ"></a>ä¸‰ã€Vue2 ä¸ºä»€ä¹ˆä¸åŠ«æŒæ•°ç»„ï¼Ÿ</h2><p>Vue2ä½¿ç”¨çš„Object.definePropertyæ— æ³•ç›‘æ§åˆ°æ•°ç»„ä¸‹æ ‡çš„å˜åŒ–ï¼Œå¯¼è‡´é€šè¿‡æ•°ç»„ä¸‹æ ‡æ·»åŠ å…ƒç´ ï¼Œä¸èƒ½å®æ—¶å“åº”ï¼› Object.definePropertyæ˜¯å¯ä»¥ç›‘å¬æ•°ç»„ä¸‹æ ‡å˜åŒ–çš„ï¼Œå¯¹äºjavascriptæ¥è®²ï¼Œæ•°ç»„ä¹Ÿæ˜¯å±äºObjectã€‚</p><p>å°¤é›¨æºªè¯´è¿‡ï¼šä¸ºäº†æ€§èƒ½ï¼ï¼ï¼</p><p>åŸå› ï¼š</p><blockquote><p>1ã€å› ä¸ºæ•°ç»„çš„ä½ç½®ä¸å›ºå®šï¼Œæ•°é‡å¤šå˜ï¼Œæ­£å¸¸å¯¹è±¡keyå¯¹åº”valueä¸€èˆ¬ä¸ä¼šå˜ï¼Œä½†æ˜¯å¦‚æœæ•°ç»„åˆ é™¤äº†æŸä¸ªå…ƒç´ ã€‚æ¯”å¦‚ç¬¬ä¸€ä¸ªå…ƒç´ è¢«åˆ é™¤æˆ–è€…å¤´éƒ¨å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°†å¯¼è‡´åé¢æ‰€æœ‰çš„keyå¯¹åº”valueé”™ä½ï¼Œå¦‚æœ6ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±ä¼šè§¦å‘5æ¬¡setã€‚<br>2ã€æ•°ç»„å…ƒç´ å¯èƒ½éå¸¸éå¸¸å¤šï¼Œæ¯ä¸ªå…ƒç´ è¿›è¡ŒåŠ«æŒæœ‰ä¸€å®šæµªè´¹ï¼Œè¿™å¯èƒ½æ˜¯Evan youå¯¹æ€§èƒ½çš„è€ƒè™‘ã€‚<br>3ã€Vueå°†æ•°ç»„çš„7ä¸ªå˜å¼‚æ–¹æ³•è¿›è¡Œäº†é‡å†™ï¼Œä¹Ÿå°±æ˜¯æ›´æ”¹äº†ArrayåŸå‹ä¸Šçš„æ–¹æ³•è¾¾åˆ°åŠ«æŒå˜åŒ–ã€‚</p></blockquote><p>Vue3 çš„ proxy<br>Object.definePropertyåªèƒ½åŠ«æŒå¯¹è±¡çš„å±æ€§ï¼Œä»è€Œéœ€è¦å¯¹æ¯ä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå±æ€§è¿›è¡Œéå†ï¼Œå¦‚æœï¼Œå±æ€§å€¼æ˜¯å¯¹è±¡ï¼Œè¿˜éœ€è¦æ·±åº¦éå†ã€‚</p><p>Proxyå¯ä»¥åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><p>æ‰€ä»¥ä¸ºä»€ä¹ˆproxyä¼˜äºObject.definePropertyï¼Ÿ</p><p>Object.definePropertyå¿…é¡»â€œé¢„å…ˆâ€åŠ«æŒå±æ€§ã€‚è¢«åŠ«æŒçš„å±æ€§æ‰ä¼šè¢«ç›‘å¬åˆ°ã€‚æ‰€ä»¥åæ·»åŠ çš„å±æ€§ï¼Œéœ€è¦æ‰‹åŠ¨å†æ¬¡åŠ«æŒã€‚</p><p>è€Œproxyä»£ç†äº†æ•´ä¸ªå¯¹è±¡ï¼Œä¸éœ€è¦é¢„å…ˆåŠ«æŒå±æ€§ï¼Œè€Œæ˜¯åœ¨è·å–/ä¿®æ”¹çš„æ—¶å€™ï¼Œé€šè¿‡get/setæ–¹æ³•æ¥å‘Šè¯‰ä½ keyã€‚æ‰€ä»¥ä¸ç®¡å¦‚ä½•æ–°å¢å±æ€§ï¼Œæ€»æ˜¯èƒ½è¢«æ•è·åˆ°ã€‚</p><h2 id="å››ã€Vueå“åº”å¼åŸç†"><a href="#å››ã€Vueå“åº”å¼åŸç†" class="headerlink" title="å››ã€Vueå“åº”å¼åŸç†"></a>å››ã€Vueå“åº”å¼åŸç†</h2><p>æ•´ä½“æ€è·¯æ˜¯æ•°æ®åŠ«æŒ+è§‚å¯Ÿè€…æ¨¡å¼ï¼š</p><p>å¯¹è±¡å†…éƒ¨é€šè¿‡ defineReactive â½…æ³•ï¼Œä½¿â½¤ Object.defineProperty å°†å±æ€§è¿›â¾åŠ«æŒï¼ˆåªä¼šåŠ«æŒå·²ç»å­˜åœ¨çš„å±æ€§ï¼‰ï¼Œæ•°ç»„åˆ™æ˜¯é€šè¿‡é‡å†™æ•°ç»„â½…æ³•æ¥å®ç°ã€‚å½“â»šâ¾¯ä½¿â½¤å¯¹åº”å±æ€§æ—¶ï¼Œæ¯ä¸ªå±æ€§éƒ½æ‹¥æœ‰â¾ƒâ¼°çš„ dep å±æ€§ï¼Œå­˜æ”¾ä»–æ‰€ä¾èµ–çš„ watcher ï¼ˆä¾èµ–æ”¶é›†ï¼‰ï¼Œå½“å±æ€§å˜åŒ–åä¼šé€šçŸ¥â¾ƒâ¼°å¯¹åº”çš„ watcher å»æ›´æ–°(æ´¾å‘æ›´æ–°)ã€‚</p><blockquote><p>Vueå“åº”å¼åŸç†çš„æ ¸å¿ƒï¼šå°±æ˜¯Observerã€Depã€Watcherã€‚Observerä¸­è¿›è¡Œå“åº”å¼çš„ç»‘å®šï¼Œåœ¨æ•°æ®è¢«è¯»çš„æ—¶å€™ï¼Œè§¦å‘getæ–¹æ³•ï¼Œæ‰§è¡ŒDepæ¥æ”¶é›†ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯æ”¶é›†Watcherã€‚åœ¨æ•°æ®è¢«æ”¹çš„æ—¶å€™ï¼Œè§¦å‘setæ–¹æ³•ï¼Œé€šè¿‡å¯¹åº”çš„æ‰€æœ‰ä¾èµ–(Watcher)ï¼Œå»æ‰§è¡Œæ›´æ–°ã€‚æ¯”å¦‚watchå’Œcomputedå°±æ‰§è¡Œå¼€å‘è€…è‡ªå®šä¹‰çš„å›è°ƒæ–¹æ³•ã€‚</p></blockquote><h2 id="äº”ã€ä¸ºä»€ä¹ˆåªå¯¹å¯¹è±¡åŠ«æŒï¼Œå¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œé‡å†™ï¼Ÿ"><a href="#äº”ã€ä¸ºä»€ä¹ˆåªå¯¹å¯¹è±¡åŠ«æŒï¼Œå¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œé‡å†™ï¼Ÿ" class="headerlink" title="äº”ã€ä¸ºä»€ä¹ˆåªå¯¹å¯¹è±¡åŠ«æŒï¼Œå¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œé‡å†™ï¼Ÿ"></a>äº”ã€ä¸ºä»€ä¹ˆåªå¯¹å¯¹è±¡åŠ«æŒï¼Œå¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œé‡å†™ï¼Ÿ</h2><blockquote><p>å› ä¸ºå¯¹è±¡æœ€å¤šä¹Ÿå°±â¼â¼—ä¸ªå±æ€§ï¼Œæ‹¦æˆªèµ·æ¥æ•°é‡ä¸å¤šï¼Œä½†æ˜¯æ•°ç»„å¯èƒ½ä¼šæœ‰â¼ç™¾â¼åƒé¡¹ï¼Œæ‹¦æˆªèµ·æ¥â¾®å¸¸è€—æ€§èƒ½ï¼Œæ‰€ä»¥ç›´æ¥é‡å†™æ•°ç»„åŸå‹ä¸Šçš„â½…æ³•ï¼Œæ˜¯â½è¾ƒèŠ‚çœæ€§èƒ½çš„â½…æ¡ˆ</p></blockquote><h2 id="å…­ã€å®ç°ä¸€ä¸ªæ•°æ®åŒå‘ç»‘å®š"><a href="#å…­ã€å®ç°ä¸€ä¸ªæ•°æ®åŒå‘ç»‘å®š" class="headerlink" title="å…­ã€å®ç°ä¸€ä¸ªæ•°æ®åŒå‘ç»‘å®š"></a>å…­ã€å®ç°ä¸€ä¸ªæ•°æ®åŒå‘ç»‘å®š</h2><pre><code class="js">    &lt;input id=&quot;hangdleInput&quot; type=&quot;text&quot;&gt;    &lt;span id=&quot;hangdleValue&quot;&gt;&lt;/span&gt;    &lt;script&gt;        let obj =&#123;&#125;        let input = document.getElementById(&#39;hangdleInput&#39;)        let span = document.getElementById(&#39;hangdleValue&#39;)        Object.defineProperty(obj,&#39;text&#39;,&#123;            configurable: true,            enumerable: true,            get()&#123;                console.log(&#39;get data&#39;)            &#125;,            set(newVal)&#123;                console.log(&#39;set data&#39;)                input.value = newVal                span.innerHTML = newVal            &#125;        &#125;)        input.addEventListener(&#39;keyup&#39;,function(e)&#123;            obj.text = e.target.value        &#125;)    &lt;/script&gt;</code></pre><h2 id="ä¸ƒã€Vue3-Proxy"><a href="#ä¸ƒã€Vue3-Proxy" class="headerlink" title="ä¸ƒã€Vue3 Proxy"></a>ä¸ƒã€Vue3 Proxy</h2><blockquote><p>Vue2 çš„å“åº”å¼æ˜¯åŸºäº Object.defineProperty å®ç°çš„<br>Vue3 çš„å“åº”å¼æ˜¯åŸºäº ES6 çš„ Proxy æ¥å®ç°çš„</p></blockquote><p>åœ¨Vue2.0ä¸­ï¼Œæ•°æ®åŒå‘ç»‘å®šå°±æ˜¯é€šè¿‡Object.definePropertyå»ç›‘å¬å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œç„¶ååœ¨get/setæ–¹æ³•ä¸­é€šè¿‡å‘å¸ƒè®¢é˜…è€…æ¨¡å¼æ¥å®ç°çš„æ•°æ®å“åº”ï¼Œä½†æ˜¯å­˜åœ¨ä¸€å®šçš„ç¼ºé™·ï¼Œæ¯”å¦‚åªèƒ½ç›‘å¬å·²å­˜åœ¨çš„å±æ€§ï¼Œå¯¹äºæ–°å¢åˆ é™¤å±æ€§å°±æ— èƒ½ä¸ºåŠ›äº†ï¼ŒåŒæ—¶æ— æ³•ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼Œæ‰€ä»¥åœ¨Vue3.0ä¸­å°†å…¶æ¢æˆäº†åŠŸèƒ½æ›´å¼ºå¤§çš„ES6 Proxyã€‚</p><p>Vue2çš„å“åº”å¼å‡½æ•°:</p><pre><code class="js">// å“åº”å¼å‡½æ•°function reactive(obj, key, value) &#123;  Object.defineProperty(data, key, &#123;    get() &#123;      console.log(`è®¿é—®äº†$&#123;key&#125;å±æ€§`)      return value    &#125;,    set(val) &#123;      console.log(`å°†$&#123;key&#125;ç”±-&gt;$&#123;value&#125;-&gt;è®¾ç½®æˆ-&gt;$&#123;val&#125;`)      if (value !== val) &#123;        value = val      &#125;    &#125;  &#125;)&#125;const data = &#123;  name: &#39;jude&#39;,  age: 18&#125;Object.keys(data).forEach(key =&gt; reactive(data, key, data[key]))console.log(data.name)// è®¿é—®äº†nameå±æ€§// judedata.name = &#39;summer&#39; // å°†nameç”±-&gt;jude-&gt;è®¾ç½®æˆ-&gt;summerconsole.log(data.name)// è®¿é—®äº†nameå±æ€§// summer</code></pre><p>Vue3çš„å“åº”å¼å‡½æ•°ï¼š</p><pre><code class="js">const data = &#123;  name: &#39;jude&#39;,  age: 18&#125;function reactive(target) &#123;  const handler = &#123;    get(target, key, receiver) &#123;      console.log(`è®¿é—®äº†$&#123;key&#125;å±æ€§`)      return Reflect.get(target, key, receiver)    &#125;,    set(target, key, value, receiver) &#123;      console.log(`å°†$&#123;key&#125;ç”±-&gt;$&#123;target[key]&#125;-&gt;è®¾ç½®æˆ-&gt;$&#123;value&#125;`)      Reflect.set(target, key, value, receiver)    &#125;  &#125;  return new Proxy(target, handler)&#125;const proxyData = reactive(data)console.log(proxyData.name)// è®¿é—®äº†nameå±æ€§// judeproxyData.name = &#39;summer&#39;// å°†nameç”±-&gt;jude-&gt;è®¾ç½®æˆ-&gt;summerconsole.log(proxyData.name)// è®¿é—®äº†nameå±æ€§// summer</code></pre><pre><code class="js">/*** target: è¦å…¼å®¹çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ•°ç»„,å‡½æ•°ç­‰ç­‰* handler: æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†å¯ä»¥ç›‘å¬è¿™ä¸ªå¯¹è±¡çš„è¡Œä¸ºå‡½æ•°ï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­é‡Œé¢çš„getä¸set* åŒæ—¶ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡proxy, ä¸ºäº†èƒ½å¤Ÿè§¦å‘handleré‡Œé¢çš„å‡½æ•°ï¼Œå¿…é¡»è¦ä½¿ç”¨è¿”å›å€¼å»è¿›è¡Œå…¶ä»–æ“ä½œï¼Œæ¯”å¦‚ä¿®æ”¹å€¼*/const proxy = new Proxy(target, handler)</code></pre><h3 id="1ã€handle-getã€handle-setã€handle-hasã€handler-deleteProperty"><a href="#1ã€handle-getã€handle-setã€handle-hasã€handler-deleteProperty" class="headerlink" title="1ã€handle.getã€handle.setã€handle.hasã€handler.deleteProperty"></a>1ã€handle.getã€handle.setã€handle.hasã€handler.deleteProperty</h3><blockquote><p>å½“é€šè¿‡proxyå»è¯»å–å¯¹è±¡é‡Œé¢çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥åˆ°geté’©å­å‡½æ•°é‡Œé¢<br>å½“é€šè¿‡proxyå»ä¸ºå¯¹è±¡è®¾ç½®ä¿®æ”¹å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥åˆ°seté’©å­å‡½æ•°é‡Œé¢<br>å½“ä½¿ç”¨inåˆ¤æ–­å±æ€§æ˜¯å¦åœ¨proxyä»£ç†å¯¹è±¡é‡Œé¢æ—¶ï¼Œä¼šè§¦å‘has<br>å½“ä½¿ç”¨deleteå»åˆ é™¤å¯¹è±¡é‡Œé¢çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥deletePropertyé’©å­å‡½æ•°</p></blockquote><h3 id="2ã€Reflect"><a href="#2ã€Reflect" class="headerlink" title="2ã€Reflect"></a>2ã€Reflect</h3><blockquote><p>åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬è·å–å±æ€§çš„å€¼æˆ–è€…ä¿®æ”¹å±æ€§çš„å€¼éƒ½æ˜¯é€šè¿‡ç›´æ¥æ“ä½œtargetæ¥å®ç°çš„ï¼Œä½†å®é™…ä¸ŠES6å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†åœ¨Proxyå†…éƒ¨è°ƒç”¨å¯¹è±¡çš„é»˜è®¤è¡Œä¸ºçš„API: Reflectã€‚</p></blockquote><pre><code class="js">const obj = &#123;&#125;const proxy = new Proxy(obj, &#123;  get(target,key,receiver) &#123;    return Reflect.get(target,key,receiver)  &#125;&#125;)</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>56ã€HTTPçš„è¯·æ±‚æ–¹æ³•ã€çŠ¶æ€ç </title>
      <link href="/2022/02/23/http/"/>
      <url>/2022/02/23/http/</url>
      
        <content type="html"><![CDATA[<p>æ•´ç†ä¸€ä¸‹HTTPçš„è¯·æ±‚æ–¹æ³•ã€GET/POSTæ–¹æ³•çš„åŒºåˆ«ã€HTTPçŠ¶æ€ç ã€è·¨åŸŸè§£å†³æ–¹æ³•ï¼Œæœ€è¿‘é¢è¯•ä¹Ÿè¢«é—®åˆ°è¿™äº›é—®é¢˜ã€‚</p><span id="more"></span><h2 id="ä¸€ã€HTTPçš„è¯·æ±‚æ–¹æ³•"><a href="#ä¸€ã€HTTPçš„è¯·æ±‚æ–¹æ³•" class="headerlink" title="ä¸€ã€HTTPçš„è¯·æ±‚æ–¹æ³•"></a>ä¸€ã€HTTPçš„è¯·æ±‚æ–¹æ³•</h2><blockquote><p>GET: é€šå¸¸æ˜¯ç”¨æ¥è·å–èµ„æº<br>POSTï¼š æäº¤æ•°æ®<br>PUTï¼š ä¿®æ”¹æ•°æ®<br>DELETEï¼š åˆ é™¤èµ„æº<br>HEAD: è·å–èµ„æºçš„å…ƒä¿¡æ¯</p></blockquote><h2 id="äºŒã€GETå’ŒPOSTè¯·æ±‚çš„åŒºåˆ«ï¼Ÿ"><a href="#äºŒã€GETå’ŒPOSTè¯·æ±‚çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="äºŒã€GETå’ŒPOSTè¯·æ±‚çš„åŒºåˆ«ï¼Ÿ"></a>äºŒã€GETå’ŒPOSTè¯·æ±‚çš„åŒºåˆ«ï¼Ÿ</h2><p>ä»å­—é¢æ„æ€æ¥è®²ï¼ŒGETå°±æ˜¯æ‹¿ã€è·å¾—ï¼ŒPOSTå°±æ˜¯ç»™ã€é‚®å¯„ã€‚</p><p>1ã€ç¼“å­˜è§’åº¦ï¼š GETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜ä¸‹æ¥ï¼Œç•™ä¸‹å†å²è®°å½•ï¼Œè€ŒPOSTé»˜è®¤ä¸ä¼šï¼›</p><p>2ã€ç¼–ç è§’åº¦ï¼š GETåªèƒ½è¿›è¡ŒURLç¼–ç ï¼Œåªèƒ½æ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTæ²¡æœ‰é™åˆ¶ï¼›</p><p>3ã€å‚æ•°è§’åº¦ï¼š GETä¸€èˆ¬å°†å‚æ•°æ”¾åœ¨URLä¸­ï¼Œå­˜åœ¨å®‰å…¨é—®é¢˜ï¼ŒPOSTæ”¾åœ¨è¯·æ±‚ä½“ä¸­ï¼Œé€‚åˆä¼ è¾“æ•æ„Ÿä¿¡æ¯</p><p>4ã€å¹‚ç­‰æ€§è§’åº¦ï¼š GETæ˜¯å¹‚ç­‰ï¼ŒPOSTåˆ™ä¸æ˜¯ã€‚ï¼ˆå¹‚ç­‰è¡¨ç¤ºæ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œç»“æœä¹Ÿæ˜¯ç›¸åŒçš„ï¼‰</p><p>5ã€TCPè§’åº¦ï¼šGETä¼šå°†è¯·æ±‚æŠ¥æ–‡ä¸€æ¬¡æ€§å‘å‡ºå»ï¼Œè€ŒPOSTä¼šåˆ†ä¸º2ä¸ªTCPæ•°æ®åŒ…,å…ˆå‘headeréƒ¨åˆ†ï¼Œå¦‚æœæœåŠ¡å™¨å“åº”100ï¼Œå†å‘bodyéƒ¨åˆ†ã€‚ï¼ˆFirefoxæµè§ˆå™¨çš„POSTè¯·æ±‚åªä¼šå‘ä¸€ä¸ªTCPåŒ…ï¼‰ã€‚</p><h2 id="ä¸‰ã€HTTPçŠ¶æ€ç "><a href="#ä¸‰ã€HTTPçŠ¶æ€ç " class="headerlink" title="ä¸‰ã€HTTPçŠ¶æ€ç "></a>ä¸‰ã€HTTPçŠ¶æ€ç </h2><blockquote><p>1XX: åè®®å¤„ç†çš„ä¸­é—´çŠ¶æ€ï¼Œè¿˜éœ€è¦åç»­æ“ä½œ<br>2XX: æˆåŠŸçŠ¶æ€<br>3XX: é‡å®šå‘çŠ¶æ€ï¼Œèµ„æºä½ç½®å‘ç”Ÿå˜åŠ¨ï¼Œéœ€è¦é‡æ–°è¯·æ±‚<br>4XX: è¯·æ±‚æŠ¥æ–‡æœ‰è¯¯<br>5XX: æœåŠ¡ç«¯å‘ç”Ÿé”™è¯¯</p></blockquote><p>é€šå¸¸åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸ç”¨åˆ°çš„çŠ¶æ€ç åŒ…æ‹¬ï¼š<br>200ï¼šè¿™ä¸ªæœ€å¸¸è§ï¼ŒæˆåŠŸçš„çŠ¶æ€ç ï¼Œé€šå¸¸åœ¨å“åº”ä½“ä¸­æ”¾æœ‰æ•°æ®<br>204ï¼šä¸200çš„åŒºåˆ«å°±åœ¨äºå“åº”å¤´åæ²¡æœ‰bodyæ•°æ®<br>206ï¼šè¡¨ç¤ºéƒ¨åˆ†å†…å®¹ï¼Œè¿™ä¸ªçŠ¶æ€ç åœ¨æ–­ç‚¹ç»­ä¼ ä¸­å¯ä»¥çœ‹åˆ°ï¼ˆå“åº”å¤´å­—æ®µä¸ºï¼šContent-Rangeï¼‰</p><p>301: æ°¸ä¹…é‡å®šå‘<br>302: ä¸´æ—¶é‡å®šå‘<br>304: åå•†ç¼“å­˜å‘½ä¸­æ—¶è¿”å›è¿™ä¸ª304çŠ¶æ€ç </p><p>403ï¼š æœåŠ¡å™¨ç¦æ­¢è®¿é—®<br>404ï¼š èµ„æºæœªæ‰¾åˆ°ï¼Œåœ¨æœåŠ¡å™¨ä¸Šæœªæ‰¾åˆ°ç›¸åº”çš„èµ„æº</p><p>500ï¼š æœåŠ¡å™¨å‡ºé”™äº†ï¼Œä¸€èˆ¬å°†æŠ¥é”™ä¿¡æ¯å‘é€ç»™åç«¯ï¼Œåç«¯åŒå­¦æ¥æ£€æŸ¥</p><h2 id="å››ã€HTTPã€HTTP-2ç‰¹ç‚¹"><a href="#å››ã€HTTPã€HTTP-2ç‰¹ç‚¹" class="headerlink" title="å››ã€HTTPã€HTTP/2ç‰¹ç‚¹"></a>å››ã€HTTPã€HTTP/2ç‰¹ç‚¹</h2><h3 id="1ã€httpç‰¹ç‚¹"><a href="#1ã€httpç‰¹ç‚¹" class="headerlink" title="1ã€httpç‰¹ç‚¹"></a>1ã€httpç‰¹ç‚¹</h3><p>1ã€çµæ´»å¯æ‹“å±•ã€‚è¯­ä¹‰è‡ªç”±ï¼Œåªè§„å®šäº†åŸºæœ¬æ ¼å¼ï¼›ä¼ è¾“å½¢å¼å¤šæ ·æ€§ï¼Œå¯ä¼ è¾“æ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ç­‰ä»»æ„æ•°æ®ã€‚</p><p>2ã€å¯é ä¼ è¾“ã€‚åŸºäºTCP/IPï¼Œç»§æ‰¿äº†TCPç‰¹æ€§ã€‚</p><p>3ã€è¯·æ±‚-åº”ç­”ã€‚ä¸€å‘ä¸€æ”¶ã€æœ‰æ¥æœ‰å›</p><p>4ã€æ— çŠ¶æ€ã€‚æ¯æ¬¡çš„httpè¯·æ±‚éƒ½è¾“ç‹¬ç«‹ã€æ— å…³çš„ï¼Œé»˜è®¤ä¸éœ€è¦ä¿ç•™çŠ¶æ€ä¿¡æ¯ã€‚</p><h3 id="2ã€httpç¼ºç‚¹"><a href="#2ã€httpç¼ºç‚¹" class="headerlink" title="2ã€httpç¼ºç‚¹"></a>2ã€httpç¼ºç‚¹</h3><p>1ã€æ— çŠ¶æ€ã€‚åŒºåˆ†åœºæ™¯ï¼Œæ— çŠ¶æ€æ˜¯ä¼˜ç‚¹ä¹Ÿæ˜¯ç¼ºç‚¹ï¼Œä¾‹å¦‚é•¿é“¾æ¥ä¸­ï¼Œæ— çŠ¶æ€å°±æ˜¯ç¼ºç‚¹ï¼›å¦‚æœå°±æ˜¯è·å–ä¸€äº›æ•°æ®ï¼Œä¸éœ€è¦ä¿å­˜è¿æ¥ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ— çŠ¶æ€åè€Œå‡å°‘äº†ç½‘ç»œå¼€é”€ï¼Œhttpæˆäº†ä¼˜ç‚¹ã€‚</p><p>2ã€æ˜æ–‡ä¼ è¾“ï¼šåè®®é‡Œçš„å¤´éƒ¨æŠ¥æ–‡ä¸ä½¿ç”¨äºŒè¿›åˆ¶æ•°æ®ï¼Œè€Œæ˜¯æ–‡æœ¬å½¢å¼ã€‚è°ƒè¯•ä¾¿åˆ©çš„åŒæ—¶ï¼ŒhttpæŠ¥æ–‡ä¿¡æ¯æš´éœ²ç»™äº†å¤–ç•Œï¼Œå®¹æ˜“è¢«å¤–ç•Œæ”»å‡»ã€‚</p><h3 id="3ã€https-2çš„æ”¹è¿›"><a href="#3ã€https-2çš„æ”¹è¿›" class="headerlink" title="3ã€https/2çš„æ”¹è¿›"></a>3ã€https/2çš„æ”¹è¿›</h3><p>1ã€å¤´éƒ¨å‹ç¼©ï¼šé’ˆå¯¹å¤´éƒ¨å­—æ®µï¼Œé‡‡ç”¨å‹ç¼©ç®—æ³•</p><p>2ã€å¤šè·¯å¤ç”¨ï¼šè§£å†³httpå¯¹å¤´é˜»å¡é—®é¢˜</p><p>3ã€è®¾ç½®ä¼˜å…ˆçº§ï¼šäºŒè¿›åˆ¶åˆ†å¸§</p><p>4ã€æœåŠ¡å™¨æ¨é€ï¼šä¸å†æ˜¯è¢«åŠ¨çš„æ¥å—è¯·æ±‚ã€å“åº”è¯·æ±‚ï¼Œèƒ½æ–°å»ºstreamç»™å®¢æˆ·ç«¯å‘é€ä¿¡æ¯ã€‚</p><p>5ã€å®‰å…¨æ€§ï¼š</p><h3 id="4ã€ä¸‰æ¬¡æ¡æ‰‹"><a href="#4ã€ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="4ã€ä¸‰æ¬¡æ¡æ‰‹"></a>4ã€ä¸‰æ¬¡æ¡æ‰‹</h3><blockquote><p>ä¸‰æ¬¡æ¡æ‰‹å…¶å®å°±æ˜¯æŒ‡å»ºç«‹ä¸€ä¸ªTCPè¿æ¥æ—¶ï¼Œéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ€»å…±å‘é€3ä¸ªåŒ…ã€‚è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºäº†ç¡®è®¤åŒæ–¹çš„æ¥æ”¶èƒ½åŠ›å’Œå‘é€èƒ½åŠ›æ˜¯å¦æ­£å¸¸ã€æŒ‡å®šè‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å·ä¸ºåé¢çš„å¯é æ€§ä¼ é€åšå‡†å¤‡ã€‚å®è´¨ä¸Šå…¶å®å°±æ˜¯è¿æ¥æœåŠ¡å™¨æŒ‡å®šç«¯å£ï¼Œå»ºç«‹TCPè¿æ¥ï¼Œå¹¶åŒæ­¥è¿æ¥åŒæ–¹çš„åºåˆ—å·å’Œç¡®è®¤å·ï¼Œäº¤æ¢TCPçª—å£å¤§å°ä¿¡æ¯ã€‚</p></blockquote><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ç½‘ç»œåŒ…ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°äº†ã€‚<br>è¿™æ ·æœåŠ¡ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šå®¢æˆ·ç«¯çš„å‘é€èƒ½åŠ›ã€æœåŠ¡ç«¯çš„æ¥æ”¶èƒ½åŠ›æ˜¯æ­£å¸¸çš„ã€‚</p><p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯å‘åŒ…ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°äº†ã€‚<br>è¿™æ ·å®¢æˆ·ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šæœåŠ¡ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›ï¼Œå®¢æˆ·ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ˜¯æ­£å¸¸çš„ã€‚ä¸è¿‡æ­¤æ—¶æœåŠ¡å™¨å¹¶ä¸èƒ½ç¡®è®¤å®¢æˆ·ç«¯çš„æ¥æ”¶èƒ½åŠ›æ˜¯å¦æ­£å¸¸ã€‚</p><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘åŒ…ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°äº†ã€‚<br>è¿™æ ·æœåŠ¡ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šå®¢æˆ·ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ­£å¸¸ï¼ŒæœåŠ¡å™¨è‡ªå·±çš„å‘é€ã€æ¥æ”¶èƒ½åŠ›ä¹Ÿæ­£å¸¸ã€‚</p><h2 id="äº”ã€è·¨åŸŸåŠè§£å†³æ–¹å¼ï¼š"><a href="#äº”ã€è·¨åŸŸåŠè§£å†³æ–¹å¼ï¼š" class="headerlink" title="äº”ã€è·¨åŸŸåŠè§£å†³æ–¹å¼ï¼š"></a>äº”ã€è·¨åŸŸåŠè§£å†³æ–¹å¼ï¼š</h2><p>å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸­ï¼Œé€šå¸¸ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜ï¼Œå½“ä¸€ä¸ªajaxè¯·æ±‚å‘å‡ºå»äº†ï¼ŒæœåŠ¡å™¨ä¹Ÿå“åº”äº†ï¼Œä½†æ˜¯å‰ç«¯æ‹¿ä¸åˆ°å“åº”æ•°æ®ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºæµè§ˆå™¨æœ‰ä¸€ä¸ªåŒæºç­–ç•¥ã€‚</p><h3 id="1ã€æµè§ˆå™¨çš„åŒæºç­–ç•¥"><a href="#1ã€æµè§ˆå™¨çš„åŒæºç­–ç•¥" class="headerlink" title="1ã€æµè§ˆå™¨çš„åŒæºç­–ç•¥"></a>1ã€æµè§ˆå™¨çš„åŒæºç­–ç•¥</h3><blockquote><p>æµè§ˆå™¨éµå¾ªåŒæºç­–ç•¥ï¼Œå³åè®® + hostä¸»æœº + portç«¯å£éƒ½ç›¸åŒæ—¶ï¼Œè§†ä¸ºåŒæºï¼Œä¸å­˜åœ¨è·¨åŸŸã€‚<br>å½“æµè§ˆå™¨å‘é€Ajaxè¯·æ±‚æ—¶ï¼Œåªè¦å½“å‰çš„URLå’Œç›®æ ‡URLä¸åŒæºï¼ˆåè®®ã€hostã€portæœ‰ä¸€ä¸ªä¸ç›¸åŒï¼Œå°±æ˜¯ä¸åŒæºï¼‰ï¼Œå°±å­˜åœ¨è·¨åŸŸè¯·æ±‚ã€‚</p></blockquote><h3 id="2ã€CROSï¼šè·¨åŸŸèµ„æºå…±äº«"><a href="#2ã€CROSï¼šè·¨åŸŸèµ„æºå…±äº«" class="headerlink" title="2ã€CROSï¼šè·¨åŸŸèµ„æºå…±äº«"></a>2ã€CROSï¼šè·¨åŸŸèµ„æºå…±äº«</h3><p>CORSæ˜¯ä¸€ä¸ªW3Cæ ‡å‡†ï¼Œéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„å…±åŒæ”¯æŒã€‚ä¸€èˆ¬åœ¨æœåŠ¡ç«¯å“åº”å¤´è¿”å›Access-Control-Allow-Origin:* (ä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“çš„æºå)</p><blockquote><p>options é¢„æ£€è¯·æ±‚</p></blockquote><pre><code class="js">OPTIONS / HTTP/1.1Origin: å½“å‰åœ°å€Host: xxx.comAccess-Control-Request-Method: PUTAccess-Control-Request-Headers: X-Custom-Header</code></pre><p>åœ¨é¢„æ£€è¯·æ±‚çš„å“åº”è¿”å›åï¼Œå¦‚æœè¯·æ±‚ä¸æ»¡è¶³å“åº”å¤´çš„æ¡ä»¶ï¼Œåˆ™è§¦å‘XMLHttpRequestçš„onerroræ–¹æ³•ï¼Œå½“ç„¶åé¢çœŸæ­£çš„CORSè¯·æ±‚ä¹Ÿä¸ä¼šå‘å‡ºå»äº†ã€‚</p><h3 id="3ã€Nginxåå‘ä»£ç†"><a href="#3ã€Nginxåå‘ä»£ç†" class="headerlink" title="3ã€Nginxåå‘ä»£ç†"></a>3ã€Nginxåå‘ä»£ç†</h3><blockquote><p>Nginxæ˜¯é«˜æ€§èƒ½çš„åå‘ä»£ç†æœåŠ¡å™¨</p></blockquote><p>åå‘ä»£ç†å…¶å®å°±æ˜¯æ‹¿åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå°†è¯·æ±‚è½¬å‘ç»™å…¶ä»–æœåŠ¡å™¨ï¼Œä¸»è¦åœºæ™¯æ˜¯ç»´æŒæœåŠ¡å™¨é›†ç¾¤çš„è´Ÿè½½å‡è¡¡ã€‚å³ï¼šåå‘ä»£ç†å¸®å…¶ä»–çš„æœåŠ¡å™¨æ‹¿åˆ°è¯·æ±‚ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æœåŠ¡å™¨ï¼Œå°†è¯·æ±‚è½¬äº¤ç»™å®ƒã€‚</p><p>ä¾‹å¦‚ï¼šå®¢æˆ·ç«¯åŸŸåï¼šclient.com  æœåŠ¡å™¨åŸŸåï¼šserver.com,Nginxè§£å†³è·¨åŸŸçš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><pre><code class="js">server &#123;  listen  80;  server_name  client.com;  location /api &#123;    proxy_pass server.com;  &#125;&#125;</code></pre><p>å®¢æˆ·ç«¯é¦–å…ˆè®¿é—®client.com/apiï¼ˆæ­¤æ—¶ä¸å­˜åœ¨è·¨åŸŸï¼‰ï¼ŒNginxæœåŠ¡å™¨ä½œä¸ºåå‘ä»£ç†ï¼Œå°†è¯·æ±‚è½¬å‘ç»™sever.comï¼Œå“åº”è¿”å›æ—¶åˆå°†å“åº”ç»™åˆ°å®¢æˆ·ç«¯ï¼Œå®Œæˆæ•´ä¸ªè·¨åŸŸè¯·æ±‚ã€‚</p><h3 id="4ã€Jsonp"><a href="#4ã€Jsonp" class="headerlink" title="4ã€Jsonp"></a>4ã€Jsonp</h3><blockquote><p>é€šè¿‡ç»™scriptæ ‡ç­¾çš„srcå¡«ä¸Šç›®æ ‡åœ°å€å‘é€GETè¯·æ±‚ï¼ˆåªæ”¯æŒGETè¯·æ±‚ï¼‰ï¼Œå®ç°è·¨åŸŸè¯·æ±‚æ‹¿åˆ°ç›¸åº”æ•°æ®ã€‚</p></blockquote><h3 id="5ã€websocket"><a href="#5ã€websocket" class="headerlink" title="5ã€websocket"></a>5ã€websocket</h3><blockquote><p>websocketå®ç°äº†å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç›´æ¥çš„æŒä¹…è¿æ¥ï¼Œæœ¬è´¨æ²¡æœ‰ä½¿ç”¨äº† HTTP çš„å“åº”å¤´, å› æ­¤ä¹Ÿæ²¡æœ‰è·¨åŸŸçš„é™åˆ¶</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>55ã€å¤§æ–‡ä»¶æ–­ç‚¹ç»­ä¼ </title>
      <link href="/2022/02/21/file-upload/"/>
      <url>/2022/02/21/file-upload/</url>
      
        <content type="html"><![CDATA[<p>å…³äºå¤§æ–‡ä»¶æ–­ç‚¹ç»­ä¼ çš„é—®é¢˜,è§£å†³æ–¹æ¡ˆæ˜¯Blob.prototype.sliceæ–¹æ³•ï¼Œå’Œæ•°ç»„çš„sliceæ–¹æ³•ç±»ä¼¼ï¼Œä½¿ç”¨sliceæ–¹æ³•å¯ä»¥è¿”å›æºæ–‡ä»¶çš„åˆ‡ç‰‡ã€‚æŒ‰ç…§è¦æ±‚å°†æºæ–‡ä»¶åˆ‡ä½nä¸ªåˆ‡ç‰‡ï¼Œå°†å¤šä¸ªåˆ‡ç‰‡åŒæ—¶ä¸Šä¼ ï¼Œæºæ–‡ä»¶ç”±ä¸€ä¸ªå¤§æ–‡ä»¶è½¬æ¢æˆnä¸ªå°åˆ‡ç‰‡åŒæ—¶ä¸Šä¼ ï¼Œå¯ä»¥å¤§å¤§å‡å°‘ä¸Šä¼ æ—¶é—´ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ä¸Šä¼ åˆ°æœåŠ¡ç«¯çš„åˆ‡ç‰‡å¯èƒ½ä½ç½®ä¼šå‘ç”Ÿæ”¹å˜ï¼Œéœ€è¦å°†åˆ‡ç‰‡çš„ä½ç½®è®°å½•ä¸‹æ¥ã€‚</p><span id="more"></span><h2 id="ä¸€ã€æœåŠ¡ç«¯ï¼ˆNode-jsï¼‰"><a href="#ä¸€ã€æœåŠ¡ç«¯ï¼ˆNode-jsï¼‰" class="headerlink" title="ä¸€ã€æœåŠ¡ç«¯ï¼ˆNode.jsï¼‰"></a>ä¸€ã€æœåŠ¡ç«¯ï¼ˆNode.jsï¼‰</h2><p>æœåŠ¡ç«¯éœ€è¦åšçš„æ˜¯ï¼šæ¥å—nä¸ªåˆ‡ç‰‡ï¼Œå¹¶å°†è¿™äº›åˆ‡ç‰‡åœ¨ä¸Šä¼ ååˆå¹¶ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><p>1ã€åˆå¹¶åˆ‡ç‰‡çš„æ—¶é—´: å³nä¸ªåˆ‡ç‰‡ä»€ä¹ˆæ—¶å€™ä¸Šä¼ å®Œæˆ</p><blockquote><p>å‰ç«¯ä¸Šä¼ çš„åˆ‡ç‰‡ä¸­å¸¦æœ‰åˆ‡ç‰‡çš„ä¸ªæ•°ï¼ŒæœåŠ¡ç«¯æ¥å—åˆ°åˆ‡ç‰‡çš„æ€»æ•°åè‡ªåŠ¨åˆå¹¶<br>2ã€æ€ä¹ˆåˆå¹¶åˆ‡ç‰‡<br>ä½¿ç”¨node.jsçš„è¯»å†™æµ(readStream/writeStream)ï¼Œå°†æ‰€æœ‰åˆ‡ç‰‡çš„æµä¼ è¾“åˆ°æœ€ç»ˆæ–‡ä»¶çš„æµé‡Œã€‚</p></blockquote><p>æœåŠ¡ç«¯ï¼š</p><blockquote><p>server<br>-index.js<br>-controller.js</p></blockquote><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="js">// index.jsconst Controller = require(&quot;./controller&quot;);const http = require(&quot;http&quot;);const server = http.createServer();const controller = new Controller();server.on(&quot;request&quot;, async (req, res) =&gt; &#123;  res.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);  // è§£å†³è·¨åŸŸ     res.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);  if (req.method === &quot;OPTIONS&quot;) &#123;    res.status = 200;    res.end();    return;  &#125;//   éªŒè¯ä¸Šä¼ æ–‡ä»¶æ˜¯å¦å·²ä¸Šä¼   if (req.url === &quot;/verify&quot;) &#123;    await controller.handleVerifyUpload(req, res);    return;  &#125;    // åˆå¹¶åˆ‡ç‰‡  if (req.url === &quot;/merge&quot;) &#123;    await controller.handleMerge(req, res);    return;  &#125;  if (req.url === &quot;/&quot;) &#123;    await controller.handleFormData(req, res);  &#125;&#125;);server.listen(3001, () =&gt; console.log(&quot;æ­£åœ¨ç›‘å¬ 3001 ç«¯å£&quot;));</code></pre><pre><code class="js">// controller.js// å¤„ç†å‰ç«¯ä¼ æ¥çš„FormDataconst multiparty = require(&quot;multiparty&quot;);const path = require(&quot;path&quot;);const fse = require(&quot;fs-extra&quot;);const extractExt = filename =&gt;  filename.slice(filename.lastIndexOf(&quot;.&quot;), filename.length); // æå–åç¼€åconst UPLOAD_DIR = path.resolve(__dirname, &quot;..&quot;, &quot;target&quot;); // å¤§æ–‡ä»¶å­˜å‚¨ç›®å½•const pipeStream = (path, writeStream) =&gt;  new Promise(resolve =&gt; &#123;    //   åˆ›å»ºå¯è¯»æµ    const readStream = fse.createReadStream(path);    readStream.on(&quot;end&quot;, () =&gt; &#123;      fse.unlinkSync(path);      resolve();    &#125;);    readStream.pipe(writeStream);  &#125;);// åˆå¹¶åˆ‡ç‰‡const mergeFileChunk = async (filePath, fileHash, size) =&gt; &#123;  const chunkDir = path.resolve(UPLOAD_DIR, fileHash);  const chunkPaths = await fse.readdir(chunkDir);  // æ ¹æ®åˆ‡ç‰‡ä¸‹æ ‡è¿›è¡Œæ’åº  // å¦åˆ™ç›´æ¥è¯»å–ç›®å½•çš„è·å¾—çš„é¡ºåºå¯èƒ½ä¼šé”™ä¹±  chunkPaths.sort((a, b) =&gt; a.split(&quot;-&quot;)[1] - b.split(&quot;-&quot;)[1]);  await Promise.all(    chunkPaths.map((chunkPath, index) =&gt;      pipeStream(        path.resolve(chunkDir, chunkPath),        // æŒ‡å®šä½ç½®åˆ›å»ºå¯å†™æµ        fse.createWriteStream(filePath, &#123;          start: index * size,          end: (index + 1) * size        &#125;)      )    )  );  fse.rmdirSync(chunkDir); // åˆå¹¶ååˆ é™¤ä¿å­˜åˆ‡ç‰‡çš„ç›®å½•&#125;;const resolvePost = req =&gt;  new Promise(resolve =&gt; &#123;    let chunk = &quot;&quot;;    req.on(&quot;data&quot;, data =&gt; &#123;      chunk += data;    &#125;);    req.on(&quot;end&quot;, () =&gt; &#123;      resolve(JSON.parse(chunk));    &#125;);  &#125;);// è¿”å›å·²ç»ä¸Šä¼ åˆ‡ç‰‡åconst createUploadedList = async fileHash =&gt;  fse.existsSync(path.resolve(UPLOAD_DIR, fileHash))    ? await fse.readdir(path.resolve(UPLOAD_DIR, fileHash))    : [];module.exports = class &#123;  // åˆå¹¶åˆ‡ç‰‡  async handleMerge(req, res) &#123;    const data = await resolvePost(req);    const &#123; fileHash, filename, size &#125; = data;    const ext = extractExt(filename);    const filePath = path.resolve(UPLOAD_DIR, `$&#123;fileHash&#125;$&#123;ext&#125;`);    await mergeFileChunk(filePath, fileHash, size);    res.end(      JSON.stringify(&#123;        code: 0,        message: &quot;file merged success&quot;      &#125;)    );  &#125;  // å¤„ç†åˆ‡ç‰‡  async handleFormData(req, res) &#123;    const multipart = new multiparty.Form();    //ä¸‹é¢multipart.parseçš„å›è°ƒä¸­ fields å‚æ•°ä¿å­˜äº†FormDataä¸­çš„æ–‡ä»¶    multipart.parse(req, async (err, fields, files) =&gt; &#123;      if (err) &#123;        console.error(err);        res.status = 500;        res.end(&quot;process file chunk failed&quot;);        return;      &#125;      const [chunk] = files.chunk;      const [hash] = fields.hash;      const [fileHash] = fields.fileHash;      const [filename] = fields.filename;      const filePath = path.resolve(        UPLOAD_DIR,        `$&#123;fileHash&#125;$&#123;extractExt(filename)&#125;`      );      const chunkDir = path.resolve(UPLOAD_DIR, fileHash);      // æ–‡ä»¶å­˜åœ¨ç›´æ¥è¿”å›      if (fse.existsSync(filePath)) &#123;        res.end(&quot;file exist&quot;);        return;      &#125;      // åˆ‡ç‰‡ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºåˆ‡ç‰‡ç›®å½•      if (!fse.existsSync(chunkDir)) &#123;        await fse.mkdirs(chunkDir);      &#125;      // fs-extra ä¸“ç”¨æ–¹æ³•ï¼Œç±»ä¼¼ fs.rename å¹¶ä¸”è·¨å¹³å°      // fs-extra çš„ rename æ–¹æ³• windows å¹³å°ä¼šæœ‰æƒé™é—®é¢˜      // https://github.com/meteor/meteor/issues/7852#issuecomment-255767835      await fse.move(chunk.path, path.resolve(chunkDir, hash));      res.end(&quot;received file chunk&quot;);    &#125;);  &#125;  // éªŒè¯æ˜¯å¦å·²ä¸Šä¼ /å·²ä¸Šä¼ åˆ‡ç‰‡ä¸‹æ ‡  async handleVerifyUpload(req, res) &#123;    const data = await resolvePost(req);    const &#123; fileHash, filename &#125; = data;    const ext = extractExt(filename);    const filePath = path.resolve(UPLOAD_DIR, `$&#123;fileHash&#125;$&#123;ext&#125;`);    if (fse.existsSync(filePath)) &#123;      res.end(        JSON.stringify(&#123;          shouldUpload: false        &#125;)      );    &#125; else &#123;      res.end(        JSON.stringify(&#123;          shouldUpload: true,          uploadedList: await createUploadedList(fileHash)        &#125;)      );    &#125;  &#125;&#125;;</code></pre></details><h2 id="äºŒã€å®¢æˆ·ç«¯"><a href="#äºŒã€å®¢æˆ·ç«¯" class="headerlink" title="äºŒã€å®¢æˆ·ç«¯"></a>äºŒã€å®¢æˆ·ç«¯</h2><p>å‰ç«¯ä½¿ç”¨Vue+elementUIå±•ç¤ºç•Œé¢ï¼Œå½“ç‚¹å‡»ä¸Šä¼ æŒ‰é’®æ—¶ï¼Œsliceæ–¹æ³•å°†æºæ–‡ä»¶åšåˆ‡ç‰‡å¤„ç†ï¼Œå°†åˆ‡ç‰‡æ”¾å…¥æ•°ç»„ä¸­è¿”å›ï¼Œä½¿ç”¨ hash+index ç»™æ¯ä¸ªåˆ‡ç‰‡åšæ ‡è¯†ï¼Œç”¨äºä¸Šä¼ å®Œæˆååˆå¹¶åˆ‡ç‰‡ã€‚<br>è°ƒç”¨uploadChunksä¸Šä¼ æ‰€æœ‰çš„åˆ‡ç‰‡ï¼Œå°†åˆ‡ç‰‡ã€åˆ‡ç‰‡hashã€åˆ‡ç‰‡åfilenameæ”¾å…¥FormDataä¸­ï¼Œä½¿ç”¨promise.allå¹¶å‘ä¸Šä¼ æ‰€æœ‰åˆ‡ç‰‡ã€‚</p><p>æ–­ç‚¹ç»­ä¼ åŸç†åœ¨äºå‰åç«¯éœ€è¦è®°ä½å·²ç»ä¸Šä¼ çš„åˆ‡ç‰‡ï¼Œç»§ç»­ä¸Šä¼ çš„æ—¶å€™å°±å¯ä»¥è·³è¿‡ä¹‹å‰å·²ç»ä¸Šä¼ çš„éƒ¨åˆ†ã€‚</p><p>å®ç°çš„æ–¹æ¡ˆï¼š</p><blockquote><p>æœåŠ¡ç«¯ä¿å­˜å·²ç»ä¸Šä¼ çš„åˆ‡ç‰‡hashï¼Œå‰ç«¯æ¯æ¬¡ä¸Šä¼ å‰éƒ½å‘æœåŠ¡ç«¯è·å–å·²ç»ä¸Šä¼ çš„åˆ‡ç‰‡ã€‚</p></blockquote><p>è¿™é‡Œä¹Ÿå¯ä»¥åœ¨å‰ç«¯ä½¿ç”¨localStorageè®°å½•å·²ç»ä¸Šä¼ çš„åˆ‡ç‰‡çš„hashï¼Œä½†æ˜¯å­˜åœ¨é—®é¢˜ï¼Œå°±æ˜¯æ¢ä¸€ä¸ªæµè§ˆå™¨å°±å¤±å»å·²ç»ä¸Šä¼ çš„åˆ‡ç‰‡çš„hashäº†ã€‚</p><p>å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯éƒ½éœ€è¦ç”Ÿæˆæ–‡ä»¶å’Œåˆ‡ç‰‡çš„hashï¼Œæ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆhashã€‚ä½¿ç”¨spark-md5æ ¹æ®æ–‡ä»¶å†…å®¹è®¡ç®—å‡ºæ–‡ä»¶çš„hashå€¼ã€‚</p><p>å½“æ–‡ä»¶æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œè¯»å–æ–‡ä»¶å†…å®¹è®¡ç®—hashæ˜¯éå¸¸è€—æ—¶çš„ï¼Œä¼šå¼•èµ·UIé˜»å¡ï¼Œå¯¼è‡´é¡µé¢å‡æ­»ï¼Œè§£å†³æ–¹å¼æ˜¯ä½¿ç”¨web-workeråœ¨workerçº¿ç¨‹è®¡ç®—hashã€‚</p><p>å®ä¾‹åŒ–web-workerï¼Œå‚æ•°æ˜¯ä¸€ä¸ªjsæ–‡ä»¶è·¯å¾„ä¸èƒ½è·¨åŸŸï¼Œéœ€è¦å•ç‹¬åˆ›å»ºä¸€ä¸ªhash.jsæ–‡ä»¶æ”¾åœ¨publicä¸­ï¼Œåœ¨workerä¸­ä¸å…è®¸è®¿é—®domï¼Œä½¿ç”¨importScriptså‡½æ•°å¯¼å…¥å¤–éƒ¨è„šæœ¬spark-md5</p><pre><code class="js">// hash.jsself.importScripts(&quot;/spark-md5.min.js&quot;); // å¯¼å…¥è„šæœ¬// ç”Ÿæˆæ–‡ä»¶ hashself.onmessage = e =&gt; &#123;  const &#123; fileChunkList &#125; = e.data;  const spark = new self.SparkMD5.ArrayBuffer();  let percentage = 0;  let count = 0;  const loadNext = index =&gt; &#123;    const reader = new FileReader();    reader.readAsArrayBuffer(fileChunkList[index].file);    reader.onload = e =&gt; &#123;      count++;      spark.append(e.target.result);      if (count === fileChunkList.length) &#123;        self.postMessage(&#123;          percentage: 100,          hash: spark.end()        &#125;);        self.close();      &#125; else &#123;        percentage += 100 / fileChunkList.length;        self.postMessage(&#123;          percentage        &#125;);        loadNext(count);      &#125;    &#125;;  &#125;;  loadNext(0);&#125;;</code></pre><p>1ã€template</p><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="html">    &lt;div&gt;      &lt;input        type=&quot;file&quot;        :disabled=&quot;status !== Status.wait&quot;        @change=&quot;handleFileChange&quot;      /&gt;      &lt;el-button @click=&quot;handleUpload&quot; :disabled=&quot;uploadDisabled&quot;        &gt;ä¸Šä¼ &lt;/el-button      &gt;      &lt;el-button @click=&quot;handleResume&quot; v-if=&quot;status === Status.pause&quot;        &gt;æ¢å¤&lt;/el-button      &gt;      &lt;el-button        v-else        :disabled=&quot;status !== Status.uploading || !container.hash&quot;        @click=&quot;handlePause&quot;        &gt;æš‚åœ&lt;/el-button      &gt;    &lt;/div&gt;    &lt;div&gt;      &lt;!-- &lt;div&gt;è®¡ç®—æ–‡ä»¶ hash&lt;/div&gt;      &lt;el-progress :percentage=&quot;hashPercentage&quot;&gt;&lt;/el-progress&gt; --&gt;      &lt;div&gt;æ€»è¿›åº¦&lt;/div&gt;      &lt;el-progress :percentage=&quot;fakeUploadPercentage&quot;&gt;&lt;/el-progress&gt;    &lt;/div&gt;    &lt;el-table :data=&quot;data&quot;&gt;      &lt;el-table-column        prop=&quot;hash&quot;        label=&quot;åˆ‡ç‰‡hash&quot;        align=&quot;center&quot;      &gt;&lt;/el-table-column&gt;      &lt;el-table-column label=&quot;å¤§å°(KB)&quot; align=&quot;center&quot; width=&quot;120&quot;&gt;        &lt;template v-slot=&quot;&#123; row &#125;&quot;&gt;          &#123;&#123; row.size | transformByte &#125;&#125;        &lt;/template&gt;      &lt;/el-table-column&gt;      &lt;el-table-column label=&quot;è¿›åº¦&quot; align=&quot;center&quot;&gt;        &lt;template v-slot=&quot;&#123; row &#125;&quot;&gt;          &lt;el-progress            :percentage=&quot;row.percentage&quot;            color=&quot;#909399&quot;          &gt;&lt;/el-progress&gt;        &lt;/template&gt;      &lt;/el-table-column&gt;    &lt;/el-table&gt;</code></pre></details><p>2ã€jséƒ¨åˆ†ï¼šè®¾ç½®åˆ‡ç‰‡å¤§å° è€ƒè™‘åˆ°é€šç”¨æ€§ï¼Œç®€å•å°è£…äº†XMLHttpRequest, å®é™…ä½¿ç”¨å¯ä»¥éšè—æ‰hashè¿›åº¦æ¡</p><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="js">&lt;script&gt;const SIZE = 100 * 1024 * 1024; // åˆ‡ç‰‡å¤§å°const Status = &#123;  wait: &quot;wait&quot;,  pause: &quot;pause&quot;,  uploading: &quot;uploading&quot;&#125;;export default &#123;  name: &quot;app&quot;,  filters: &#123;    transformByte(val) &#123;      return Number((val / 1024).toFixed(0));    &#125;  &#125;,  data: () =&gt; (&#123;    Status,    container: &#123;      file: null,      hash: &quot;&quot;,      worker: null    &#125;,    hashPercentage: 0,    data: [],    requestList: [],    status: Status.wait,    // å½“æš‚åœæ—¶ä¼šå–æ¶ˆ xhr å¯¼è‡´è¿›åº¦æ¡åé€€    // ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªå‡çš„è¿›åº¦æ¡    fakeUploadPercentage: 0  &#125;),  computed: &#123;    uploadDisabled() &#123;      return (        !this.container.file ||        [Status.pause, Status.uploading].includes(this.status)      );    &#125;,    uploadPercentage() &#123;      if (!this.container.file || !this.data.length) return 0;      const loaded = this.data        .map(item =&gt; item.size * item.percentage)        .reduce((acc, cur) =&gt; acc + cur);      return parseInt((loaded / this.container.file.size).toFixed(2));    &#125;  &#125;,  watch: &#123;    uploadPercentage(now) &#123;      if (now &gt; this.fakeUploadPercentage) &#123;        this.fakeUploadPercentage = now;      &#125;    &#125;  &#125;,  methods: &#123;    // æš‚åœ    handlePause() &#123;      this.status = Status.pause;      this.resetData();    &#125;,    resetData() &#123;      this.requestList.forEach(xhr =&gt; xhr?.abort());      this.requestList = [];      if (this.container.worker) &#123;        this.container.worker.onmessage = null;      &#125;    &#125;,    async handleResume() &#123;      this.status = Status.uploading;      const &#123; uploadedList &#125; = await this.verifyUpload(        this.container.file.name,        this.container.hash      );      await this.uploadChunks(uploadedList);    &#125;,    // xhr    request(&#123;      url,      method = &quot;post&quot;,      data,      headers = &#123;&#125;,      onProgress = e =&gt; e,      requestList    &#125;) &#123;      return new Promise(resolve =&gt; &#123;        const xhr = new XMLHttpRequest();        xhr.upload.onprogress = onProgress;        xhr.open(method, url);        Object.keys(headers).forEach(key =&gt;          xhr.setRequestHeader(key, headers[key])        );        xhr.send(data);        xhr.onload = e =&gt; &#123;          // å°†è¯·æ±‚æˆåŠŸçš„ xhr ä»åˆ—è¡¨ä¸­åˆ é™¤          if (requestList) &#123;            const xhrIndex = requestList.findIndex(item =&gt; item === xhr);            requestList.splice(xhrIndex, 1);          &#125;          resolve(&#123;            data: e.target.response          &#125;);        &#125;;        // æš´éœ²å½“å‰ xhr ç»™å¤–éƒ¨        requestList?.push(xhr);      &#125;);    &#125;,    // ç”Ÿæˆæ–‡ä»¶åˆ‡ç‰‡    createFileChunk(file, size = SIZE) &#123;      const fileChunkList = [];      let cur = 0;      while (cur &lt; file.size) &#123;        fileChunkList.push(&#123; file: file.slice(cur, cur + size) &#125;);        cur += size;      &#125;      return fileChunkList;    &#125;,    // ç”Ÿæˆæ–‡ä»¶ hashï¼ˆweb-workerï¼‰    calculateHash(fileChunkList) &#123;      return new Promise(resolve =&gt; &#123;        this.container.worker = new Worker(&quot;/hash.js&quot;);        this.container.worker.postMessage(&#123; fileChunkList &#125;);        this.container.worker.onmessage = e =&gt; &#123;          const &#123; percentage, hash &#125; = e.data;          this.hashPercentage = percentage;          if (hash) &#123;            resolve(hash);          &#125;        &#125;;      &#125;);    &#125;,    handleFileChange(e) &#123;      const [file] = e.target.files;      if (!file) return;      this.resetData();      Object.assign(this.$data, this.$options.data());      this.container.file = file;    &#125;,    async handleUpload() &#123;      if (!this.container.file) return;      this.status = Status.uploading;      const fileChunkList = this.createFileChunk(this.container.file);      this.container.hash = await this.calculateHash(fileChunkList);      const &#123; shouldUpload, uploadedList &#125; = await this.verifyUpload(        this.container.file.name,        this.container.hash      );      if (!shouldUpload) &#123;        this.$message.success(&quot;ç§’ä¼ ï¼šä¸Šä¼ æˆåŠŸ&quot;);        this.status = Status.wait;        return;      &#125;      this.data = fileChunkList.map((&#123; file &#125;, index) =&gt; (&#123;        fileHash: this.container.hash,        index,        hash: this.container.hash + &quot;-&quot; + index,        chunk: file,        size: file.size,        percentage: uploadedList.includes(index) ? 100 : 0      &#125;));      await this.uploadChunks(uploadedList);    &#125;,    // ä¸Šä¼ åˆ‡ç‰‡ï¼ŒåŒæ—¶è¿‡æ»¤å·²ä¸Šä¼ çš„åˆ‡ç‰‡    async uploadChunks(uploadedList = []) &#123;      const requestList = this.data        .filter((&#123; hash &#125;) =&gt; !uploadedList.includes(hash))        .map((&#123; chunk, hash, index &#125;) =&gt; &#123;          const formData = new FormData();          formData.append(&quot;chunk&quot;, chunk);          formData.append(&quot;hash&quot;, hash);          formData.append(&quot;filename&quot;, this.container.file.name);          formData.append(&quot;fileHash&quot;, this.container.hash);          return &#123; formData, index &#125;;        &#125;)        .map(async (&#123; formData, index &#125;) =&gt;          this.request(&#123;            url: &quot;http://localhost:3001&quot;,            data: formData,            onProgress: this.createProgressHandler(this.data[index]),            requestList: this.requestList          &#125;)        );      await Promise.all(requestList);      // ä¹‹å‰ä¸Šä¼ çš„åˆ‡ç‰‡æ•°é‡ + æœ¬æ¬¡ä¸Šä¼ çš„åˆ‡ç‰‡æ•°é‡ = æ‰€æœ‰åˆ‡ç‰‡æ•°é‡æ—¶      // åˆå¹¶åˆ‡ç‰‡      if (uploadedList.length + requestList.length === this.data.length) &#123;        await this.mergeRequest();      &#125;    &#125;,    // é€šçŸ¥æœåŠ¡ç«¯åˆå¹¶åˆ‡ç‰‡    async mergeRequest() &#123;      await this.request(&#123;        url: &quot;http://localhost:3001/merge&quot;,        headers: &#123;          &quot;content-type&quot;: &quot;application/json&quot;        &#125;,        data: JSON.stringify(&#123;          size: SIZE,          fileHash: this.container.hash,          filename: this.container.file.name        &#125;)      &#125;);      this.$message.success(&quot;ä¸Šä¼ æˆåŠŸ&quot;);      this.status = Status.wait;    &#125;,    // æ ¹æ® hash éªŒè¯æ–‡ä»¶æ˜¯å¦æ›¾ç»å·²ç»è¢«ä¸Šä¼ è¿‡    // æ²¡æœ‰æ‰è¿›è¡Œä¸Šä¼     async verifyUpload(filename, fileHash) &#123;      const &#123; data &#125; = await this.request(&#123;        url: &quot;http://localhost:3001/verify&quot;,        headers: &#123;          &quot;content-type&quot;: &quot;application/json&quot;        &#125;,        data: JSON.stringify(&#123;          filename,          fileHash        &#125;)      &#125;);      return JSON.parse(data);    &#125;,    // ç”¨é—­åŒ…ä¿å­˜æ¯ä¸ª chunk çš„è¿›åº¦æ•°æ®    createProgressHandler(item) &#123;      return e =&gt; &#123;        item.percentage = parseInt(String((e.loaded / e.total) * 100));      &#125;;    &#125;  &#125;&#125;;&lt;/script&gt;</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>54ã€ä¸ªäººGitHubå›¾åºŠä½¿ç”¨webpæ ¼å¼çš„å›¾ç‰‡</title>
      <link href="/2022/01/24/image-host/"/>
      <url>/2022/01/24/image-host/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨å›¾åºŠï¼Œå°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ åˆ°ä¸ªäººGitHub image-host è½¬æ¢æˆwebpæ ¼å¼çš„å›¾ç‰‡é“¾æ¥ã€‚</p><span id="more"></span><h3 id="1ã€ä»€ä¹ˆæ˜¯webpï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯webpï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯webpï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯webpï¼Ÿ</h3><blockquote><p>WebP is  æ˜¯ç”± Google å…¬å¸å¼€å‘çš„ä¸€ç§å¯æä¾›æœ‰æŸå’Œæ— æŸå‹ç¼©çš„å›¾ç‰‡æ ¼å¼ï¼Œæ”¯æŒé€æ˜åº¦ï¼Œç›®å‰å·²æ”¯æŒåŠ¨å›¾ã€‚</p></blockquote><h3 id="2ã€PicXå›¾åºŠçš„ä½¿ç”¨"><a href="#2ã€PicXå›¾åºŠçš„ä½¿ç”¨" class="headerlink" title="2ã€PicXå›¾åºŠçš„ä½¿ç”¨"></a>2ã€PicXå›¾åºŠçš„ä½¿ç”¨</h3><p>PicX æ˜¯ä¸€æ¬¾åŸºäº GitHub API &amp; jsDelivr å¼€å‘çš„å…·æœ‰ CDN åŠ é€ŸåŠŸèƒ½çš„å›¾åºŠç®¡ç†å·¥å…·ã€‚åªéœ€é€‰æ‹©ä¸€ä¸ª GitHub ä»“åº“ä½œä¸ºå›¾åºŠï¼Œç„¶ååœ¨ PicX å®˜ç½‘ å®Œæˆ Token ç»‘å®šå’Œç›¸åº”é…ç½®å°±èƒ½ä½¿ç”¨äº†ã€‚</p><p>é…ç½®é“¾æ¥ï¼š<a href="https://picx-docs.xpoet.cn/tutorial/get-start.html#%E8%BF%9B%E8%A1%8C%E5%9B%BE%E5%BA%8A%E9%85%8D%E7%BD%AE">https://picx-docs.xpoet.cn/tutorial/get-start.html#%E8%BF%9B%E8%A1%8C%E5%9B%BE%E5%BA%8A%E9%85%8D%E7%BD%AE</a></p><p><image src="https://cdn.jsdelivr.net/gh/HeyJudeYQ/Image-Host@master/image.1fp31abnh9sw.webp"></image></p><p>å°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ è‡³å›¾åºŠï¼Œä¸ŠåºŠæˆåŠŸåçš„å›¾ç‰‡ä¼šç”Ÿæˆä¸€ä¸ªGitHubå¤–é“¾å’Œcdnå¤–é“¾ã€‚</p><p><image src="https://cdn.jsdelivr.net/gh/HeyJudeYQ/Image-Host@master/image.27ywn4r0zskk.webp"></image></p>]]></content>
      
      
      
        <tags>
            
            <tag> cdn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>53ã€vueä½¿ç”¨è£…é¥°å™¨descriptor</title>
      <link href="/2022/01/20/decorator/"/>
      <url>/2022/01/20/decorator/</url>
      
        <content type="html"><![CDATA[<p>decoratorè£…é¥°å™¨é€šè¿‡å¯¹ç±»ã€å¯¹è±¡ã€æ–¹æ³•ã€å±æ€§è¿›è¡Œä¿®é¥°ï¼Œå¯¹å…¶æ·»åŠ ä¸€äº›å…¶ä»–è¡Œä¸ºï¼Œå³å¯¹ä¸€æ®µä»£ç è¿›è¡ŒäºŒæ¬¡åŒ…è£…ã€‚<br>è£…é¥°å™¨åªèƒ½ç”¨äºç±»å’Œç±»çš„æ–¹æ³•ï¼Œä¸èƒ½ç”¨äºå‡½æ•°ï¼Œå› ä¸ºå­˜åœ¨å‡½æ•°æå‡ã€‚</p><span id="more"></span><h2 id="ä¸€ã€ä½¿ç”¨æ–¹æ³•ï¼š"><a href="#ä¸€ã€ä½¿ç”¨æ–¹æ³•ï¼š" class="headerlink" title="ä¸€ã€ä½¿ç”¨æ–¹æ³•ï¼š"></a>ä¸€ã€ä½¿ç”¨æ–¹æ³•ï¼š</h2><pre><code class="js">const decorator = (target,name,descriptor) =&gt; &#123;  var oldValue = descriptor.value  descriptor.value = function()&#123;    return oldValue.apply(this,arguments)  &#125;  return descriptor&#125;</code></pre><p>ä½¿ç”¨è£…é¥°å™¨å¯ä»¥ä¸éœ€è¦å…³æ³¨ä»£ç å†…éƒ¨çš„å®ç°ï¼Œå¢å¼ºäº†ä»£ç çš„å¯è¯»æ€§ã€‚</p><p>vueä¸­ä½¿ç”¨è£…é¥°å™¨ï¼š</p><p>é¡¹ç›®ä¸­ä½¿ç”¨eslintï¼Œéœ€è¦å¼€å¯è£…é¥°å™¨ç›¸å…³è¯­æ³•çš„æ£€æµ‹ã€‚</p><pre><code class="js">// .eslintrc.js  parserOptions: &#123;    parser: &#39;babel-eslint&#39;,    ecmaFeatures:&#123;      legacyDecorators: true    &#125;  &#125;,</code></pre><h2 id="äºŒã€Vueé¡¹ç›®ä½¿ç”¨Element-Uiç»„ä»¶åº“è¿›è¡ŒäºŒæ¬¡å¼¹çª—ç¡®è®¤ç›¸å…³æ“ä½œï¼š"><a href="#äºŒã€Vueé¡¹ç›®ä½¿ç”¨Element-Uiç»„ä»¶åº“è¿›è¡ŒäºŒæ¬¡å¼¹çª—ç¡®è®¤ç›¸å…³æ“ä½œï¼š" class="headerlink" title="äºŒã€Vueé¡¹ç›®ä½¿ç”¨Element-Uiç»„ä»¶åº“è¿›è¡ŒäºŒæ¬¡å¼¹çª—ç¡®è®¤ç›¸å…³æ“ä½œï¼š"></a>äºŒã€Vueé¡¹ç›®ä½¿ç”¨Element-Uiç»„ä»¶åº“è¿›è¡ŒäºŒæ¬¡å¼¹çª—ç¡®è®¤ç›¸å…³æ“ä½œï¼š</h2><p>1ã€å·¥å…·å‡½æ•°decorator.js</p><pre><code class="js">// éœ€å®‰è£…element-uiimport &#123; MessageBox, Message &#125; from &#39;element-ui&#39;/** * ç¡®è®¤æ¡† * @param &#123;String&#125; title - æ ‡é¢˜ * @param &#123;String&#125; content - å†…å®¹ * @param &#123;String&#125; confirmButtonText - ç¡®è®¤æŒ‰é’®åç§° * @param &#123;Function&#125; callback - ç¡®è®¤æŒ‰é’®åç§° * @returns   **/export function confirm (title, content, confirmButtonText = &#39;ç¡®å®š&#39;) &#123;  return function(target, name, descriptor) &#123;    // target:testï¼ˆï¼‰      // name:test1       // descriptor: è£…é¥°å™¨å±æ€§     // åŒ…æ‹¬ ï¼šconfigurable: true     // umerable: true    // value: Æ’ ()     // writable: true    const originValue = descriptor.value    descriptor.value = function(...args) &#123;      MessageBox.confirm(content, title, &#123;        dangerouslyUseHTMLString: true,        distinguishCancelAndClose: true,        confirmButtonText: confirmButtonText      &#125;).then(originValue.bind(this, ...args)).catch(error =&gt; &#123;        if (error === &#39;close&#39; || error === &#39;cancel&#39;) &#123;          Message.info(&#39;ç”¨æˆ·å–æ¶ˆæ“ä½œ&#39;)        &#125; else &#123;          Message.info(error)        &#125;      &#125;)    &#125;    return descriptor  &#125;&#125;</code></pre><p>2ã€é¡µé¢å¼•å…¥è£…é¥°å™¨å‡½æ•°</p><pre><code class="html">&lt;template&gt;  &lt;div class=&quot;about&quot;&gt;    &lt;h1&gt;This is an about page&lt;/h1&gt;    &lt;p&gt;è£…é¥°å™¨&lt;/p&gt;    &lt;button @click=&#39;test&#39;&gt;confirm&lt;/button&gt;&lt;button&gt;cancel&lt;/button&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><pre><code class="js">import &#123; confirm &#125; from &#39;./decorator.js&#39;export default &#123;  name: &#39;about&#39;,  methods: &#123;    @confirm(&#39;åˆ é™¤&#39;, &#39;ç¡®è®¤åˆ é™¤?&#39;)    test () &#123;      // do something  è°ƒç”¨æ¥å£      this.$message.success(&#39;success!!&#39;)    &#125;  &#125;&#125;</code></pre><h2 id="ä¸‰ã€å‰ç«¯APIè¯·æ±‚ç¼“å­˜"><a href="#ä¸‰ã€å‰ç«¯APIè¯·æ±‚ç¼“å­˜" class="headerlink" title="ä¸‰ã€å‰ç«¯APIè¯·æ±‚ç¼“å­˜"></a>ä¸‰ã€å‰ç«¯APIè¯·æ±‚ç¼“å­˜</h2><p>å‰ç«¯ API è¯·æ±‚ç¼“å­˜æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªæ–¹æ¡ˆã€‚</p><h3 id="1ã€keyå€¼é”™è¯¯æç¤º"><a href="#1ã€keyå€¼é”™è¯¯æç¤º" class="headerlink" title="1ã€keyå€¼é”™è¯¯æç¤º"></a>1ã€keyå€¼é”™è¯¯æç¤º</h3><pre><code class="js">const generateKeyError = new Error(&#39;Can not generate key from name and argument&#39;)</code></pre><h3 id="2ã€ç”Ÿæˆkeyå€¼"><a href="#2ã€ç”Ÿæˆkeyå€¼" class="headerlink" title="2ã€ç”Ÿæˆkeyå€¼"></a>2ã€ç”Ÿæˆkeyå€¼</h3><pre><code class="js">function generateKey(name,argument)&#123;  // ä»argument ä¸­è·å–æ•°æ®ç„¶åå˜ä¸ºæ•°ç»„  const params = Array.from(argument).join(&#39;,&#39;)  try&#123;    return `$&#123;name&#125;:$&#123;params&#125;`  &#125;catch&#123;    return generateKeyError  &#125;&#125;function decorate(handleDescription,entryArgs) &#123;  // åˆ¤æ–­å½“å‰æœ€åæ•°æ®æ˜¯å¦æ˜¯descriptor ï¼Œå¦‚æœæ˜¯descriptor,ç›´æ¥ä½¿ç”¨  if(isDescriptor(entryArgs[entryArgs.length - 1]))&#123;    return handleDescription(...entryArgs,[])  &#125;else&#123;    return function()&#123;      return handleDescription(...Array.prototype.slice.call(arguments),entryArgs)    &#125;  &#125;&#125;function handleApiCache(target, name, descriptor, ...config) &#123;    // æ‹¿åˆ°å‡½æ•°ä½“å¹¶ä¿å­˜    const fn = descriptor.value    // ä¿®æ”¹å‡½æ•°ä½“    descriptor.value = function () &#123;         const key =  generateKey(name, arguments)        // keyæ— æ³•ç”Ÿæˆï¼Œç›´æ¥è¯·æ±‚ æœåŠ¡ç«¯æ•°æ®        if (key === generateKeyError)  &#123;            // åˆ©ç”¨åˆšæ‰ä¿å­˜çš„å‡½æ•°ä½“è¿›è¡Œè¯·æ±‚            return fn.apply(null, arguments)        &#125;        let promise = ExpriesCache.get(key)        if (!promise) &#123;            // è®¾å®špromise            promise = fn.apply(null, arguments).catch(error =&gt; &#123;                 // åœ¨è¯·æ±‚å›æ¥åï¼Œå¦‚æœå‡ºç°é—®é¢˜ï¼ŒæŠŠpromiseä»cacheä¸­åˆ é™¤                ExpriesCache.delete(key)                // è¿”å›é”™è¯¯                return Promise.reject(error)            &#125;)            // ä½¿ç”¨ 10s ç¼“å­˜ï¼Œ10sä¹‹åå†æ¬¡getå°±ä¼š è·å–null è€Œä»æœåŠ¡ç«¯ç»§ç»­è¯·æ±‚            ExpriesCache.set(key, promise, config[0])        &#125;        return promise     &#125;    return descriptor;&#125;// åˆ¶å®š ä¿®é¥°å™¨function ApiCache(...args) &#123;    return decorate(handleApiCache, args)&#125;</code></pre><h3 id="3ã€apiæ¥å£å¤„ä½¿ç”¨ApiCache"><a href="#3ã€apiæ¥å£å¤„ä½¿ç”¨ApiCache" class="headerlink" title="3ã€apiæ¥å£å¤„ä½¿ç”¨ApiCache()"></a>3ã€apiæ¥å£å¤„ä½¿ç”¨ApiCache()</h3><pre><code class="js">class Api&#123;  // ç¼“å­˜10s  @ApiCache(10)  getData(params1,params2)&#123;    return request.get(&#39;/getList&#39;)  &#125;&#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>52ã€WebRTCéŸ³è§†é¢‘</title>
      <link href="/2022/01/19/webrtc/"/>
      <url>/2022/01/19/webrtc/</url>
      
        <content type="html"><![CDATA[<p>WebRTC (Web Real-Time Communications) æ˜¯ä¸€é¡¹å®æ—¶é€šè®¯æŠ€æœ¯ï¼Œå®ƒå…è®¸ç½‘ç»œåº”ç”¨æˆ–è€…ç«™ç‚¹ï¼Œåœ¨ä¸å€ŸåŠ©ä¸­é—´åª’ä»‹çš„æƒ…å†µä¸‹ï¼Œå»ºç«‹æµè§ˆå™¨ä¹‹é—´ç‚¹å¯¹ç‚¹ï¼ˆPeer-to-Peerï¼‰çš„è¿æ¥ï¼Œå®ç°è§†é¢‘æµå’Œï¼ˆæˆ–ï¼‰éŸ³é¢‘æµæˆ–è€…å…¶ä»–ä»»æ„æ•°æ®çš„ä¼ è¾“ã€‚WebRTC åŒ…å«çš„è¿™äº›æ ‡å‡†ä½¿ç”¨æˆ·åœ¨æ— éœ€å®‰è£…ä»»ä½•æ’ä»¶æˆ–è€…ç¬¬ä¸‰æ–¹çš„è½¯ä»¶çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºç‚¹å¯¹ç‚¹ï¼ˆPeer-to-Peerï¼‰çš„æ•°æ®åˆ†äº«å’Œç”µè¯ä¼šè®®æˆä¸ºå¯èƒ½ã€‚</p><span id="more"></span><h3 id="ä¸€ã€WebRTC-éŸ³è§†é¢‘é‡‡é›†-APIï¼šMediaDevices-getUserMedia"><a href="#ä¸€ã€WebRTC-éŸ³è§†é¢‘é‡‡é›†-APIï¼šMediaDevices-getUserMedia" class="headerlink" title="ä¸€ã€WebRTC éŸ³è§†é¢‘é‡‡é›† APIï¼šMediaDevices.getUserMedia()"></a>ä¸€ã€WebRTC éŸ³è§†é¢‘é‡‡é›† APIï¼šMediaDevices.getUserMedia()</h3><blockquote><p>MediaDevices.getUserMedia() ä¼šæç¤ºç”¨æˆ·ç»™äºˆä½¿ç”¨åª’ä½“è¾“å…¥çš„è®¸å¯ï¼Œåª’ä½“è¾“å…¥ä¼šäº§ç”Ÿä¸€ä¸ª MediaStreamï¼Œé‡Œé¢åŒ…å«äº†è¯·æ±‚çš„åª’ä½“ç±»å‹çš„è½¨é“ã€‚æ­¤æµå¯ä»¥åŒ…å«ä¸€ä¸ªè§†é¢‘è½¨é“ï¼ˆæ¥è‡ªç¡¬ä»¶æˆ–è€…è™šæ‹Ÿè§†é¢‘æºï¼Œæ¯”å¦‚ç›¸æœºã€è§†é¢‘é‡‡é›†è®¾å¤‡å’Œå±å¹•å…±äº«æœåŠ¡ç­‰ç­‰ï¼‰ã€ä¸€ä¸ªéŸ³é¢‘è½¨é“ï¼ˆåŒæ ·æ¥è‡ªç¡¬ä»¶æˆ–è™šæ‹ŸéŸ³é¢‘æºï¼Œæ¯”å¦‚éº¦å…‹é£ã€A/D è½¬æ¢å™¨ç­‰ç­‰ï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯å…¶å®ƒè½¨é“ç±»å‹ã€‚</p></blockquote><pre><code class="js">const constraints = &#123;  video: true,  audio: true,&#125;;//   éå®‰å…¨æ¨¡å¼ï¼ˆéhttps/localhostï¼‰ä¸‹ navigator.mediaDevices ä¼šè¿”å› undefinedtry &#123;  const stream = await navigator.mediaDevices.getUserMedia(constraints);  document.querySelector(&quot;video&quot;).srcObject = stream;&#125; catch (error) &#123;  console.error(error);&#125;</code></pre><h3 id="äºŒã€è·å–éŸ³è§†é¢‘è®¾å¤‡è¾“å…¥è¾“å‡ºåˆ—è¡¨-MediaDevices-enumerateDevices"><a href="#äºŒã€è·å–éŸ³è§†é¢‘è®¾å¤‡è¾“å…¥è¾“å‡ºåˆ—è¡¨-MediaDevices-enumerateDevices" class="headerlink" title="äºŒã€è·å–éŸ³è§†é¢‘è®¾å¤‡è¾“å…¥è¾“å‡ºåˆ—è¡¨:MediaDevices.enumerateDevices()"></a>äºŒã€è·å–éŸ³è§†é¢‘è®¾å¤‡è¾“å…¥è¾“å‡ºåˆ—è¡¨:MediaDevices.enumerateDevices()</h3><blockquote><p>MediaDevices çš„æ–¹æ³• enumerateDevices() è¯·æ±‚ä¸€ä¸ªå¯ç”¨çš„åª’ä½“è¾“å…¥å’Œè¾“å‡ºè®¾å¤‡çš„åˆ—è¡¨ï¼Œä¾‹å¦‚éº¦å…‹é£ï¼Œæ‘„åƒæœºï¼Œè€³æœºè®¾å¤‡ç­‰ã€‚ è¿”å›çš„ Promise (en-US) å®Œæˆæ—¶ï¼Œä¼šå¸¦æœ‰ä¸€ä¸ªæè¿°è®¾å¤‡çš„ MediaDeviceInfo (en-US) çš„æ•°ç»„ã€‚</p></blockquote><pre><code class="js">try &#123;  const devices = await navigator.mediaDevices.enumerateDevices();  this.videoinputs = devices.filter((device) =&gt; device.kind === &quot;videoinput&quot;);  this.audiooutputs = devices.filter((device) =&gt; device.kind === &quot;audiooutput&quot;);  this.audioinputs = devices.filter((device) =&gt; device.kind === &quot;audioinput&quot;);&#125; catch (error) &#123;  console.error(error);&#125;</code></pre><h3 id="ä¸‰ã€ç‚¹å¯¹ç‚¹åª’ä½“åå•†æ–¹æ³•"><a href="#ä¸‰ã€ç‚¹å¯¹ç‚¹åª’ä½“åå•†æ–¹æ³•" class="headerlink" title="ä¸‰ã€ç‚¹å¯¹ç‚¹åª’ä½“åå•†æ–¹æ³•"></a>ä¸‰ã€ç‚¹å¯¹ç‚¹åª’ä½“åå•†æ–¹æ³•</h3><p>åª’ä½“åå•†æ–¹æ³•ï¼š</p><p>1ã€createOfferï¼š</p><blockquote><p>createOffer æ–¹æ³•ä¼šç”Ÿæˆæè¿°ä¿¡æ¯çš„ä¸€ä¸ª blob å¯¹è±¡ï¼Œå®ƒä¼šå¸®åŠ©è¿æ¥åˆ°æœ¬åœ°æœºå™¨ã€‚å½“ä½ å·²ç»æ‰¾åˆ°ä¸€ä¸ªè¿œç«¯çš„ PeerConnection å¹¶ä¸”æ‰“ç®—è®¾ç½®å»ºç«‹æœ¬åœ°çš„ PeerConnection æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p></blockquote><pre><code class="js">var pc = new PeerConnection();pc.addStream(video);pc.createOffer(function(desc)&#123;  pc.setLocalDescription(desc, function() &#123;    // send the offer to a server that can negotiate with a remote client  &#125;);&#125;</code></pre><p>2ã€createAnswerï¼š</p><blockquote><p>å¯¹ä»è¿œæ–¹æ”¶åˆ°çš„ offer è¿›è¡Œå›ç­”ã€‚</p></blockquote><pre><code class="js">var pc = new PeerConnection();pc.setRemoteDescription(new RTCSessionDescription(offer), function () &#123;  pc.createAnswer(function (answer) &#123;    pc.setLocalDescription(answer, function () &#123;      // send the answer to the remote connection    &#125;);  &#125;);&#125;);</code></pre><h3 id="å››ã€æœåŠ¡ç«¯ï¼šKoa-socket-io"><a href="#å››ã€æœåŠ¡ç«¯ï¼šKoa-socket-io" class="headerlink" title="å››ã€æœåŠ¡ç«¯ï¼šKoa + socket.io"></a>å››ã€æœåŠ¡ç«¯ï¼šKoa + socket.io</h3><p>1ã€server.js</p><pre><code class="js">// server ç«¯ server.jsconst Koa = require(&quot;koa&quot;);const socket = require(&quot;socket.io&quot;);const http = require(&quot;http&quot;);const app = new Koa();const httpServer = http.createServer(app.callback()).listen(3000, () =&gt; &#123;&#125;);socket(httpServer).on(&quot;connection&quot;, (sock) =&gt; &#123;  // ....&#125;);// client ç«¯ socket.jsimport io from &quot;socket.io-client&quot;;const socket = io.connect(window.location.origin);export default socket;</code></pre><p>2ã€ç‚¹å¯¹ç‚¹åˆ†åˆ«è¿æ¥ä¿¡ä»¤æœåŠ¡å™¨ï¼Œä¿¡ä»¤æœåŠ¡å™¨è®°å½•æˆ¿é—´ä¿¡æ¯</p><pre><code class="js">socket(httpServer).on(&quot;connection&quot;, (sock) =&gt; &#123;  // ç”¨æˆ·ç¦»å¼€æˆ¿é—´  sock.on(&quot;userLeave&quot;, () =&gt; &#123;    // ...  &#125;);  // æ£€æŸ¥æˆ¿é—´æ˜¯å¦å¯åŠ å…¥  sock.on(&quot;checkRoom&quot;, () =&gt; &#123;    // ...  &#125;);  // ....&#125;);// client ç«¯ Room.vueimport socket from &quot;../utils/socket.js&quot;;// æœåŠ¡ç«¯å‘ŠçŸ¥ç”¨æˆ·æ˜¯å¦å¯åŠ å…¥æˆ¿é—´socket.on(&quot;checkRoomSuccess&quot;, () =&gt; &#123;  // ...&#125;);// æœåŠ¡ç«¯å‘ŠçŸ¥ç”¨æˆ·æˆåŠŸåŠ å…¥æˆ¿é—´socket.on(&quot;joinRoomSuccess&quot;, () =&gt; &#123;  // ...&#125;);//....</code></pre><p>3ã€A ç«¯ä½œä¸ºå‘èµ·æ–¹å‘æ¥æ”¶æ–¹ B ç«¯å‘èµ·è§†é¢‘é‚€è¯·</p><p>åœ¨å¾—åˆ° B åŒæ„è§†é¢‘è¯·æ±‚åï¼ŒåŒæ–¹éƒ½ä¼šåˆ›å»ºæœ¬åœ°çš„ RTCPeerConnectionï¼Œæ·»åŠ æœ¬åœ°è§†é¢‘æµï¼Œå…¶ä¸­å‘é€æ–¹ä¼šåˆ›å»º offer è®¾ç½®æœ¬åœ° sdp ä¿¡æ¯æè¿°ï¼Œå¹¶é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨å°†è‡ªå·±çš„ SDP ä¿¡æ¯å‘é€ç»™å¯¹ç«¯</p><pre><code class="js">socket.on(&quot;answerVideo&quot;, async (user) =&gt; &#123;  VIDEO_VIEW.showInvideoModal();  // åˆ›å»ºæœ¬åœ°è§†é¢‘æµä¿¡æ¯  const localStream = await this.createLocalVideoStream();  this.localStream = localStream;  document.querySelector(&quot;#echat-local&quot;).srcObject = this.localStream;  this.peer = new RTCPeerConnection();  this.initPeerListen();  this.peer.addStream(this.localStream);  if (user.sockId === this.sockId) &#123;    // æ¥æ”¶æ–¹  &#125; else &#123;    // å‘é€æ–¹ åˆ›å»º offer    const offer = await this.peer.createOffer(this.offerOption);    await this.peer.setLocalDescription(offer);    socket.emit(&quot;receiveOffer&quot;, &#123; user: this.user, offer &#125;);  &#125;&#125;);</code></pre><p>4ã€æ”¶é›†è‡ªå·±çš„ç½‘ç»œä¿¡æ¯å¹¶å‘é€ç»™å¯¹æ–¹</p><pre><code class="js">initPeerListen () &#123;      // æ”¶é›†è‡ªå·±çš„ç½‘ç»œä¿¡æ¯å¹¶å‘é€ç»™å¯¹ç«¯      this.peer.onicecandidate = (event) =&gt; &#123;        if (event.candidate) &#123; socket.emit(&#39;addIceCandidate&#39;, &#123; candidate: event.candidate, user: this.user &#125;); &#125;      &#125;;      // ....    &#125;</code></pre><p>5ã€å½“æ¥æ”¶æ–¹ B ç«¯é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨æ‹¿åˆ°å¯¹ç«¯å‘é€æ–¹ A ç«¯çš„å«æœ‰ SDP çš„ offer ä¿¡æ¯ååˆ™ä¼šè°ƒç”¨ setRemoteDescription å­˜å‚¨å¯¹ç«¯çš„ SDP ä¿¡æ¯ï¼Œåˆ›å»ºåŠè®¾ç½®æœ¬åœ°çš„ SDP ä¿¡æ¯,å¹¶é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨ä¼ é€å«æœ‰æœ¬åœ° SDP ä¿¡æ¯çš„ answer</p><pre><code class="js">socket.on(&quot;receiveOffer&quot;, async (offer) =&gt; &#123;  await this.peer.setRemoteDescription(offer);  const answer = await this.peer.createAnswer();  await this.peer.setLocalDescription(answer);  socket.emit(&quot;receiveAnsewer&quot;, &#123; answer, user: this.user &#125;);&#125;);</code></pre><p>6ã€å½“å‘èµ·æ–¹ A é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨æ¥æ”¶åˆ°æ¥æ”¶æ–¹ B çš„ answer ä¿¡æ¯ååˆ™ä¹Ÿä¼šè°ƒç”¨ setRemoteDescriptionï¼Œè¿™æ ·åŒæ–¹å°±å®Œæˆäº† SDP ä¿¡æ¯çš„äº¤æ¢</p><pre><code class="js">socket.on(&quot;receiveAnsewer&quot;, (answer) =&gt; &#123;  this.peer.setRemoteDescription(answer);&#125;);</code></pre><p>7ã€å½“åŒæ–¹ SDP ä¿¡æ¯äº¤æ¢å®Œæˆå¹¶ä¸”ç›‘å¬ icecandidate æ”¶é›†åˆ°ç½‘ç»œå€™é€‰è€…é€šè¿‡ä¿¡ä»¤æœåŠ¡å™¨äº¤æ¢åï¼Œåˆ™ä¼šæ‹¿åˆ°å½¼æ­¤çš„è§†é¢‘æµã€‚</p><pre><code class="js">socket.on(&quot;addIceCandidate&quot;, async (candidate) =&gt; &#123;  await this.peer.addIceCandidate(candidate);&#125;);this.peer.onaddstream = (event) =&gt; &#123;  // æ‹¿åˆ°å¯¹æ–¹çš„è§†é¢‘æµ  document.querySelector(&quot;#remote-video&quot;).srcObject = event.stream;&#125;;</code></pre><p>8ã€GitHubï¼š<a href="https://github.com/HeyJudeYQ/webrtc">https://github.com/HeyJudeYQ/webrtc</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> webrtc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51ã€Vueé¡¹ç›®ä¸­å‰ç«¯å¯¼å‡º/å¯¼å…¥Excelè¡¨æ ¼çš„å®ç°</title>
      <link href="/2022/01/15/export-excel/"/>
      <url>/2022/01/15/export-excel/</url>
      
        <content type="html"><![CDATA[<p>åå°ç®¡ç†ç³»ç»Ÿä¸­ï¼Œé€šå¸¸æœ‰è¿™æ ·çš„éœ€æ±‚:å°†å½“å‰ table è¡¨æ ¼å¯¼å‡º/å¯¼å…¥ Excel è¡¨æ ¼ï¼Œå®ç°æ–¹å¼é€šå¸¸ä¸ºåç«¯ä¸»å¯¼ï¼ˆåç«¯ä½¿ç”¨æ’ä»¶ï¼Œå‰ç«¯é€šè¿‡ç‚¹å‡»äº‹ä»¶ç”Ÿæˆä¸€ä¸ª a æ ‡ç­¾ï¼Œå¯¼å‡º Excel è¡¨æ ¼ï¼‰ã€å‰ç«¯ä¸»å¯¼ï¼ˆä½¿ç”¨ xlsxã€file-saverã€script-loader æ’ä»¶å°è£…å·¥å…·å‡½æ•°ï¼Œé€šè¿‡ç‚¹å‡»äº‹ä»¶ï¼Œè·å–å½“å‰é¡µé¢åå°è¿”å›çš„è¡¨æ ¼æ•°æ®)ã€‚</p><span id="more"></span><h2 id="ä¸€ã€å‰ç«¯å¯¼å‡º-Excel-è¡¨æ ¼çš„å®ç°"><a href="#ä¸€ã€å‰ç«¯å¯¼å‡º-Excel-è¡¨æ ¼çš„å®ç°" class="headerlink" title="ä¸€ã€å‰ç«¯å¯¼å‡º Excel è¡¨æ ¼çš„å®ç°"></a>ä¸€ã€å‰ç«¯å¯¼å‡º Excel è¡¨æ ¼çš„å®ç°</h2><h3 id="1ã€å®‰è£…-plugin"><a href="#1ã€å®‰è£…-plugin" class="headerlink" title="1ã€å®‰è£… plugin"></a>1ã€å®‰è£… plugin</h3><pre><code class="shell">npm install file-saver script-loader xlsx --save</code></pre><h3 id="2ã€Export2Excel-å·¥å…·å‡½æ•°"><a href="#2ã€Export2Excel-å·¥å…·å‡½æ•°" class="headerlink" title="2ã€Export2Excel å·¥å…·å‡½æ•°"></a>2ã€Export2Excel å·¥å…·å‡½æ•°</h3><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="js">import &#123; saveAs &#125; from &quot;file-saver&quot;;import XLSX from &quot;xlsx&quot;;function generateArray(table) &#123;  var out = [];  var rows = table.querySelectorAll(&quot;tr&quot;);  var ranges = [];  for (var R = 0; R &lt; rows.length; ++R) &#123;    var outRow = [];    var row = rows[R];    var columns = row.querySelectorAll(&quot;td&quot;);    for (var C = 0; C &lt; columns.length; ++C) &#123;      var cell = columns[C];      var colspan = cell.getAttribute(&quot;colspan&quot;);      var rowspan = cell.getAttribute(&quot;rowspan&quot;);      var cellValue = cell.innerText;      if (cellValue !== &quot;&quot; &amp;&amp; cellValue == +cellValue) cellValue = +cellValue;      //Skip ranges      ranges.forEach(function (range) &#123;        if (          R &gt;= range.s.r &amp;&amp;          R &lt;= range.e.r &amp;&amp;          outRow.length &gt;= range.s.c &amp;&amp;          outRow.length &lt;= range.e.c        ) &#123;          for (var i = 0; i &lt;= range.e.c - range.s.c; ++i) outRow.push(null);        &#125;      &#125;);      //Handle Row Span      if (rowspan || colspan) &#123;        rowspan = rowspan || 1;        colspan = colspan || 1;        ranges.push(&#123;          s: &#123;            r: R,            c: outRow.length,          &#125;,          e: &#123;            r: R + rowspan - 1,            c: outRow.length + colspan - 1,          &#125;,        &#125;);      &#125;      //Handle Value      outRow.push(cellValue !== &quot;&quot; ? cellValue : null);      //Handle Colspan      if (colspan) for (var k = 0; k &lt; colspan - 1; ++k) outRow.push(null);    &#125;    out.push(outRow);  &#125;  return [out, ranges];&#125;function datenum(v, date1904) &#123;  if (date1904) v += 1462;  var epoch = Date.parse(v);  return (epoch - new Date(Date.UTC(1899, 11, 30))) / (24 * 60 * 60 * 1000);&#125;function sheet_from_array_of_arrays(data, opts) &#123;  var ws = &#123;&#125;;  var range = &#123;    s: &#123;      c: 10000000,      r: 10000000,    &#125;,    e: &#123;      c: 0,      r: 0,    &#125;,  &#125;;  for (var R = 0; R != data.length; ++R) &#123;    for (var C = 0; C != data[R].length; ++C) &#123;      if (range.s.r &gt; R) range.s.r = R;      if (range.s.c &gt; C) range.s.c = C;      if (range.e.r &lt; R) range.e.r = R;      if (range.e.c &lt; C) range.e.c = C;      var cell = &#123;        v: data[R][C],      &#125;;      if (cell.v == null) continue;      var cell_ref = XLSX.utils.encode_cell(&#123;        c: C,        r: R,      &#125;);      if (typeof cell.v === &quot;number&quot;) cell.t = &quot;n&quot;;      else if (typeof cell.v === &quot;boolean&quot;) cell.t = &quot;b&quot;;      else if (cell.v instanceof Date) &#123;        cell.t = &quot;n&quot;;        cell.z = XLSX.SSF._table[14];        cell.v = datenum(cell.v);      &#125; else cell.t = &quot;s&quot;;      ws[cell_ref] = cell;    &#125;  &#125;  if (range.s.c &lt; 10000000) ws[&quot;!ref&quot;] = XLSX.utils.encode_range(range);  return ws;&#125;function Workbook() &#123;  if (!(this instanceof Workbook)) return new Workbook();  this.SheetNames = [];  this.Sheets = &#123;&#125;;&#125;function s2ab(s) &#123;  var buf = new ArrayBuffer(s.length);  var view = new Uint8Array(buf);  for (var i = 0; i != s.length; ++i) view[i] = s.charCodeAt(i) &amp; 0xff;  return buf;&#125;export function export_table_to_excel(id) &#123;  var theTable = document.getElementById(id);  var oo = generateArray(theTable);  var ranges = oo[1];  /* original data */  var data = oo[0];  var ws_name = &quot;SheetJS&quot;;  var wb = new Workbook(),    ws = sheet_from_array_of_arrays(data);  /* add ranges to worksheet */  // ws[&#39;!cols&#39;] = [&#39;apple&#39;, &#39;banan&#39;];  ws[&quot;!merges&quot;] = ranges;  /* add worksheet to workbook */  wb.SheetNames.push(ws_name);  wb.Sheets[ws_name] = ws;  var wbout = XLSX.write(wb, &#123;    bookType: &quot;xlsx&quot;,    bookSST: false,    type: &quot;binary&quot;,  &#125;);  saveAs(    new Blob([s2ab(wbout)], &#123;      type: &quot;application/octet-stream&quot;,    &#125;),    &quot;test.xlsx&quot;  );&#125;export function export_json_to_excel(&#123;  multiHeader = [],  header,  data,  filename,  merges = [],  autoWidth = true,  bookType = &quot;xlsx&quot;,&#125; = &#123;&#125;) &#123;  /* original data */  filename = filename || &quot;excel-list&quot;;  data = [...data];  data.unshift(header);  for (let i = multiHeader.length - 1; i &gt; -1; i--) &#123;    data.unshift(multiHeader[i]);  &#125;  var ws_name = &quot;SheetJS&quot;;  var wb = new Workbook(),    ws = sheet_from_array_of_arrays(data);  if (merges.length &gt; 0) &#123;    if (!ws[&quot;!merges&quot;]) ws[&quot;!merges&quot;] = [];    merges.forEach((item) =&gt; &#123;      ws[&quot;!merges&quot;].push(XLSX.utils.decode_range(item));    &#125;);  &#125;  if (autoWidth) &#123;    /*è®¾ç½®worksheetæ¯åˆ—çš„æœ€å¤§å®½åº¦*/    const colWidth = data.map((row) =&gt;      row.map((val) =&gt; &#123;        /*å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºnull/undefined*/        if (val == null) &#123;          return &#123;            wch: 10,          &#125;;        &#125; else if (val.toString().charCodeAt(0) &gt; 255) &#123;          /*å†åˆ¤æ–­æ˜¯å¦ä¸ºä¸­æ–‡*/          return &#123;            wch: val.toString().length * 2,          &#125;;        &#125; else &#123;          return &#123;            wch: val.toString().length,          &#125;;        &#125;      &#125;)    );    /*ä»¥ç¬¬ä¸€è¡Œä¸ºåˆå§‹å€¼*/    let result = colWidth[0];    for (let i = 1; i &lt; colWidth.length; i++) &#123;      for (let j = 0; j &lt; colWidth[i].length; j++) &#123;        if (result[j][&quot;wch&quot;] &lt; colWidth[i][j][&quot;wch&quot;]) &#123;          result[j][&quot;wch&quot;] = colWidth[i][j][&quot;wch&quot;];        &#125;      &#125;    &#125;    ws[&quot;!cols&quot;] = result;  &#125;  /* add worksheet to workbook */  wb.SheetNames.push(ws_name);  wb.Sheets[ws_name] = ws;  var wbout = XLSX.write(wb, &#123;    bookType: bookType,    bookSST: false,    type: &quot;binary&quot;,  &#125;);  saveAs(    new Blob([s2ab(wbout)], &#123;      type: &quot;application/octet-stream&quot;,    &#125;),    `$&#123;filename&#125;.$&#123;bookType&#125;`  );&#125;</code></pre></details><h3 id="3ã€å¯¼å‡ºå‡½æ•°"><a href="#3ã€å¯¼å‡ºå‡½æ•°" class="headerlink" title="3ã€å¯¼å‡ºå‡½æ•°"></a>3ã€å¯¼å‡ºå‡½æ•°</h3><p>a-button ä¸º ant-design-vue çš„ button ç»„ä»¶</p><pre><code class="html">&lt;a-button  type=&quot;primary&quot;  icon=&quot;export&quot;  class=&quot;select-bottom&quot;  :loading=&quot;exportLoading&quot;  @click=&quot;handleExport&quot;  &gt;å¯¼å‡º&lt;/a-button&gt;</code></pre><p>handleExport å¯¼å‡ºå‡½æ•°</p><blockquote><p>1ã€ç‚¹å‡»å¯¼å‡ºæŒ‰é’®ï¼Œå»åŠ è½½åœ¨ vendor æ–‡ä»¶å¤¹ä¸­çš„ Export2Excel æ¨¡å—<br>2ã€import æ–¹æ³•æ‰§è¡Œå®Œæ¯•è¿”å›ä¸€ä¸ª promise å¯¹è±¡ï¼Œåœ¨ then æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥æ‹¿åˆ°ä½¿ç”¨çš„æ¨¡å—å¯¹è±¡ï¼ˆexcelï¼‰<br>3ã€Excel å¯¼å‡ºå‚æ•°éƒ¨åˆ†çš„ dataï¼Œæ˜¯ä¸€ä¸ªä¸¥æ ¼çš„äºŒç»´æ•°ç»„ï¼Œheader ä¸ºå¯¼å‡ºçš„æ•°æ®è¡¨å¤´ï¼Œfilename ä¸ºå¯¼å‡ºçš„æ–‡ä»¶åï¼ŒbookType ä¸ºå¯¼å‡ºæ–‡ä»¶ç±»å‹ï¼ŒautoWidth ä¸ºå•å…ƒæ ¼æ˜¯å¦è¦è‡ªé€‚åº”å®½åº¦ã€‚</p></blockquote><pre><code class="js">handleExport() &#123;    //ç”±äºæ˜¯å‰ç«¯å¯¼å‡ºï¼Œæ‰€ä»¥åªèƒ½å¯¼å‡ºå½“å‰é¡µçš„æ•°æ®    this.exportLoading = true;      import(&#39;@/vendor/Export2Excel&#39;).then(excel =&gt; &#123;        const header = [],          filterVal = [];        this.tableHead.forEach(item =&gt; &#123;          if (item.title != &#39;æ“ä½œ&#39; &amp;&amp; item.title != &#39;åºå·&#39;) &#123;            header.push(item.title);            filterVal.push(item.dataIndex);          &#125;        &#125;);        const data = formatJson(this.tableData, filterVal);        excel.export_json_to_excel(&#123;          header,          data,          filename: &#39;è¡¨å•ç»Ÿè®¡&#39;        &#125;);        this.exportLoading = false;      &#125;);    &#125;</code></pre><h2 id="äºŒã€å‰ç«¯å¯¼å…¥-Excel-çš„å®ç°"><a href="#äºŒã€å‰ç«¯å¯¼å…¥-Excel-çš„å®ç°" class="headerlink" title="äºŒã€å‰ç«¯å¯¼å…¥ Excel çš„å®ç°"></a>äºŒã€å‰ç«¯å¯¼å…¥ Excel çš„å®ç°</h2><h3 id="1ã€ant-design-vue-ä¸Šä¼ ç»„ä»¶çš„ä½¿ç”¨"><a href="#1ã€ant-design-vue-ä¸Šä¼ ç»„ä»¶çš„ä½¿ç”¨" class="headerlink" title="1ã€ant-design-vue ä¸Šä¼ ç»„ä»¶çš„ä½¿ç”¨"></a>1ã€ant-design-vue ä¸Šä¼ ç»„ä»¶çš„ä½¿ç”¨</h3><pre><code class="html">&lt;div class=&quot;file-wrapper relative&quot;&gt;  &lt;input    ref=&quot;excel-upload&quot;    type=&quot;file&quot;    accept=&quot;.xlsx, .xls&quot;    @change=&quot;handleChange&quot;    style=&quot;display:none&quot;  /&gt;  &lt;a-button    type=&quot;primary&quot;    icon=&quot;file-excel&quot;    size=&quot;large&quot;    style=&quot;z-index:99&quot;    @click=&quot;handleUpload&quot;    :loading=&quot;loading&quot;  &gt;    ä¸Šä¼ Excel  &lt;/a-button&gt;  &lt;p class=&quot;text&quot;&gt;è¯·é€‰æ‹©Excelä¸Šä¼  æ”¯æŒ(xlsx,xls)æ ¼å¼&lt;/p&gt;&lt;/div&gt;&lt;!-- tableç»„ä»¶ tableData:[]  tableHead:[] --&gt;&lt;a-card  :hoverable=&quot;true&quot;  :bordered=&quot;false&quot;  v-if=&quot;tableHead.length &gt; 0&quot;  style=&quot;margin-top:30px&quot;&gt;  &lt;standard-table    :pagination=&quot;false&quot;    :tableData=&quot;tableData&quot;    :tableHead=&quot;tableHead&quot;  /&gt;&lt;/a-card&gt;</code></pre><!-- æ ·å¼ --><pre><code class="css">.file-wrapper &#123;  width: 100%;  height: 350px;  line-height: 350px;  text-align: center;  background: #e6ecf4;  .text &#123;    position: absolute;    top: 50px;    left: 50%;    transform: translateX(-50%);  &#125;&#125;</code></pre><h3 id="2ã€å¯¼å…¥å‡½æ•°"><a href="#2ã€å¯¼å…¥å‡½æ•°" class="headerlink" title="2ã€å¯¼å…¥å‡½æ•°"></a>2ã€å¯¼å…¥å‡½æ•°</h3><pre><code class="js">// å¼•å…¥xlsx tableç»„ä»¶import XLSX from &quot;xlsx&quot;;import standardTable from &quot;@/components/standardTable/index&quot;;</code></pre><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="js">    handleChange(e) &#123;      const file = e.target.files[0];      if (!file) return;      //åˆ¤æ–­æ ¼å¼      if (!this.isExcel(file)) &#123;        this.$message.warning(&#39;åªèƒ½é€‰æ‹©xlxs,xlsæ–‡ä»¶&#39;);        return;      &#125;      //åˆ¤æ–­å¤§å°      if (file.size / 1024 / 1024 &gt; 1) &#123;        this.$message.warning(&#39;ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡1M&#39;);        return;      &#125;      this.loading = true;      const reader = new FileReader();      reader.readAsArrayBuffer(file);      reader.onload = e =&gt; &#123;        const data = e.target.result;        const workbook = XLSX.read(data, &#123; type: &#39;array&#39; &#125;);        const firstSheetName = workbook.SheetNames[0];        const worksheet = workbook.Sheets[firstSheetName];        setTimeout(() =&gt; &#123;          this.loading = false;          const head = this.getHeaderRow(worksheet);          this.tableHead = head.map(item =&gt; &#123;            return &#123;              title: item,              dataIndex: item            &#125;;          &#125;);          const tableData = XLSX.utils.sheet_to_json(worksheet);          tableData.forEach(item =&gt; &#123;            item.id = parseInt(Math.random(0, 1) * 10000);          &#125;);          this.tableData = tableData;        &#125;, 500);      &#125;;    &#125;,    generateData(&#123; header, results &#125;) &#123;      this.excelData.header = header;      this.excelData.results = results;      this.onSuccess &amp;&amp; this.onSuccess(this.excelData);    &#125;,    //è·å–è¡¨å¤´    getHeaderRow(sheet) &#123;      const headers = [];      const range = XLSX.utils.decode_range(sheet[&#39;!ref&#39;]);      let C;      const R = range.s.r;      for (C = range.s.c; C &lt;= range.e.c; ++C) &#123;        const cell = sheet[XLSX.utils.encode_cell(&#123; c: C, r: R &#125;)];        let hdr = &#39;UNKNOWN &#39; + C;        if (cell &amp;&amp; cell.t) hdr = XLSX.utils.format_cell(cell);        headers.push(hdr);      &#125;      return headers;    &#125;,    handleUpload() &#123;      this.$refs[&#39;excel-upload&#39;].click();    &#125;,    // æ–‡ä»¶ç±»å‹    isExcel(file) &#123;      return /\.(xlsx|xls|csv)$/.test(file.name);    &#125;</code></pre></details><h2 id="ä¸‰ã€table-å­ç»„ä»¶"><a href="#ä¸‰ã€table-å­ç»„ä»¶" class="headerlink" title="ä¸‰ã€table å­ç»„ä»¶"></a>ä¸‰ã€table å­ç»„ä»¶</h2><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="html">&lt;div class=&quot;tableCommon-wrapper&quot;&gt;  &lt;a-table    :columns=&quot;tableHead&quot;    :dataSource=&quot;tableData&quot;    :loading=&quot;loading&quot;    :pagination=&quot;pagination&quot;    :row-selection=&quot;rowSelection&quot;    @change=&quot;handleTableChange&quot;    rowKey=&quot;id&quot;    :scroll=&quot;scroll&quot;  &gt;    &lt;template      slot-scope=&quot;text, record, index&quot;      :slot=&quot;slot&quot;      v-for=&quot;slot in Object.keys($scopedSlots).filter(key =&gt; key !== &#39;expandedRowRender&#39;)&quot;    &gt;      &lt;slot :name=&quot;slot&quot; v-bind=&quot;&#123; text, record, index &#125;&quot;&gt;&lt;/slot&gt;    &lt;/template&gt;  &lt;/a-table&gt;&lt;/div&gt;</code></pre><pre><code class="js">export default &#123;  name: &quot;standardTable&quot;,  props: &#123;    tableHead: &#123;      type: Array,      required: true,    &#125;,    tableData: &#123;      type: Array,      required: true,    &#125;,    loading: &#123;      type: Boolean,      default: false,    &#125;,    pagination: &#123;      type: Boolean | Object,    &#125;,    rowSelection: &#123;      type: Object,    &#125;,    scroll: &#123;      type: Object,    &#125;,  &#125;,  methods: &#123;    handleTableChange(val) &#123;      this.$emit(&quot;changeCurrent&quot;, val.current);    &#125;,  &#125;,&#125;;</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>50ã€CountTo:æ•°å­—åŠ¨æ€æ»šåŠ¨</title>
      <link href="/2022/01/13/count-to/"/>
      <url>/2022/01/13/count-to/</url>
      
        <content type="html"><![CDATA[<p>vueä½¿ç”¨vue-count-toå®ç°æ•°å­—çš„åŠ¨æ€æ»šåŠ¨åŠŸèƒ½ï¼Œé€‚ç”¨äºæ•°æ®å¯è§†åŒ–å¤§å±é¡¹ç›®ä¸­ä½¿ç”¨æ•°å­—æ»šåŠ¨ã€‚</p><span id="more"></span><pre><code class="js">// 1ã€å®‰è£…vue-count-tonpm isntall vue-count-to// 2ã€ç»„ä»¶å†…å¼•å…¥ã€æ³¨å†Œ startVal endVal ç±»å‹ä¸ºNumber</code></pre><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="html">&lt;template&gt;  &lt;countTo :startVal=&#39;startVal&#39; :endVal=&#39;number&#39; :duration=&#39;3000&#39; :decimals=&#39;0&#39;  :autoplay=true&gt;&lt;/countTo&gt;&lt;/template&gt;&lt;script&gt;import countTo from &#39;vue-count-to&#39;;  export default&#123;    components:&#123;countTo&#125;,    props:&#123;      number: [Number, String],      startVal:&#123;        type:Number,        default:0      &#125;    &#125;  &#125;&lt;/script&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>49ã€websocketå®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„é€šä¿¡</title>
      <link href="/2022/01/03/websocket/"/>
      <url>/2022/01/03/websocket/</url>
      
        <content type="html"><![CDATA[<p>WebSocket æ˜¯ HTML5 å¼€å§‹æä¾›çš„ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šè®¯çš„åè®®ã€‚ä¼ ç»Ÿçš„httpåè®®ï¼Œé€šä¿¡åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ã€‚websocketå®ç°äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åŒå‘å¹³ç­‰å¯¹è¯ï¼Œwebsocketæœ€å¤§çš„ç‰¹ç‚¹ï¼šæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘ç”¨æˆ·æ¨é€ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä¸»åŠ¨å‘æœåŠ¡ç«¯å‘é€ä¿¡æ¯ã€‚</p><span id="more"></span><h2 id="ä¸€ã€websocketç‰¹ç‚¹ï¼š"><a href="#ä¸€ã€websocketç‰¹ç‚¹ï¼š" class="headerlink" title="ä¸€ã€websocketç‰¹ç‚¹ï¼š"></a>ä¸€ã€websocketç‰¹ç‚¹ï¼š</h2><blockquote><p>1ã€å»ºç«‹åœ¨ TCP åè®®ä¹‹ä¸Šï¼ŒæœåŠ¡å™¨ç«¯çš„å®ç°æ¯”è¾ƒå®¹æ˜“ã€‚<br>2ã€ä¸ HTTP åè®®æœ‰ç€è‰¯å¥½çš„å…¼å®¹æ€§ï¼Œé»˜è®¤ç«¯å£ä¹Ÿæ˜¯80å’Œ443ã€‚å¹¶ä¸”æ¡æ‰‹é˜¶æ®µé‡‡ç”¨ HTTP åè®®ï¼Œå› æ­¤æ¡æ‰‹æ—¶ä¸å®¹æ˜“å±è”½ï¼Œèƒ½é€šè¿‡å„ç§ HTTP ä»£ç†æœåŠ¡å™¨ã€‚<br>3ã€æ•°æ®æ ¼å¼æ¯”è¾ƒè½»é‡ï¼Œæ€§èƒ½å¼€é”€å°ï¼Œé€šä¿¡é«˜æ•ˆã€‚<br>4ã€å¯ä»¥å‘é€æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥å‘é€äºŒè¿›åˆ¶æ•°æ®ã€‚<br>5ã€æ²¡æœ‰åŒæºé™åˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä¸ä»»æ„æœåŠ¡å™¨é€šä¿¡ã€‚<br>6ã€å…¨åŒå·¥(é€šä¿¡å…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸ŠåŒæ—¶ä¼ è¾“ï¼Œå®ƒåœ¨èƒ½åŠ›ä¸Šç›¸å½“äºä¸¤ä¸ªå•å·¥é€šä¿¡æ–¹å¼çš„ç»“åˆ,ä¾‹å¦‚æŒ‡ Aâ†’B çš„åŒæ—¶ Bâ†’A ï¼Œæ˜¯ç¬æ—¶åŒæ­¥çš„)<br>7ã€åè®®æ ‡è¯†ç¬¦æ˜¯wsï¼ˆå¦‚æœåŠ å¯†ï¼Œåˆ™ä¸ºwssï¼‰ï¼ŒæœåŠ¡å™¨ç½‘å€å°±æ˜¯ URLã€‚</p></blockquote><p>åˆå§‹åŒ–websocket<br>1ã€åˆ›å»ºwebsocketå®ä¾‹ï¼Œå‚æ•°ä¸ºurl<br>2ã€è¿æ¥ websocket.onopen<br>3ã€serverå“åº”æ•°æ®è§¦å‘ websocket.onmessage<br>4ã€å…³é—­websocketï¼Œwebsocket.onclose</p><pre><code class="js">// æ„é€ å‡½æ•° å‚æ•°ä¸ºurlconst wsurl = &quot;ws://localhost:8080&quot;;var ws = new Websocket(wsurl);// è¿æ¥çŠ¶æ€readState 1  å‡†å¤‡å¥½å‘é€å’Œæ¥å—æ•°æ®äº†ws.onopen = function()&#123;  ws.send(&#39;hello server! websocket is open now!&#39;)&#125;// é€šè¿‡å®¢æˆ·ç«¯çš„äº‹ä»¶   å‘é€ä¿¡æ¯ç»™æœåŠ¡ç«¯ws.send(&#39;hello websocket&#39;);// å‘ç”Ÿé”™è¯¯ws.onerror = function(event)&#123;  console.log(&quot;websocket error observed&quot;,event)&#125;// readState CLOSED  å…³é—­websocketws.onclose = function(event)&#123;  let status_code = event.status;  let msg = event.msg;  console.log(&quot;websocket is closed now&quot;)&#125;// å“åº”æ•°æ®çš„æ¥æ”¶ws.onmessage = function(event)&#123;  let data = event.data;&#125;</code></pre><ul><li>è·¯ç”±æ”¹å˜ï¼Œéœ€è¦æ–­å¼€websocketè¿æ¥ï¼ŒèŠ‚çœæœåŠ¡å™¨å¼€æ”¯ã€‚</li></ul><h2 id="äºŒã€å¿ƒè·³æœºåˆ¶"><a href="#äºŒã€å¿ƒè·³æœºåˆ¶" class="headerlink" title="äºŒã€å¿ƒè·³æœºåˆ¶"></a>äºŒã€å¿ƒè·³æœºåˆ¶</h2><blockquote><p>websocketåœ¨è¿æ¥å…³é—­çš„æƒ…å†µä¸‹è§¦å‘oncloseäº‹ä»¶ï¼Œè¿æ¥å¼‚å¸¸è§¦å‘onerroräº‹ä»¶ã€‚ç½‘ç»œçŠ¶æ€ä¸å¥½çš„æƒ…å†µï¼Œoncloseäº‹ä»¶çš„è§¦å‘çµæ•åº¦ä¸é«˜ï¼Œå¯èƒ½ä¼šé€ æˆæ–­ç½‘å¾ˆä¹…è§¦å‘oncloseäº‹ä»¶ï¼Œå®¢æˆ·ç«¯åˆå‡ºç°é‡æ–°è¿æ¥ï¼Œå®¢æˆ·ç«¯å®æ—¶ç•Œé¢ä¸å‹å¥½ã€‚</p></blockquote><p>ä¸ºäº†è§£å†³ä¸Šé¢çš„æƒ…å†µï¼Œä½¿ç”¨å¿ƒè·³é‡è¿æœºåˆ¶ï¼Œå®¢æˆ·ç«¯åœ¨websocketè¿æ¥æˆåŠŸåï¼Œæ‰§è¡Œå¿ƒè·³å‡½æ•°ï¼Œé¦–å…ˆå‘æœåŠ¡å™¨å‘é€â€™pingâ€˜ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ä¿¡æ¯ä¼šè¿”å›â€™pongâ€™ä¿¡æ¯ã€‚ä¸€å®šæ—¶é—´å†…ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºè¿æ¥æ­£å¸¸ï¼Œé‡ç½®å¿ƒè·³å‡½æ•°ï¼›å®¢æˆ·ç«¯åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°å¿ƒè·³å‡½æ•°ï¼Œè¡¨æ˜æ²¡æœ‰è¿æ¥æˆåŠŸï¼Œå®¢æˆ·ç«¯å…³é—­websocket,å†æ‰§è¡Œé‡è¿æ“ä½œã€‚</p><p>è§£å†³æ–¹å¼ï¼š</p><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="js">import &#123; mapActions, mapState &#125; from &#39;vuex&#39;;export default &#123;    name: &#39;Websocket&#39;,    data() &#123;        return &#123;            // æ˜¯å¦æ­£åœ¨é‡è¿            lockReconnect: false,            socket: null,            reconnectTimeout: null,            timeout: 10 * 1000,            timer: null,            serverTimer: null        &#125;;    &#125;,    computed: &#123;        ...mapState([&#39;userInfo&#39;]),        wsuri() &#123;            return `$&#123;process.env.VUE_APP_WEBSOCKET_URI&#125;$&#123;this.userInfo.tenantId&#125;;$&#123;this.userInfo.userId&#125;`;        &#125;    &#125;,    async mounted() &#123;        await this.getUserInfo();        this.initWebSocket();    &#125;,    destroyed() &#123;        this.socket.close();    &#125;,    methods: &#123;        ...mapActions([&#39;getUserInfo&#39;]),        start(ws) &#123;            this.reset();            this.timer = setTimeout(() =&gt; &#123;                // console.log(&#39;å‘é€å¿ƒè·³,åç«¯æ”¶åˆ°åï¼Œè¿”å›ä¸€ä¸ªå¿ƒè·³æ¶ˆæ¯&#39;)                // onmessageæ‹¿åˆ°è¿”å›çš„å¿ƒè·³å°±è¯´æ˜è¿æ¥æ­£å¸¸                ws.send(&#39;ping&#39;);                this.serverTimer = setTimeout(() =&gt; &#123;                    // å¦‚æœè¶…è¿‡ä¸€å®šæ—¶é—´è¿˜æ²¡å“åº”(å“åº”åè§¦å‘é‡ç½®)ï¼Œè¯´æ˜åç«¯æ–­å¼€äº†                    ws.close();                &#125;, this.timeout);            &#125;, this.timeout);        &#125;,        reset() &#123;            this.serverTimer &amp;&amp; clearTimeout(this.serverTimer);            this.timer &amp;&amp; clearTimeout(this.timer);        &#125;,        reconnect() &#123;            console.log(&#39;å°è¯•é‡è¿&#39;);            if (this.lockReconnect) &#123;                return;            &#125;            this.lockReconnect = true;            this.reconnectTimeout &amp;&amp; clearTimeout(this.reconnectTimeout);            this.reconnectTimeout = setTimeout(() =&gt; &#123;                this.initWebSocket();                this.lockReconnect = false;            &#125;, 4 * 1000);        &#125;,        // åˆå§‹åŒ–websocket        initWebSocket() &#123;            try &#123;                if (&#39;WebSocket&#39; in window) &#123;                    this.socket = new WebSocket(this.wsuri);                &#125; else &#123;                    console.log(&#39;æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒwebsocket&#39;);                &#125;                this.socket.onopen = this.websocketOnOpen;                this.socket.onerror = this.websocketOnError;                this.socket.onmessage = this.websocketOnMessage;                this.socket.onclose = this.websocketClose;            &#125; catch (e) &#123;                this.reconnect();            &#125;        &#125;,        websocketOnOpen() &#123;            console.log(&#39;WebSocketè¿æ¥æˆåŠŸ&#39;, this.socket.readyState);            this.start(this.socket);            this.websocketSend();        &#125;,        websocketOnError(e) &#123;            console.log(&#39;WebSocketè¿æ¥å‘ç”Ÿé”™è¯¯&#39;, e);            this.reconnect();        &#125;,        websocketOnMessage(e) &#123;            if (e.data === &#39;pong&#39;) &#123;                // æ¶ˆæ¯è·å–æˆåŠŸï¼Œé‡ç½®å¿ƒè·³                this.start(this.socket);            &#125;        &#125;,        websocketClose(e) &#123;            console.log(&#39;connection closed (&#39; + e.code + &#39;)&#39;);            this.reconnect();        &#125;,        websocketSend() &#123;            this.socket.send(&#39;ping&#39;);        &#125;    &#125;&#125;;</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> websocket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>48ã€ç”¨hookå¤„ç†ç»„ä»¶å†…å®šæ—¶å™¨</title>
      <link href="/2022/01/01/hook/"/>
      <url>/2022/01/01/hook/</url>
      
        <content type="html"><![CDATA[<p>vue é¡¹ç›®ä½¿ç”¨ hook å¤„ç†ç»„ä»¶å†…å®šæ—¶å™¨çš„æ–¹å¼ã€‚ä¸€èˆ¬æ˜¯ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°beforeDestoryæ¥é”€æ¯å®šæ—¶å™¨ã€‚ä»Vueæºç çš„lifecycle.jsä¸­å‘ç°äº†ä¸€ç§æ‹“å±•æ–¹æ³•ï¼Œå¯ä»¥æå‡ä»£ç çš„ç®€æ´æ€§ï¼Œè€Œä¸”è¿˜å¯ä»¥å‡å°‘dataé‡Œæ— ç”¨å˜é‡çš„å®šä¹‰ã€‚</p><span id="more"></span><h2 id="ä¸€ã€ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¤„ç†å®šæ—¶å™¨"><a href="#ä¸€ã€ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¤„ç†å®šæ—¶å™¨" class="headerlink" title="ä¸€ã€ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¤„ç†å®šæ—¶å™¨"></a>ä¸€ã€ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¤„ç†å®šæ—¶å™¨</h2><p>é€šå¸¸å¤„ç†ç»„ä»¶å†…å®šæ—¶å™¨çš„æ­¥éª¤æ˜¯ä¸‹é¢è¿™æ ·çš„</p><pre><code class="js">export default&#123;    mounted()&#123;        this.timer = setIntervalï¼ˆ() =&gt;&#123;            // do something        &#125;,1000ï¼‰    &#125;,    beforeDestory()&#123;        clearInterval(this.timer);    &#125;&#125;</code></pre><h2 id="äºŒã€ä½¿ç”¨-hook-å¤„ç†å®šæ—¶å™¨"><a href="#äºŒã€ä½¿ç”¨-hook-å¤„ç†å®šæ—¶å™¨" class="headerlink" title="äºŒã€ä½¿ç”¨ hook å¤„ç†å®šæ—¶å™¨"></a>äºŒã€ä½¿ç”¨ hook å¤„ç†å®šæ—¶å™¨</h2><pre><code class="js">export default&#123;    mounted()&#123;        const timer = setInterval(() =&gt; &#123;            // do something        &#125;,1000);        this.$once(&#39;hook:beforeDestory&#39;,()=&gt; clearInterval(timer);)    &#125;&#125;</code></pre><h2 id="ä¸‰ã€é€‚ç”¨åœºæ™¯"><a href="#ä¸‰ã€é€‚ç”¨åœºæ™¯" class="headerlink" title="ä¸‰ã€é€‚ç”¨åœºæ™¯:"></a>ä¸‰ã€é€‚ç”¨åœºæ™¯:</h2><p>å¤„ç†å¯è§†åŒ–å›¾è¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¹‹å‰è®©é¡µé¢æœ‰ loading åŠ¨ç”»ï¼Œmounted æŒ‚è½½ä¹‹ååœæ­¢ loadingï¼ŒbeforeUpdate æ—¶å¼€å§‹ loadingï¼Œupdated ä¹‹ååœæ­¢ loadingã€‚</p><p>ä½¿ç”¨ hook å¤„ç†:</p><pre><code class="tempalte">&lt;v-chart&gt;  @hook:mounted=&quot;loading = false&quot; @hook:beforeUpdated=&quot;loading = true&quot;  @hook:updated=&quot;loading = false&quot; :data=&quot;data&quot;&lt;/v-chart&gt;</code></pre><h2 id="å››ã€è¡¥å……è¯´æ˜ï¼šå¦‚ä½•å®ç°çˆ¶ç»„ä»¶ç›‘å¬å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Ÿ"><a href="#å››ã€è¡¥å……è¯´æ˜ï¼šå¦‚ä½•å®ç°çˆ¶ç»„ä»¶ç›‘å¬å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Ÿ" class="headerlink" title="å››ã€è¡¥å……è¯´æ˜ï¼šå¦‚ä½•å®ç°çˆ¶ç»„ä»¶ç›‘å¬å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Ÿ"></a>å››ã€è¡¥å……è¯´æ˜ï¼šå¦‚ä½•å®ç°çˆ¶ç»„ä»¶ç›‘å¬å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h2><h3 id="1ã€æ–¹æ³•ä¸€ï¼š-emit"><a href="#1ã€æ–¹æ³•ä¸€ï¼š-emit" class="headerlink" title="1ã€æ–¹æ³•ä¸€ï¼š$emit"></a>1ã€æ–¹æ³•ä¸€ï¼š$emit</h3><p>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œä¾èµ–å­ç»„ä»¶åœ¨è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸæé€šè¿‡vm.$emitçš„æ–¹å¼ï¼Œè°ƒç”¨çˆ¶ç»„ä»¶ç”Ÿå‘½çš„å›è°ƒå‡½æ•°ã€‚</p><pre><code class="html">&lt;!-- çˆ¶ç»„ä»¶ --&gt;&lt;template&gt;    &lt;div&gt;        &lt;Child @mounted=&quot;onMounted&quot;            @updated=&quot;onUpdated&quot;            @beforeDestory=&quot;beforeDestory&quot;        &gt;        &lt;/Child&gt;    &lt;/div&gt;&lt;/template&gt;</code></pre><p>å­ç»„ä»¶ï¼š</p><pre><code class="js">mounted()&#123;    this.$emit(&#39;mounted&#39;)&#125;,updated()&#123;    this.$emit(&#39;updated&#39;)&#125;,beforeDestory()&#123;    this.$emit(&#39;beforeDestory&#39;)&#125;</code></pre><h3 id="2ã€æ–¹æ³•äºŒï¼š-hook"><a href="#2ã€æ–¹æ³•äºŒï¼š-hook" class="headerlink" title="2ã€æ–¹æ³•äºŒï¼š@hook"></a>2ã€æ–¹æ³•äºŒï¼š@hook</h3><p>çˆ¶ç»„ä»¶æ¨¡æ¿</p><pre><code class="html">&lt;template&gt;    &lt;div&gt;        &lt;Child @hook:mounted=&quot;onMounted&quot;            @hook:updated=&quot;onUpdated&quot;            @hook:beforeDestory=&quot;beforeDestory&quot;        &gt;        &lt;/Child&gt;    &lt;/div&gt;&lt;/template&gt;</code></pre><p>vueæºç çš„lifecycle.jsä¸­ï¼ŒVueçš„ç”Ÿå‘½å‘¨æœŸå„ä¸ªé˜¶æ®µéƒ½ä¼šå»è°ƒç”¨ä¸€ä¸ªcallHookå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ”¯æŒ2ä¸ªå‚æ•°ï¼šå®ä¾‹vmå’Œç”Ÿå‘½å‘¨æœŸé’©å­åç§°,callHooké‡Œé¢æ‰§è¡Œäº†vm.$emit(â€˜hook:â€™+hook)ã€‚</p><p>lifecycle.jsæºç ç‰‡æ®µï¼ˆè¿™ä¸ªæ–‡ä»¶åœ¨Vueæºç çš„src/core/instance/lifecycle.jsï¼‰</p><pre><code class="js">// callHookå‡½æ•°export function callHook (vm: Component, hook: string) &#123;  // #7573 disable dep collection when invoking lifecycle hooks  pushTarget()  const handlers = vm.$options[hook]  const info = `$&#123;hook&#125; hook`  if (handlers) &#123;    for (let i = 0, j = handlers.length; i &lt; j; i++) &#123;      invokeWithErrorHandling(handlers[i], vm, null, vm, info)    &#125;  &#125;  if (vm._hasHookEvent) &#123;    vm.$emit(&#39;hook:&#39; + hook)  &#125;  popTarget()&#125;</code></pre><p>@hookåŸç†ï¼š</p><blockquote><p>å½“æˆ‘ä»¬åœ¨å­ç»„ä»¶ä¸Šä¼ äº†å¯¹åº”çš„@hook:mountedé’©å­ï¼Œä¹Ÿå°±æ‰§è¡Œäº†vm.$on(â€˜hook:mountedâ€™),vueå®ä¾‹åœ¨ç”Ÿå‘½å‘¨æœŸé‡Œæœ¬èº«å°±ä¼šæ‰§è¡Œvm.$emit(â€˜hook:mountedâ€™),ä¹Ÿè§¦å‘äº†æˆ‘ä»¬ç»‘å®šç»™å­ç»„ä»¶çš„å›è°ƒå‡½æ•°ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>47ã€gitæäº¤è§„èŒƒ</title>
      <link href="/2021/12/22/git/"/>
      <url>/2021/12/22/git/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨commitizenå’Œcz-customizableè§„èŒƒä»£ç æäº¤</p><span id="more"></span><h3 id="1-å®‰è£…commitizenå’Œcz-customizable"><a href="#1-å®‰è£…commitizenå’Œcz-customizable" class="headerlink" title="1.å®‰è£…commitizenå’Œcz-customizable"></a>1.å®‰è£…commitizenå’Œcz-customizable</h3><pre><code class="js">npm install -g commitizen@4.2.4npm i cz-customizable@6.3.0 --save-dev</code></pre><h3 id="2-åœ¨package-jsonä¸­è¿›è¡Œæ–°å¢"><a href="#2-åœ¨package-jsonä¸­è¿›è¡Œæ–°å¢" class="headerlink" title="2.åœ¨package.jsonä¸­è¿›è¡Œæ–°å¢"></a>2.åœ¨package.jsonä¸­è¿›è¡Œæ–°å¢</h3><pre><code class="js">&quot;config&quot;: &#123;  &quot;commitizen&quot;: &#123;    &quot;path&quot;: &quot;node_modules/cz-customizable&quot;  &#125;&#125;</code></pre><h3 id="3-åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º-cz-config-jsæ–‡ä»¶å¹¶å†™å…¥é…ç½®-ä¹‹åå°±å¯ä»¥ç”¨-git-cz-æ¥ä»£æ›¿-git-commit"><a href="#3-åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º-cz-config-jsæ–‡ä»¶å¹¶å†™å…¥é…ç½®-ä¹‹åå°±å¯ä»¥ç”¨-git-cz-æ¥ä»£æ›¿-git-commit" class="headerlink" title="3.åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º.cz-config.jsæ–‡ä»¶å¹¶å†™å…¥é…ç½® ä¹‹åå°±å¯ä»¥ç”¨ git cz æ¥ä»£æ›¿ git commit"></a>3.åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º.cz-config.jsæ–‡ä»¶å¹¶å†™å…¥é…ç½® ä¹‹åå°±å¯ä»¥ç”¨ git cz æ¥ä»£æ›¿ git commit</h3><h3 id="4-ä½¿ç”¨huskyè¿›è¡Œå¼ºåˆ¶gitä»£ç æäº¤è§„èŒƒ"><a href="#4-ä½¿ç”¨huskyè¿›è¡Œå¼ºåˆ¶gitä»£ç æäº¤è§„èŒƒ" class="headerlink" title="4.ä½¿ç”¨huskyè¿›è¡Œå¼ºåˆ¶gitä»£ç æäº¤è§„èŒƒ"></a>4.ä½¿ç”¨huskyè¿›è¡Œå¼ºåˆ¶gitä»£ç æäº¤è§„èŒƒ</h3><pre><code class="js">npm install --save-dev @commitlint/config-conventional@12.1.4 @commitlint/cli@12.1.4npm install husky@7.0.1 --save-devnpx husky install</code></pre><h3 id="5-åœ¨package-jsonä¸­æ–°å¢æŒ‡ä»¤"><a href="#5-åœ¨package-jsonä¸­æ–°å¢æŒ‡ä»¤" class="headerlink" title="5.åœ¨package.jsonä¸­æ–°å¢æŒ‡ä»¤"></a>5.åœ¨package.jsonä¸­æ–°å¢æŒ‡ä»¤</h3><pre><code class="js">&quot;prepare&quot;: &quot;husky install&quot;</code></pre><h3 id="6-å¹¶æ‰§è¡Œ"><a href="#6-å¹¶æ‰§è¡Œ" class="headerlink" title="6.å¹¶æ‰§è¡Œ"></a>6.å¹¶æ‰§è¡Œ</h3><pre><code class="js">npm run prepare</code></pre><h3 id="7-æ–°å¢huskyé…ç½®æ–‡ä»¶-å¹¶å¾€é‡Œé¢å†™å…¥"><a href="#7-æ–°å¢huskyé…ç½®æ–‡ä»¶-å¹¶å¾€é‡Œé¢å†™å…¥" class="headerlink" title="7.æ–°å¢huskyé…ç½®æ–‡ä»¶ å¹¶å¾€é‡Œé¢å†™å…¥"></a>7.æ–°å¢huskyé…ç½®æ–‡ä»¶ å¹¶å¾€é‡Œé¢å†™å…¥</h3><pre><code class="js">npx husky add .husky/commit-msgnpx --no-install commitlint --edit</code></pre><h3 id="8ã€huskyè§„èŒƒ"><a href="#8ã€huskyè§„èŒƒ" class="headerlink" title="8ã€huskyè§„èŒƒ"></a>8ã€huskyè§„èŒƒ</h3><pre><code class="js">// commitlint.config.jsmodule.exports = &#123;  // ç»§æ‰¿çš„è§„åˆ™  extends: [&#39;@commitlint/config-conventional&#39;],  // å®šä¹‰è§„åˆ™ç±»å‹  rules: &#123;    // type ç±»å‹å®šä¹‰ï¼Œè¡¨ç¤º git æäº¤çš„ type å¿…é¡»åœ¨ä»¥ä¸‹ç±»å‹èŒƒå›´å†…    &#39;type-enum&#39;: [      2,      &#39;always&#39;,      [        &#39;feat&#39;, // æ–°åŠŸèƒ½ feature        &#39;fix&#39;, // ä¿®å¤ bug        &#39;docs&#39;, // æ–‡æ¡£æ³¨é‡Š        &#39;style&#39;, // ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)        &#39;refactor&#39;, // é‡æ„(æ—¢ä¸å¢åŠ æ–°åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bug)        &#39;perf&#39;, // æ€§èƒ½ä¼˜åŒ–        &#39;test&#39;, // å¢åŠ æµ‹è¯•        &#39;chore&#39;, // æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨        &#39;revert&#39;, // å›é€€        &#39;build&#39; // æ‰“åŒ…      ]    ],    // subject å¤§å°å†™ä¸åšæ ¡éªŒ    &#39;subject-case&#39;: [0]  &#125;&#125;</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>46ã€è§£å†³GitHub Pagesç»‘å®šé˜¿é‡ŒåŸŸåCNAMEæ¶ˆå¤±</title>
      <link href="/2021/10/28/url/"/>
      <url>/2021/10/28/url/</url>
      
        <content type="html"><![CDATA[<p>hexoä¸»é¢˜ä½¿ç”¨çš„æ˜¯Claudia,éƒ¨ç½²åˆ°GitHub Pagesæ—¶ï¼ŒCNAMEä¼šæ¶ˆå¤±ã€‚</p><span id="more"></span><p>è§£å†³æ–¹å¼ï¼š</p><pre><code>// 1 cd sourcetouch CNAME// 2 è¾“å…¥é˜¿é‡ŒåŸŸåissummer.cn// 3 éƒ¨ç½²hexo g &amp;&amp; hexo d</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>45ã€è‡ªå®šä¹‰inputå”¤èµ·é”®ç›˜</title>
      <link href="/2021/10/20/input/"/>
      <url>/2021/10/20/input/</url>
      
        <content type="html"><![CDATA[<p>è‡ªå®šä¹‰ input å”¤èµ·é”®ç›˜ã€‚ç§»åŠ¨ç«¯é¡µé¢è‡ªå®šä¹‰ input å”¤èµ·é”®ç›˜ returnï¼Œæœ‰æ—¶éœ€è¦å°†æ¢è¡Œé”®æ”¹ä¸ºæœç´¢ï¼Œä¸ºäº†è¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚<br>åœ¨ html5 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°† input çš„ type ä¿®æ”¹ä¸º searchï¼Œè¿™æ ·ä¿®æ”¹ä¹‹åï¼Œæˆ‘ä»¬çš„å®‰å“æ‰‹æœºä¼šå˜æˆæœç´¢æˆ–è€…æœç´¢ç¬¦å·ã€IOS åˆ™ä¼šå˜æˆæ¢è¡Œã€‚</p><span id="more"></span><p>1ã€å®‰å“æ‰‹æœº</p><pre><code class="html">&lt;input type=&quot;search&quot; placeholder=&quot;è¯·è¾“å…¥ä½ è¦æœç´¢çš„å†…å®¹&quot; v-model=&quot;value&quot; /&gt;</code></pre><p>2ã€è‹¹æœ IOS æ‰‹æœº</p><p>ä¸å®‰å“æ‰‹æœºä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¤–å±‚åŒ…è£¹ä¸€ä¸ª form</p><pre><code class="html">    &lt;from action=&quot;javascript:return true&quot;&gt;        &lt;input type=&quot;search&quot; placeholder=&quot;è¯·è¾“å…¥ä½ è¦æœç´¢çš„å†…å®¹&quot; v-model=&quot;value&quot;&gt;    &lt;/form&gt;</code></pre><p>3ã€ä¿®æ”¹ search çš„é»˜è®¤æ ·å¼</p><pre><code class="css">input[type=&quot;search&quot;] &#123;  -webkit-appearance: none;&#125;input::-webkit-search-cancel-button &#123;  display: none; // å…³é—­æŒ‰é’®&#125;</code></pre><p>4ã€ç¦æ­¢è¾“å…¥æ³•å¼¹å‡ºçš„æ–¹æ³•</p><blockquote><p>readonly å±æ€§çš„ä½¿ç”¨</p></blockquote><p>ç‚¹å‡»è¾“å…¥æ¡†è§¦å‘ focus äº‹ä»¶å¼¹å‡ºæ—¶é—´ pickerï¼Œå°†é€‰æ‹©çš„å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´éƒ½æ˜¾ç¤ºåœ¨è¾“å…¥æ¡†é‡Œï¼Œè¿™é‡ŒåŠ å…¥åªè¯» readonly å±æ€§å¯ä»¥é¿å…è¾“å…¥æ³•çš„å¼¹å‡ºã€‚</p><pre><code class="html">&lt;input v-model=&quot;startDate&quot; readonly @focus=&quot;openStartPicker&quot; /&gt;&lt;input v-model=&quot;endDate&quot; readonly @focus=&quot;openEndPicker&quot; /&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>44ã€vue3-v-model</title>
      <link href="/2021/10/14/vue3-4-v-model/"/>
      <url>/2021/10/14/vue3-4-v-model/</url>
      
        <content type="html"><![CDATA[<p>vue2ä¸­.syncå’Œv-modelåŠŸèƒ½æœ‰é‡å ï¼Œå®¹æ˜“æ··æ·†ï¼ŒVue3åšäº†ç»Ÿä¸€çš„å¤„ç†ï¼Œç»Ÿä¸€ä¸ºv-modelå‚æ•°å½¢å¼ã€‚</p><span id="more"></span><h2 id="ä¸€ã€v-model"><a href="#ä¸€ã€v-model" class="headerlink" title="ä¸€ã€v-model"></a>ä¸€ã€v-model</h2><pre><code class="html">&lt;div id=&quot;app&quot;&gt;  &lt;h3&gt;&#123;&#123; data &#125;&#125;&lt;/h3&gt;  &lt;comp v-model=&quot;data&quot;&gt;&lt;/comp&gt;  &lt;!-- ç­‰æ•ˆäº --&gt;  &lt;comp :modelValue=&quot;data&quot; @update:modelValue=&quot;data=$event&quot;&gt;&lt;/comp&gt;&lt;/div&gt;</code></pre><pre><code class="js">app.component(&#39;app&#39;,&#123;  tempalate:`    &lt;div @click=&quot;$emit(&#39;update:modelValue&#39;,&#39;new value&#39;)&quot;&gt;      i am comp,&#123;&#123; modelValue &#125;&#125;    &lt;/div&gt;  `,  props:[&#39;modelValue&#39;]&#125;)</code></pre><blockquote><p>å­ç»„ä»¶çš„modelé€‰é¡¹ç§»é™¤</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>43ã€vue3-emits</title>
      <link href="/2021/10/11/vue3-3-emits/"/>
      <url>/2021/10/11/vue3-3-emits/</url>
      
        <content type="html"><![CDATA[<p>è‡ªå®šä¹‰äº‹ä»¶ä¸ä½¿ç”¨ emit:[â€˜event nameâ€™],ä¼šå‡ºç°è¿ç»­æ‰§è¡Œ 2 æ¬¡çš„ä¸€ä¸ª bugã€‚</p><span id="more"></span><h2 id="ä¸€ã€é—®é¢˜å¤ç°"><a href="#ä¸€ã€é—®é¢˜å¤ç°" class="headerlink" title="ä¸€ã€é—®é¢˜å¤ç°"></a>ä¸€ã€é—®é¢˜å¤ç°</h2><p>Emits.vue</p><pre><code class="html">&lt;template&gt;  &lt;div @click=&quot;$emit(&#39;click&#39;)&quot;&gt;    &lt;p&gt;è‡ªå®šä¹‰äº‹ä»¶&lt;/p&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><p>ä½¿ç”¨ Emits.vue</p><pre><code class="html">&lt;Emits @click=&quot;handleClick&quot;&gt;&lt;/Emits&gt;</code></pre><pre><code class="js">import Emits from &quot;./Emits.vue&quot;;export default &#123;  components: &#123;    Emits,  &#125;,  methods: &#123;    handleClick()&#123;      console.log(&quot;click me&quot;);    &#125;  &#125;,&#125;;</code></pre><p>ç‚¹å‡»è‡ªå®šä¹‰äº‹ä»¶ï¼Œä¼šæ‰“å°2æ¬¡click me</p><h2 id="äºŒã€è§£å†³æ–¹æ³•ï¼š"><a href="#äºŒã€è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="äºŒã€è§£å†³æ–¹æ³•ï¼š"></a>äºŒã€è§£å†³æ–¹æ³•ï¼š</h2><h4 id="æ–¹æ³•1ã€åœ¨Emits-vueä¸­åŠ å…¥ä»¥ä¸‹ä»£ç "><a href="#æ–¹æ³•1ã€åœ¨Emits-vueä¸­åŠ å…¥ä»¥ä¸‹ä»£ç " class="headerlink" title="æ–¹æ³•1ã€åœ¨Emits.vueä¸­åŠ å…¥ä»¥ä¸‹ä»£ç "></a>æ–¹æ³•1ã€åœ¨Emits.vueä¸­åŠ å…¥ä»¥ä¸‹ä»£ç </h4><pre><code class="js">emits:[&#39;click&#39;]</code></pre><h4 id="æ–¹æ³•2ã€ä¸è¦ä½¿ç”¨åŸç”Ÿäº‹ä»¶åç§°"><a href="#æ–¹æ³•2ã€ä¸è¦ä½¿ç”¨åŸç”Ÿäº‹ä»¶åç§°" class="headerlink" title="æ–¹æ³•2ã€ä¸è¦ä½¿ç”¨åŸç”Ÿäº‹ä»¶åç§°"></a>æ–¹æ³•2ã€ä¸è¦ä½¿ç”¨åŸç”Ÿäº‹ä»¶åç§°</h4><p>Emits.vue</p><pre><code class="html">&lt;template&gt;  &lt;div @click=&quot;$emit(&#39;my-click&#39;)&quot;&gt;    &lt;p &gt;è‡ªå®šä¹‰äº‹ä»¶&lt;/p&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><pre><code class="js">&lt;script&gt;  export default &#123;    emits:[&#39;my-click&#39;]  &#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt;</code></pre><p>å¼•ç”¨å¤„ï¼š</p><pre><code class="html">  &lt;Emits @my-click=&quot;handleClick&quot;&gt;&lt;/Emits&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>42ã€vue3-ä¼ é€é—¨ï¼šteleport</title>
      <link href="/2021/10/02/vue3-2-teleport/"/>
      <url>/2021/10/02/vue3-2-teleport/</url>
      
        <content type="html"><![CDATA[<p>teleport: æ˜¯ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªç»„ä»¶å†…éƒ¨çš„ä¸€éƒ¨åˆ†æ¨¡æ¿â€œä¼ é€â€åˆ°è¯¥ç»„ä»¶çš„ DOM ç»“æ„å¤–å±‚çš„ä½ç½®å»ã€‚</p><span id="more"></span><h2 id="ä¸€ã€teleportåº”ç”¨åœºæ™¯"><a href="#ä¸€ã€teleportåº”ç”¨åœºæ™¯" class="headerlink" title="ä¸€ã€teleportåº”ç”¨åœºæ™¯"></a>ä¸€ã€teleportåº”ç”¨åœºæ™¯</h2><p>ä¸€ä¸ªç»„ä»¶æ¨¡æ¿çš„ä¸€éƒ¨åˆ†åœ¨é€»è¾‘ä¸Šä»å±äºè¯¥ç»„ä»¶ï¼Œä½†ä»æ•´ä¸ªåº”ç”¨è§†å›¾çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒåœ¨ DOM ä¸­åº”è¯¥è¢«æ¸²æŸ“åœ¨æ•´ä¸ª Vue åº”ç”¨å¤–éƒ¨çš„å…¶ä»–åœ°æ–¹ï¼Œæœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯å…¨å±çš„æ¨¡æ€æ¡†ã€‚</p><h2 id="äºŒã€æ¨¡æ€æ¡†å¼¹çª—ç»„ä»¶"><a href="#äºŒã€æ¨¡æ€æ¡†å¼¹çª—ç»„ä»¶" class="headerlink" title="äºŒã€æ¨¡æ€æ¡†å¼¹çª—ç»„ä»¶"></a>äºŒã€æ¨¡æ€æ¡†å¼¹çª—ç»„ä»¶</h2><p>æ–°å»ºModalButton.vueç»„ä»¶</p><pre><code class="html">&lt;template&gt;  &lt;div&gt;    &lt;button @click=&quot;modalOpen = true&quot;&gt;å¼¹å‡ºçª—å£&lt;/button&gt;    &lt;teleport to=&#39;body&#39;&gt;      &lt;div v-if=&quot;modalOpen&quot; class=&quot;modal&quot;&gt;        &lt;div&gt;æˆ‘æ˜¯å¼¹çª—          çˆ¶å…ƒç´ ä¸ºbody          &lt;button @click=&quot;modalOpen=false&quot;&gt;å…³é—­çª—å£&lt;/button&gt;        &lt;/div&gt;      &lt;/div&gt;    &lt;/teleport&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><pre><code class="js">export default &#123;  // vue3å…¼å®¹dataå†™æ³•  data() &#123;    return &#123;      modalOpen:true    &#125;  &#125;,&#125;</code></pre><pre><code class="css">.modal&#123;  position: absolute;  top: 0;  left:0;  right:0;  bottom: 0;  background-color: rgba(0,0,0,0.5);  display: flex;  flex-direction: column;  align-items: center;  justify-content: center;&#125;.modal div&#123;  display: flex;  flex-direction: column;  align-items: center;  justify-content: center;  background-color: #fff;  width: 300px;  height: 300px;  padding: 5px;&#125;</code></pre><h2 id="ä¸‰ã€ModalButtonç»„ä»¶çš„åº”ç”¨"><a href="#ä¸‰ã€ModalButtonç»„ä»¶çš„åº”ç”¨" class="headerlink" title="ä¸‰ã€ModalButtonç»„ä»¶çš„åº”ç”¨"></a>ä¸‰ã€ModalButtonç»„ä»¶çš„åº”ç”¨</h2><pre><code class="html">  &lt;ModalButton&gt;&lt;/ModalButton&gt;</code></pre><pre><code class="js">// åŠ ä¸Šæ–‡ä»¶ç±»å‹åç¼€ï¼Œä¸ç„¶ä¼šå‡ºç°404 NOT FOUNDimport ModalButton from &quot;./ModalButton.vue&quot;;components:&#123;    ModalButton&#125;,  </code></pre><p>å½“å¼¹çª—æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå®¡æŸ¥å…ƒç´ .modalä¸#appä½äºbodyä¸‹çš„åŒä¸€å±‚çº§</p>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>41ã€vue3-èµ·å§‹å’Œæ–°ç‰¹æ€§</title>
      <link href="/2021/09/25/vue3-1-start/"/>
      <url>/2021/09/25/vue3-1-start/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ vite åˆ›å»ºé¡¹ç›®ï¼Œä»¥åŠ vue3 çš„ composition API çš„ä½¿ç”¨</p><span id="more"></span><h2 id="ä¸€ã€åˆ›å»ºé¡¹ç›®ï¼ˆvue-cli-viteï¼‰"><a href="#ä¸€ã€åˆ›å»ºé¡¹ç›®ï¼ˆvue-cli-viteï¼‰" class="headerlink" title="ä¸€ã€åˆ›å»ºé¡¹ç›®ï¼ˆvue-cli + viteï¼‰"></a>ä¸€ã€åˆ›å»ºé¡¹ç›®ï¼ˆvue-cli + viteï¼‰</h2><p>ä½¿ç”¨ vite å¯ä»¥æ›´åŠ å¿«é€Ÿçš„å¯åŠ¨é¡¹ç›®</p><pre><code class="js">npm init vite-app &lt;project-name&gt;cd project-namenpm install &amp;&amp; npm run dev</code></pre><h2 id="äºŒã€main-js"><a href="#äºŒã€main-js" class="headerlink" title="äºŒã€main.js"></a>äºŒã€main.js</h2><pre><code class="js">import &#123; createApp &#125; from &quot;vue&quot;;import App from &quot;./App.vue&quot;;import &quot;./index.css&quot;;createApp(App).mount(&quot;#app&quot;);</code></pre><h2 id="ä¸‰ã€ç»„åˆå¼-APIï¼šcomposition-API"><a href="#ä¸‰ã€ç»„åˆå¼-APIï¼šcomposition-API" class="headerlink" title="ä¸‰ã€ç»„åˆå¼ APIï¼šcomposition API"></a>ä¸‰ã€ç»„åˆå¼ APIï¼šcomposition API</h2><blockquote><p>composition api ä¸º Vue åº”ç”¨æä¾›æ›´å¥½çš„é€»è¾‘å¤ç”¨å’Œä»£ç ç»„ç»‡ã€‚</p></blockquote><p>setup()é’©å­æ˜¯åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç»„åˆå¼ API çš„å…¥å£ï¼Œé€šå¸¸åªåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨ï¼š</p><p>1ã€éœ€è¦åœ¨éå•æ–‡ä»¶ç»„ä»¶ä¸­ä½¿ç”¨ç»„åˆå¼ API æ—¶ã€‚</p><p>2ã€éœ€è¦åœ¨åŸºäºé€‰é¡¹å¼ API çš„ç»„ä»¶ä¸­é›†æˆåŸºäºç»„åˆå¼ API çš„ä»£ç æ—¶ã€‚</p><h4 id="ï¼ˆä¸€ï¼‰ã€åŸºæœ¬ä½¿ç”¨"><a href="#ï¼ˆä¸€ï¼‰ã€åŸºæœ¬ä½¿ç”¨" class="headerlink" title="ï¼ˆä¸€ï¼‰ã€åŸºæœ¬ä½¿ç”¨"></a>ï¼ˆä¸€ï¼‰ã€åŸºæœ¬ä½¿ç”¨</h4><pre><code class="js">&lt;script&gt;import &#123; ref &#125; from &#39;vue&#39;export default &#123;  setup() &#123;    const count = ref(0)    // è¿”å›å€¼ä¼šæš´éœ²ç»™æ¨¡æ¿å’Œå…¶ä»–çš„é€‰é¡¹å¼ API é’©å­    return &#123;      count    &#125;  &#125;,  mounted() &#123;    console.log(this.count) // 0  &#125;&#125;&lt;/script&gt;</code></pre><pre><code class="html">&lt;template&gt;  &lt;button @click=&quot;count++&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;&lt;/template&gt;</code></pre><blockquote><blockquote><p>Tipï¼š setup() è‡ªèº«å¹¶ä¸å«å¯¹ç»„ä»¶å®ä¾‹çš„è®¿é—®æƒï¼Œå³åœ¨ setup() ä¸­è®¿é—® this ä¼šæ˜¯ undefinedã€‚ä½ å¯ä»¥åœ¨é€‰é¡¹å¼ API ä¸­è®¿é—®ç»„åˆå¼ API æš´éœ²çš„å€¼ï¼Œä½†åè¿‡æ¥åˆ™ä¸è¡Œã€‚</p></blockquote></blockquote><h4 id="ï¼ˆäºŒï¼‰ã€åˆ›å»ºå“åº”å¼å¯¹è±¡"><a href="#ï¼ˆäºŒï¼‰ã€åˆ›å»ºå“åº”å¼å¯¹è±¡" class="headerlink" title="ï¼ˆäºŒï¼‰ã€åˆ›å»ºå“åº”å¼å¯¹è±¡"></a>ï¼ˆäºŒï¼‰ã€åˆ›å»ºå“åº”å¼å¯¹è±¡</h4><p>æ–¹æ³•1ã€</p><pre><code class="html">&lt;p&gt;&#123;&#123; data.counter &#125;&#125;&lt;/p&gt;&lt;p&gt;&#123;&#123; data.doubleCounter &#125;&#125;&lt;/p&gt;</code></pre><pre><code class="js">import &#123; computed,reactive,onMounted,onUnmounted,ref,toRefs,watch&#125; from &quot;vue&quot;;export default &#123;  setup() &#123;    const data = reactive(&#123;      counter: 1,      doubleCounter: computed(() =&gt; data.counter * 2),    &#125;);    const msg1 = ref(&quot;some message&quot;);    // setup æœ€æ—©æœ‰onMounted æ— created beforeCreate    &#125;,    let timer;    onMounted(() =&gt; &#123;      timer = setInterval(() =&gt; &#123;        data.counter++;      &#125;, 1000);    &#125;);    onUnmounted(() =&gt; &#123;      clearInterval(timer);    &#125;);    return &#123; data, msg1 &#125;;  &#125;,&#125;;</code></pre><p>æ–¹æ³• 2ï¼štoRefs:è§£æ„/å±•å¼€è¿”å›å“åº”å¼å¯¹è±¡</p><pre><code class="html">  &lt;p&gt;&#123;&#123; msg1 &#125;&#125;&lt;/p&gt;  &lt;p&gt;&#123;&#123; counter &#125;&#125;&lt;/p&gt;  &lt;p&gt;&#123;&#123; doubleCounter &#125;&#125;&lt;/p&gt;  &lt;p ref=&quot;desc&quot;&gt;&lt;/p&gt;</code></pre><pre><code class="js">import &#123; computed,reactive,onMounted,onUnmounted,ref,toRefs,watch&#125; from &quot;vue&quot;;export default &#123;  setup() &#123;    // useCounterå‡½æ•°ä½¿ç”¨äº†toRefs  æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å±•å¼€ä½¿ç”¨counter doubleCounter    const &#123; counter, doubleCounter &#125; = useCounter();    // å•å€¼å“åº”å¼    const msg1 = ref(&quot;some message&quot;);    // ä½¿ç”¨å…ƒç´     const desc = ref(null);    // watch ä¾¦å¬å™¨    watch(counter, (val, oldVal) =&gt; &#123;      // è¿™é‡Œéœ€è¦åŠ ä¸Šdesc.value      const p = desc.value;      p.textContent = `counter change from $&#123;oldVal&#125; to $&#123;val&#125;`;    &#125;);    return &#123; counter, doubleCounter, msg1, desc &#125;;  &#125;,&#125;;function useCounter() &#123;  const data = reactive(&#123;    counter: 1,    doubleCounter: computed(() =&gt; data.counter * 2),  &#125;);  // setup æœ€æ—©æœ‰onMounted æ— created  let timer;  onMounted(() =&gt; &#123;    timer = setInterval(() =&gt; &#123;      data.counter++;    &#125;, 1000);  &#125;);  onUnmounted(() =&gt; &#123;    clearInterval(timer);  &#125;);  return toRefs(data);&#125;</code></pre><h5 id="ä¸‰-ã€å•å€¼å“åº”å¼å£°æ˜ï¼šref"><a href="#ä¸‰-ã€å•å€¼å“åº”å¼å£°æ˜ï¼šref" class="headerlink" title="(ä¸‰)ã€å•å€¼å“åº”å¼å£°æ˜ï¼šref"></a>(ä¸‰)ã€å•å€¼å“åº”å¼å£°æ˜ï¼šref</h5><pre><code class="js">const msg1 = ref(&quot;some msg&quot;);</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>40ã€åˆè¯†egg.js</title>
      <link href="/2021/06/20/egg/"/>
      <url>/2021/06/20/egg/</url>
      
        <content type="html"><![CDATA[<p>egg.jsçš„ä½¿ç”¨,åŒ…æ‹¬é¡¹ç›®çš„åˆ›å»ºã€å†…ç½®ctxå¯¹è±¡ã€è·¯ç”±ã€controlleræ§åˆ¶å±‚ã€postè¯·æ±‚ã€‚</p><span id="more"></span><h3 id="1ã€åˆ›å»º-å¯åŠ¨é¡¹ç›®"><a href="#1ã€åˆ›å»º-å¯åŠ¨é¡¹ç›®" class="headerlink" title="1ã€åˆ›å»º/å¯åŠ¨é¡¹ç›®"></a>1ã€åˆ›å»º/å¯åŠ¨é¡¹ç›®</h3><p>ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œæ— æ³•åˆ›å»ºé¡¹ç›®</p><pre><code class="js">// æ— æ³•åˆ›å»ºé¡¹ç›®npm init egg --type=simple// éœ€è¦åœ¨åé¢æŒ‡å®šæ·˜å®æºnpm init egg --type=simple -r=https://registry.npm.taobao.orgnpm run dev</code></pre><h3 id="2ã€å†…ç½®çš„ctxå¯¹è±¡"><a href="#2ã€å†…ç½®çš„ctxå¯¹è±¡" class="headerlink" title="2ã€å†…ç½®çš„ctxå¯¹è±¡"></a>2ã€å†…ç½®çš„ctxå¯¹è±¡</h3><blockquote><p>ctxè¿™ä¸ªå¯¹è±¡éå¸¸é‡è¦ï¼Œè¯·æ±‚æ¥çš„å‚æ•°ï¼Œè¿”å›å»çš„æ¶ˆæ¯éƒ½éœ€è¦é€šè¿‡ctxè¿™ä¸ªå¯¹è±¡è·å–æˆ–è€…è®¾ç½®</p></blockquote><blockquote><p>ctxæ˜¯ç»§æ‰¿koaçš„contextå¯¹è±¡é€šè¿‡è®¾ç½®ctx.bodyï¼Œ å¯ä»¥æ”¹å˜è¿”å›ä¿¡æ¯</p></blockquote><pre><code class="js">ctx &#123; request:    &#123; method: &#39;GET&#39;,     url: &#39;/&#39;,     header:       &#123; host: &#39;127.0.0.1:7001&#39;,        connection: &#39;keep-alive&#39;,        pragma: &#39;no-cache&#39;,        &#39;cache-control&#39;: &#39;no-cache&#39;,        &#39;sec-ch-ua&#39;: &#39;&quot; Not;A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;97&quot;, &quot;Chromium&quot;;v=&quot;97&quot;&#39;,        &#39;sec-ch-ua-mobile&#39;: &#39;?0&#39;,        &#39;sec-ch-ua-platform&#39;: &#39;&quot;macOS&quot;&#39;,        &#39;upgrade-insecure-requests&#39;: &#39;1&#39;,        &#39;user-agent&#39;: &#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.71 Safari/537.36&#39;,        accept: &#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#39;,        &#39;sec-fetch-site&#39;: &#39;none&#39;,        &#39;sec-fetch-mode&#39;: &#39;navigate&#39;,        &#39;sec-fetch-user&#39;: &#39;?1&#39;,        &#39;sec-fetch-dest&#39;: &#39;document&#39;,        &#39;accept-encoding&#39;: &#39;gzip, deflate, br&#39;,        &#39;accept-language&#39;: &#39;zh-CN,zh;q=0.9,en;q=0.8&#39;,        cookie: &#39;csrfToken=DpyybUjAh9JRzrCgx3itQifi&#39; &#125; &#125;,  response: &#123; status: 404, message: &#39;Not Found&#39;, header: &#123;&#125; &#125;,  app:    &#123; env: &#39;local&#39;,     name: &#39;eggjs&#39;,     baseDir: &#39;/Users/yq/Desktop/express&#39;,     subdomainOffset: 2,     config: &#39;&lt;egg config&gt;&#39;,     controller: &#39;&lt;egg controller&gt;&#39;,     httpclient: &#39;&lt;egg httpclient&gt;&#39;,     loggers: &#39;&lt;egg loggers&gt;&#39;,     middlewares: &#39;&lt;egg middlewares&gt;&#39;,     router: &#39;&lt;egg router&gt;&#39;,     serviceClasses: &#39;&lt;egg serviceClasses&gt;&#39; &#125;,  originalUrl: &#39;/&#39;,  req: &#39;&lt;original node req&gt;&#39;,  res: &#39;&lt;original node res&gt;&#39;,  socket: &#39;&lt;original node socket&gt;&#39; &#125;</code></pre><h3 id="3ã€è·¯ç”±"><a href="#3ã€è·¯ç”±" class="headerlink" title="3ã€è·¯ç”±"></a>3ã€è·¯ç”±</h3><p>åœ¨controllerçš„home.jsä¸­å†™ä¸€ä¸ªæ–°çš„è·¯ç”±,</p><pre><code class="js">    async list()&#123;        const &#123; ctx &#125; = this        ctx.body = &#123;            code:200,            data:[                &#123;                    id:&#39;1&#39;,                    name:&#39;jude&#39;                &#125;,                &#123;                    id:&#39;2&#39;,                    name:&#39;summer&#39;                &#125;            ],            msg:&#39;success&#39;        &#125;    &#125;</code></pre><p>åœ¨router.jsä¸­åŒ¹é…æ–°å†™çš„è·¯ç”±</p><pre><code class="js">    router.get(&#39;/list&#39;,controller.home.list)</code></pre><p>æ‰“å¼€127.0.0.1:7001/listå³å¯çœ‹åˆ°æ•ˆæœ</p><h3 id="4ã€Controlleræ§åˆ¶å±‚"><a href="#4ã€Controlleræ§åˆ¶å±‚" class="headerlink" title="4ã€Controlleræ§åˆ¶å±‚"></a>4ã€Controlleræ§åˆ¶å±‚</h3><p>åœ¨controlleræ–°å»ºä¸€ä¸ªuser.js</p><pre><code class="js">&#39;use strict&#39;const Controller = require(&#39;egg&#39;).Controllerclass UserController extends Controller &#123;    async info()&#123;        const &#123;ctx&#125; = this        ctx.body = &#123;            code:200,            data:&#123;                id:&#39;1&#39;,                name:&quot;jude&quot;                age:29,                gender:&quot;man&quot;            &#125;            msg::&quot;success&quot;        &#125;    &#125;&#125;module.exports = UserController</code></pre><p>é…ç½®æ–°çš„è·¯ç”±</p><pre><code class="js">router.get(&#39;/user/info&#39;,controller.user.info)</code></pre><p>æ‰“å¼€127.0.0.1:7001/user/info å³å¯çœ‹åˆ°æ•ˆæœ</p><h3 id="5ã€postè¯·æ±‚åŠé…ç½®CSRFè·¨åŸŸ"><a href="#5ã€postè¯·æ±‚åŠé…ç½®CSRFè·¨åŸŸ" class="headerlink" title="5ã€postè¯·æ±‚åŠé…ç½®CSRFè·¨åŸŸ"></a>5ã€postè¯·æ±‚åŠé…ç½®CSRFè·¨åŸŸ</h3><p>å®‰è£…è·¨åŸŸæ’ä»¶</p><pre><code class="js">npm install egg-cors --save</code></pre><p>é…ç½®configä¸‹çš„plugin.jså’Œconfig.default.js</p><pre><code>// plugin.jsmoduel.exports = &#123;    cors:&#123;        enable:true,        package:&#39;egg-cors&#39;    &#125;&#125;// config.default.jsconfig.security = &#123;    csrf:&#123;        enable:true    &#125;,    domainWhiteList:[]&#125;config.cors = &#123;    origin:&quot;*&quot;,    allowMethods:&#39;GET,PUT,POST,DELETE.PATCH&#39;&#125;</code></pre><h3 id="6ã€åˆ›å»ºpostè¯·æ±‚"><a href="#6ã€åˆ›å»ºpostè¯·æ±‚" class="headerlink" title="6ã€åˆ›å»ºpostè¯·æ±‚"></a>6ã€åˆ›å»ºpostè¯·æ±‚</h3><pre><code class="js">// user.jsasync createUser()&#123;    const &#123;ctx &#125; = this    const result = &#123;        username:ctx.request.body.username,        age:ctx.request.body.age    &#125;    ctx.body = &#123;        code:200,        data:result,        msg:&#39;success&#39;    &#125;&#125;</code></pre><p>æ­¤æ—¶ï¼Œæ‰“å¼€ApiPostå·¥å…·ï¼Œé€‰æ‹©postè¯·æ±‚ï¼Œè¾“å…¥è¯·æ±‚åœ°å€+å‚æ•°ä¿¡æ¯ï¼Œå³å¯çœ‹åˆ°å“åº”ä¿¡æ¯ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> egg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>39ã€å †å’Œæ ˆã€å˜é‡å¤åˆ¶ã€æ·±æ‹·è´ä¸æµ…æ‹·è´</title>
      <link href="/2021/05/25/stack-heap/"/>
      <url>/2021/05/25/stack-heap/</url>
      
        <content type="html"><![CDATA[<p>æ ˆï¼ˆstackï¼‰ï¼šä¸»è¦å­˜æ”¾çš„æ˜¯åŸºæœ¬ç±»å‹çš„å˜é‡å’Œå¯¹è±¡çš„åº”ç”¨ï¼Œå…¶ä¼˜åŠ¿æ˜¯å­˜å‚¨é€Ÿåº¦æ¯”å †å¿«ï¼Œç¼ºç‚¹æ˜¯å­˜åœ¨æ ˆä¸­çš„æ•°æ®å¤§å°ä¸ç”Ÿå­˜æœŸå¿…é¡»æ˜¯ç¡®å®šçš„ï¼Œç¼ºä¹çµæ´»æ€§ã€‚   </p><p>å †ï¼ˆheapï¼‰ï¼šç”¨äºå¼•ç”¨ç±»å‹ï¼ˆå¤æ‚æ•°æ®ç±»å‹ï¼šå¦‚æ•°ç»„å¯¹è±¡ã€objectå¯¹è±¡ï¼‰åˆ†é…ç©ºé—´ï¼Œè¿è¡Œæ—¶åŠ¨æ€åˆ†é…å†…å­˜ï¼Œå­˜å‚¨é€Ÿåº¦è¾ƒæ…¢ã€‚</p><span id="more"></span><p>JavaScriptä¸­ï¼Œå†…å­˜åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼šä»£ç ç©ºé—´ã€æ ˆç©ºé—´ã€å †ç©ºé—´ï¼Œå…¶ä¸­ä»£ç ç©ºé—´ç”¨äºå­˜æ”¾å¯æ‰§è¡Œä»£ç ã€‚</p><h2 id="ä¸€ã€å †æ ˆå†…å­˜ç©ºé—´"><a href="#ä¸€ã€å †æ ˆå†…å­˜ç©ºé—´" class="headerlink" title="ä¸€ã€å †æ ˆå†…å­˜ç©ºé—´"></a>ä¸€ã€å †æ ˆå†…å­˜ç©ºé—´</h2><h3 id="1ã€æ ˆå†…å­˜ç©ºé—´"><a href="#1ã€æ ˆå†…å­˜ç©ºé—´" class="headerlink" title="1ã€æ ˆå†…å­˜ç©ºé—´"></a>1ã€æ ˆå†…å­˜ç©ºé—´</h3><blockquote><p>ç”¨æ ˆä½œä¸ºæ•°æ®ç»“æ„åœ¨å†…å­˜ä¸­æ‰€ç”³è¯·çš„ç©ºé—´ã€‚</p></blockquote><h3 id="2ã€æ ˆçš„ç‰¹ç‚¹ï¼š"><a href="#2ã€æ ˆçš„ç‰¹ç‚¹ï¼š" class="headerlink" title="2ã€æ ˆçš„ç‰¹ç‚¹ï¼š"></a>2ã€æ ˆçš„ç‰¹ç‚¹ï¼š</h3><p>1ã€åè¿›å…ˆå‡ºï¼Œæœ€åæ·»åŠ è¿›æ ˆçš„å…ƒç´ æœ€å…ˆå‡º</p><p>2ã€è®¿é—®æ ˆåº•å…ƒç´ ï¼Œå¿…é¡»æ‹¿æ‰å®ƒä¸Šé¢çš„å…ƒç´ </p><p><image src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5631876df7b34b1cbe19f10ff5fe7b1a~tplv-k3u1fbpfcp-watermark.awebp"></image></p><p>js7ç§åŸºæœ¬æ•°æ®ç±»å‹å˜é‡ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­ï¼Œå› ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å ç”¨ç©ºé—´å°ã€å¤§å°å›ºå®šï¼Œé€šè¿‡å€¼æ¥è®¿é—®ï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨çš„æ•°æ®ã€‚</p><h3 id="3ã€é—­åŒ…"><a href="#3ã€é—­åŒ…" class="headerlink" title="3ã€é—­åŒ…"></a>3ã€é—­åŒ…</h3><blockquote><p>é—­åŒ…ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å˜é‡æ˜¯ä¿å­˜åœ¨å †å†…å­˜é‡Œçš„ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œå¼¹å‡ºè°ƒç”¨æ ˆåï¼Œè¿”å›å†…éƒ¨å‡½æ•°çš„ä¸€ä¸ªåº”ç”¨ï¼Œè¿™æ—¶å€™å‡½æ•°çš„å˜é‡å°±ä¼šè½¬ç§»åˆ°å †ä¸Šï¼Œå› æ­¤å†…éƒ¨å‡½æ•°ä¾ç„¶èƒ½è®¿é—®åˆ°ä¸Šä¸€å±‚å‡½æ•°çš„å˜é‡ã€‚</p></blockquote><h2 id="äºŒã€å †å†…å­˜ç©ºé—´"><a href="#äºŒã€å †å†…å­˜ç©ºé—´" class="headerlink" title="äºŒã€å †å†…å­˜ç©ºé—´"></a>äºŒã€å †å†…å­˜ç©ºé—´</h2><blockquote><p>ç”¨å †ä½œä¸ºæ•°æ®ç»“æ„åœ¨å†…å­˜ä¸­æ‰€ç”³è¯·çš„ç©ºé—´ã€‚<br>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰€è¯´çš„å †æ•°æ®ç»“æ„æŒ‡çš„å°±æ˜¯äºŒå‰å †ã€‚</p></blockquote><h3 id="1ã€äºŒå‰å †çš„ç‰¹ç‚¹ï¼š"><a href="#1ã€äºŒå‰å †çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="1ã€äºŒå‰å †çš„ç‰¹ç‚¹ï¼š"></a>1ã€äºŒå‰å †çš„ç‰¹ç‚¹ï¼š</h3><p>1ã€å®ƒæ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘</p><p>2ã€äºŒå‰å †ä¸æ˜¯æœ€å°å †å°±æ˜¯æœ€å¤§å †</p><h3 id="2ã€å¼•ç”¨æ•°æ®ç±»å‹"><a href="#2ã€å¼•ç”¨æ•°æ®ç±»å‹" class="headerlink" title="2ã€å¼•ç”¨æ•°æ®ç±»å‹"></a>2ã€å¼•ç”¨æ•°æ®ç±»å‹</h3><blockquote><p>å¼•ç”¨æ•°æ®ç±»å‹å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œå¼•ç”¨æ•°æ®ç±»å‹å æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®šï¼Œå¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†å½±å“ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚<br>å¼•ç”¨æ•°æ®ç±»å‹ä¼šåœ¨æ ˆä¸­å­˜å‚¨ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å †å†…å­˜ç©ºé—´ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚<br>å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šå…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åï¼Œä»å †ä¸­è·å¾—å®ä½“ã€‚</p></blockquote><pre><code class="js">// åŸºæœ¬æ•°æ®ç±»å‹-æ ˆå†…å­˜let name = &quot;å¤§ç™½&quot;;// åŸºæœ¬æ•°æ®ç±»å‹-æ ˆå†…å­˜let age = 20;// åŸºæœ¬æ•°æ®ç±»å‹-æ ˆå†…å­˜let info = null;// å¯¹è±¡æŒ‡é’ˆå­˜æ”¾åœ¨æ ˆå†…å­˜ä¸­ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡æ”¾åœ¨å †å†…å­˜ä¸­let msgObj = &#123;msg: &quot;æµ‹è¯•&quot;, id: 5&#125;;// æ•°ç»„çš„æŒ‡é’ˆå­˜æ”¾åœ¨æ ˆå†…å­˜ä¸­ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ•°ç»„å­˜æ”¾åœ¨å †å†…å­˜ä¸­let ages = [19, 22, 57]</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼š</p><pre><code>1ã€åˆ›å»ºäº†ä¸¤ä¸ªå˜é‡msgObjã€agesï¼Œå®ƒä»¬çš„å€¼éƒ½æ˜¯å¼•ç”¨ç±»å‹(objectã€array)2ã€å †å†…å­˜ç©ºé—´é‡‡ç”¨äºŒå‰å †ä½œä¸ºæ•°æ®ç»“æ„ï¼ŒmsgObjä¸agesçš„å…·ä½“å€¼ä¼šå­˜åœ¨å †å†…å­˜ç©ºé—´ä¸­3ã€å­˜å‚¨å®Œæˆåï¼Œå †å†…å­˜ç©ºé—´ä¼šè¿”å›è¿™ä¸¤ä¸ªå€¼çš„å¼•ç”¨åœ°å€(æŒ‡é’ˆ)4ã€æ‹¿åˆ°å¼•ç”¨åœ°å€åï¼Œè¿™ä¸ªå¼•ç”¨åœ°å€ä¼šå’Œå®ƒçš„å˜é‡åå¯¹åº”èµ·æ¥ï¼Œå­˜æ”¾åœ¨æ ˆå†…å­˜ç©ºé—´ä¸­5ã€åœ¨æŸ¥æ‰¾å˜é‡msgObjä¸agesçš„å…·ä½“å€¼æ—¶ï¼Œä¼šå…ˆä»æ ˆå†…å­˜ç©ºé—´ä¸­è·å–å®ƒçš„å¼•ç”¨åœ°å€6ã€è·å–åˆ°å¼•ç”¨åœ°å€åï¼Œé€šè¿‡å¼•ç”¨åœ°å€åœ¨å †å†…å­˜ç©ºé—´çš„äºŒå‰å †ä¸­æŸ¥æ‰¾åˆ°å¯¹åº”çš„å€¼ã€‚</code></pre><p>å †å†…å­˜ç©ºé—´ä¸­çš„objectï¼Œè¡¨ç¤ºçš„æ˜¯å­˜å‚¨åœ¨ç©ºé—´ä¸­çš„å…¶ä»–å¯¹è±¡çš„å¼•ç”¨å€¼</p><p><image src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18fbd5bf395a42e5b6757c84a4768be7~tplv-k3u1fbpfcp-watermark.awebp"></image></p><h3 id="3ã€æ ˆå†…å­˜ç©ºé—´ä¸å †å†…å­˜çš„åŒºåˆ«"><a href="#3ã€æ ˆå†…å­˜ç©ºé—´ä¸å †å†…å­˜çš„åŒºåˆ«" class="headerlink" title="3ã€æ ˆå†…å­˜ç©ºé—´ä¸å †å†…å­˜çš„åŒºåˆ«"></a>3ã€æ ˆå†…å­˜ç©ºé—´ä¸å †å†…å­˜çš„åŒºåˆ«</h3><blockquote><p>å †å†…å­˜ç©ºé—´ï¼šç›¸å½“äºä¸€ä¸ªé‡‡ç”¨äºŒå‰å †ä½œä¸ºæ•°æ®ç»“æ„çš„å®¹å™¨ã€‚<br>å †å†…å­˜ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹çš„å…·ä½“å€¼<br>å †å†…å­˜å­˜åœ¨äºå †å†…å­˜ç©ºé—´ä¸­</p></blockquote><h2 id="ä¸‰ã€å˜é‡å¤åˆ¶"><a href="#ä¸‰ã€å˜é‡å¤åˆ¶" class="headerlink" title="ä¸‰ã€å˜é‡å¤åˆ¶"></a>ä¸‰ã€å˜é‡å¤åˆ¶</h2><h3 id="1ã€åŸºæœ¬æ•°æ®ç±»å‹çš„å¤åˆ¶"><a href="#1ã€åŸºæœ¬æ•°æ®ç±»å‹çš„å¤åˆ¶" class="headerlink" title="1ã€åŸºæœ¬æ•°æ®ç±»å‹çš„å¤åˆ¶"></a>1ã€åŸºæœ¬æ•°æ®ç±»å‹çš„å¤åˆ¶</h3><p>ä¸‹é¢ä»£ç ä¸­ï¼Œnameã€aliaséƒ½æ˜¯åŸºæœ¬ç±»å‹ï¼Œå€¼å­˜å‚¨åœ¨æ ˆå†…å­˜ï¼Œåˆ†åˆ«æœ‰å„è‡ªç‹¬ç«‹çš„æ ˆç©ºé—´ï¼Œå› æ­¤ä¿®æ”¹äº†aliasçš„å€¼ï¼Œnameæ˜¯ä¸å—å½±å“çš„ã€‚</p><pre><code class="js">let name =&#39;jude&#39;let alias = namealias = &#39;summer&#39;console.log(name) // judeconsole.log(alias) // summer</code></pre><p>ç›¸å½“äºå¤åˆ¶å‰æ˜¯è¿™æ ·çš„ï¼š</p><blockquote><p>name | jude</p></blockquote><p>å¤åˆ¶åï¼š</p><blockquote><p>alias | jude<br>name  | jude</p></blockquote><p>ä¿®æ”¹å:</p><blockquote><p>alias | summer<br>name  | jude</p></blockquote><h3 id="2ã€å¼•ç”¨ç±»å‹çš„å¤åˆ¶"><a href="#2ã€å¼•ç”¨ç±»å‹çš„å¤åˆ¶" class="headerlink" title="2ã€å¼•ç”¨ç±»å‹çš„å¤åˆ¶"></a>2ã€å¼•ç”¨ç±»å‹çš„å¤åˆ¶</h3><p>ä¸‹é¢ä»£ç ä¸­ï¼Œinfoã€bookéƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œå®ƒä»¬å¼•ç”¨å­˜åœ¨æ ˆå†…å­˜ï¼Œå€¼å­˜åœ¨å †å†…å­˜ï¼Œå®ƒä»¬çš„å€¼æŒ‡å‘åŒä¸€å—å †å†…å­˜ï¼Œæ ˆå†…å­˜ä¸­ä¼šå¤åˆ¶ä¸€ä»½ç›¸åŒçš„å¼•ç”¨ã€‚</p><pre><code class="js">let book = &#123;title:&#39;book&#39;,id:1&#125;let info = bookinfo.title = &#39;javascript&#39;console.log(book.title) // javascript</code></pre><h2 id="å››ã€æ·±æ‹·è´ä¸æµ…æ‹·è´"><a href="#å››ã€æ·±æ‹·è´ä¸æµ…æ‹·è´" class="headerlink" title="å››ã€æ·±æ‹·è´ä¸æµ…æ‹·è´"></a>å››ã€æ·±æ‹·è´ä¸æµ…æ‹·è´</h2><h3 id="1ã€æµ…æ‹·è´ï¼š"><a href="#1ã€æµ…æ‹·è´ï¼š" class="headerlink" title="1ã€æµ…æ‹·è´ï¼š"></a>1ã€æµ…æ‹·è´ï¼š</h3><blockquote><p>å¼•ç”¨æ•°æ®ç±»å‹åœ¨å¤åˆ¶æ—¶ï¼Œæ”¹äº†å…¶ä¸­ä¸€ä¸ªæ•°æ®çš„å€¼ï¼Œå¦ä¸€ä¸ªæ•°æ®çš„å€¼ä¹Ÿä¼šè·Ÿç€æ”¹å˜ï¼Œè¿™ç§æ‹·è´æ–¹å¼æˆ‘ä»¬ç§°ä¸ºæµ…æ‹·è´ã€‚</p></blockquote><h4 id="1-1-Object-asign"><a href="#1-1-Object-asign" class="headerlink" title="1.1 Object.asign()"></a>1.1 Object.asign()</h4><blockquote><p>Object.assign() æ–¹æ³•å¯ä»¥æŠŠä»»æ„å¤šä¸ªçš„æºå¯¹è±¡è‡ªèº«çš„å¯æšä¸¾å±æ€§æ‹·è´ç»™ç›®æ ‡å¯¹è±¡ï¼Œç„¶åè¿”å›ç›®æ ‡å¯¹è±¡ã€‚</p></blockquote><pre><code class="js">let obj1 = &#123; person: &#123;name: &quot;kobe&quot;, age: 41&#125;,sports:&#39;basketball&#39; &#125;;let obj2 = Object.assign(&#123;&#125;, obj1);obj2.person.name = &quot;wade&quot;;obj2.sports = &#39;football&#39;console.log(obj1); // &#123; person: &#123; name: &#39;wade&#39;, age: 41 &#125;, sports: &#39;basketball&#39; &#125;</code></pre><h4 id="1-2-æ‰©å±•è¿ç®—ç¬¦"><a href="#1-2-æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="1.2 æ‰©å±•è¿ç®—ç¬¦"></a>1.2 æ‰©å±•è¿ç®—ç¬¦</h4><pre><code class="js">let obj1 = &#123; name: &#39;Kobe&#39;, address:&#123;x:100,y:100&#125;&#125;let obj2= &#123;... obj1&#125;obj1.address.x = 200;obj1.name = &#39;wade&#39;console.log(&#39;obj2&#39;,obj2) // obj2 &#123; name: &#39;Kobe&#39;, address: &#123; x: 200, y: 100 &#125; &#125;</code></pre><h4 id="1-3-Array-prototype-concat-Array-ptototype-slice"><a href="#1-3-Array-prototype-concat-Array-ptototype-slice" class="headerlink" title="1.3 Array.prototype.concat()/Array.ptototype.slice()"></a>1.3 Array.prototype.concat()/Array.ptototype.slice()</h4><pre><code class="js">let arr = [1, 3, &#123;    username: &#39;kobe&#39;&#125;];let arr2 = arr.concat();    arr2[2].username = &#39;wade&#39;;console.log(arr); //[ 1, 3, &#123; username: &#39;wade&#39; &#125; ]let arr = [1, 3, &#123;    username: &#39; kobe&#39;&#125;];let arr3 = arr.slice();arr3[2].username = &#39;wade&#39;console.log(arr); // [ 1, 3, &#123; username: &#39;wade&#39; &#125; ]</code></pre><h3 id="2ã€æ·±æ‹·è´ï¼š"><a href="#2ã€æ·±æ‹·è´ï¼š" class="headerlink" title="2ã€æ·±æ‹·è´ï¼š"></a>2ã€æ·±æ‹·è´ï¼š</h3><blockquote><p>å¼•ç”¨ç±»å‹å¤åˆ¶åˆ°æ–°çš„å˜é‡åï¼ŒäºŒè€…æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šå› ä¸ºä¸€ä¸ªçš„æ”¹å˜è€Œå½±å“åˆ°å¦ä¸€ä¸ª<br>å®é™…ä¸Šå°±æ˜¯é‡æ–°åœ¨å †å†…å­˜ä¸­å¼€è¾Ÿä¸€å—æ–°çš„ç©ºé—´ï¼ŒæŠŠåŸå¯¹è±¡çš„æ•°æ®æ‹·è´åˆ°è¿™ä¸ªæ–°åœ°å€ç©ºé—´é‡Œæ¥</p></blockquote><h4 id="2-1-æ·±æ‹·è´æ–¹æ³•1ï¼š"><a href="#2-1-æ·±æ‹·è´æ–¹æ³•1ï¼š" class="headerlink" title="2.1 æ·±æ‹·è´æ–¹æ³•1ï¼š"></a>2.1 æ·±æ‹·è´æ–¹æ³•1ï¼š</h4><blockquote><p>å°†å¯¹è±¡è½¬ä¸€éJSONï¼Œç¼ºç‚¹æ˜¯åªèƒ½è½¬åŒ–ä¸€èˆ¬å¸¸è§çš„æ•°æ®ï¼Œfunctionã€undefinedã€æ­£åˆ™ç­‰ç±»å‹æ— æ³•é€šè¿‡è¿™ç§æ–¹æ³•å˜å›æ¥ã€‚</p></blockquote><pre><code class="js">const data = &#123; name: &quot;jude&quot; &#125;;const obj = JSON.parse(JSON.stringify(data));obj.age = 20;console.log(&quot;data = &quot;, data);// data = &#123; name:&quot;jude&quot;&#125;console.log(&quot;obj = &quot;, obj);// obj = &#123;name:&#39;jude&#39;,age:20&#125;</code></pre><h4 id="2-2-æ·±æ‹·è´æ–¹æ³•2ï¼š"><a href="#2-2-æ·±æ‹·è´æ–¹æ³•2ï¼š" class="headerlink" title="2.2 æ·±æ‹·è´æ–¹æ³•2ï¼š"></a>2.2 æ·±æ‹·è´æ–¹æ³•2ï¼š</h4><blockquote><p>æ‰‹åŠ¨å»å†™å¾ªç¯éå†</p></blockquote><pre><code class="js">const data = [&#123; name: &quot;jude&quot; &#125;];let obj = data.map(item =&gt; item);obj.push(&#123; name: &quot;summer&quot; &#125;);console.log(&quot;data = &quot;, data);// data = [&#123;name:&#39;jude&#39;&#125;]console.log(&quot;obj = &quot;, obj);// obj = [&#123;name:&#39;jude&#39;,name:&#39;summer&#39;&#125;]</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>38ã€Vueé¡¹ç›®ä¸­çš„window.resize</title>
      <link href="/2021/05/19/resize/"/>
      <url>/2021/05/19/resize/</url>
      
        <content type="html"><![CDATA[<p>Vueé¡¹ç›®ä¸­ä½¿ç”¨EChartså¯è§†åŒ–å›¾è¡¨æ—¶ï¼Œå›¾è¡¨è‡ªé€‚åº”å¤§å°ã€‚æ ¹æ®çª—å£å¤§å°è‡ªåŠ¨æ”¹å˜EChartså›¾è¡¨çš„å®½åº¦ã€‚</p><span id="more"></span><h3 id="ä¸€ã€é˜²æŠ–å‡½æ•°"><a href="#ä¸€ã€é˜²æŠ–å‡½æ•°" class="headerlink" title="ä¸€ã€é˜²æŠ–å‡½æ•°"></a>ä¸€ã€é˜²æŠ–å‡½æ•°</h3><p>é¡µé¢é¢‘ç¹ä½¿ç”¨window.resizeå‡½æ•°ä¼šä½¿å¾—é¡µé¢éå¸¸å¡é¡¿ï¼Œéœ€è¦ä½¿ç”¨debounceé˜²æŠ–å‡½æ•°ï¼ˆæ— è®ºè§¦å‘äº†å¤šå°‘æ¬¡å›è°ƒï¼Œéƒ½åªæ‰§è¡Œæœ€åä¸€æ¬¡ï¼‰ã€‚</p><pre><code class="js">/** * å‡½æ•°é˜²æŠ– * @param &#123;Function&#125; func * @param &#123;number&#125; delay * @param &#123;boolean&#125; immediate * @return &#123;*&#125; */export function debounce(func, delay, immediate = false) &#123;  let timer,context = this;  return (...args) =&gt; &#123;    if (immediate) &#123;      func.apply(context, args);      immediate = false;      return;    &#125;    clearTimeout(timer);    timer = setTimeout(() =&gt; &#123;      func.apply(context, args);    &#125;, delay);  &#125;;&#125;</code></pre><h3 id="äºŒã€resizeå‡½æ•°"><a href="#äºŒã€resizeå‡½æ•°" class="headerlink" title="äºŒã€resizeå‡½æ•°"></a>äºŒã€resizeå‡½æ•°</h3><pre><code class="js">// å·¥å…·å‡½æ•°çš„å¼•å…¥import &#123; debounce &#125; from &#39;@/utils/index.js&#39;;export default &#123;  data() &#123;    return &#123;      myChart: null,      resizeHandler: null    &#125;;  &#125;,  computed: &#123;    // ä¾§è¾¹æ çš„æ”¶ç¼©    open() &#123;      return this.$store.state.setting.open;    &#125;  &#125;,  mounted() &#123;    this.resizeHandler = debounce(() =&gt; &#123;      if (this.myChart) &#123;        this.myChart.resize();      &#125;    &#125;, 100);    this.initResizeEvent();  &#125;,  methods: &#123;    //ç›‘å¬resize    initResizeEvent() &#123;      window.addEventListener(&#39;resize&#39;, this.resizeHandler);    &#125;,    //ç§»é™¤resize    destroyResizeEvent() &#123;      window.removeEventListener(&#39;resize&#39;, this.resizeHandler);    &#125;  &#125;,  beforeDestroy() &#123;    this.destroyResizeEvent();    if (!this.myChart) &#123;      return;    &#125;    this.myChart.dispose();    this.myChart.off(&#39;click&#39;);    this.myChart = null;  &#125;,  activated() &#123;    this.initResizeEvent();    if (this.myChart) &#123;      this.myChart.resize();    &#125;  &#125;,  deactivated() &#123;    this.destroyResizeEvent();  &#125;,  watch: &#123;    open() &#123;      if (this.myChart) &#123;        this.myChart.resize();      &#125;    &#125;  &#125;&#125;;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>37ã€typescriptåŸºç¡€</title>
      <link href="/2021/05/15/typescript/"/>
      <url>/2021/05/15/typescript/</url>
      
        <content type="html"><![CDATA[<p>typescriptåŸºç¡€çŸ¥è¯†,åŒ…æ‹¬typescriptçš„å®‰è£…ã€å‡½æ•°ã€æ•°ç»„ã€å­—ç¬¦ä¸²ç­‰ã€‚</p><span id="more"></span><h3 id="1ã€typescriptçš„å®‰è£…"><a href="#1ã€typescriptçš„å®‰è£…" class="headerlink" title="1ã€typescriptçš„å®‰è£…"></a>1ã€typescriptçš„å®‰è£…</h3><blockquote><p>1ã€å®‰è£…node</p></blockquote><blockquote><p>2ã€å®‰è£…typescript</p></blockquote><pre><code class="shell">sudo npm install typescript -g  //(mac åˆ™éœ€è¦æ·»åŠ sudo windowåˆ™ä¸éœ€è¦)tsc -v // æŸ¥çœ‹ç‰ˆæœ¬å·</code></pre><blockquote><p>3ã€hello world</p></blockquote><pre><code class="shell"># åˆå§‹åŒ–é¡¹ç›®npm init -y# typescripté…ç½®æ–‡ä»¶tsc --init# å®‰è£…@type/node(è§£å†³æ¨¡å—å£°æ˜é—®é¢˜)npm install @types/node --save-dev# åˆ›å»ºhelloworld.tsæ–‡ä»¶touch helloworld.ts</code></pre><pre><code class="js">var a:String = &#39;hello world&#39;console.log(a)</code></pre><blockquote><p>4ã€å°†helloworld.tsè½¬æ¢æˆhelloworld.js</p></blockquote><pre><code class="shell">tsc helloworld.ts  //å°†tsæ–‡ä»¶è½¬æ¢æˆjsæ–‡ä»¶# è¿è¡Œhelloworld.jsnode helloworld.js  // æ‰“å°ç»“æœhello world</code></pre><h3 id="2ã€typescriptå‡½æ•°çš„å®šä¹‰æ–¹å¼"><a href="#2ã€typescriptå‡½æ•°çš„å®šä¹‰æ–¹å¼" class="headerlink" title="2ã€typescriptå‡½æ•°çš„å®šä¹‰æ–¹å¼"></a>2ã€typescriptå‡½æ•°çš„å®šä¹‰æ–¹å¼</h3><p>1ã€å‡½æ•°å£°æ˜<br>    ä½¿ç”¨functionå’Œå‡½æ•°åæ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°</p><pre><code class="ts">    function search(time:number) : string &#123;        return &#39;ç»ˆäºæ‰¾åˆ°äº†ä¸¢å¤±&#39; + time + &#39;å¤©çš„dog--å°ä¸ƒ&#39;    &#125;    var time = 1    var result : string = search(time)    console.log(result)  // ç»ˆäºæ‰¾åˆ°äº†ä¸¢å¤±ä¸€å¤©çš„dog--å°ä¸ƒ</code></pre><p>2ã€å‡½æ•°è¡¨è¾¾å¼<br>    å°†å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå˜é‡åå°±æ˜¯å‡½æ•°åã€‚é€šè¿‡å˜é‡åæ¥è°ƒç”¨å‡½æ•°</p><pre><code class="ts">    var Adc = function(n1:number,n2:number) : number &#123;        return n1++ + ++n2    &#125;    console.log(Adc(2,3))  // 6</code></pre><p>3ã€ç®­å¤´å‡½æ•°<br>    typescriptæ˜¯æ”¯æŒES6çš„ã€‚</p><pre><code class="ts">    var Jungle = (n1:number,n2:number) : number =&gt; &#123;        return n1 * n2    &#125;    console.log(Jungle(12,2) // 24</code></pre><pre><code>å°†tsæ–‡ä»¶è½¬æ¢ä¸ºjsæ–‡ä»¶ï¼štsc function.ts  =&gt;  ç”Ÿæˆfunction.js  =&gt; è¿è¡Œfunction.js,node function.js</code></pre><h3 id="3ã€typescriptå‡½æ•°ä½œç”¨åŸŸ"><a href="#3ã€typescriptå‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="3ã€typescriptå‡½æ•°ä½œç”¨åŸŸ"></a>3ã€typescriptå‡½æ•°ä½œç”¨åŸŸ</h3><blockquote><p>typescriptä¹Ÿæ˜¯æœ‰å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡çš„</p></blockquote><pre><code class="ts">    function star():void&#123;    var Jay = &#39;å‘¨æ°ä¼¦&#39;        console.log(Jay)  // å‘¨æ°ä¼¦    &#125;    star()    console.log(star) // [Function:star]    var JayChou = &#39;å‘¨æ°ä¼¦&#39;  // æ­¤æ—¶JayChouæ˜¯å…¨å±€å˜é‡    function superstar():void&#123;    console.log(&#39;é’èŠ±ç“·æ˜¯&#39; + JayChou + &#39;æ¼”å”±çš„ï¼&#39;) // é’èŠ±ç“·æ˜¯å‘¨æ°ä¼¦æ¼”å”±çš„ï¼    &#125;    superstar()    console.log(JayChou) // å‘¨æ°ä¼¦</code></pre><p><img src="https://img2018.cnblogs.com/blog/1912711/202001/1912711-20200119154050226-530021968.png"></p><h3 id="4ã€typescriptæ•°ç»„"><a href="#4ã€typescriptæ•°ç»„" class="headerlink" title="4ã€typescriptæ•°ç»„"></a>4ã€typescriptæ•°ç»„</h3><blockquote><p>tsä¸­æ•°æ®åˆ†ä¸ºå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚</p></blockquote><p>1ã€ä»€ä¹ˆæ˜¯å¼•ç”¨ç±»å‹ï¼Ÿ</p><blockquote><p>å¼•ç”¨ç±»å‹æ˜¯ä¸€ç§å¤åˆç±»å‹ï¼Œå¼•ç”¨ç±»å‹ä¸­å°è£…äº†å¾ˆå¤šå±æ€§ï¼Œå¯ä»¥é€šè¿‡å˜é‡åå’Œå±æ€§åæ¥è·å–å±æ€§å€¼æˆ–è€…è°ƒç”¨å±æ€§çš„æ–¹æ³•ã€‚</p></blockquote><pre><code class="ts">    let Jude = &#123;        name: &#39;Jude&#39;,        age: 28,        saySomething: function () &#123;            console.log(&#39;è¡Œåˆ°æ°´ç©·å¤„ï¼Œåçœ‹äº‘èµ·æ—¶ï¼&#39;);        &#125;    &#125;    console.log(Jude.name) // Jude</code></pre><p>2ã€å…ƒç¥–â€“ ä¸€ç§ç‰¹æ®Šçš„æ•°ç»„</p><p>æ•°ç»„ä¸­å…è®¸å«æœ‰å¤šç§ç±»å‹çš„å…ƒç´ </p><pre><code class="ts">    let arr : [number,string]    arr = [123,&#39;123&#39;]    // console.log(arr) // [123,&#39;123]</code></pre><p>å½“æˆ‘ä»¬å†™æˆè¿™ä¸ªæ ·å­ï¼Œæ˜¯ä¼šæŠ¥é”™çš„</p><pre><code class="ts">    let arr : [number,sting]    arr = [&#39;123&#39;,123]</code></pre><pre><code>error1: Type &#39;string&#39; is not assignable to type &#39;number&#39;. error2: Type &#39;number&#39; is not assignable to type &#39;string&#39;.</code></pre><p><img src="https://img2018.cnblogs.com/blog/1912711/202001/1912711-20200119172755771-1404695424.png"></p><h3 id="5ã€typescriptå­—ç¬¦ä¸²"><a href="#5ã€typescriptå­—ç¬¦ä¸²" class="headerlink" title="5ã€typescriptå­—ç¬¦ä¸²"></a>5ã€typescriptå­—ç¬¦ä¸²</h3><p>1ã€Typescriptä¸­å­—ç¬¦ä¸²çš„ä¸¤ç§ç±»å‹ï¼š</p><blockquote><p>åŸºæœ¬ç±»å‹å­—ç¬¦ä¸²ï¼šç”±å•å¼•å·æˆ–è€…åŒå¼•å·â€™åŒ…è£¹çš„â€™ä¸€ä¸²å­—ç¬¦;</p></blockquote><blockquote><p>å¼•ç”¨ç±»å‹å­—ç¬¦ä¸²ï¼šç”±newå®ä¾‹åŒ–çš„Stringç±»å‹ã€‚</p></blockquote><p>2ã€åŸºæœ¬ç±»å‹çš„å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥ä½¿ç”¨å¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•</p><pre><code class="ts">    let Jude: string = &#39;YQ&#39;    let JudeYQ: String = new String(&#39;JudeYQ&#39;)    console.log(Jude) // YQ    console.log(JudeYQ) // [String:&#39;JudeYQ&#39;]    // åŸºæœ¬ç±»å‹çš„å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥ä½¿ç”¨å¼•ç”¨ç±»å‹çš„å±æ€§å’Œæ–¹æ³•    console.log(Jude.length) // 2    console.log(JudeYQ.length)  // 6</code></pre><p>3ã€å­—ç¬¦ä¸²å¸¸ç”¨çš„æ–¹æ³•</p><blockquote><p>å­—ç¬¦ä¸²æŸ¥æ‰¾ indexOf()å’ŒlastIndexOf()ï¼ŒäºŒè€…è¿”å›çš„éƒ½æ˜¯å­—ç¬¦ä¸²çš„ä¸‹æ ‡ã€‚</p></blockquote><pre><code class="ts">    let word:string = &#39;è¥¿è™¹äººç˜¦ï¼Œç‡ƒçƒ§æˆ‘çš„å¡è·¯é‡Œ&#39;    let Calorie: string = &#39;å¡è·¯é‡Œ&#39;    console.log(word.indexOf(Calorie)) // 9    let ST:string = &#39;æ²ˆè…¾&#39;    console.log(word.indexOf(ST)) // -1 æ²¡æœ‰æŸ¥æ‰¾åˆ°è¿”å›-1    console.log(word.lastIndexOf(Calorie)) // 9 ä»å­—ç¬¦ä¸²å°¾éƒ¨å¼€å§‹æŸ¥æ‰¾å­—ç¬¦ä¸²çš„ä½ç½® å’ŒindexOfï¼ˆï¼‰è¿”å›çš„éƒ½æ˜¯å­—ç¬¦ä¸²ä¸‹æ ‡</code></pre><blockquote><p>å­—ç¬¦ä¸²çš„æˆªå–ï¼Œ substring()</p></blockquote><pre><code class="ts">    // å­—ç¬¦ä¸²çš„æˆªå–    console.log(word.substring(9)) // å¡è·¯é‡Œ    console.log(word.substring(9,12)) // å¡è·¯é‡Œ</code></pre><p>3ã€å­—ç¬¦ä¸²çš„æ›¿æ¢,replace()</p><pre><code class="ts">    console.log(word.replace(Calorie,&#39;è…¹è‚Œ&#39;))  // è¥¿è™¹äººç˜¦ï¼Œç‡ƒçƒ§æˆ‘çš„è…¹è‚Œ</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>36ã€çˆ¶å­ç»„ä»¶çš„åˆ›å»ºå’ŒæŒ‚è½½é¡ºåº</title>
      <link href="/2021/05/09/component-mounted/"/>
      <url>/2021/05/09/component-mounted/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>1ã€åˆ›å»ºè¿‡ç¨‹è‡ªä¸Šè€Œä¸‹ï¼ŒæŒ‚è½½è¿‡ç¨‹è‡ªä¸‹è€Œä¸Š</p><p>çˆ¶ç»„ä»¶ created<br>å­ç»„ä»¶created<br>å­ç»„ä»¶mounted<br>çˆ¶ç»„ä»¶mounted</p><p>2ã€åŸå› ï¼š</p><p>Vueåˆ›å»ºè¿‡ç¨‹æ˜¯ä¸€ä¸ªé€’å½’è¿‡ç¨‹ï¼Œå…ˆåˆ›å»ºçˆ¶ç»„ä»¶ï¼Œæœ‰å­ç»„ä»¶å°±ä¼šåˆ›å»ºå­ç»„ä»¶ï¼Œå› æ­¤åˆ›å»ºæ—¶å…ˆæœ‰çˆ¶ç»„ä»¶å†æœ‰å­ç»„ä»¶ï¼›å­ç»„ä»¶é¦–æ¬¡åˆ›å»ºä¼šæ·»åŠ mountedé’©å­åˆ°é˜Ÿåˆ—ï¼Œç­‰åˆ°patchç»“æŸå†æ‰§è¡Œä»–ä»¬ï¼Œå¯è§å­ç»„ä»¶çš„mountedé’©å­æ˜¯å…ˆè¿›å…¥åˆ°é˜Ÿåˆ—ä¸­çš„ï¼Œå› æ­¤ç­‰åˆ°patchç»“æŸæ‰§è¡Œè¿™äº›é’©å­æ—¶ä¹Ÿå…ˆæ‰§è¡Œã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>35ã€æ•°ç»„æ–¹æ³•</title>
      <link href="/2021/05/02/array/"/>
      <url>/2021/05/02/array/</url>
      
        <content type="html"><![CDATA[<p>js å¸¸ç”¨æ•°ç»„æ–¹æ³•æ•´ç†,åŒ…æ‹¬å¸¸ç”¨çš„æ•°ç»„å¸¸ç”¨æ–¹æ³•ã€é«˜é˜¶å‡½æ•° forEachã€filterã€mapã€‚</p><span id="more"></span><h3 id="1ã€å¸¸ç”¨æ•°ç»„æ–¹æ³•"><a href="#1ã€å¸¸ç”¨æ•°ç»„æ–¹æ³•" class="headerlink" title="1ã€å¸¸ç”¨æ•°ç»„æ–¹æ³•"></a>1ã€å¸¸ç”¨æ•°ç»„æ–¹æ³•</h3><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">// 1ã€åˆ é™¤æ•°ç»„çš„æœ€åä¸€é¡¹  pop()var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;];fruits.pop();console.log(fruits); // &quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;var x = fruits.pop(); // Mango// 2ã€æ•°ç»„ç»“å°¾æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´   push()var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;];fruits.push(&quot;Kiwi&quot;); //&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;,&quot;Kiwi&quot;var x = fruits.push(&quot;Kiwi&quot;); // 5// 3ã€åˆ é™¤æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´     shift()var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;];fruits.shift(); // &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;// 4ã€æ•°ç»„å¼€å¤´è¿”å›ä¸€ä¸ªæ–°å…ƒç´    è¿”å›æ–°æ•°ç»„é•¿åº¦   unshift()var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;];fruits.unshift(&quot;Lemon&quot;); //&quot;Lemon&quot; &quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;// 5ã€åˆ é™¤å…ƒç´  delete  ä¼šç•™ä¸‹æ•°ç»„æœªå®šä¹‰çš„ç©ºæ´  å¯ä»¥ä½¿ç”¨pop shiftæ›¿ä»£var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;];delete fruits[0]; // empty,&quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;// 6ã€æ‹¼æ¥æ•°ç»„  splice()  ç¬¬ä¸€ä¸ªå‚æ•° 2 å®šä¹‰äº†åº”æ·»åŠ æ–°å…ƒç´ çš„ä½ç½®   ç¬¬äºŒä¸ªå‚æ•° å®šä¹‰åº”åˆ é™¤å¤šå°‘å…ƒç´   å…¶ä½™å‚æ•°  å®šä¹‰è¦æ·»åŠ çš„æ–°å…ƒç´   è¿”å›ä¸€ä¸ªåŒ…å«å·²åˆ é™¤é¡¹çš„æ•°ç»„var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;];fruits.splice(2, 0, &quot;Lemon&quot;, &quot;Kiwi&quot;); // &quot;Banana&quot;, &quot;Orange&quot;, &quot;Lemon&quot;, &quot;Kiwi&quot;, &quot;Apple&quot;, &quot;Mango&quot;fruits.splice(2, 2, &quot;Lemon&quot;, &quot;Kiwi&quot;); // &quot;Banana&quot;, &quot;Orange&quot;, &quot;Lemon&quot;, &quot;Kiwi&quot;,// 7ã€åˆ é™¤å…ƒç´  splice()  åœ¨æ•°ç»„ä¸­ä¸ç•™â€œç©ºæ´â€çš„æƒ…å†µä¸‹ç§»é™¤å…ƒç´ var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;];fruits.splice(0, 1); //&quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;// 8ã€åˆå¹¶æ•°ç»„ concat()var myGirls = [&quot;Cecilie&quot;, &quot;Lone&quot;];var myBoys = [&quot;Emil&quot;, &quot;Tobias&quot;, &quot;Linus&quot;];var myChildren = myGirls.concat(myBoys);// 9ã€è£å‰ªæ•°ç»„ slice()   æºæ•°ç»„ä¸ä¼šåˆ é™¤ä»»ä½•å…ƒç´    ç¬¬ä¸€ä¸ªå‚æ•°  å¼€å§‹é€‰å–çš„å…ƒç´   ç¬¬äºŒä¸ªå‚æ•°  ç»“æŸå‚æ•°ä¸ºæ­¢ï¼ˆä¸åŒ…å«ï¼‰var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Lemon&quot;, &quot;Apple&quot;, &quot;Mango&quot;];var citrus = fruits.slice(1); // &quot;Orange&quot;, &quot;Lemon&quot;, &quot;Apple&quot;, &quot;Mango&quot;var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Lemon&quot;, &quot;Apple&quot;, &quot;Mango&quot;];var citrus = fruits.slice(1, 3); // &quot;Orange&quot;, &quot;Lemon&quot;   ç¬¬2ä¸ªå…ƒç´  åˆ° ç¬¬4ä¸ªå…ƒç´   æˆªå–ç»“æœä¸ºç¬¬2ä¸ªå’Œç¬¬3ä¸ªå…ƒç´ // 10ã€æ•°ç»„å…ƒç´ ç»“åˆæˆå­—ç¬¦ä¸² join() å’Œ toString()var fruits = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;];fruits.join(&quot;,&quot;); // Banana,Orange,Apple,Mangofruits.toString(); // Banana,Orange,Apple,Mango</code></pre></details><h3 id="2ã€é«˜é˜¶å‡½æ•°"><a href="#2ã€é«˜é˜¶å‡½æ•°" class="headerlink" title="2ã€é«˜é˜¶å‡½æ•°"></a>2ã€é«˜é˜¶å‡½æ•°</h3><h4 id="1ã€forEach"><a href="#1ã€forEach" class="headerlink" title="1ã€forEach"></a>1ã€forEach</h4><blockquote><p>forEach()æ–¹æ³•å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡ç»™å®šçš„å‡½æ•°ã€‚</p></blockquote><p>for exampleï¼š</p><pre><code class="js">var array = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];array.forEach((e) =&gt; &#123;  console.log(e); // &#39;a&#39; &#39;b&#39; &#39;c&#39;&#125;);</code></pre><p>è¯­æ³•ï¼šarr.forEach(callback(currentValue [, index [, array]])[, thisArg])</p><p>å‚æ•°ä»‹ç»ï¼š</p><pre><code>callbackï¼šä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶1~3ä¸ªå‚æ•°currentValueï¼šæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ index: æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•array: forEach()æ­£åœ¨æ“ä½œçš„æ•°ç»„   æ•°ç»„å¯¹è±¡æœ¬èº«thisArgï¼šå¯é€‰å‚æ•°ã€‚å½“æ‰§è¡Œå›è°ƒå‡½æ•°callbackæ—¶ï¼Œç”¨ä½œthisçš„å€¼ã€‚</code></pre><p>å¸¸è§ç”¨æ³•ï¼š</p><h5 id="ï¼ˆ1ï¼‰ç¨€ç–æ•°ç»„"><a href="#ï¼ˆ1ï¼‰ç¨€ç–æ•°ç»„" class="headerlink" title="ï¼ˆ1ï¼‰ç¨€ç–æ•°ç»„"></a>ï¼ˆ1ï¼‰ç¨€ç–æ•°ç»„</h5><blockquote><p>ä¸å¯¹æœªåˆå§‹åŒ–çš„å€¼è¿›è¡Œä»»ä½•æ“ä½œ</p></blockquote><pre><code class="js">const arratSpace = [1, 3, , 7];let numCallbackRuns = 0;arratSpace.forEach(function (e) &#123;  console.log(e);  numCallbackRuns++;&#125;);console.log(&quot;numCallbackRuns:&quot;, numCallbackRuns);</code></pre><h5 id="2-for-å¾ªç¯è½¬æ¢æˆ-forEach"><a href="#2-for-å¾ªç¯è½¬æ¢æˆ-forEach" class="headerlink" title="(2)for å¾ªç¯è½¬æ¢æˆ forEach"></a>(2)for å¾ªç¯è½¬æ¢æˆ forEach</h5><pre><code class="js">const items = [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;];const copy = [];//forå¾ªç¯for (let i = 0; i &lt; items.length; i++) &#123;  copey.push(items[i]);&#125;// forEachitems.forEach(function (itme) &#123;  copy.push(item);&#125;);</code></pre><h5 id="3-thisArg-ä½¿ç”¨ç®­å¤´å‡½æ•°-thisArg-å‚æ•°ä¼šè¢«å¿½ç•¥ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šäº†-this-å€¼"><a href="#3-thisArg-ä½¿ç”¨ç®­å¤´å‡½æ•°-thisArg-å‚æ•°ä¼šè¢«å¿½ç•¥ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šäº†-this-å€¼" class="headerlink" title="(3)thisArg ä½¿ç”¨ç®­å¤´å‡½æ•° thisArg å‚æ•°ä¼šè¢«å¿½ç•¥ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šäº† this å€¼"></a>(3)thisArg ä½¿ç”¨ç®­å¤´å‡½æ•° thisArg å‚æ•°ä¼šè¢«å¿½ç•¥ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ç»‘å®šäº† this å€¼</h5><h5 id="4-å¯¹è±¡å¤åˆ¶å™¨å‡½æ•°"><a href="#4-å¯¹è±¡å¤åˆ¶å™¨å‡½æ•°" class="headerlink" title="(4)å¯¹è±¡å¤åˆ¶å™¨å‡½æ•°"></a>(4)å¯¹è±¡å¤åˆ¶å™¨å‡½æ•°</h5><pre><code class="js">function copy(obj) &#123;  const copy = Object.create(Object.getPrototypeOf(obj));  const propNames = Object.getOwnPropertyNames(obj);  propNames.forEach(function (name) &#123;    const desc = Object.getOwnPropertyDescriptor(obj, name);    Object.defineProperty(copy, name, desc);  &#125;);  return copy;&#125;const obj1 = &#123; a: 1, b: 2 &#125;;const obj2 = copy(obj1); // obj2çœ‹èµ·æ¥å’Œobj1ä¸€æ¨¡ä¸€æ ·</code></pre><h5 id="5-æ•°ç»„åœ¨è¿­ä»£æ—¶è¢«ä¿®æ”¹äº†ï¼Œåˆ™å…¶ä»–å…ƒç´ ä¼šè¢«è·³è¿‡"><a href="#5-æ•°ç»„åœ¨è¿­ä»£æ—¶è¢«ä¿®æ”¹äº†ï¼Œåˆ™å…¶ä»–å…ƒç´ ä¼šè¢«è·³è¿‡" class="headerlink" title="(5)æ•°ç»„åœ¨è¿­ä»£æ—¶è¢«ä¿®æ”¹äº†ï¼Œåˆ™å…¶ä»–å…ƒç´ ä¼šè¢«è·³è¿‡"></a>(5)æ•°ç»„åœ¨è¿­ä»£æ—¶è¢«ä¿®æ”¹äº†ï¼Œåˆ™å…¶ä»–å…ƒç´ ä¼šè¢«è·³è¿‡</h5><pre><code class="js">var words = [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;];words.forEach(function (word) &#123;  console.log(word);  if (word === &quot;two&quot;) &#123;    words.shift();  &#125;&#125;);</code></pre><h5 id="6-promise-æˆ–-async-å‡½æ•°çš„ä½¿ç”¨"><a href="#6-promise-æˆ–-async-å‡½æ•°çš„ä½¿ç”¨" class="headerlink" title="(6)promise æˆ– async å‡½æ•°çš„ä½¿ç”¨"></a>(6)promise æˆ– async å‡½æ•°çš„ä½¿ç”¨</h5><pre><code class="js">let ratings = [5, 4, 5];let sum = 0;let sumFunction = async function (a, b) &#123;  return a + b;&#125;;ratings.forEach(async function (rating) &#123;  sum = await sumFunction(sum, rating);&#125;);console.log(sum); // 0</code></pre><h3 id="2ã€filter"><a href="#2ã€filter" class="headerlink" title="2ã€filter"></a>2ã€filter</h3><blockquote><p>filter()åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚ è¿”å›æ»¡è¶³æ¡ä»¶çš„æ–°æ•°ç»„ï¼Œä¸æ»¡è¶³åˆ™è¿”å›ç©ºæ•°ç»„ã€‚</p></blockquote><p>for example</p><pre><code class="js">const words = [&quot;111&quot;, &quot;222&quot;, &quot;333333&quot;, &quot;4444444&quot;, &quot;55555555&quot;];const result = words.filter((word) =&gt; &#123;  word.length &gt; 5;&#125;);console.log(result); // 333333  4444444    55555555</code></pre><p>è¯­æ³•ï¼švar newArray = arr.filter(callback(element[, index[, array]])[, thisArg])</p><p>å‚æ•°ï¼š<br>callback:ç”¨æ¥æµ‹è¯•æ•°ç»„çš„æ¯ä¸ªå…ƒç´ çš„å‡½æ•°ã€‚è¿”å› true è¡¨ç¤ºè¯¥å…ƒç´ é€šè¿‡æµ‹è¯•ï¼Œä¿ç•™è¯¥å…ƒç´ ï¼Œfalse åˆ™ä¸ä¿ç•™ã€‚</p><pre><code>element:æ•°ç»„ä¸­å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ index:æ­£åœ¨å¤„ç†çš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•array:è°ƒç”¨filterçš„æ•°ç»„æœ¬èº«thisArg:æ‰§è¡Œcallbackæ—¶ï¼Œç”¨äºthisçš„å€¼</code></pre><p>è¿”å›å€¼ï¼š</p><pre><code>ä¸€ä¸ªæ–°çš„ã€ç”±é€šè¿‡æµ‹è¯•çš„å…ƒç´ ç»„æˆçš„æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•æ•°ç»„å…ƒç´ é€šè¿‡æµ‹è¯•ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ã€‚</code></pre><p>ç”¨æ³•ï¼š</p><h4 id="ï¼ˆ1-ç­›é€‰æ’é™¤æ‰€æœ‰è¾ƒå°çš„å€¼"><a href="#ï¼ˆ1-ç­›é€‰æ’é™¤æ‰€æœ‰è¾ƒå°çš„å€¼" class="headerlink" title="ï¼ˆ1)ç­›é€‰æ’é™¤æ‰€æœ‰è¾ƒå°çš„å€¼"></a>ï¼ˆ1)ç­›é€‰æ’é™¤æ‰€æœ‰è¾ƒå°çš„å€¼</h4><pre><code class="js">function isBig(e) &#123;  return e &gt;= 10;&#125;var filterd = [3, 6, 9, 14, 32].filter(isBig);// [14,32]</code></pre><h4 id="2-è¿‡æ»¤-JSON-ä¸­çš„æ— æ•ˆæ¡ç›®"><a href="#2-è¿‡æ»¤-JSON-ä¸­çš„æ— æ•ˆæ¡ç›®" class="headerlink" title="(2)è¿‡æ»¤ JSON ä¸­çš„æ— æ•ˆæ¡ç›®"></a>(2)è¿‡æ»¤ JSON ä¸­çš„æ— æ•ˆæ¡ç›®</h4><pre><code class="js">var arr = [  &#123; id: 12 &#125;,  &#123; id: -1 &#125;,  &#123; id: 0 &#125;,  &#123; id: 3 &#125;,  &#123; id: 14.4 &#125;,  &#123;&#125;,  &#123; id: null &#125;,  &#123; id: NaN &#125;,  &#123; id: &quot;undefined&quot; &#125;,];var entries = 0;function isNumber(obj) &#123;  return obj !== undefined &amp;&amp; typeof obj === &quot;number&quot; &amp;&amp; !isNaN(obj);&#125;function filterID(item) &#123;  if (isNumber(item.id) &amp;&amp; item.id !== 0) &#123;    return true;  &#125;  entries++;  return false;&#125;var arrId = arr.filter(filterID);console.log(arrId); // [&#123;id:12&#125;,&#123;id:-1&#125;,&#123;id:3&#125;,&#123;id:14.4&#125;]console.log(entries); // 5</code></pre><h4 id="3-åœ¨æ•°ç»„ä¸­æœç´¢ï¼šæ ¹æ®æœç´¢æ¡ä»¶æ¥è¿‡æ»¤æ•°ç»„å†…å®¹"><a href="#3-åœ¨æ•°ç»„ä¸­æœç´¢ï¼šæ ¹æ®æœç´¢æ¡ä»¶æ¥è¿‡æ»¤æ•°ç»„å†…å®¹" class="headerlink" title="(3)åœ¨æ•°ç»„ä¸­æœç´¢ï¼šæ ¹æ®æœç´¢æ¡ä»¶æ¥è¿‡æ»¤æ•°ç»„å†…å®¹"></a>(3)åœ¨æ•°ç»„ä¸­æœç´¢ï¼šæ ¹æ®æœç´¢æ¡ä»¶æ¥è¿‡æ»¤æ•°ç»„å†…å®¹</h4><pre><code class="js">var fruits [&#39;apple&#39;,&#39;banana&#39;,&#39;grapes&#39;,&#39;mango&#39;,&#39;orange&#39;]function filterItems(query)&#123;    return fruits.filter(function(e)&#123;        return e.toLowerCase().indexOf(query.toLowerCase()) &gt; -1    &#125;)&#125;console.log(filterItem(&#39;ap&#39;))   // [&#39;apple&#39;,&#39;grapes&#39;]console.log(filterItem(&#39;an&#39;))   // [&#39;banana&#39;,&#39;mango&#39;,&#39;orange&#39;]</code></pre><p>ä¸Šé¢æ˜¯ es5 çš„å†™æ³•ï¼Œä¸‹é¢æ˜¯ es6 çš„å†™æ³•</p><pre><code class="js">var fruits [&#39;apple&#39;,&#39;banana&#39;,&#39;grapes&#39;,&#39;mango&#39;,&#39;orange&#39;]const filterItems = (query) =&gt;&#123;    return fruits.filter((e) =&gt;        e.toLowerCase().indexOf(query,toLowerCase()) &gt; -1    )&#125;console.log(filterItem(&#39;ap&#39;))   // [&#39;apple&#39;,&#39;grapes&#39;]console.log(filterItem(&#39;an&#39;))   // [&#39;banana&#39;,&#39;mango&#39;,&#39;orange&#39;]</code></pre><h3 id="3ã€map"><a href="#3ã€map" class="headerlink" title="3ã€map"></a>3ã€map</h3><blockquote><p>map()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯è°ƒç”¨ä¸€æ¬¡æä¾›çš„å‡½æ•°åçš„è¿”å›å€¼ã€‚ åŸæ•°ç»„ä¸ä¼šæ”¹å˜</p></blockquote><pre><code class="js">const array = [1, 2, 3, 4];const maps = array.map((x) =&gt; x * 2);console.log(maps); // 2 4 6 8</code></pre><p>ç”¨æ³•ï¼š</p><h4 id="1-æ ¼å¼åŒ–æ•°ç»„ä¸­çš„å¯¹è±¡"><a href="#1-æ ¼å¼åŒ–æ•°ç»„ä¸­çš„å¯¹è±¡" class="headerlink" title="(1)æ ¼å¼åŒ–æ•°ç»„ä¸­çš„å¯¹è±¡"></a>(1)æ ¼å¼åŒ–æ•°ç»„ä¸­çš„å¯¹è±¡</h4><pre><code class="js">var array = [  &#123; key: 1, value: 10 &#125;,  &#123; key: 2, value: 20 &#125;,  &#123; key: 3, value: 30 &#125;,];var formatterArray = array.map(function (obj) &#123;  var o = &#123;&#125;;  o[obj.key] = obj.value;  return o;&#125;);console.log(formatterArray); // [&#123;1:10&#125;,&#123;2:20&#125;,&#123;3:30&#125;]</code></pre><h4 id="2-ä½¿ç”¨åŒ…å«ä¸€ä¸ªå‚æ•°çš„å‡½æ•°æ¥æ„å»ºä¸€ä¸ªæ•°å­—æ•°ç»„"><a href="#2-ä½¿ç”¨åŒ…å«ä¸€ä¸ªå‚æ•°çš„å‡½æ•°æ¥æ„å»ºä¸€ä¸ªæ•°å­—æ•°ç»„" class="headerlink" title="(2)ä½¿ç”¨åŒ…å«ä¸€ä¸ªå‚æ•°çš„å‡½æ•°æ¥æ„å»ºä¸€ä¸ªæ•°å­—æ•°ç»„"></a>(2)ä½¿ç”¨åŒ…å«ä¸€ä¸ªå‚æ•°çš„å‡½æ•°æ¥æ„å»ºä¸€ä¸ªæ•°å­—æ•°ç»„</h4><pre><code class="js">var numbers = [1, 4, 9];var double = numbers.map(function (item) &#123;  return item * 2;&#125;);console.log(double); // [2,8,18]</code></pre><h2 id="includesæ¯”indexOfå¥½åœ¨å“ªé‡Œï¼Ÿ"><a href="#includesæ¯”indexOfå¥½åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="includesæ¯”indexOfå¥½åœ¨å“ªé‡Œï¼Ÿ"></a>includesæ¯”indexOfå¥½åœ¨å“ªé‡Œï¼Ÿ</h2><blockquote><p>includeså¯ä»¥æ£€æµ‹NaNï¼ŒindexOfä¸èƒ½ï¼Œincludeså†…éƒ¨ä½¿ç”¨äº†Number.isNaNå¯¹NaNè¿›è¡Œäº†åŒ¹é…</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> array </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>34ã€iTermsã€Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·ã€nrmç­‰çš„ä½¿ç”¨æ–¹æ³•</title>
      <link href="/2021/05/02/tool/"/>
      <url>/2021/05/02/tool/</url>
      
        <content type="html"><![CDATA[<p>ä¸€äº›å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨çš„å·¥å…·æ•´ç†</p><span id="more"></span><h2 id="iTerm2"><a href="#iTerm2" class="headerlink" title="iTerm2"></a>iTerm2</h2><p>å¿«æ·é”®</p><pre><code>    commond + t              // æ–°å»ºæ ‡ç­¾é¡µ    commond + w              // å…³é—­æ ‡ç­¾    commond + enter          // åˆ‡æ¢å…¨å±(ç¬¬ä¸€æ¬¡åˆ‡æ¢è‡³å…¨å±ï¼Œå†commond + enteræ¢å¤åˆ°ä¹‹å‰çª—å£)     commond + å·¦å³æ–¹å‘é”®       // åˆ‡æ¢æ ‡ç­¾    commond + +              // çª—å£å’Œå­—ä½“å˜å¤§    commond + -              // çª—å£å’Œå­—ä½“å˜å°</code></pre><h2 id="Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·"><a href="#Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·" class="headerlink" title="Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·"></a>Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·</h2><p>åœ¨å¼€å‘çš„å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç»å¸¸åˆ‡æ¢nodeç‰ˆæœ¬æ¥åº”å¯¹ä¸åŒçš„å¼€å‘ç¯å¢ƒï¼Œæ‰€ä»¥éœ€è¦ç»å¸¸ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„nodeã€‚</p><p>ä¸€ã€å®‰è£…npmæ’ä»¶n ,é€šè¿‡næ¨¡å—æ¥ç®¡ç†nodeç‰ˆæœ¬</p><p>1ã€å…¨å±€å®‰è£…næ¨¡å—</p><pre><code>    npm instlal -g n </code></pre><p>2ã€å®‰è£…å½“å‰ç¨³å®šç‰ˆæœ¬</p><pre><code>    n stableæˆ–è€…sudo n stable</code></pre><p>3ã€å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„</p><pre><code>    n latestæˆ–è€…sudo n latest</code></pre><p>4ã€å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„node</p><pre><code>    n v8.16.0</code></pre><p>5ã€å¸è½½æŒ‡å®šçš„nodeç‰ˆæœ¬</p><pre><code>    n rm v8.16.0</code></pre><p>äºŒã€ä½¿ç”¨nvmç®¡ç†nodeç‰ˆæœ¬<br>1ã€å®‰è£…nvm </p><pre><code>    brew install nvm</code></pre><p>2ã€ä½¿ç”¨nvmå®‰è£…nodeç‰ˆæœ¬</p><pre><code>    // å®‰è£…æœ€æ–°ç‰ˆæœ¬    nvm isntall node    // å®‰è£…æŒ‡å®šç‰ˆæœ¬    nvm install 8.16.0</code></pre><p>3ã€æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬</p><pre><code>    nvm ls</code></pre><p>4ã€åˆ‡æ¢nodeç‰ˆæœ¬</p><pre><code>    // ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬    nvm use node           // ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬    nvm use 8.16.0</code></pre><p>é€šå¸¸æˆ‘ä¼šä½¿ç”¨ç¬¬äºŒç§æ–¹å¼<br>ä¾‹å¦‚ï¼š</p><p>æˆ‘åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯<code>node@6.13.2</code>,</p><p>æ–°é¡¹ç›®ä½¿ç”¨çš„æ˜¯<code>node@8.16.0</code>,</p><p>å…ˆè¦å®‰è£…<code>node@8.16.0   nvm install 8.16.0</code></p><p>ç„¶å<code>nvm use 8.16.0</code></p><p>5ã€å¸è½½æŒ‡å®šç‰ˆæœ¬çš„node</p><pre><code>    nvm uninstall  v6.13.2</code></pre><p>6ã€è®¾ç½®ç³»ç»Ÿé»˜è®¤çš„nodeç‰ˆæœ¬</p><pre><code>    nvm alias default v8.16.0</code></pre><p>è¿™æ ·ä½¿ç”¨çš„nodeçš„é»˜è®¤ç‰ˆæœ¬ä¸º8.16.0</p><h2 id="nrmåˆ‡æ¢npmæº"><a href="#nrmåˆ‡æ¢npmæº" class="headerlink" title="nrmåˆ‡æ¢npmæº"></a>nrmåˆ‡æ¢npmæº</h2><p>å› ä¸ºåœ¨ä½¿ç”¨npmä¸‹è½½æ’ä»¶çš„è¿‡ç¨‹ä¸­é€Ÿåº¦å¤ªæ…¢äº†ï¼ˆnpmæºåœ¨å›½å¤–ï¼‰ï¼Œæ‰€ä»¥æ‰¾åˆ°ä¸€ä¸ªåˆ‡æ¢æºçš„æ–¹æ³•ï¼šnrmã€‚</p><p>ä¸€ã€åˆ‡æ¢æˆæ·˜å®æº</p><p>1ã€configå‘½ä»¤çš„ä½¿ç”¨</p><pre><code>npm config set registry https://registry.npm.taobao.org</code></pre><p>2ã€å‘½ä»¤è¡ŒæŒ‡å®š</p><pre><code>npm i node --registry https://registry.npm.taobao.org info underscore </code></pre><p>3ã€ç¼–è¾‘~/.npmrcï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><pre><code>registry = https://registry.npm.taobao.org</code></pre><p>äºŒã€nrmçš„ä½¿ç”¨</p><blockquote><p>nrmæ˜¯ä¸€ä¸ªå¯ä»¥åˆ‡æ¢ã€æ·»åŠ /åˆ é™¤/æµ‹è¯•æºçš„å·¥å…·</p></blockquote><p>1ã€å…¨å±€å®‰è£…nrm</p><pre><code>npm install -g nrm  // macå¦‚æœå‡ºç°æƒé™é—®é¢˜ï¼ŒåŠ ä¸Šsudo</code></pre><p>2ã€å®‰è£…å®Œæˆï¼ŒæŸ¥çœ‹æ‰€æœ‰çš„å¯ç”¨æº</p><pre><code>nrm ls</code></pre><p>3ã€æ·»åŠ æº</p><pre><code>nrm add æºçš„åç§°  https:// åœ°å€</code></pre><p>4ã€åˆ é™¤åŸ</p><pre><code>nrm del æºçš„åå­—</code></pre><p>5ã€åˆ‡æ¢åˆ°æŸä¸ªæº</p><pre><code>nrm use æºçš„åå­—</code></pre><p>6ã€æµ‹è¯•æºé€Ÿåº¦</p><pre><code>nrm test</code></pre><p>ä¾‹å¦‚ï¼Œæˆ‘éœ€è¦ä½¿ç”¨æ·˜å®æºï¼Œåªéœ€nrm use taobaoå°±å¯ä»¥äº†ï¼Œcnpmä¸è¦ä½¿ç”¨ï¼Œå®¹æ˜“å‡ºç°è«åå…¶å¦™çš„é”™è¯¯ã€‚</p><h2 id="å‰ç«¯å¸¸ç”¨çš„linuxå‘½ä»¤"><a href="#å‰ç«¯å¸¸ç”¨çš„linuxå‘½ä»¤" class="headerlink" title="å‰ç«¯å¸¸ç”¨çš„linuxå‘½ä»¤"></a>å‰ç«¯å¸¸ç”¨çš„linuxå‘½ä»¤</h2><p>å¸¸ç”¨çš„Linuxå‘½ä»¤</p><pre><code>1ã€vim test.html   åˆ›å»ºæ–°çš„æ–‡ä»¶    vim + æ–‡ä»¶å.åç¼€2ã€ls     æŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶    ls -a  åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶    ls -1  æ¯è¡Œåˆ—å‡ºä¸€ä¸ªæ–‡ä»¶ï¼Œä»¥å•åˆ—å½¢å¼åˆ—å‡º3ã€cat test.html  å°†è¯¥æ–‡ä»¶å†…å®¹æ‰“å°æ˜¾ç¤ºå‡ºæ¥   cat test1.html   cat test2.html   cat test1.html     test2.html&gt;test3.html   cat test3.html   å°†å¤šä¸ªæ–‡ä»¶åˆå¹¶åˆ°ç›®æ ‡æ–‡ä»¶ä¸­ã€‚   cat test1.html   cat test2.html   cat test1.html test2.html&gt;&gt;test4.html  å°†å‡ ä¸ªæ–‡ä»¶é™„åŠ åˆ°ç›®å½•æ–‡ä»¶ä¸­4ã€mv   ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶å’Œç›®å½•mv file1.txt file2.txt   å°†file1æ–‡ä»¶å‘½åä¸ºfile2ç”¨æ³•ï¼š cat 1.txt mv 1.txt 2.txt mv file1.txt file2  å°†file1æ–‡æœ¬ç§»åŠ¨åˆ°file2ç›®å½•  5ã€touch  file   å‘½ä»¤ç”¨äºä¿®æ”¹æ–‡ä»¶æˆ–è€…ç›®å½•çš„æ—¶é—´å±æ€§ï¼ŒåŒ…æ‹¬å­˜å–æ—¶é—´å’Œæ›´æ”¹æ—¶é—´ã€‚è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„ç©ºç™½æ–‡ä»¶ã€‚ touch newfile6ã€mkdir file    åˆ›å»ºæ–‡ä»¶å¤¹7ã€cd ../  è¿”å›å½“å‰æ–‡ä»¶å¤¹çš„ä¸Šä¸€å±‚ cd /    è¿”å›åˆ°æ ¹ç›®å½•ä¸‹8ã€rm -rf folder  åˆ é™¤æ–‡ä»¶å¤¹</code></pre><h2 id="eslintçš„é…ç½®"><a href="#eslintçš„é…ç½®" class="headerlink" title="eslintçš„é…ç½®"></a>eslintçš„é…ç½®</h2><p>å¸¸ç”¨çš„é…ç½®</p><pre><code>module.exports = &#123;  root: true,  env: &#123;    node: true  &#125;,  &#39;extends&#39;: [    &#39;plugin:vue/essential&#39;,    &#39;@vue/standard&#39;  ],  rules: &#123;    &#39;no-console&#39;: process.env.NODE_ENV === &#39;production&#39; ? &#39;error&#39; : &#39;off&#39;, // ç”Ÿäº§ç¯å¢ƒ æ— console.log    &#39;no-debugger&#39;: process.env.NODE_ENV === &#39;production&#39; ? &#39;error&#39; : &#39;off&#39;, // ç”Ÿäº§ç¯å¢ƒ æ— debugger    &#39;indent&#39;: &#39;off&#39;,    // å‡½æ•°å®šä¹‰æ—¶æ‹¬å·å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼    &#39;space-before-function-paren&#39;: &#39;off&#39;  &#125;,  parserOptions: &#123;    parser: &#39;babel-eslint&#39;  &#125;&#125;</code></pre><h2 id="gitæäº¤ä»£ç "><a href="#gitæäº¤ä»£ç " class="headerlink" title="gitæäº¤ä»£ç "></a>gitæäº¤ä»£ç </h2><p>ä¸€ã€åˆå§‹åŒ–æœ¬åœ°ä»“åº“ï¼Œæäº¤ä»£ç ï¼Œæäº¤åˆ°è¿œç¨‹gitä»“åº“</p><p>1ã€åˆå§‹åŒ–ä»£ç ä»“åº“</p><pre><code>    git init</code></pre><p>2ã€å°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ”¾åˆ°æš‚å­˜åŒº</p><pre><code>    git add .</code></pre><p>3ã€æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€</p><pre><code>    git status</code></pre><p>4ã€æ·»åŠ æäº¤çš„æè¿°ä¿¡æ¯</p><pre><code>    git commit -m &quot;æäº¤çš„æè¿°ä¿¡æ¯&quot;</code></pre><p>5ã€è¿œç¨‹ä»“åº“åœ°å€</p><pre><code>    git remote add origin &quot;è¿œç¨‹ä»“åº“åœ°å€&quot;</code></pre><p>6ã€æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><pre><code>    git push -u origin master</code></pre><p>äºŒã€åˆ›å»ºåˆ†æ”¯ï¼Œæäº¤ä»£ç åˆ°åˆ†æ”¯</p><p>1ã€åˆ›å»ºåˆ‡æ¢åˆ†æ”¯</p><pre><code>    git checkout -b dev  devä¸ºåˆ†æ”¯åç§°    git add .    git commit -m &#39;æè¿°&#39;    git push --set-upstream origin dev1   å°†åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“    åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯    git checkout master    git merge dev  å°†devåˆå¹¶åˆ°ä¸»åˆ†æ”¯    git push origin master  æ¨é€åˆ°è¿œç¨‹ä»“åº“</code></pre><p>ä¸‰ã€å…‹éš†æŒ‡å®šåˆ†æ”¯</p><pre><code>    git clone -b master git@gitee.com:username/projectname.git    git clone -b admin git@gitee.com:username/projectname.git</code></pre><p>å››ã€git reflog</p><pre><code>æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰æ“ä½œè®°å½•ï¼ˆåŒ…æ‹¬å·²ç»è¢«åˆ é™¤çš„ commit è®°å½•å’Œ reset çš„æ“ä½œï¼‰æ‰§è¡Œ git reset --hard HEAD~1ï¼Œé€€å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œç”¨git logåˆ™æ˜¯çœ‹ä¸å‡ºæ¥è¢«åˆ é™¤çš„commitidï¼Œç”¨git reflogåˆ™å¯ä»¥çœ‹åˆ°è¢«åˆ é™¤çš„commitidï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¹°åæ‚”è¯ï¼Œæ¢å¤åˆ°è¢«åˆ é™¤çš„é‚£ä¸ªç‰ˆæœ¬ã€‚</code></pre><h2 id="vscodeå¿«æ·é”®"><a href="#vscodeå¿«æ·é”®" class="headerlink" title="vscodeå¿«æ·é”®"></a>vscodeå¿«æ·é”®</h2><table><thead><tr><th>å¿«æ·é”®</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>commond + B</td><td>æ˜¾ç¤º/éšè—ä¾§è¾¹æ </td></tr><tr><td>commond + shift + p</td><td>æ˜¾ç¤ºå‘½ä»¤çª—å£</td></tr><tr><td>commond +</td><td>åˆ›å»ºå¤šä¸ªç¼–è¾‘å™¨</td></tr><tr><td>commond + 1ã€2</td><td>èšç„¦åˆ°ç¬¬1ã€ç¬¬2ä¸ªç¼–è¾‘å™¨</td></tr><tr><td>commond + J æˆ–è€… Ctrl + `</td><td>æ˜¾ç¤ºéšè—æ§åˆ¶å°</td></tr><tr><td>commond + W</td><td>å…³é—­å½“å‰æ–‡ä»¶</td></tr><tr><td>option + å·¦å³æ–¹å‘é”®</td><td>å•è¯ä¹‹é—´ç§»åŠ¨å…‰æ ‡</td></tr><tr><td>commond + å·¦å³æ–¹å‘é”®</td><td>ç§»åŠ¨å…‰æ ‡è‡³æœ€å‰ã€æœ€å</td></tr><tr><td>commond + shift + \</td><td>ä»£ç å—ä¹‹é—´ç§»åŠ¨å…‰æ ‡</td></tr></tbody></table><blockquote><p>fileheaderæ’ä»¶çš„ä½¿ç”¨</p></blockquote><pre><code>commond+shift+p -&gt; fileheader -&gt; enter/* * @Author: Jude  * @Date: 2020-07-24 16:39:41  * @Last Modified by: Jude * @Last Modified time: 2020-07-24 16:40:34 */</code></pre><h2 id="Markdownè¯­æ³•"><a href="#Markdownè¯­æ³•" class="headerlink" title="Markdownè¯­æ³•"></a>Markdownè¯­æ³•</h2><p>Markdownæ ‡é¢˜</p><p>ä½¿ç”¨#å·æ ‡è®°ï¼Œä½¿ç”¨ # å·å¯è¡¨ç¤º 1-6 çº§æ ‡é¢˜ï¼Œä¸€çº§æ ‡é¢˜å¯¹åº”ä¸€ä¸ª # å·ï¼ŒäºŒçº§æ ‡é¢˜å¯¹åº”ä¸¤ä¸ª # å·ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>1ã€Markdownæ®µè½</p><p>æ®µè½çš„æ¢è¡Œæ˜¯ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šç©ºæ ¼åŠ ä¸Šå›è½¦ã€‚</p><blockquote><p>å­—ä½“:</p></blockquote><pre><code>*æ–œä½“æ–‡æœ¬*</code></pre><pre><code>_æ–œä½“æ–‡æœ¬_</code></pre><pre><code>**ç²—ä½“æ–‡æœ¬**</code></pre><pre><code>__ç²—ä½“æ–‡æœ¬__</code></pre><pre><code>***ç²—æ–œä½“æ–‡æœ¬***</code></pre><pre><code>___ç²—æ–œä½“æ–‡æœ¬___</code></pre><blockquote><p>åˆ†å‰²çº¿</p></blockquote><pre><code>**** * ******- - -----------</code></pre><blockquote><p>åˆ é™¤çº¿ã€ä¸‹åˆ’çº¿ã€è„šæ³¨</p></blockquote><pre><code>~~åˆ é™¤çº¿~~&lt;u&gt;ä¸‹åˆ’çº¿&lt;/u&gt;[^Vue]:Vuejsæ˜¯ç›®å‰æœ€æµè¡Œçš„webå¼€å‘æ¡†æ¶ä¹‹ä¸€ã€‚</code></pre><p>2ã€Markdownåˆ—è¡¨</p><p>Markdown æ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚</p><p>ï¼ˆ1ï¼‰ã€æ— åºåˆ—è¡¨ä½¿ç”¨æ˜Ÿå·(*)ã€åŠ å·(+)æˆ–æ˜¯å‡å·(-)ä½œä¸ºåˆ—è¡¨æ ‡è®°ï¼Œè¿™äº›æ ‡è®°åé¢è¦æ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œç„¶åå†å¡«å†™å†…å®¹ï¼š</p><pre><code>* ç¬¬ä¸€é¡¹* ç¬¬äºŒé¡¹* ç¬¬ä¸‰é¡¹+ ç¬¬ä¸€é¡¹+ ç¬¬äºŒé¡¹+ ç¬¬ä¸‰é¡¹- ç¬¬ä¸€é¡¹- ç¬¬äºŒé¡¹- ç¬¬ä¸‰é¡¹</code></pre><p>ï¼ˆ2ï¼‰ã€æœ‰åºåˆ—è¡¨ï¼šæœ‰åºåˆ—è¡¨ä½¿ç”¨æ•°å­—å¹¶åŠ ä¸Š . å·æ¥è¡¨ç¤ºã€‚</p><pre><code>1. ç¬¬ä¸€é¡¹2. ç¬¬äºŒé¡¹3. ç¬¬ä¸‰é¡¹</code></pre><p>ï¼ˆ3ï¼‰ã€åˆ—è¡¨åµŒå¥—ï¼šåˆ—è¡¨åµŒå¥—åªéœ€åœ¨å­åˆ—è¡¨ä¸­çš„é€‰é¡¹å‰é¢æ·»åŠ å››ä¸ªç©ºæ ¼å³å¯</p><pre><code>1. ç¬¬ä¸€é¡¹ï¼š    - ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´     - ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ 2. ç¬¬äºŒé¡¹ï¼š    - ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´     - ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </code></pre><p>4ã€MarkdownåŒºå—</p><p>Markdown åŒºå—å¼•ç”¨æ˜¯åœ¨æ®µè½å¼€å¤´ä½¿ç”¨ &gt; ç¬¦å· ï¼Œç„¶ååé¢ç´§è·Ÿä¸€ä¸ªç©ºæ ¼ç¬¦å·</p><blockquote><p>åŒºå—çš„åµŒå¥—</p></blockquote><pre><code>&gt; æœ€å¤–å±‚&gt; &gt; ç¬¬ä¸€å±‚åµŒå¥—&gt; &gt; &gt; ç¬¬äºŒå±‚åµŒå¥—</code></pre><blockquote><p>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨</p></blockquote><pre><code>&gt; åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨&gt; 1. ç¬¬ä¸€é¡¹&gt; 2. ç¬¬äºŒé¡¹&gt; + ç¬¬ä¸€é¡¹&gt; + ç¬¬äºŒé¡¹&gt; + ç¬¬ä¸‰é¡¹</code></pre><blockquote><p>åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—</p></blockquote><p>å¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›åŒºå—ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ &gt; å‰æ·»åŠ å››ä¸ªç©ºæ ¼çš„ç¼©è¿›</p><pre><code>* ç¬¬ä¸€é¡¹    &gt; vuejs    &gt; JavaScriptæ¡†æ¶* ç¬¬äºŒé¡¹</code></pre><p>5ã€Markdowné“¾æ¥å’Œå›¾ç‰‡</p><blockquote><p>é“¾æ¥</p></blockquote><pre><code>[é“¾æ¥åç§°](é“¾æ¥åœ°å€)æˆ–è€…&lt;é“¾æ¥åœ°å€&gt;</code></pre><blockquote><p>å›¾ç‰‡</p></blockquote><pre><code>![alt å±æ€§æ–‡æœ¬](å›¾ç‰‡åœ°å€)![alt å±æ€§æ–‡æœ¬](å›¾ç‰‡åœ°å€ &quot;å¯é€‰æ ‡é¢˜&quot;)![RUNOOB å›¾æ ‡](http://static.runoob.com/images/runoob-logo.png)![RUNOOB å›¾æ ‡](http://static.runoob.com/images/runoob-logo.png &quot;RUNOOB&quot;)</code></pre><p>6ã€Markdownè¡¨æ ¼</p><pre><code>|  è¡¨å¤´   | è¡¨å¤´  ||  ----  | ----  || å•å…ƒæ ¼  | å•å…ƒæ ¼ || å•å…ƒæ ¼  | å•å…ƒæ ¼ |</code></pre><p>æˆ‘ä»¬å¯ä»¥è®¾ç½®è¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼š</p><pre><code>-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å³å¯¹é½ã€‚:- è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å·¦å¯¹é½ã€‚:-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…ä¸­å¯¹é½ã€‚</code></pre><h2 id="HBuilderçœŸæœºè°ƒè¯•"><a href="#HBuilderçœŸæœºè°ƒè¯•" class="headerlink" title="HBuilderçœŸæœºè°ƒè¯•"></a>HBuilderçœŸæœºè°ƒè¯•</h2><p>1ã€å°ç±³æ‰‹æœºå¼€å‘è€…æ¨¡å¼å¦‚ä½•æ‰“å¼€ï¼ˆMIUI 11.0.4ï¼‰</p><p>æ­¥éª¤ï¼šè®¾ç½®â€“æˆ‘çš„è®¾å¤‡â€“å…¨éƒ¨å‚æ•°â€“ï¼ˆç‚¹å‡»ï¼‰MINIç‰ˆæœ¬;</p><p>2ã€æ‰‹æœºè¿æ¥Macï¼š</p><p>Macçš„å…³äºæœ¬æœºâ€“ç³»ç»ŸæŠ¥å‘Šâ€“USBâ€“ä½ æ‰€è¿æ¥çš„deviceâ€“å‚å•†ID</p><p>3ã€æ‰“å¼€Macç»ˆç«¯ï¼š</p><p>åœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><pre><code class="shell">    echo xxxxxx &gt;&gt; ~/.android/adb_usb.ini ï¼ˆâ€œxxxxxxâ€ä¸ºå‚å•†ID);</code></pre><p>4ã€é‡å¯HBuilderX;</p><p>è¿™é‡Œå¦‚æœå‡ºç°äº†é—®é¢˜éœ€è¦åˆ‡æ¢åˆ°HBuilderXè‡ªå¸¦çš„adbç›®å½•ï¼›</p><p>è·¯å¾„ä¸ºï¼š/Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/launcher/tools/adbs</p><p>åœ¨adbsç›®å½•ä¸‹è¿è¡ŒTerminalï¼Œè¾“å…¥ï¼š</p><pre><code class="shell">    ./adb kill-server</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>33ã€æ—¶é—´æ ¼å¼åŒ–</title>
      <link href="/2021/04/28/time/"/>
      <url>/2021/04/28/time/</url>
      
        <content type="html"><![CDATA[<p>è·å–æ—¶é—´æ ¼å¼çš„æ–¹å¼ã€å°è£…çš„ä¸€äº›å‡½æ•°æ–¹æ³•</p><span id="more"></span><h2 id="ä¸€ã€å¸¸ç”¨æ—¶é—´æ ¼å¼"><a href="#ä¸€ã€å¸¸ç”¨æ—¶é—´æ ¼å¼" class="headerlink" title="ä¸€ã€å¸¸ç”¨æ—¶é—´æ ¼å¼"></a>ä¸€ã€å¸¸ç”¨æ—¶é—´æ ¼å¼</h2><pre><code class="js">    // 2021/3/10    let time = new Date().toLocaleDateString();    // ä¸Šåˆ10:30:00    let times = new Date().toLocaleTimeString();    // è·å–å½“å‰å¹´ä»½    2021å¹´    let year = new Date().getFullYear();    // è·å–å½“å‰æœˆä»½  æœˆä»½éœ€è¦+1   3æœˆä»½    let month = new Date().getMonth()+1;    // è·å–å½“å‰æœˆä»½æ—¥æœŸ   10å·    let day = new Date().getDate();    // è·å–å½“å‰æ˜ŸæœŸå‡    ä¸‰    let week = new Date().getDay();    // è·å–å½“å‰å­£åº¦   ä¸€å­£åº¦    let season =  Math.floor((this.getMonth()+3)/3);</code></pre><h2 id="äºŒã€Vue3è·å–å½“å‰æ—¶é—´ï¼šæ ¼å¼ï¼šYYYY-MM-DD-hh-mm-ss"><a href="#äºŒã€Vue3è·å–å½“å‰æ—¶é—´ï¼šæ ¼å¼ï¼šYYYY-MM-DD-hh-mm-ss" class="headerlink" title="äºŒã€Vue3è·å–å½“å‰æ—¶é—´ï¼šæ ¼å¼ï¼šYYYY-MM-DD hh:mm:ss"></a>äºŒã€Vue3è·å–å½“å‰æ—¶é—´ï¼šæ ¼å¼ï¼šYYYY-MM-DD hh:mm:ss</h2><h4 id="1ã€å°è£…å·¥å…·å‡½æ•°ï¼š"><a href="#1ã€å°è£…å·¥å…·å‡½æ•°ï¼š" class="headerlink" title="1ã€å°è£…å·¥å…·å‡½æ•°ï¼š"></a>1ã€å°è£…å·¥å…·å‡½æ•°ï¼š</h4><pre><code class="js">import &#123; ref, onMounted, onUnmounted &#125; from &#39;vue&#39;function dateFilter (v) &#123;  let m = v.getMonth() + 1  m = m &lt; 10 ? &#39;0&#39; + m : m  let d = v.getDate()  d = d &lt; 10 ? &#39;0&#39; + d : d  return v.getFullYear() + &#39;-&#39; + m + &#39;-&#39; + d&#125;function timeFilter (v) &#123;  let h = v.getHours()  h = h &lt; 10 ? &#39;0&#39; + h : h  let m = v.getMinutes()  m = m &lt; 10 ? &#39;0&#39; + m : m  let s = v.getSeconds()  s = s &lt; 10 ? &#39;0&#39; + s : s  return h + &#39;:&#39; + m + &#39;:&#39; + s&#125;export function clock () &#123;  let now = new Date()  const date = ref(dateFilter(now))  const time = ref(timeFilter(now))  let task  const start = () =&gt; &#123;    task = setInterval(() =&gt; &#123;      now = new Date()      date.value = dateFilter(now)      time.value = timeFilter(now)    &#125;, 1000)  &#125;  onMounted(start)  onUnmounted(() =&gt; &#123;    task &amp;&amp; clearInterval(task)  &#125;)  return &#123;    date,    time,    start  &#125;&#125;</code></pre><h4 id="2ã€æ¨¡æ¿é¡µé¢ä¸­ä½¿ç”¨"><a href="#2ã€æ¨¡æ¿é¡µé¢ä¸­ä½¿ç”¨" class="headerlink" title="2ã€æ¨¡æ¿é¡µé¢ä¸­ä½¿ç”¨"></a>2ã€æ¨¡æ¿é¡µé¢ä¸­ä½¿ç”¨</h4><p>template:</p><pre><code class="html">&lt;template&gt;  &lt;div class=&quot;time&quot;&gt;    &#123;&#123; date &#125;&#125; &#123;&#123; time &#125;&#125;  &lt;/div&gt;&lt;/template&gt;</code></pre><p>javascript:</p><pre><code class="js">&lt;script&gt;  import &#123; clock as useClock &#125; from &#39;../../utils/clock&#39;  export default &#123;    name: &#39;time&#39;,    setup () &#123;      const &#123; date, time &#125; = useClock()      return &#123;        date,        time      &#125;    &#125;  &#125;&lt;/script&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> time </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>32ã€javascript -- å¯¹è±¡</title>
      <link href="/2021/04/14/javascript-simple3/"/>
      <url>/2021/04/14/javascript-simple3/</url>
      
        <content type="html"><![CDATA[<p>å¯¹è±¡ç±»å‹å’ŒåŸå§‹ç±»å‹çš„ä¸åŒä¹‹å¤„ï¼Ÿå‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ</p><span id="more"></span><p>åœ¨ JS ä¸­ï¼Œé™¤äº†åŸå§‹ç±»å‹é‚£ä¹ˆå…¶ä»–çš„éƒ½æ˜¯å¯¹è±¡ç±»å‹äº†ã€‚<br>å¯¹è±¡ç±»å‹å’ŒåŸå§‹ç±»å‹ä¸åŒçš„æ˜¯ï¼š<br>åŸå§‹ç±»å‹å­˜å‚¨çš„æ˜¯å€¼ï¼Œå¯¹è±¡ç±»å‹å­˜å‚¨çš„æ˜¯åœ°å€ï¼ˆæŒ‡é’ˆï¼‰ã€‚<br>å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„æ—¶å€™ï¼Œè®¡ç®—æœºä¼šåœ¨å†…å­˜ä¸­å¸®æˆ‘ä»¬å¼€è¾Ÿä¸€ä¸ªç©ºé—´æ¥å­˜æ”¾å€¼ï¼Œ<br>ä½†æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™ä¸ªç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´ä¼šæ‹¥æœ‰ä¸€ä¸ªåœ°å€ï¼ˆæŒ‡é’ˆï¼‰ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>31ã€è§£å†³ç‚¹å‡»æ‰‹æœºè™šæ‹Ÿè¿”å›é”®é€€å‡ºåº”ç”¨</title>
      <link href="/2021/03/23/back/"/>
      <url>/2021/03/23/back/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•è§£å†³å®‰å“æ‰‹æœºç‚¹å‡»è™šæ‹Ÿè¿”å›é”®é€€å‡ºå½“å‰åº”ç”¨ã€‚</p><span id="more"></span><p>ä¸€ã€é—®é¢˜æè¿°ï¼š</p><p>æœ€è¿‘çš„é¡¹ç›®æ˜¯ä½¿ç”¨Vueå…¨å®¶æ¡¶+HBuilderæ‰“åŒ…å¼€å‘ä¸€ä¸ªç§»åŠ¨ç«¯APPã€‚<br>åœ¨æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼Œå½“å®‰å“æ‰‹æœºä½¿ç”¨è™šæ‹ŸæŒ‰é’®çš„æ—¶å€™ï¼Œç‚¹å‡»è™šæ‹ŸæŒ‰é’®çš„è¿”å›é”®ï¼ŒAPPä¼šç›´æ¥é€€å‡ºã€‚<br>è¿™æ˜¯å› ä¸ºå®‰å“æ‰‹æœºè‡ªå¸¦backè™šæ‹ŸæŒ‰é”®ï¼Œå¦‚æœä¸ä¿®æ”¹å…¶é»˜è®¤äº‹ä»¶ï¼Œç‚¹ä¸€ä¸‹appå°±é€€å‡ºäº†ï¼Œ<br>æ‰€ä»¥éœ€è¦ä¿®æ”¹è¿™ä¸ªæŒ‰é”®é»˜è®¤äº‹ä»¶äº‹ä»¶çš„ä»£ç ã€‚</p><p>äºŒã€è§£å†³åŠæ³•ï¼š</p><p>åœ¨index.htmlä¸­åŠ å…¥ä¸€ä¸ªscriptï¼ŒåŠ ä¸Šå¦‚ä¸‹ä»£ç ï¼š</p><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="javascript">&lt;script&gt;    document.addEventListener(&#39;plusready&#39;, function () &#123;        var first = null;        var webview = plus.webview.currentWebview();        plus.key.addEventListener(&#39;backbutton&#39;, function () &#123;            webview.canBack(function (e) &#123;                if (e.canBack) &#123;                    webview.back(); //è¿™é‡Œä¸å»ºè®®ä¿®æ”¹è‡ªå·±è·³è½¬çš„è·¯å¾„                  &#125; else &#123;                    //é¦–æ¬¡æŒ‰é”®ï¼Œæç¤ºâ€˜å†æŒ‰ä¸€æ¬¡é€€å‡ºåº”ç”¨â€™                      if (!first) &#123;                      first = new Date().getTime(); //è·å–ç¬¬ä¸€æ¬¡ç‚¹å‡»çš„æ—¶é—´æˆ³                        plus.nativeUI.toast(&quot;å†æŒ‰ä¸€æ¬¡é€€å‡ºåº”ç”¨&quot;, &#123;                        duration: &#39;short&#39;                      &#125;); //é€šè¿‡H5+ API è°ƒç”¨Android ä¸Šçš„toast æç¤ºæ¡†                        setTimeout(function () &#123;                        first = null;                      &#125;, 1000);                    &#125; else &#123;                        // è·å–ç¬¬äºŒæ¬¡ç‚¹å‡»çš„æ—¶é—´æˆ³, ä¸¤æ¬¡ä¹‹å·® å°äº 1000ms è¯´æ˜1sç‚¹å‡»äº†ä¸¤æ¬¡,                       if (new Date().getTime() - first &lt; 1000) &#123;                          plus.runtime.quit(); //é€€å‡ºåº”ç”¨                &#125;            &#125;          &#125;        &#125;)      &#125;);    &#125;);    &lt;/script&gt;</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>30ã€v-for å’Œ v-if ä¼˜å…ˆçº§</title>
      <link href="/2021/03/16/v-for-v-if/"/>
      <url>/2021/03/16/v-for-v-if/</url>
      
        <content type="html"><![CDATA[<p>v-for å’Œ v-if ä¼˜å…ˆçº§åœ¨vue2.xå’Œvue3.xæ˜¯ç›¸åçš„ã€‚</p><span id="more"></span><p>1ã€å®è·µä¸­ï¼Œä¸åº”è¯¥å°†v-forå’Œv-ifæ”¾åœ¨ä¸€èµ·</p><p>2ã€Vue2ä¸­ï¼Œv-forçš„ä¼˜å…ˆçº§æ˜¯é«˜äºv-ifï¼ŒæŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·ï¼Œè¾“å‡ºçš„æ¸²æŸ“å‡½æ•°ä¸­å¯ä»¥çœ‹å‡ºä¼šå…ˆæ‰§è¡Œå¾ªç¯å†åˆ¤æ–­æ¡ä»¶ï¼Œå“ªæ€•æˆ‘ä»¬åªæ¸²æŸ“åˆ—è¡¨ä¸­ä¸€å°éƒ¨åˆ†å…ƒç´ ï¼Œä¹Ÿå¾—åœ¨æ¯æ¬¡é‡æ¸²æŸ“çš„æ—¶å€™éå†æ•´ä¸ªåˆ—è¡¨ï¼Œè¿™æ ·ä¼šæ¯”è¾ƒæµªè´¹æ€§èƒ½ï¼›è€Œåœ¨Vue3ä¸­åˆ™è·ŸVue2å®Œå…¨ç›¸åï¼Œv-ifçš„ä¼˜å…ˆçº§æ˜¯é«˜äºv-forçš„ï¼Œæ‰€ä»¥v-ifæ‰§è¡Œæ—¶ï¼Œå®ƒè°ƒç”¨çš„å˜é‡å“ˆä¸å­˜åœ¨ï¼Œä¼šå¯¼è‡´å¼‚å¸¸ã€‚</p><p>3ã€2ç§åœºæ™¯çš„åº”ç”¨ï¼š<br>ï¼ˆ1ï¼‰ä¸ºäº†è¿‡æ»¤åˆ—è¡¨è‚¿çš„é¡¹ç›®ï¼ˆv-for=â€user in usersâ€ v-if=â€user.isActiveâ€   ï¼‰ã€‚è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§ï¼Œå®šä¹‰ä¸€ä¸ªactiveUsersï¼Œè®©å…¶è¿”å›è¿‡æ»¤åçš„åˆ—è¡¨å³å¯ï¼ˆâ€œusers.filter(u =&gt; u.isActive)â€ï¼‰<br>  (2)ä¸ºäº†é¿å…æ¸²æŸ“æœ¬åº”è¯¥è¢«éšè—çš„åˆ—è¡¨ï¼ˆv-for=â€user in usersâ€ v-if=â€shouldShowUsersâ€ï¼‰ã€‚æ­¤æ—¶v-ifç§»åŠ¨åˆ°å®¹å™¨å…ƒç´ ä¸Šï¼ˆæ¯”å¦‚ul olï¼‰æˆ–è€…å¤–é¢åŒ…ä¸€å±‚templateå³å¯</p><p>4ã€Vueæ–‡æ¡£æ˜ç¡®æŒ‡å‡ºv-ifå’Œv-forä¸è¦åŒäº‹ç”¨åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>29ã€Vue-è™šæ‹ŸDOM</title>
      <link href="/2021/03/12/vdom/"/>
      <url>/2021/03/12/vdom/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>è™šæ‹ŸDOMå…¶å®å°±æ˜¯ä¸€æ£µæ¨¡æ‹ŸJavaScriptå¯¹è±¡ä½œä¸ºåŸºç¡€çš„æ ‘ï¼Œç”¨å¯¹è±¡å±æ€§æ¥æè¿°èŠ‚ç‚¹ï¼Œå®é™…ä¸Šå®ƒåªæ˜¯ä¸€å±‚å¯¹çœŸå®DOMçš„æŠ½è±¡ã€‚<br>æœ€ç»ˆå¯ä»¥é€šè¿‡ä¸€ç³»åˆ—æ“ä½œä½¿è¿™æ£µæ ‘æ˜ å°„åˆ°çœŸå®ç¯å¢ƒä¸Šã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>28ã€vueç»„ä»¶åŒ–å®è·µä¹‹æ’æ§½ï¼ˆäºŒï¼‰</title>
      <link href="/2021/02/24/vue-component2/"/>
      <url>/2021/02/24/vue-component2/</url>
      
        <content type="html"><![CDATA[<p>æ’æ§½ï¼šæ’æ§½è¯­æ³•æ˜¯Vue å®ç°çš„å†…å®¹åˆ†å‘ APIï¼Œç”¨äºå¤åˆç»„ä»¶å¼€å‘ã€‚è¯¥æŠ€æœ¯åœ¨é€šç”¨ç»„ä»¶åº“å¼€å‘ä¸­æœ‰å¤§é‡åº”ç”¨ã€‚</p><span id="more"></span><h3 id="ä¸€ã€åŒ¿åæ’æ§½"><a href="#ä¸€ã€åŒ¿åæ’æ§½" class="headerlink" title="ä¸€ã€åŒ¿åæ’æ§½"></a>ä¸€ã€åŒ¿åæ’æ§½</h3><pre><code class="js">// comp1&lt;div&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;// parent&lt;comp&gt;hello&lt;/comp&gt;</code></pre><h3 id="äºŒã€å…·åæ’æ§½"><a href="#äºŒã€å…·åæ’æ§½" class="headerlink" title="äºŒã€å…·åæ’æ§½"></a>äºŒã€å…·åæ’æ§½</h3><blockquote><p>å†…å®¹åˆ†å‘åˆ°å­ç»„ä»¶æŒ‡å®šä½ç½®</p></blockquote><pre><code class="js">// comp2&lt;div&gt;&lt;slot&gt;&lt;/slot&gt;&lt;slot name=&quot;content&quot;&gt;&lt;/slot&gt;&lt;/div&gt;// parent&lt;comp&gt;// é»˜è®¤æ’æ§½ç”¨defaultåšå‚æ•° å…·åæ’æ§½ç”¨æ’æ§½ååšå‚æ•°&lt;template v-slot:default&gt;å…·åæ’æ§½&lt;/tempalte&gt;&lt;template v-slot:content&gt;å†…å®¹...&lt;/template&gt;&lt;/comp&gt;</code></pre><h3 id="ä¸‰ã€ä½œç”¨åŸŸæ’æ§½"><a href="#ä¸‰ã€ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="ä¸‰ã€ä½œç”¨åŸŸæ’æ§½"></a>ä¸‰ã€ä½œç”¨åŸŸæ’æ§½</h3><blockquote><p>åˆ†å‘å†…å®¹è¦ç”¨åˆ°å­ç»„ä»¶ä¸­çš„æ•°æ®</p></blockquote><pre><code class="js">&lt;div&gt;    &lt;slot :foo=&quot;foo&quot;&gt;&lt;/slot&gt;&lt;/div&gt;// parent&lt;comp&gt;// æŠŠv-slotçš„å€¼æŒ‡å®šä¸ºä½œç”¨åŸŸä¸Šä¸‹æ–‡å¯¹è±¡&lt;tempalte v-slot:default=&quot;slotProps&quot;&gt;    æ¥è‡ªå­ç»„ä»¶æ•°æ®ï¼š&#123;&#123;slotProps.foo&#125;&#125;&lt;/tempalte&gt;&lt;/comp&gt;</code></pre><h3 id="å››ã€å®ä¾‹ä»£ç "><a href="#å››ã€å®ä¾‹ä»£ç " class="headerlink" title="å››ã€å®ä¾‹ä»£ç "></a>å››ã€å®ä¾‹ä»£ç </h3><p>å­ç»„ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="js">// å­ç»„ä»¶ Layout.vue&lt;template&gt;  &lt;div&gt;    &lt;div class=&quot;header&quot;&gt;      &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;    &lt;/div&gt;    &lt;div class=&quot;body&quot;&gt;      &lt;slot&gt;&lt;/slot&gt;    &lt;/div&gt;    &lt;div class=&quot;footer&quot;&gt;      &lt;slot name=&quot;footer&quot; :fc=&quot;footerContent&quot;&gt;&lt;/slot&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;  export default &#123;    data() &#123;      return &#123;        remark: [          &#39;å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Š&#39;,          &#39;å­¦ä¹ æ°¸è¿œä¸æ™š&#39;,          &#39;å­¦ä¹ çŸ¥è¯†è¦å–„äºæ€è€ƒ,æ€è€ƒ,å†æ€è€ƒ&#39;,          &#39;å­¦ä¹ çš„æ•Œäººæ˜¯è‡ªå·±çš„æ»¡è¶³,è¦è®¤çœŸå­¦ä¹ ä¸€ç‚¹ä¸œè¥¿,å¿…é¡»ä»ä¸è‡ªæ»¡å¼€å§‹&#39;,          &#39;æ„æˆæˆ‘ä»¬å­¦ä¹ æœ€å¤§éšœç¢çš„æ˜¯å·²çŸ¥çš„ä¸œè¥¿,è€Œä¸æ˜¯æœªçŸ¥çš„ä¸œè¥¿&#39;,          &#39;åœ¨ä»Šå¤©å’Œæ˜å¤©ä¹‹é—´,æœ‰ä¸€æ®µå¾ˆé•¿çš„æ—¶é—´;è¶ä½ è¿˜æœ‰ç²¾ç¥çš„æ—¶å€™,å­¦ä¹ è¿…é€ŸåŠäº‹&#39;,          &#39;ä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆç„‰ï¼›æ‹©å…¶å–„è€…è€Œä»ä¹‹ï¼Œå…¶ä¸å–„è€…è€Œæ”¹ä¹‹&#39;        ]      &#125;    &#125;,    computed: &#123;      footerContent() &#123;        return this.remark[new Date().getDay() - 1]       &#125;    &#125;,  &#125;&lt;/script&gt;&lt;style scoped&gt;.header &#123;  background-color: rgb(252, 175, 175);&#125;.body &#123;  display: flex;  background-color: rgb(144, 250, 134);  min-height: 100px;  align-items: center;  justify-content: center;&#125;.footer &#123;  background-color: rgb(114, 116, 255);&#125;&lt;/style&gt;</code></pre><p>çˆ¶ç»„ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="js">//çˆ¶ç»„ä»¶ index.vue&lt;template&gt;  &lt;div&gt;    &lt;h2&gt;æ’æ§½&lt;/h2&gt;    &lt;!-- æ’æ§½ --&gt;    &lt;Layout&gt;      &lt;!-- å…·åæ’æ§½ --&gt;      &lt;template v-slot:header&gt;å…¨æ ˆå·¥ç¨‹å¸ˆ&lt;/template&gt;      &lt;!-- åŒ¿åæ’æ§½ --&gt;      &lt;template&gt;content...&lt;/template&gt;      &lt;!-- ä½œç”¨åŸŸæ’æ§½ --&gt;      &lt;template v-slot:footer=&quot;&#123;fc&#125;&quot;&gt;&#123;&#123;fc&#125;&#125;&lt;/template&gt;    &lt;/Layout&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;  import Layout from &#39;@/components/slots/Layout.vue&#39;    export default &#123;    components: &#123;      Layout    &#125;,  &#125;&lt;/script&gt;&lt;style scoped&gt;&lt;/style&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>27ã€vueç»„ä»¶åŒ–å®è·µä¹‹ç»„ä»¶é€šä¿¡ï¼ˆä¸€ï¼‰</title>
      <link href="/2021/02/20/vue-component/"/>
      <url>/2021/02/20/vue-component/</url>
      
        <content type="html"><![CDATA[<p>vueç»„ä»¶ç³»ç»Ÿæä¾›äº†ä¸€ç§æŠ½è±¡ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‹¬ç«‹å¯å¤ç”¨çš„ç»„ä»¶æ¥æ„å»ºå¤§å‹åº”ç”¨ï¼Œä»»æ„ç±»å‹çš„åº”ç”¨ç•Œ é¢éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªç»„ä»¶æ ‘ã€‚ç»„ä»¶åŒ–èƒ½æé«˜å¼€å‘æ•ˆç‡ï¼Œæ–¹ä¾¿é‡å¤ä½¿ç”¨ï¼Œç®€åŒ–è°ƒè¯•æ­¥éª¤ï¼Œæå‡é¡¹ç›®å¯ç»´æŠ¤æ€§ï¼Œä¾¿äºå¤šäººååŒå¼€å‘ã€‚</p><span id="more"></span><h3 id="ä¸€ã€ç»„ä»¶é€šä¿¡å¸¸ç”¨æ–¹å¼"><a href="#ä¸€ã€ç»„ä»¶é€šä¿¡å¸¸ç”¨æ–¹å¼" class="headerlink" title="ä¸€ã€ç»„ä»¶é€šä¿¡å¸¸ç”¨æ–¹å¼"></a>ä¸€ã€ç»„ä»¶é€šä¿¡å¸¸ç”¨æ–¹å¼</h3><p>1ã€props</p><blockquote><p>çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶</p></blockquote><p>çˆ¶å­ç»„ä»¶äº¤äº’ï¼Œpropså’Œ$emit</p><pre><code class="js">// childprops:&#123;msg:String&#125;// parent&lt;HelloWorld msg=&quot;hello vue&quot; /&gt;</code></pre><p>2ã€è‡ªå®šä¹‰äº‹ä»¶</p><blockquote><p>å­ä¼ çˆ¶</p></blockquote><pre><code class="js">//childthis.$emit(&#39;add&#39;,good)// parent&lt;Cart @add=&quot;cartAdd($event)&quot;&gt;&lt;/Cart&gt;</code></pre><p>3ã€eventBusäº‹ä»¶æ€»çº¿</p><blockquote><p>ä»»æ„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´çš„ä¼ å€¼å¸¸ç”¨äº‹ä»¶æ€»çº¿æˆ–è€…vuex</p></blockquote><p>4ã€$parentå’Œ$root</p><blockquote><p>å…„å¼Ÿç»„ä»¶ä¹‹é—´é€šä¿¡å¯é€šè¿‡å…±åŒçˆ¶è¾ˆæ­æ¡¥ï¼Œ$parentæˆ–$root</p></blockquote><pre><code class="js">// brother1this.$parent.$on(&#39;foo&#39;,handle)// brother2this.$parent.$emit(&#39;foo&#39;)</code></pre><p>5ã€$children</p><blockquote><p>çˆ¶ç»„ä»¶å¯é€šè¿‡$childrenè®¿é—®å­ç»„ä»¶å®ç°çˆ¶å­é€šä¿¡</p></blockquote><pre><code class="js">// parentthis.$children[0].xx=&#39;xxx&#39;</code></pre><p>6ã€$attrsã€$listeners</p><blockquote><p>åŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸ä½œä¸º prop è¢«è¯†åˆ« (ä¸”è·å–) çš„ç‰¹æ€§ç»‘å®š ( class å’Œ style é™¤å¤–)ã€‚å½“ä¸€ä¸ªç»„ä»¶æ²¡æœ‰ å£°æ˜ä»»ä½• prop æ—¶ï¼Œè¿™é‡Œä¼šåŒ…å«æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ç»‘å®š ( class å’Œ style é™¤å¤–)ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ v- bind=â€$attrsâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶â€”â€”åœ¨åˆ›å»ºé«˜çº§åˆ«çš„ç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚</p></blockquote><pre><code class="js">// child:æœªåœ¨propsä¸­å£°æ˜foo&lt;p&gt;&#123;&#123;$attrs.foo&#125;&#125;&lt;/p&gt;// parent&lt;HelloWorld foo=&quot;foo&quot;&gt;</code></pre><p>7ã€refs</p><blockquote><p>è·å–å­èŠ‚ç‚¹å¼•ç”¨</p></blockquote><pre><code class="js">// parent&lt;HelloWorld ref=&quot;wrap&quot;&gt;mounted()&#123;    this.$refs.wrap.xx = &quot;xxx&quot;&#125;</code></pre><p>8ã€provide/inject</p><blockquote><p>èƒ½å¤Ÿå®ç°ç¥–å…ˆå’Œåä»£ä¹‹é—´çš„ä¼ å€¼</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>26ã€å…³äºv-forçš„keyå€¼ä¸ºä»€ä¹ˆä¸èƒ½æ˜¯indexï¼Ÿ</title>
      <link href="/2021/02/14/v-for-index/"/>
      <url>/2021/02/14/v-for-index/</url>
      
        <content type="html"><![CDATA[<p>ä»å®é™…çš„æ¡ˆä¾‹å‘ç°åˆ°åœ¨ä½¿ç”¨ v-for æ—¶ï¼Œå°† key å€¼å†™æˆäº† indexï¼Œå‡ºç°çš„é—®é¢˜ã€‚ä¸å…¶ä½¿ç”¨ index ä½œä¸º key ï¼Œä¸å¦‚å®Œå…¨ä¸å†™ keyï¼Œå› ä¸ºä»–ä»¬çš„æ€§èƒ½æ˜¯ä¸€æ ·ã€‚æ¯”å¦‚ä¸€ä¸ªåˆ—è¡¨é•¿åº¦ä¸º 10ï¼Œç”¨ index ä½œä¸º key ï¼Œå„ item çš„ key å€¼ä¾æ¬¡å°±æ˜¯ 0-9ï¼Œ ç„¶å reverse() ä¸€ä¸‹ï¼Œåˆ—è¡¨çš„çš„ key è¿˜æ˜¯ 0-9ã€‚åœ¨ä¾æ¬¡ patch è¿™ 10 ä¸ª item çš„æ—¶å€™ï¼ŒsameVnode() å…¨éƒ¨è¿”å›çœŸï¼ˆå› ä¸º tag å’Œ key éƒ½ä¸€æ ·ï¼‰ã€‚å†çœ‹å¦å¤–ä¸€ç§æƒ…å†µï¼Œå¦‚æœä¸å†™ key ï¼Œ é‚£è¿™ 10 ä¸ª item çš„ key å…¨éƒ¨æ˜¯ undefined, åœ¨ sameVnode() ä¹Ÿæ˜¯å…¨éƒ¨è¿”å›çœŸï¼ˆå› ä¸º tag ç›¸åŒï¼Œkey ä¹Ÿç›¸åŒï¼škey éƒ½æ˜¯ undefinedï¼‰ã€‚æ‰€ä»¥å¾—å‡ºç»“è®ºï¼Œå¦‚æœä½¿ç”¨ index ä½œä¸º keyï¼Œä¸å¦‚å¹²è„†ä¸å†™ key äº†ï¼Œè¿˜èƒ½çœä¸‹ä»£ç ã€‚</p><span id="more"></span><h3 id="ä¸€ã€æ¡ˆä¾‹-bug-å¤ç°"><a href="#ä¸€ã€æ¡ˆä¾‹-bug-å¤ç°" class="headerlink" title="ä¸€ã€æ¡ˆä¾‹ bug å¤ç°"></a>ä¸€ã€æ¡ˆä¾‹ bug å¤ç°</h3><p>çˆ¶ç»„ä»¶ä»£ç ï¼š</p><pre><code class="js">// çˆ¶ç»„ä»¶&lt;Child    v-for=&quot;(item,index) in list&quot;    :key=&quot;index&quot;    :count=&quot;item.count&quot;    :name=&quot;item.name&quot;    @delete=&quot;handleDelete(index)&quot;/&gt;// datalist:[    &#123;        count:1,        name:&quot;1&quot;    &#125;,    &#123;        count:2,        name:&quot;2&quot;    &#125;,       &#123;        count:3,        name:&quot;3&quot;    &#125;,]// methodhandelDelete(index)&#123;    this.list.splice(index,1)&#125;</code></pre><p>å­ç»„ä»¶ä»£ç ï¼š</p><pre><code class="js">// å­ç»„ä»¶&lt;div&gt;&lt;span&gt;    &#123;&#123;name&#125;&#125;&lt;/span&gt;countï¼š&#123;&#123; innerCount &#125;&#125;&lt;button @click=&quot;$emit(&#39;delete)&quot;&gt;&lt;/button&gt;delete&lt;/button&gt;&lt;/div&gt;// propsprops:&#123;    count:&#123;        type:Number,        default:0    &#125;,    name:&#123;        type:String,        default:&#39;&#39;    &#125;&#125;// datadata()&#123;    retrun&#123;        // å­ç»„ä»¶ä¸‹é¢çš„è¿™è¡Œä»£ç å®šä¹‰äº†è‡ªå·±çš„çŠ¶æ€ï¼Œæ— æ³•ä½¿ç”¨indexä½œä¸ºkeyå€¼        innerCount:this.count    &#125;&#125;</code></pre><p>å½“åˆ é™¤çš„æ—¶å€™ï¼Œçœ‹ä¸Šå»æ˜¯æˆåŠŸäº†ï¼Œå…¶å®å­˜åœ¨é—®é¢˜ã€‚åŠ ä¸Šæ’åºä¹Ÿæ˜¯å­˜åœ¨é—®é¢˜ã€‚</p><p>å°† v-for é‡Œé¢çš„ key æ¢æˆ item åï¼Œæ˜¯æ­£å¸¸çš„ã€‚</p><p>Vue å®˜ç½‘çš„æè¿°ï¼š</p><blockquote><p>å½“ Vue æ­£åœ¨æ›´æ–°ä½¿ç”¨ v-for æ¸²æŸ“çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ä½¿ç”¨â€œå°±åœ°æ›´æ–°â€çš„ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯å°±åœ°æ›´æ–°æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒä»¬åœ¨æ¯ä¸ªç´¢å¼•ä½ç½®æ­£ç¡®æ¸²æŸ“ã€‚</p></blockquote><blockquote><p>è¿™ä¸ªé»˜è®¤çš„æ¨¡å¼æ˜¯é«˜æ•ˆçš„ï¼Œä½†æ˜¯åªé€‚ç”¨äºä¸ä¾èµ–å­ç»„ä»¶è£…å¡«æˆ–ä¸´æ—¶ DOM çŠ¶æ€çš„åˆ—è¡¨æ¸²æŸ“è¾“å‡ºã€‚</p></blockquote><h3 id="äºŒã€æ€»ç»“"><a href="#äºŒã€æ€»ç»“" class="headerlink" title="äºŒã€æ€»ç»“"></a>äºŒã€æ€»ç»“</h3><p>å†™åˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œä¾èµ–å­ç»„ä»¶çŠ¶æ€æˆ–è€…ä¸´æ—¶ DOM çŠ¶æ€çš„æƒ…å†µï¼Œå¦‚æœå­˜åœ¨åˆ é™¤ã€å¢åŠ ã€æ’åºè¿™æ ·çš„åŠŸèƒ½ï¼Œä¸èƒ½å°† index ä½œä¸º key å€¼ã€‚</p><p>è¿™é‡Œè¿˜åŒ…æ‹¬ diff ç®—æ³•â€¦(å¾…æ·»åŠ )</p>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>25ã€vueä½¿ç”¨hls.jså¤„ç†m3u8æ ¼å¼çš„è§†é¢‘</title>
      <link href="/2021/01/08/hls/"/>
      <url>/2021/01/08/hls/</url>
      
        <content type="html"><![CDATA[<p>m3u8 æ–‡ä»¶æ˜¯æŒ‡ UTF-8 ç¼–ç æ ¼å¼çš„ m3u æ–‡ä»¶ã€‚m3u æ–‡ä»¶æ˜¯è®°å½•äº†ä¸€ä¸ªç´¢å¼•çº¯æ–‡æœ¬æ–‡ä»¶,æ‰“å¼€å®ƒæ—¶æ’­æ”¾è½¯ä»¶å¹¶ä¸æ˜¯æ’­æ”¾å®ƒ,è€Œæ˜¯æ ¹æ®å®ƒçš„ç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„éŸ³è§†é¢‘æ–‡ä»¶çš„ç½‘ç»œåœ°å€è¿›è¡Œåœ¨çº¿æ’­æ”¾ã€‚</p><span id="more"></span><blockquote><p>HLS ä¸ M3U8 HLS(å…¨ç§°:Http Live Streaming)æ˜¯ç”± Apple å…¬å¸å®šä¹‰çš„ç”¨äºå®æ—¶æµä¼ è¾“çš„åè®®</p></blockquote><p>å…¬å¸é¡¹ç›®ä¸­ä½¿ç”¨äº†è§†é¢‘ç›‘æ§åŠŸèƒ½ï¼Œéœ€è¦åœ¨ç³»ç»Ÿå†…æ˜¾ç¤º m3u8 æ ¼å¼çš„è§†é¢‘ã€‚</p><p>1ã€å®‰è£… hls.js æ’ä»¶æˆ–è€…ä½¿ç”¨ CDN å¼•å…¥</p><pre><code class="js">npm install hls.js --save// æˆ–è€…&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;</code></pre><p>2ã€ä¸šåŠ¡ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="html">&lt;video  ref=&quot;video&quot;  id=&quot;myVideo2&quot;  class=&quot;video-js vjs-default-skin vjs-big-play-centered&quot;  autoplay=&quot;autoplay&quot;  controls  style=&quot;width: 100%; height: 280px; margin-top: 5px&quot;&gt;&lt;/video&gt;</code></pre><pre><code class="js">import Hls from &quot;hls.js&quot;;export default &#123;  data() &#123;    return &#123;      hls: null,    &#125;;  &#125;,  methods: &#123;    getStream(source) &#123;      if (Hls.isSupported()) &#123;        this.hls = new Hls();        this.hls.loadSource(source);        this.hls.attachMedia(this.$refs.video);        this.hls.on(Hls.Events.MANIFEST_PARSED, () =&gt; &#123;          this.$refs.video.play();        &#125;);        this.hls.on(Hls.Events.ERROR, (event, data) =&gt; &#123;          this.$message(&quot;è§†é¢‘åŠ è½½å¤±è´¥&quot;);        &#125;);      &#125;else&#123;        this.$message(&quot;æ ¼å¼ä¸æ”¯æŒ&quot;)      &#125;    &#125;,  &#125;,  // ä»æ¥å£è·å–çš„è§†é¢‘èµ„æºåº”å½“å†™åœ¨mountedé‡Œé¢ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°è¿›å…¥è§†é¢‘é¡µé¢çš„æ—¶å€™ï¼Œè§†é¢‘åŠ è½½ä¸å‡ºæ¥çš„ç°è±¡  mounted() &#123;    this.$service.get(&quot;demo/test&quot;).then((res) =&gt; &#123;      this.getStream(res.data[1].hls);    &#125;);  &#125;,&#125;;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>24ã€CSS3ï¼šlinear-gradientçº¿æ€§æ¸å˜å’Œradial-gradientå¾„å‘æ¸å˜çš„ä½¿ç”¨</title>
      <link href="/2020/08/12/css3-linear-gradient/"/>
      <url>/2020/08/12/css3-linear-gradient/</url>
      
        <content type="html"><![CDATA[<p>linear-gradient() å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªè¡¨ç¤ºä¸¤ç§æˆ–å¤šç§é¢œè‰²çº¿æ€§æ¸å˜çš„å›¾ç‰‡ã€‚</p><p>åˆ›å»ºä¸€ä¸ªçº¿æ€§æ¸å˜ï¼Œéœ€è¦æŒ‡å®šä¸¤ç§é¢œè‰²ï¼Œè¿˜å¯ä»¥å®ç°ä¸åŒæ–¹å‘ï¼ˆæŒ‡å®šä¸ºä¸€ä¸ªè§’åº¦ï¼‰çš„æ¸å˜æ•ˆæœï¼Œå¦‚æœä¸æŒ‡å®šæ–¹å‘ï¼Œé»˜è®¤ä»ä¸Šåˆ°ä¸‹æ¸å˜ã€‚</p><span id="more"></span><p>radial-gradient()å¾„å‘æ¸å˜ç”±å®ƒçš„ä¸­å¿ƒå®šä¹‰ã€‚</p><p>ä¸ºäº†åˆ›å»ºä¸€ä¸ªå¾„å‘æ¸å˜ï¼Œä½ ä¹Ÿå¿…é¡»è‡³å°‘å®šä¹‰ä¸¤ç§é¢œè‰²èŠ‚ç‚¹ã€‚é¢œè‰²èŠ‚ç‚¹å³ä½ æƒ³è¦å‘ˆç°å¹³ç¨³è¿‡æ¸¡çš„é¢œè‰²ã€‚åŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šæ¸å˜çš„ä¸­å¿ƒã€å½¢çŠ¶ï¼ˆåœ†å½¢æˆ–æ¤­åœ†å½¢ï¼‰ã€å¤§å°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¸å˜çš„ä¸­å¿ƒæ˜¯ centerï¼ˆè¡¨ç¤ºåœ¨ä¸­å¿ƒç‚¹ï¼‰ï¼Œæ¸å˜çš„å½¢çŠ¶æ˜¯ ellipseï¼ˆè¡¨ç¤ºæ¤­åœ†å½¢ï¼‰ï¼Œæ¸å˜çš„å¤§å°æ˜¯ farthest-cornerï¼ˆè¡¨ç¤ºåˆ°æœ€è¿œçš„è§’è½ï¼‰ã€‚</p><h3 id="ä¸€ã€ä½¿ç”¨æ–¹æ³•"><a href="#ä¸€ã€ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä¸€ã€ä½¿ç”¨æ–¹æ³•"></a>ä¸€ã€ä½¿ç”¨æ–¹æ³•</h3><pre><code class="html">// html&lt;div class=&quot;box&quot;&gt;&lt;/div&gt;</code></pre><pre><code class="css">.box&#123;     width:100px;    height:100px;    /* çº¿æ€§æ¸å˜ */    /* ä»ä¸Šåˆ°ä¸‹ ç”±é»„è‰²å˜ä¸ºçº¢è‰²å˜ä¸ºè“è‰² */    background:linear-gradient(yellow,red,blue);    /* æ¸å˜è½´ä¸º45åº¦ï¼Œä»è“è‰²æ¸å˜åˆ°çº¢è‰² */    background:linear-gradient(45deg, blue, red);    /* ä»å³ä¸‹åˆ°å·¦ä¸Šã€ä»è“è‰²æ¸å˜åˆ°çº¢è‰² */    background:linear-gradient(to left top, blue, red);    /* ä»ä¸‹åˆ°ä¸Šï¼Œä»è“è‰²å¼€å§‹æ¸å˜ã€åˆ°é«˜åº¦40%ä½ç½®æ˜¯ç»¿è‰²æ¸å˜å¼€å§‹ã€æœ€åä»¥çº¢è‰²ç»“æŸ */    background:linear-gradient(0deg, blue, green 40%, red); &#125;    /* å¾„å‘æ¸å˜ */    /* ä¸­å¿ƒçº¢è‰² çº¢è‰²å‘¨å›´ä¸ºé»„è‰² å‘¨è¾¹ä¸ºç»¿è‰²  */    background-image: radial-gradient(red, yellow, green)</code></pre><h3 id="äºŒã€ä¸åŒæµè§ˆå™¨çš„æ”¯æŒ"><a href="#äºŒã€ä¸åŒæµè§ˆå™¨çš„æ”¯æŒ" class="headerlink" title="äºŒã€ä¸åŒæµè§ˆå™¨çš„æ”¯æŒ"></a>äºŒã€ä¸åŒæµè§ˆå™¨çš„æ”¯æŒ</h3><pre><code class="html">&lt;div class=&quot;box&quot;&gt;&lt;/div&gt;// css.box&#123;     &lt;!-- chrome --&gt;    background: -webkit-linear-gradient(to right, red, green);     &lt;!-- Opera --&gt;    background:-o-linear-gradient(to right,to right, red, green);     &lt;!-- Firefox --&gt;    background:-moz-linear-gradient (to right, to right, red, green);     background:linear-gradient(to right, to right, red, green); &#125;</code></pre><h3 id="ä¸‰ã€è¯­æ³•"><a href="#ä¸‰ã€è¯­æ³•" class="headerlink" title="ä¸‰ã€è¯­æ³•"></a>ä¸‰ã€è¯­æ³•</h3><pre><code class="css">/* linear-gradient çº¿æ€§æ¸å˜ */background-image: linear-gradient(direction, color-stop1, color-stop2, ...);/* radial-gradient å¾„å‘æ¸å˜*/background-image: radial-gradient(shape size at position, start-color, ..., last-color);</code></pre><h3 id="å››ã€å®é™…åº”ç”¨"><a href="#å››ã€å®é™…åº”ç”¨" class="headerlink" title="å››ã€å®é™…åº”ç”¨"></a>å››ã€å®é™…åº”ç”¨</h3><p>å¦‚dashboardé¦–é¡µæœ‰å››ä¸ªç›’å­ï¼Œæ¯ä¸ªç›’å­çš„èƒŒæ™¯æ¸å˜è‰²æ˜¯ä¸åŒçš„ï¼Œä½¿ç”¨scss cssé¢„å¤„ç†å™¨çš„å†™æ³•ã€‚</p><h4 id="1ã€mixin-scss"><a href="#1ã€mixin-scss" class="headerlink" title="1ã€mixin.scss"></a>1ã€mixin.scss</h4><pre><code class="css">/*  */@mixin cardBg($leftColor, $rightColor) &#123;  background: -webkit-linear-gradient(to right, $leftColor, $rightColor);  background: -o-linear-gradient(to right, $leftColor, $rightColor);  background: -moz-linear-gradient (to right, $leftColor, $rightColor);  background: linear-gradient(to right, $leftColor, $rightColor);&#125;</code></pre><h4 id="2ã€é¡µé¢å¼•å…¥mixin-scss"><a href="#2ã€é¡µé¢å¼•å…¥mixin-scss" class="headerlink" title="2ã€é¡µé¢å¼•å…¥mixin.scss"></a>2ã€é¡µé¢å¼•å…¥mixin.scss</h4><blockquote><p>ä¸‹é¢çš„@include æ˜¯è°ƒç”¨mixinçš„cardBgå˜é‡</p></blockquote><pre><code class="css">@import &#39;&#39;./mixin.scss.cardList-wrapper&#123;    box-sizing:border-box;    heitht:150px;    padding:15px 15px 0;    border-radius:6px;    cursor:pointer;    margin-bottom:25px;    box-shadow:3px 5px 15px rgba(40,40,40,0.36);    /* ç¬¬ä¸€ä¸ªç›’å­ */    &amp;.card-item-one&#123;        @include cardBg(#5171fd,#c97afd);        &amp;:hover&#123;            box-shadow:0 5px 10px #c97afd;        &#125;    &#125;    /* ç¬¬äºŒä¸ªç›’å­ */    &amp;.card-item-two &#123;      @include cardBg(#3dadf6, #737bfc);       &amp;:hover &#123;        box-shadow: 0 5px 10px #737bfc;      &#125;    &#125;    /* ç¬¬ä¸‰ä¸ªç›’å­ */    &amp;.card-item-three &#123;      @include cardBg(#ea677c, #ef9b5f);       &amp;:hover &#123;        box-shadow: 0 5px 10px #ef9b5f;      &#125;    &#125;    /* ç¬¬å››ä¸ªç›’å­ */    &amp;.card-item-four &#123;      @include cardBg(#42d79b, #a6e25f);       &amp;:hover &#123;        box-shadow: 0 5px 10px #a6e25f;      &#125;    &#125;    /* å››ä¸ªç›’å­åœ¨hoveræ—¶éƒ½ä¼šå˜å¤§ä¸€äº› */    &amp;:hover &#123;      transform: scale(1.03);      transition: all 0.1s ease-out;    &#125;&#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>23ã€ç™¾åº¦åœ°å›¾åŠ¨ç”»ï¼ˆè½¨è¿¹åŠ¨ç”»ï¼‰</title>
      <link href="/2020/04/29/bmap-animate/"/>
      <url>/2020/04/29/bmap-animate/</url>
      
        <content type="html"><![CDATA[<p>ç™¾åº¦åœ°å›¾åŠ¨ç”»åŠè½¨è¿¹åŠ¨ç”»</p><span id="more"></span><h3 id="ä¸€ã€ç™¾åº¦åœ°å›¾åŠ¨ç”»"><a href="#ä¸€ã€ç™¾åº¦åœ°å›¾åŠ¨ç”»" class="headerlink" title="ä¸€ã€ç™¾åº¦åœ°å›¾åŠ¨ç”»"></a>ä¸€ã€ç™¾åº¦åœ°å›¾åŠ¨ç”»</h3><pre><code class="html">&lt;div id=&quot;allmap&quot;&gt;&lt;/div&gt;&lt;div id=&quot;tools&quot;&gt;  &lt;button id=&quot;start&quot;&gt;æ’­æ”¾åŠ¨ç”»&lt;/button&gt;  &lt;button id=&quot;end&quot;&gt;åœæ­¢æ’­æ”¾&lt;/button&gt;&lt;/div&gt;</code></pre><details><summary>ç‚¹æˆ‘å±•å¼€jsä»£ç </summary><pre><code class="js">var bmap = new BMapGL.Map(&quot;allmap&quot;); // åˆ›å»ºMapå®ä¾‹bmap.centerAndZoom(new BMapGL.Point(116.414, 39.915), 20); // åˆå§‹åŒ–åœ°å›¾ï¼Œè®¾ç½®ä¸­å¿ƒç‚¹åæ ‡å’Œåœ°å›¾çº§åˆ«bmap.enableScrollWheelZoom(true); // å¼€å¯é¼ æ ‡æ»šè½®ç¼©æ”¾bmap.setTilt(20); // è®¾ç½®åœ°å›¾åˆå§‹å€¾æ–œè§’åº¦var keyFrames = [  &#123;    center: new BMapGL.Point(116.307092, 40.054922),    zoom: 20,    tilt: 50,    heading: 0,    percentage: 0,  &#125;,  &#123;    center: new BMapGL.Point(116.307631, 40.055391),    zoom: 21,    tilt: 70,    heading: 0,    percentage: 0.1,  &#125;,  &#123;    center: new BMapGL.Point(116.306858, 40.057887),    zoom: 21,    tilt: 70,    heading: 0,    percentage: 0.25,  &#125;,  &#123;    center: new BMapGL.Point(116.306858, 40.057887),    zoom: 21,    tilt: 70,    heading: -90,    percentage: 0.35,  &#125;,  &#123;    center: new BMapGL.Point(116.307904, 40.058118),    zoom: 21,    tilt: 70,    heading: -90,    percentage: 0.45,  &#125;,  &#123;    center: new BMapGL.Point(116.307904, 40.058118),    zoom: 21,    tilt: 70,    heading: -180,    percentage: 0.55,  &#125;,  &#123;    center: new BMapGL.Point(116.308902, 40.055954),    zoom: 21,    tilt: 70,    heading: -180,    percentage: 0.75,  &#125;,  &#123;    center: new BMapGL.Point(116.308902, 40.055954),    zoom: 21,    tilt: 70,    heading: -270,    percentage: 0.85,  &#125;,  &#123;    center: new BMapGL.Point(116.307779, 40.055754),    zoom: 21,    tilt: 70,    heading: -360,    percentage: 0.95,  &#125;,  &#123;    center: new BMapGL.Point(116.307092, 40.054922),    zoom: 20,    tilt: 50,    heading: -360,    percentage: 1,  &#125;,];var opts = &#123;  duration: 10000, // è®¾ç½®æ¯æ¬¡è¿­ä»£åŠ¨ç”»æŒç»­æ—¶é—´  delay: 3000, // è®¾ç½®åŠ¨ç”»å»¶è¿Ÿå¼€å§‹æ—¶é—´  interation: &quot;INFINITE&quot;, // è®¾ç½®åŠ¨ç”»è¿­ä»£æ¬¡æ•°&#125;;var animation = new BMapGL.ViewAnimation(keyFrames, opts); // åˆå§‹åŒ–åŠ¨ç”»å®ä¾‹animation.addEventListener(&quot;animationstart&quot;, function (e) &#123;  // ç›‘å¬åŠ¨ç”»å¼€å§‹äº‹ä»¶  console.log(&quot;start&quot;);&#125;);animation.addEventListener(&quot;animationiterations&quot;, function (e) &#123;  // ç›‘å¬åŠ¨ç”»è¿­ä»£äº‹ä»¶  console.log(&quot;onanimationiterations&quot;);&#125;);animation.addEventListener(&quot;animationend&quot;, function (e) &#123;  // ç›‘å¬åŠ¨ç”»ç»“æŸäº‹ä»¶  console.log(&quot;end&quot;);&#125;);animation.addEventListener(&quot;animationcancel&quot;, function (e) &#123;  // ç›‘å¬åŠ¨ç”»ä¸­é€”è¢«ç»ˆæ­¢äº‹ä»¶  console.log(&quot;cancel&quot;);&#125;);document.getElementById(&quot;start&quot;).addEventListener(&quot;click&quot;, function () &#123;  bmap.startViewAnimation(animation); // å¼€å§‹æ’­æ”¾åŠ¨ç”»&#125;);document.getElementById(&quot;end&quot;).addEventListener(&quot;click&quot;, function () &#123;  bmap.cancelViewAnimation(animation); // å¼ºåˆ¶åœæ­¢åŠ¨ç”»&#125;);</code></pre></details><h3 id="äºŒã€ç™¾åº¦åœ°å›¾è½¨è¿¹åŠ¨ç”»"><a href="#äºŒã€ç™¾åº¦åœ°å›¾è½¨è¿¹åŠ¨ç”»" class="headerlink" title="äºŒã€ç™¾åº¦åœ°å›¾è½¨è¿¹åŠ¨ç”»"></a>äºŒã€ç™¾åº¦åœ°å›¾è½¨è¿¹åŠ¨ç”»</h3><pre><code class="js">&lt;scrip  type=&quot;text/javascript&quot;  src=&quot;https://api.map.baidu.com/library/TrackAnimation/src/TrackAnimation_min.js&quot;&gt;&lt;/scrip&gt;</code></pre><pre><code class="html">&lt;div id=&quot;allmap&quot;&gt;&lt;/div&gt;&lt;div id=&quot;tools&quot;&gt;  &lt;button id=&quot;start&quot;&gt;æ’­æ”¾åŠ¨ç”»&lt;/button&gt;  &lt;button id=&quot;end&quot;&gt;åœæ­¢æ’­æ”¾&lt;/button&gt;&lt;/div&gt;</code></pre><details><summary>ç‚¹æˆ‘å±•å¼€jsä»£ç </summary><pre><code class="js">var bmap = new BMapGL.Map(&quot;allmap&quot;); // åˆ›å»ºMapå®ä¾‹bmap.centerAndZoom(new BMapGL.Point(116.297611, 40.047363), 17); // åˆå§‹åŒ–åœ°å›¾ï¼Œè®¾ç½®ä¸­å¿ƒç‚¹åæ ‡å’Œåœ°å›¾çº§åˆ«bmap.enableScrollWheelZoom(true); // å¼€å¯é¼ æ ‡æ»šè½®ç¼©æ”¾var path = [  &#123;    lng: 116.297611,    lat: 40.047363,  &#125;,  &#123;    lng: 116.302839,    lat: 40.048219,  &#125;,  &#123;    lng: 116.308301,    lat: 40.050566,  &#125;,  &#123;    lng: 116.305732,    lat: 40.054957,  &#125;,  &#123;    lng: 116.304754,    lat: 40.057953,  &#125;,  &#123;    lng: 116.306487,    lat: 40.058312,  &#125;,  &#123;    lng: 116.307223,    lat: 40.056379,  &#125;,];var point = [];for (var i = 0; i &lt; path.length; i++) &#123;  point.push(new BMapGL.Point(path[i].lng, path[i].lat));&#125;var pl = new BMapGL.Polyline(point);var trackAni = new BMapGLLib.TrackAnimation(bmap, pl, &#123;  overallView: true, // åŠ¨ç”»å®Œæˆåè‡ªåŠ¨è°ƒæ•´è§†é‡åˆ°æ€»è§ˆ  tilt: 30, // è½¨è¿¹æ’­æ”¾çš„è§’åº¦ï¼Œé»˜è®¤ä¸º55  duration: 20000, // åŠ¨ç”»æŒç»­æ—¶é•¿ï¼Œé»˜è®¤ä¸º10000ï¼Œå•ä½ms  delay: 3000, // åŠ¨ç”»å¼€å§‹çš„å»¶è¿Ÿï¼Œé»˜è®¤0ï¼Œå•ä½ms&#125;);document.getElementById(&quot;start&quot;).addEventListener(&quot;click&quot;, function () &#123;  trackAni.start();&#125;);document.getElementById(&quot;end&quot;).addEventListener(&quot;click&quot;, function () &#123;  trackAni.cancel(); // å¼ºåˆ¶åœæ­¢åŠ¨ç”»&#125;);</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> bmap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>22ã€ç™¾åº¦åœ°å›¾LBSäº‘æ£€ç´¢</title>
      <link href="/2020/04/29/bmap/"/>
      <url>/2020/04/29/bmap/</url>
      
        <content type="html"><![CDATA[<p>ç™¾åº¦åœ°å›¾è‡ªå®šä¹‰å åŠ å±‚</p><span id="more"></span><blockquote><p>LBS äº‘æœåŠ¡æä¾›æµ·é‡ä½ç½®æ•°æ®çš„å®æ—¶å­˜å‚¨åŠŸèƒ½ï¼ŒJavaScript API æ”¯æŒå°†ç”¨æˆ·ä¸Šä¼ åˆ° LBS äº‘é‡Œçš„ä½ç½®æ•°æ®å®æ—¶æ¸²æŸ“æˆå›¾å±‚</p></blockquote><p>1ã€å®‰è£… vue-baidu-map</p><pre><code class="bash">npm install vue-baidu-map</code></pre><p>2ã€å…·ä½“ä¸šåŠ¡ä»£ç å¦‚ä¸‹:</p><pre><code class="html">&lt;baidu-map  id=&quot;container&quot;  :scroll-wheel-zoom=&quot;true&quot;  :zoom=&quot;zoom&quot;  center=&quot;ä¸Šæµ·&quot;  :ak=&quot;selfKey&quot;  inertial-dragging  @ready=&quot;mapReady&quot;&gt;&lt;/baidu-map&gt;&lt;div class=&quot;menu-search&quot;&gt;  &lt;el-input placeholder=&quot;è¯·è¾“å…¥ç«™ç‚¹åç§°&quot; v-model=&quot;site_name&quot; clearable&gt;    &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot; @click=&quot;search&quot;&gt;&lt;/el-button&gt;  &lt;/el-input&gt;&lt;/div&gt;</code></pre><details><summary>ç‚¹æˆ‘å±•å¼€jsä»£ç </summary><pre><code class="js">&lt;script&gt;// åœ¨ç»„ä»¶ä¸­å¼•å…¥vue-baidu-mapimport BaiduMap from &quot;vue-baidu-map/components/map/Map.vue&quot;;export default&#123;    components:&#123;BaiduMap&#125;,    data()&#123;        return&#123;            site_name:&#39;&#39;,            center:&#123;lng:121.532325,lat:31.232742&#125;,            selfKey:&#39;QloR7bQpWed3VDLbtcxi2NmgUcvXxcbx&#39;,            point:&#39;&#39;,            zoom:15        &#125;    &#125;,    mounted()&#123;        this.mapReady()    &#125;,    methods:&#123;        mapReady()&#123;            var map = new BMap.Map(&quot;container&quot;)            map.centerAndZoom(new BMap.Point(this.center.lng,ths.center.lat),10)            map.enableScrollWheelZoom()                  /**       *params   q:æ£€ç´¢å…³é”®å­—       *params   tagsï¼šç©ºæ ¼åˆ†å‰²çš„å¤šå­—ç¬¦       *params   filter:è¿‡æ»¤æ¡ä»¶       */            var customLayer;            customLayer = new BMap.CustomLayer(&#123;                geotableId: 183323,                q: &quot;&quot;,                tags: &quot;&quot;,                filter: &quot;&quot;,            &#125;);            map.addTileLayer(customLayer);            // çƒ­ç‚¹å›¾å±‚            customLayer.addEventListener(&quot;onhotspotclick&quot;, callback);            function callback(e) &#123;                var customPoi = e.customPoi;                var content =                    &#39;&lt;p style=&quot;margin:0;line-height:40px;&quot;&gt;åœ°å€ï¼š&#39; +                     customPoi.address +                    &quot;&lt;br/&gt;&quot; +                    &#39;&lt;a style=&quot;color:#3398DB&quot; href=&quot;./monitor/index&quot;&gt;æŸ¥çœ‹æ©‡è£…ç«™ç‚¹å®æ—¶ç›‘æ§ç”»é¢&lt;/a&gt;&#39; +                    &quot;&lt;/p&gt;&quot;;                var BMapLib = window.BMapLib;                var searchInfoWindow = new BMapLib.SearchInfoWindow(map, content, &#123;                        title: customPoi.title,                        width: 200,                        height: 100,                        panel: &quot;panel&quot;,                        enableAutoPan: true,                        enableSendToPhone: false,                        searchTypes: [],                &#125;);                var point = new BMap.Point(customPoi.point.lng, customPoi.point.lat);                searchInfoWindow.open(point);            &#125;        &#125;,          search() &#123;                var map = new BMap.Map(&quot;container&quot;);                map.centerAndZoom(new BMap.Point(this.center.lng, this.center.lat), 10);                map.enableScrollWheelZoom();                var customLayer;                customLayer = new BMap.CustomLayer(&#123;                    geotableId: 183323,                    q: this.site_name || &quot;æ–°è¥¿åŒ—ç‰©æµå›­&quot;,                    tags: &quot;&quot;,                    filter: &quot;&quot;,                &#125;);                // æ·»åŠ è‡ªå®šä¹‰å›¾å±‚                map.addTileLayer(customLayer);                // var mapDom = document.getElementById(&quot;container&quot;)                // mapDom.addEventListener(&quot;click&quot;, function () &#123;                //   window.location.href = &quot;./monitor/index&quot;;                // &#125;);                // çƒ­ç‚¹å›¾å±‚                customLayer.addEventListener(&quot;onhotspotclick&quot;, callback);                function callback(e) &#123;                    var customPoi = e.customPoi;                    var content =                    &#39;&lt;p style=&quot;margin:0;line-height:40px;&quot;&gt;åœ°å€ï¼š&#39; +                    customPoi.address +                    &quot;&lt;br/&gt;&quot; +                    &#39;&lt;a style=&quot;color:#3398DB&quot; href=&quot;./monitor/index&quot;&gt;æŸ¥çœ‹æ©‡è£…ç«™ç‚¹å®æ—¶ç›‘æ§ç”»é¢&lt;/a&gt;&#39; +                    &quot;&lt;/p&gt;&quot;;                    var BMapLib = window.BMapLib;                    // console.log(&quot;BMapLib&quot;, BMapLib);                    var searchInfoWindow = new BMapLib.SearchInfoWindow(map, content, &#123;                    title: customPoi.title,                    width: 200,                    height: 100,                    panel: &quot;panel&quot;,                    enableAutoPan: true,                    enableSendToPhone: false,                    searchTypes: [],                    &#125;);                    var point = new BMap.Point(customPoi.point.lng, customPoi.point.lat);                    searchInfoWindow.open(point);                &#125;    &#125;,    &#125;&#125;&lt;/script&gt;&lt;/details&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> bmap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>21ã€v-chartsçš„options</title>
      <link href="/2020/04/28/v-charts/"/>
      <url>/2020/04/28/v-charts/</url>
      
        <content type="html"><![CDATA[<p>v-charts çš„ options ä½¿ç”¨ getOptions()è€Œä¸æ˜¯ä½¿ç”¨ä¸€ä¸ªå˜é‡</p><span id="more"></span><blockquote><p>ä½¿ç”¨ getOptions()æ˜¯ä¸ºäº†è·å–æ•°æ®ä¹‹åæ‰è¿›è¡Œæ¸²æŸ“æ•°æ®ï¼Œv-chart çš„ options å¯ä»¥ç›´æ¥ç»‘å®šä¸€ä¸ªå˜é‡,åœ¨è¯·æ±‚æ•°æ®çš„æ—¶å€™ï¼Œæ›´æ–°å˜é‡ï¼Œå›¾è¡¨éœ€è¦è¿›è¡Œé‡æ–°æ¸²æŸ“</p></blockquote><p>è¿™é‡Œçš„ getOptions()ä¹Ÿå¯ä»¥å†™åœ¨ computed é‡Œé¢çš„ã€‚</p><pre><code class="html">&lt;template&gt;    &lt;v-charts :options=&quot;getOptions()&quot;&gt;&lt;/template&gt;</code></pre><details><summary>ç‚¹æˆ‘å±•ç¤ºjsä»£ç </summary><pre><code class="js"> getOptions() &#123;        return &#123;          grid: &#123;            left: 0,            right: 0,            top: 0,            bottom: 0          &#125;,          xAxis: &#123;            type: &#39;value&#39;,            show: false          &#125;,          yAxis: &#123;            type: &#39;category&#39;,            show: false          &#125;,          series: [&#123;            name: &#39;ä¸Šæœˆå¹³å°ç”¨æˆ·æ•°&#39;,            type: &#39;bar&#39;,            stack: &#39;æ€»é‡&#39;,            data: [this.userLastMonth],            barWidth: 10,            itemStyle: &#123;              color: &#39;#45c946&#39;            &#125;          &#125;, &#123;            name: &#39;ä»Šæ—¥å¹³å°ç”¨æˆ·æ•°&#39;,            type: &#39;bar&#39;,            stack: &#39;æ€»é‡&#39;,            data: [this.userTodayNumber],            itemStyle: &#123;              color: &#39;#eee&#39;            &#125;          &#125;, &#123;            type: &#39;custom&#39;,            stack: &#39;æ€»é‡&#39;,            data: [this.userLastMonth],            renderItem: (params, api) =&gt; &#123;              const value = api.value(0)              const endPoint = api.coord([value, 0])              return &#123;                type: &#39;group&#39;,                position: endPoint,                children: [&#123;                  type: &#39;path&#39;,                  shape: &#123;                    d: &#39;M1024 255.996 511.971 767.909 0 255.996 1024 255.996z&#39;,                    x: -5,                    y: -20,                    width: 10,                    height: 10,                    layout: &#39;cover&#39;                  &#125;,                  style: &#123;                    fill: &#39;#45c946&#39;                  &#125;                &#125;, &#123;                  type: &#39;path&#39;,                  shape: &#123;                    d: &#39;M0 767.909l512.029-511.913L1024 767.909 0 767.909z&#39;,                    x: -5,                    y: 10,                    width: 10,                    height: 10,                    layout: &#39;cover&#39;                  &#125;,                  style: &#123;                    fill: &#39;#45c946&#39;                  &#125;                &#125;]              &#125;            &#125;          &#125;]        &#125;      &#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> v-charts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20ã€axiosçš„å°è£…</title>
      <link href="/2020/04/23/axios/"/>
      <url>/2020/04/23/axios/</url>
      
        <content type="html"><![CDATA[<blockquote><p>axios åŸºäº promise çš„ http åº“ ç‰¹æ€§ï¼šæ‹¦æˆªè¯·æ±‚å’Œå“åº”ã€å–æ¶ˆè¯·æ±‚ã€è½¬æ¢ jsonã€å®¢æˆ·ç«¯é˜²å¾¡ XSRF</p></blockquote><span id="more"></span><p>å½“åç«¯æ¥å£æŠ¥äº† 500 é”™è¯¯æ—¶è¢« axios æ‹¦æˆªäº†ä½†ç¡®å¹¶æœªè¿”å›ä¸€ä¸ª promiseï¼Œå¯¼è‡´ä¸šåŠ¡ä»£ç ä¸­æœªæ•è·æ­¤é”™è¯¯ã€‚</p><p>æ‰€ä»¥è®°ä½ï¼š</p><blockquote><p>åœ¨æ¯ä¸ª promise é“¾æ¡ä¸­å¿…é¡»è¿”å› promiseï¼Œå¦åˆ™è°ƒç”¨ç»“æœå¯èƒ½å’Œä½ é¢„æœŸä¸ä¸€æ ·ã€‚</p></blockquote><pre><code class="js">service.interceptors.response.use(  (response) =&gt; &#123;    if (response.status === 200 &amp;&amp; response.data) &#123;      return response.data;    &#125; else &#123;      return Promise.reject(new Error(&quot;è¯·æ±‚å¤±è´¥&quot;));    &#125;  &#125;,  (error) =&gt; &#123;    return Promise.reject(error);  &#125;);</code></pre><h3 id="1ã€axios-çš„å®‰è£…"><a href="#1ã€axios-çš„å®‰è£…" class="headerlink" title="1ã€axios çš„å®‰è£…"></a>1ã€axios çš„å®‰è£…</h3><pre><code class="js">npm install axios</code></pre><h3 id="2ã€åœ¨-request-æ–‡ä»¶å¤¹-http-js"><a href="#2ã€åœ¨-request-æ–‡ä»¶å¤¹-http-js" class="headerlink" title="2ã€åœ¨ request æ–‡ä»¶å¤¹ http.js"></a>2ã€åœ¨ request æ–‡ä»¶å¤¹ http.js</h3><pre><code class="js">// http.jsimport axios from &quot;axios&quot;;import QS from &quot;qs&quot;; // åºåˆ—åŒ–postç±»å‹çš„æ•°æ®import &#123; Toast &#125; from &quot;vant&quot;; // å¼•å…¥vantç»„ä»¶åº“çš„toastç»„ä»¶</code></pre><h3 id="3ã€ç¯å¢ƒçš„åˆ‡æ¢-è¯·æ±‚è¶…æ—¶-post-è¯·æ±‚å¤´è®¾ç½®"><a href="#3ã€ç¯å¢ƒçš„åˆ‡æ¢-è¯·æ±‚è¶…æ—¶-post-è¯·æ±‚å¤´è®¾ç½®" class="headerlink" title="3ã€ç¯å¢ƒçš„åˆ‡æ¢/è¯·æ±‚è¶…æ—¶/post è¯·æ±‚å¤´è®¾ç½®"></a>3ã€ç¯å¢ƒçš„åˆ‡æ¢/è¯·æ±‚è¶…æ—¶/post è¯·æ±‚å¤´è®¾ç½®</h3><pre><code class="js">// ç¯å¢ƒçš„åˆ‡æ¢if (process.env.NODE_ENV == &quot;development&quot;) &#123;  axios.defaults.baseURL = &quot;https://www.baidu.com&quot;;&#125; else if (process.env.NODE_ENV == &quot;debug&quot;) &#123;  axios.defaults.baseURL = &quot;https://www.ceshi.com&quot;;&#125; else if (process.env.NODE_ENV == &quot;production&quot;) &#123;  axios.defaults.baseURL = &quot;https://www.production.com&quot;;&#125;axios.defaults.timeout = 10000;axios.defaults.headers.post[&quot;Content-Type&quot;] =  &quot;application/x-www-form-urlencoded;charset=UTF-8&quot;;</code></pre><h3 id="4ã€è¯·æ±‚æ‹¦æˆª-å“åº”æ‹¦æˆª"><a href="#4ã€è¯·æ±‚æ‹¦æˆª-å“åº”æ‹¦æˆª" class="headerlink" title="4ã€è¯·æ±‚æ‹¦æˆª å“åº”æ‹¦æˆª"></a>4ã€è¯·æ±‚æ‹¦æˆª å“åº”æ‹¦æˆª</h3><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">// å…ˆå¯¼å…¥vuex,å› ä¸ºæˆ‘ä»¬è¦ä½¿ç”¨åˆ°é‡Œé¢çš„çŠ¶æ€å¯¹è±¡// vuexçš„è·¯å¾„æ ¹æ®è‡ªå·±çš„è·¯å¾„å»å†™import store from &#39;@/store/index&#39;;// è¯·æ±‚æ‹¦æˆªå™¨axios.interceptors.request.use(    config =&gt; &#123;        // æ¯æ¬¡å‘é€è¯·æ±‚ä¹‹å‰åˆ¤æ–­vuexä¸­æ˜¯å¦å­˜åœ¨token        // å¦‚æœå­˜åœ¨ï¼Œåˆ™ç»Ÿä¸€åœ¨httpè¯·æ±‚çš„headeréƒ½åŠ ä¸Štokenï¼Œè¿™æ ·åå°æ ¹æ®tokenåˆ¤æ–­ä½ çš„ç™»å½•æƒ…å†µ        // å³ä½¿æœ¬åœ°å­˜åœ¨tokenï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­è¦å¯¹è¿”å›çŠ¶æ€è¿›è¡Œåˆ¤æ–­        const token = store.state.token;        token &amp;&amp; (config.headers.Authorization = token);        return config;    &#125;,    error =&gt; &#123;        return Promise.error(error);    &#125;)// å“åº”æ‹¦æˆªå™¨axios.interceptors.response.use(    response =&gt; &#123;        // å¦‚æœè¿”å›çš„çŠ¶æ€ç ä¸º200ï¼Œè¯´æ˜æ¥å£è¯·æ±‚æˆåŠŸï¼Œå¯ä»¥æ­£å¸¸æ‹¿åˆ°æ•°æ®        // å¦åˆ™çš„è¯æŠ›å‡ºé”™è¯¯        if (response.status === 200) &#123;            return Promise.resolve(response);        &#125; else &#123;            return Promise.reject(response);        &#125;    &#125;,    // æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯2å¼€å¤´çš„çš„æƒ…å†µ    // è¿™é‡Œå¯ä»¥è·Ÿä½ ä»¬çš„åå°å¼€å‘äººå‘˜åå•†å¥½ç»Ÿä¸€çš„é”™è¯¯çŠ¶æ€ç     // ç„¶åæ ¹æ®è¿”å›çš„çŠ¶æ€ç è¿›è¡Œä¸€äº›æ“ä½œï¼Œä¾‹å¦‚ç™»å½•è¿‡æœŸæç¤ºï¼Œé”™è¯¯æç¤ºç­‰ç­‰    // ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„æ“ä½œï¼Œå…¶ä»–éœ€æ±‚å¯è‡ªè¡Œæ‰©å±•    error =&gt; &#123;        if (error.response.status) &#123;            switch (error.response.status) &#123;                // 401: æœªç™»å½•                // æœªç™»å½•åˆ™è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶æºå¸¦å½“å‰é¡µé¢çš„è·¯å¾„                // åœ¨ç™»å½•æˆåŠŸåè¿”å›å½“å‰é¡µé¢ï¼Œè¿™ä¸€æ­¥éœ€è¦åœ¨ç™»å½•é¡µæ“ä½œã€‚                case 401:                    router.replace(&#123;                        path: &#39;/login&#39;,                        query: &#123;                            redirect: router.currentRoute.fullPath                        &#125;                    &#125;);                    break;                // 403 tokenè¿‡æœŸ                // ç™»å½•è¿‡æœŸå¯¹ç”¨æˆ·è¿›è¡Œæç¤º                // æ¸…é™¤æœ¬åœ°tokenå’Œæ¸…ç©ºvuexä¸­tokenå¯¹è±¡                // è·³è½¬ç™»å½•é¡µé¢                case 403:                     Toast(&#123;                        message: &#39;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#39;,                        duration: 1000,                        forbidClick: true                    &#125;);                    // æ¸…é™¤token                    localStorage.removeItem(&#39;token&#39;);                    store.commit(&#39;loginSuccess&#39;, null);                    // è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶å°†è¦æµè§ˆçš„é¡µé¢fullPathä¼ è¿‡å»ï¼Œç™»å½•æˆåŠŸåè·³è½¬éœ€è¦è®¿é—®çš„é¡µé¢                    setTimeout(() =&gt; &#123;                        router.replace(&#123;                            path: &#39;/login&#39;,                            query: &#123;                                redirect: router.currentRoute.fullPath                            &#125;                        &#125;);                    &#125;, 1000);                    break;                // 404è¯·æ±‚ä¸å­˜åœ¨                case 404:                    Toast(&#123;                        message: &#39;ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨&#39;,                        duration: 1500,                        forbidClick: true                    &#125;);                    break;                // å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º                default:                    Toast(&#123;                        message: error.response.data.message,                        duration: 1500,                        forbidClick: true                    &#125;);            &#125;            return Promise.reject(error.response);        &#125;    &#125;&#125;);</code></pre></details><h3 id="5ã€getã€post-è¯·æ±‚çš„å°è£…"><a href="#5ã€getã€post-è¯·æ±‚çš„å°è£…" class="headerlink" title="5ã€getã€post è¯·æ±‚çš„å°è£…"></a>5ã€getã€post è¯·æ±‚çš„å°è£…</h3><blockquote><p>get æ–¹æ³•ï¼šæˆ‘ä»¬é€šè¿‡å®šä¹‰ä¸€ä¸ª get å‡½æ•°ï¼Œget å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæˆ‘ä»¬è¦è¯·æ±‚çš„ url åœ°å€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è¦æºå¸¦çš„è¯·æ±‚å‚æ•°ã€‚get å‡½æ•°è¿”å›ä¸€ä¸ª promise å¯¹è±¡ï¼Œå½“ axios å…¶è¯·æ±‚æˆåŠŸæ—¶ resolve æœåŠ¡å™¨è¿”å› å€¼ï¼Œè¯·æ±‚å¤±è´¥æ—¶ reject é”™è¯¯å€¼ã€‚æœ€åé€šè¿‡ export æŠ›å‡º get å‡½æ•°ã€‚</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">/** * getæ–¹æ³•ï¼Œå¯¹åº”getè¯·æ±‚ * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€] * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°] */export function get(url, params) &#123;  return new Promise((resolve, reject) =&gt; &#123;    axios      .get(url, &#123;        params: params,      &#125;)      .then((res) =&gt; &#123;        resolve(res.data);      &#125;)      .catch((err) =&gt; &#123;        reject(err.data);      &#125;);  &#125;);&#125;</code></pre></details><blockquote><p>åŸç†åŒ get åŸºæœ¬ä¸€æ ·ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œpost æ–¹æ³•å¿…é¡»è¦ä½¿ç”¨å¯¹æäº¤ä»å‚æ•°å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–çš„æ“ä½œï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€šè¿‡ node çš„ qs æ¨¡å—æ¥åºåˆ—åŒ–æˆ‘ä»¬çš„å‚æ•°ã€‚è¿™ä¸ªå¾ˆé‡è¦ï¼Œå¦‚æœæ²¡æœ‰åºåˆ—åŒ–æ“ä½œï¼Œåå°æ˜¯æ‹¿ä¸åˆ°ä½ æäº¤çš„æ•°æ®çš„ã€‚è¿™å°±æ˜¯æ–‡ç« å¼€å¤´æˆ‘ä»¬ import QS from â€˜qsâ€™;çš„åŸå› </p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">/** * postæ–¹æ³•ï¼Œå¯¹åº”postè¯·æ±‚ * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€] * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°] */export function post(url, params) &#123;  return new Promise((resolve, reject) =&gt; &#123;    axios      .post(url, QS.stringify(params))      .then((res) =&gt; &#123;        resolve(res.data);      &#125;)      .catch((err) =&gt; &#123;        reject(err.data);      &#125;);  &#125;);&#125;</code></pre></details><h3 id="6ã€axios-å®Œæ•´å°è£…ä»£ç "><a href="#6ã€axios-å®Œæ•´å°è£…ä»£ç " class="headerlink" title="6ã€axios å®Œæ•´å°è£…ä»£ç :"></a>6ã€axios å®Œæ•´å°è£…ä»£ç :</h3><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">/** * axioså°è£… * è¯·æ±‚æ‹¦æˆªã€å“åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç† */import axios from &quot;axios&quot;;import router from &quot;../router&quot;;import store from &quot;../store/index&quot;;import &#123; Toast &#125; from &quot;vant&quot;;/** * æç¤ºå‡½æ•° * ç¦æ­¢ç‚¹å‡»è’™å±‚ã€æ˜¾ç¤ºä¸€ç§’åå…³é—­ */const tip = (msg) =&gt; &#123;  Toast(&#123;    message: msg,    duration: 1000,    forbidClick: true,  &#125;);&#125;;/** * è·³è½¬ç™»å½•é¡µ * æºå¸¦å½“å‰é¡µé¢è·¯ç”±ï¼Œä»¥æœŸåœ¨ç™»å½•é¡µé¢å®Œæˆç™»å½•åè¿”å›å½“å‰é¡µé¢ */const toLogin = () =&gt; &#123;  router.replace(&#123;    path: &quot;/login&quot;,    query: &#123;      redirect: router.currentRoute.fullPath,    &#125;,  &#125;);&#125;;/** * è¯·æ±‚å¤±è´¥åçš„é”™è¯¯ç»Ÿä¸€å¤„ç† * @param &#123;Number&#125; status è¯·æ±‚å¤±è´¥çš„çŠ¶æ€ç  */const errorHandle = (status, other) =&gt; &#123;  // çŠ¶æ€ç åˆ¤æ–­  switch (status) &#123;    // 401: æœªç™»å½•çŠ¶æ€ï¼Œè·³è½¬ç™»å½•é¡µ    case 401:      toLogin();      break;    // 403 tokenè¿‡æœŸ    // æ¸…é™¤tokenå¹¶è·³è½¬ç™»å½•é¡µ    case 403:      tip(&quot;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&quot;);      localStorage.removeItem(&quot;token&quot;);      store.commit(&quot;loginSuccess&quot;, null);      setTimeout(() =&gt; &#123;        toLogin();      &#125;, 1000);      break;    // 404è¯·æ±‚ä¸å­˜åœ¨    case 404:      tip(&quot;è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨&quot;);      break;    default:      console.log(other);  &#125;&#125;;// åˆ›å»ºaxioså®ä¾‹var instance = axios.create(&#123; timeout: 1000 * 12 &#125;);// è®¾ç½®postè¯·æ±‚å¤´instance.defaults.headers.post[&quot;Content-Type&quot;] =  &quot;application/x-www-form-urlencoded&quot;;/** * è¯·æ±‚æ‹¦æˆªå™¨ * æ¯æ¬¡è¯·æ±‚å‰ï¼Œå¦‚æœå­˜åœ¨tokenåˆ™åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦token */instance.interceptors.request.use(  (config) =&gt; &#123;    // ç™»å½•æµç¨‹æ§åˆ¶ä¸­ï¼Œæ ¹æ®æœ¬åœ°æ˜¯å¦å­˜åœ¨tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µ    // ä½†æ˜¯å³ä½¿tokenå­˜åœ¨ï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡çš„è¯·æ±‚å¤´ä¸­æºå¸¦token    // åå°æ ¹æ®æºå¸¦çš„tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µï¼Œå¹¶è¿”å›ç»™æˆ‘ä»¬å¯¹åº”çš„çŠ¶æ€ç     // è€Œåæˆ‘ä»¬å¯ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œæ ¹æ®çŠ¶æ€ç è¿›è¡Œä¸€äº›ç»Ÿä¸€çš„æ“ä½œã€‚    const token = store.state.token;    token &amp;&amp; (config.headers.Authorization = token);    return config;  &#125;,  (error) =&gt; Promise.error(error));// å“åº”æ‹¦æˆªå™¨instance.interceptors.response.use(  // è¯·æ±‚æˆåŠŸ  (res) =&gt; (res.status === 200 ? Promise.resolve(res) : Promise.reject(res)),  // è¯·æ±‚å¤±è´¥  (error) =&gt; &#123;    const &#123; response &#125; = error;    if (response) &#123;      // è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´      errorHandle(response.status, response.data.message);      return Promise.reject(response);    &#125; else &#123;      // å¤„ç†æ–­ç½‘çš„æƒ…å†µ      // eg:è¯·æ±‚è¶…æ—¶æˆ–æ–­ç½‘æ—¶ï¼Œæ›´æ–°stateçš„networkçŠ¶æ€      // networkçŠ¶æ€åœ¨app.vueä¸­æ§åˆ¶ç€ä¸€ä¸ªå…¨å±€çš„æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè—      // å…³äºæ–­ç½‘ç»„ä»¶ä¸­çš„åˆ·æ–°é‡æ–°è·å–æ•°æ®ï¼Œä¼šåœ¨æ–­ç½‘ç»„ä»¶ä¸­è¯´æ˜      if (!window.navigator.onLine) &#123;        store.commit(&quot;changeNetwork&quot;, false);      &#125; else &#123;        return Promise.reject(error);      &#125;    &#125;  &#125;);export default instance;</code></pre></details><h3 id="7ã€token-å¤±æ•ˆåŠæ¥å£å›½é™…åŒ–"><a href="#7ã€token-å¤±æ•ˆåŠæ¥å£å›½é™…åŒ–" class="headerlink" title="7ã€token å¤±æ•ˆåŠæ¥å£å›½é™…åŒ–"></a>7ã€token å¤±æ•ˆåŠæ¥å£å›½é™…åŒ–</h3><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">/** * æ˜¯å¦è¶…æ—¶ */export function isCheckTimeout() &#123;  // å½“å‰æ—¶é—´æˆ³  var currentTime = Date.now();  // ç¼“å­˜æ—¶é—´æˆ³  var timeStamp = getTimeStamp();  return currentTime - timeStamp &gt; TOKEN_TIMEOUT_VALUE;&#125;import axios from &quot;axios&quot;;import store from &quot;@/store&quot;;import &#123; ElMessage &#125; from &quot;element-plus&quot;;import &#123; isCheckTimeout &#125; from &quot;@/utils/auth&quot;;const service = axios.create(&#123;  baseURL: process.env.VUE_APP_BASE_API,  timeout: 5000,&#125;);// è¯·æ±‚æ‹¦æˆªå™¨service.interceptors.request.use(  (config) =&gt; &#123;    // åœ¨è¿™ä¸ªä½ç½®éœ€è¦ç»Ÿä¸€çš„å»æ³¨å…¥token    if (store.getters.token) &#123;      if (isCheckTimeout()) &#123;        // ç™»å‡ºæ“ä½œ        store.dispatch(&quot;user/logout&quot;);        return Promise.reject(new Error(&quot;token å¤±æ•ˆ&quot;));      &#125;      // å¦‚æœtokenå­˜åœ¨ æ³¨å…¥token      config.headers.Authorization = `Bearer $&#123;store.getters.token&#125;`;    &#125;    // é…ç½®æ¥å£å›½é™…åŒ–    config.headers[&quot;Accept-Language&quot;] = store.getters.language;    return config; // å¿…é¡»è¿”å›é…ç½®  &#125;,  (error) =&gt; &#123;    return Promise.reject(error);  &#125;);// å“åº”æ‹¦æˆªå™¨service.interceptors.response.use(  (response) =&gt; &#123;    const &#123; success, message, data &#125; = response.data;    //   è¦æ ¹æ®successçš„æˆåŠŸä¸å¦å†³å®šä¸‹é¢çš„æ“ä½œ    if (success) &#123;      return data;    &#125; else &#123;      // ä¸šåŠ¡é”™è¯¯      ElMessage.error(message); // æç¤ºé”™è¯¯æ¶ˆæ¯      return Promise.reject(new Error(message));    &#125;  &#125;,  (error) =&gt; &#123;    // å¤„ç† token è¶…æ—¶é—®é¢˜    if (      error.response &amp;&amp;      error.response.data &amp;&amp;      error.response.data.code === 401    ) &#123;      // tokenè¶…æ—¶      store.dispatch(&quot;user/logout&quot;);    &#125;    ElMessage.error(error.message); // æç¤ºé”™è¯¯ä¿¡æ¯    return Promise.reject(error);  &#125;);export default service;</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>19ã€å…³äºechartså®˜æ–¹çš„ä¸€ä¸ªbug -- sublinkè·³è½¬é—®é¢˜</title>
      <link href="/2020/04/20/echarts/"/>
      <url>/2020/04/20/echarts/</url>
      
        <content type="html"><![CDATA[<p>echarts å®˜æ–¹çš„ä¸€ä¸ª bug â€“ sublink è·³è½¬çš„é—®é¢˜ã€‚echartsç‰ˆæœ¬å·ä¸º4.8.0</p><span id="more"></span><p>å¼€å‘ç™¾åº¦åœ°å›¾ scatter æ•£ç‚¹å›¾æ—¶ï¼Œå‰¯æ ‡é¢˜é“¾æ¥è·³è½¬å‡ºé”™ï¼ˆç‰ˆæœ¬å·ä¸º 4.8.0ï¼‰ï¼Œåœ¨ GitHub æ‰¾åˆ°<a href="https://github.com/apache/incubator-echarts/issues/12841">issues</a>ã€‚<br>bug ä»‹ç»ï¼Œç‚¹å‡»å‰¯æ ‡é¢˜æ— æ³•è·³è½¬åˆ°æŒ‡å®šè¿æ¥</p><pre><code class="js">this.options = &#123;  title: &#123;    text: &quot;æˆ‘æ˜¯ä¸»æ ‡é¢˜&quot;,    subtext: &quot;æˆ‘æ˜¯å‰¯æ ‡é¢˜ï¼Œæˆ‘å¯ä»¥è·³è½¬&quot;,    sublink: &quot;https://www.baidu.com&quot;,    left: &quot;center&quot;,  &#125;,&#125;;</code></pre><p>1ã€åœ¨ main.js å¼•å…¥ echarts å’Œ vue-echartsï¼Œå°† echarts ç»‘å®šåˆ° Vue åŸå‹ï¼Œå¼•å…¥ vue-echarts é€šè¿‡ vue.component()è¿›è¡Œç»„ä»¶æ³¨å†Œ</p><blockquote><p>å°† echarts ç»‘å®šåˆ° Vue åŸå‹ä¸Šï¼Œå¯ä»¥å‡å°‘ä»£ç é‡ï¼Œå¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨ echarts é‡Œé¢æä¾›çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰å…¨å±€å¼•å…¥çš„è¯ï¼Œéœ€è¦åœ¨æ¯ä¸ªä½¿ç”¨ echarts çš„é¡µé¢éƒ½éœ€è¦æ‰‹åŠ¨å¼•å…¥ã€‚å°† vue-echarts ä½¿ç”¨ç»„ä»¶æ³¨å†Œåï¼Œæä¾›äº†å±æ€§ç»‘å®šçš„æ–¹å¼æ¸²æŸ“å›¾è¡¨å°±ä¸éœ€è¦é€šè¿‡è°ƒç”¨ echart çš„æ–¹æ³•äº†ã€‚</p></blockquote><h2 id="echarts"><a href="#echarts" class="headerlink" title="echarts"></a>echarts</h2><p>1ã€echarts çš„ç»˜å›¾æµç¨‹</p><pre><code class="js">// 1ã€å¼•å…¥echarts jsåº“&lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/echarts/4.8.0/echarts.min.js&quot;&gt;&lt;/script&gt;</code></pre><pre><code class="html">&lt;!-- 2ã€DOMå®¹å™¨ è®¾ç½®å®½é«˜ï¼ˆæ³¨æ„ï¼‰  --&gt;&lt;div id=&quot;charts&quot; style=&quot;width:800px;height:600px&quot;&gt;&lt;/div&gt;</code></pre><pre><code class="js">// 3ã€è·å–æ¸²æŸ“DOMå¯¹è±¡const chartDom = document.getElementById(&quot;charts&quot;);// 4ã€åˆå§‹åŒ–echartså¯¹è±¡const chart = echarts.init(chartDom);// 5ã€é…ç½®optionå‚æ•°  è°ƒç”¨setOptionå®Œæˆæ¸²æŸ“chart.setOption(&#123;  title: &#123;    text: &quot;Echarts ç¤ºä¾‹&quot;,  &#125;,  xAxis: &#123;    data: [&quot;é£Ÿå“&quot;, &quot;æ•°ç &quot;, &quot;æœé¥°&quot;, &quot;ç®±åŒ…&quot;],  &#125;,  yAxis: &#123;&#125;,  // ç³»åˆ—ï¼š åŒ…æ‹¬å›¾è¡¨çš„ç±»å‹ åŒ…æ‹¬ï¼šline bar pieç­‰  series: &#123;    type: &quot;bar&quot;,    data: [&quot;100&quot;, &quot;120&quot;, &quot;40&quot;, &quot;160&quot;],  &#125;,&#125;);</code></pre><p>2ã€dataset: æ•°æ®é›†</p><blockquote><p>ECharts 4 å¼€å§‹æ”¯æŒäº† æ•°æ®é›†ï¼ˆdatasetï¼‰ç»„ä»¶ç”¨äºå•ç‹¬çš„æ•°æ®é›†å£°æ˜ï¼Œä»è€Œæ•°æ®å¯ä»¥å•ç‹¬ç®¡ç†ï¼Œè¢«å¤šä¸ªç»„ä»¶å¤ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è‡ªç”±æŒ‡å®šæ•°æ®åˆ°è§†è§‰çš„æ˜ å°„</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">const chartDom = document.getElementById(&quot;chart&quot;);const chart = echarts.init(chartDom);const option = &#123;  xAxis: &#123;    type: &quot;category&quot;,  &#125;,  yAxis: &#123;&#125;,  dataset: &#123;    source: [      [&quot;1å­£åº¦&quot;, 80, 100, &quot;åˆ†ç±»1&quot;, 50],      [&quot;2å­£åº¦&quot;, 81, 122, &quot;åˆ†ç±»1&quot;, 60],      [&quot;3å­£åº¦&quot;, 76, 90, &quot;åˆ†ç±»1&quot;, 55],      [&quot;4å­£åº¦&quot;, 65, 123, &quot;åˆ†ç±»1&quot;, 70],    ],  &#125;,  // ç³»åˆ—  series: [    // ç³»åˆ— 0    &#123;      type: &quot;pie&quot;,      center: [&quot;65%&quot;, 60],      radius: 35,      encode: &#123;        itemName: 3,        value: 4,      &#125;,    &#125;,    // ç³»åˆ— 1    &#123;      type: &quot;line&quot;,      encode: &#123;        x: 0,        y: 2,      &#125;,    &#125;,    // ç³»åˆ— 2    &#123;      type: &quot;bar&quot;,      encode: &#123;        x: 0,        y: 1,      &#125;,    &#125;,  ],&#125;;chart.setOption(option);</code></pre></details><p>3ã€åŸºæœ¬ç»„ä»¶</p><blockquote><p>echarts åŸºæœ¬ç»„ä»¶ï¼štitleã€åæ ‡ç³»çš„ Xï¼ˆxAxisï¼‰è½´ Y(yAxisï¼‰è½´ã€tooltip æç¤ºæ¡†ã€toolbox å·¥å…·æ ç­‰</p></blockquote><p>4ã€å®šä½</p><pre><code class="js">// å¤§å¤šæ•°ç»„ä»¶éƒ½æä¾›äº†å®šä½å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ç±»ä¼¼ CSS absolute çš„å®šä½å±æ€§æ¥æ§åˆ¶ç»„ä»¶çš„ä½ç½® left right height bottomçš„å€¼å¯ä»¥æ˜¯æ•°å€¼æˆ–è€…ç™¾åˆ†æ¯”var option = &#123;  grid: &#123;    left: 120,    right: &quot;30%&quot;,    height: &quot;40%&quot;,    bottom: 100,  &#125;,&#125;;</code></pre><h2 id="echarts-å¸¸ç”¨å±æ€§"><a href="#echarts-å¸¸ç”¨å±æ€§" class="headerlink" title="echarts å¸¸ç”¨å±æ€§"></a>echarts å¸¸ç”¨å±æ€§</h2><p>ï¼ˆ1ï¼‰ä½¿ç”¨ ECharts ç»˜å›¾åæ²¡æœ‰å›¾åƒï¼ˆè¿™ä¸ªé—®é¢˜ä¼šç»å¸¸å‡ºç°ï¼Œä¸€å®šè¦è®¾ç½®å®½åº¦é«˜åº¦ï¼ï¼ï¼ï¼‰</p><blockquote><p>ECharts ç»˜å›¾åæ²¡æœ‰ä»»ä½•æŠ¥é”™ï¼Œä½†æ˜¯æ²¡æœ‰å›¾åƒã€‚å¯ä»¥æ£€æŸ¥å®¹å™¨æ˜¯å¦è®¾ç½®äº†å®½é«˜ã€‚å› ä¸º ECharts ä¸ä¼šè®¾ç½®é»˜è®¤å®½é«˜ï¼Œå¦‚æœå®¹å™¨æ²¡æœ‰è®¾ç½®å®½é«˜ï¼Œåˆ™ä¸ä¼šå±•ç¤º;å¦‚æœä½¿ç”¨çš„æ˜¯ v-chart åˆ™æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º v-chart é»˜è®¤äº† 600*400 çš„å®½é«˜ã€‚</p></blockquote><p>ï¼ˆ2ï¼‰ä½¿ç”¨ element-ui çš„æŒ‰éœ€å¼•å…¥</p><blockquote><p>å®‰è£…<code>vue add element</code>ï¼Œåç»­ä¼šæç¤ºæ˜¯å…¨éƒ¨å¼•å…¥æˆ–è€…æŒ‰éœ€å¼•å…¥ï¼Œé€‰æ‹©æŒ‰éœ€å¼•å…¥ï¼Œåœ¨ App.vue ä¸­ä¼šå¢åŠ ä¸€äº› element-ui çš„ç¤ºä¾‹ä»£ç ï¼Œåç»­åˆ é™¤ã€‚é¡¹ç›®ç›®å½•ä¼šå¢åŠ ä¸€ä¸ª plugin æ–‡ä»¶å¤¹</p></blockquote><blockquote><p>æ³¨æ„ï¼šæŒ‰éœ€å¼•å…¥ç»„ä»¶åï¼Œå†åˆ é™¤ App.vue ä»¥åŠ view æ–‡ä»¶å¤¹å†…ã€component æ–‡ä»¶å¤¹å†…çš„ä¸éœ€è¦çš„å†…å®¹ã€‚</p></blockquote><pre><code class="js">// main.jsimport &quot;./plugins/element.js&quot;;</code></pre><pre><code class="js">// element.jsimport Vue from &quot;vue&quot;;import &#123; Card, Col, Row &#125; from &quot;element-ui&quot;;Vue.use(Card);Vue.use(Col);Vue.use(Row);</code></pre><p>ï¼ˆ3ï¼‰vue ä½¿ç”¨ echarts</p><pre><code class="js">// main.js å¼•å…¥echarts æŒ‚è½½åˆ°Vueå®ä¾‹import ECharts from &quot;echarts&quot;;Vue.prototype.$echarts = ECharts;</code></pre><p>ï¼ˆ4ï¼‰echarts çš„å¸¸ç”¨å±æ€§</p><blockquote><p>1ã€éšè—çº¿æ¡ - listStyle</p></blockquote><pre><code class="js">listStyle: &#123;  width: 0;&#125;</code></pre><blockquote><p>2ã€éšè—æ•°æ®ç‚¹ - itemStyle</p></blockquote><pre><code class="js">itemStyle: &#123;  opacity: 0;&#125;</code></pre><blockquote><p>3ã€æŠ˜çº¿å›¾å¡«å……é¢ç§¯åŒºåŸŸé¢œè‰² - areaStyle</p></blockquote><pre><code class="js">areaStyle: &#123;  color: &quot;purple&quot;;&#125;</code></pre><blockquote><p>4ã€æŠ˜çº¿å›¾å¹³æ»‘æ˜¾ç¤º - smooth</p></blockquote><pre><code class="js">smooth: true;</code></pre><blockquote><p>5ã€æŸ±çŠ¶å›¾èšåˆ - stack</p></blockquote><pre><code class="js">series: [  &#123;    type: &quot;bar&quot;,    stack: &quot;æ€»é‡&quot;,    data: [100],  &#125;,  &#123;    type: &quot;bar&quot;,    stack: &quot;æ€»é‡&quot;,    data: [250],  &#125;,];</code></pre><blockquote><p>6ã€è‡ªå®šä¹‰ç»˜å›¾(é‡ç‚¹)</p></blockquote><pre><code class="js">&#123;  type: &#39;custom&#39;,  stack: &#39;æ€»é‡&#39;,  data: [100],  renderItem: (params, api) =&gt; &#123;    //  console.log(params,api);    const value = api.value(0)    const endPoint = api.coord([value, 0])    return &#123;      type: &#39;group&#39;,      position: endPoint,      children: [&#123;        type: &#39;path&#39;,        shape: &#123;          d: &#39;M1024 255.996 511.971 767.909 0 255.996 1024 255.996z&#39;,// è¿™é‡Œæ˜¯svgé‡Œé¢çš„d          x: -5,          y: -20,          width: 10,          height: 10,          layout: &#39;cover&#39;        &#125;,        style: &#123;          fill: &#39;#45c946&#39;        &#125;      &#125;, &#123;        type: &#39;path&#39;,        shape: &#123;          d: &#39;M0 767.909l512.029-511.913L1024 767.909 0 767.909z&#39;,          x: -5,          y: 10,          width: 10,          height: 10,          layout: &#39;cover&#39;        &#125;,        style: &#123;          fill: &#39;#45c946&#39;        &#125;      &#125;]    &#125;  &#125;&#125;</code></pre><blockquote><p>7ã€xAxis x è½´</p></blockquote><pre><code class="js">// æ¶ˆé™¤xè½´ä¸¤ä¾§è¾¹è·boundaryGap: false// æŸ±çŠ¶å›¾å®½åº¦barWidth: &#39;60%&#39;barWidth: 10// æ¡å½¢å›¾ typeè®¾ç½®æ–¹æ³•xAxis: &#123;  type: &#39;value&#39;&#125;,yAxis: &#123;  type: &#39;category&#39;&#125;</code></pre><blockquote><p>8ã€echarts ç±»ç›®è½´å’Œéç±»ç›®è½´</p></blockquote><blockquote><p>ç±»ç›®è½´çš„æ„æ€å°±æ˜¯åæ ‡è½´ä¸Šçš„å±•ç¤ºä¿¡æ¯æ˜¯å¦æ˜¯æ•°æ®è¿è´¯ï¼Œéç±»ç›®è½´å°±æ˜¯é™¤äº†æ ‡ç­¾ç±»å‹ä¸ºç±»ç›®çš„å…¶ä»–åæ ‡è½´ï¼Œæœ‰ æ—¶é—´ï¼ˆtimeï¼‰ï¼Œæ•°å€¼ï¼ˆvalueï¼‰ï¼Œå¯¹æ•°ï¼ˆlogï¼‰3 ç§ã€‚æ ‡ç­¾ç±»å‹ä¸ºç±»ç›®æ˜¯æŒ‡ type:category</p></blockquote><p>åæ ‡è½´ä¸¤è¾¹ç•™ç™½ç­–ç•¥ï¼Œç±»ç›®è½´å’Œéç±»ç›®è½´çš„è®¾ç½®å’Œè¡¨ç°ä¸ä¸€æ ·ã€‚ç±»ç›®è½´ä¸­ Â boundaryGapÂ  å¯ä»¥é…ç½®ä¸º Â trueÂ  å’Œ Â falseã€‚é»˜è®¤ä¸º Â trueï¼Œè¿™æ—¶å€™åˆ»åº¦åªæ˜¯ä½œä¸ºåˆ†éš”çº¿ï¼Œæ ‡ç­¾å’Œæ•°æ®ç‚¹éƒ½ä¼šåœ¨ä¸¤ä¸ªåˆ»åº¦ä¹‹é—´çš„å¸¦(band)ä¸­é—´ã€‚éç±»ç›®è½´ï¼ŒåŒ…æ‹¬æ—¶é—´ï¼Œæ•°å€¼ï¼Œå¯¹æ•°è½´ï¼ŒboundaryGap æ˜¯ä¸€ä¸ªä¸¤ä¸ªå€¼çš„æ•°ç»„ï¼Œåˆ†åˆ«è¡¨ç¤ºæ•°æ®æœ€å°å€¼å’Œæœ€å¤§å€¼çš„å»¶ä¼¸èŒƒå›´ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®æ•°å€¼æˆ–è€…ç›¸å¯¹çš„ç™¾åˆ†æ¯”ï¼Œåœ¨è®¾ç½® Â minÂ  å’Œ Â maxÂ  åæ— æ•ˆã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> ECharts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>18ã€å¦‚ä½•ä½¿ç”¨canvaså‹ç¼©å›¾ç‰‡ï¼Ÿ</title>
      <link href="/2020/04/10/canvas/"/>
      <url>/2020/04/10/canvas/</url>
      
        <content type="html"><![CDATA[<blockquote><p>canvas æ˜¯ HTML5 çš„æ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä½¿ç”¨ canvas å…ƒç´ åœ¨ç½‘é¡µä¸Šé€šè¿‡ JavaScript ç»˜åˆ¶å›¾åƒ ï¼ˆå¯ä»¥åœ¨ HTML é¡µé¢ä½¿ç”¨å¤šä¸ª canvas å…ƒç´ ï¼‰</p></blockquote><span id="more"></span><p><strong>1ã€ç»˜å›¾æµç¨‹:</strong></p><pre><code class="js">// 1ã€ç¼–å†™canvasæ ‡ç­¾ï¼ŒæŒ‡å®šå®½é«˜ï¼ˆæ³¨æ„ï¼‰ï¼›&lt;canvas id=&quot;canvas&quot; width=&quot;800&quot; height=&quot;800&quot;&gt;&lt;/canvas&gt;;// 2ã€è·å–canvas DOMå¯¹è±¡ï¼›const canvas = document.getElementById(&quot;canvas&quot;);// 3ã€è·å–Canvaså¯¹è±¡ï¼›const ctx = canvas.getContext(&quot;2d&quot;); // æ‹¥æœ‰å¤šç§ç»˜åˆ¶è·¯å¾„ã€çŸ©å½¢ã€åœ†å½¢ã€å­—ç¬¦ä»¥åŠæ·»åŠ å›¾åƒçš„æ–¹æ³•// 4ã€è®¾ç½®ç»˜å›¾å±æ€§ï¼›ctx.fillStyle = &quot;red&quot;; //è®¾ç½®å¡«å……è‰²// 5ã€è°ƒç”¨ç»˜å›¾APIã€‚ctx.fillRect(0, 0, 50, 50); // ç»˜åˆ¶çŸ©å½¢</code></pre><p><strong>2ã€canvas è·¯å¾„</strong></p><p>å¸¸ç”¨çš„æ–¹æ³•ï¼š</p><p>ï¼ˆ1ï¼‰moveTo(x,y)â€“å®šä¹‰çº¿æ¡å¼€å§‹åæ ‡</p><p>ï¼ˆ2ï¼‰lineTo(x,y)â€“å®šä¹‰çº¿æ¡ç»“æŸåæ ‡</p><p>ç¤ºä¾‹ 1ã€ç»˜åˆ¶çº¿æ®µ</p><pre><code class="js">&lt;canvas id=&quot;canvas&quot; width=&quot;800&quot; height=&quot;800&quot;&gt;&lt;/canvas&gt;;var canvas = document.getElementById(&quot;canvas&quot;);var ctx = canvas.getContext(&quot;2d&quot;);ctx.beginPath(); // å¼€å§‹ç»˜åˆ¶è·¯å¾„ctx.lineWidth = 1; // çº¿æ¡å®½åº¦ctx.strokeStyle = &quot;green&quot;; // çº¿æ¡å¡«å……è‰²ctx.moveTo(0, 0);ctx.lineTo(200, 100);ctx.stroke(); // ç»˜åˆ¶çº¿æ®µ</code></pre><p>ç¤ºä¾‹ 2ã€ç»˜åˆ¶åœ†å½¢</p><p>arc(x,y,r,start,stop) x è½´ y è½´ r åŠå¾„</p><pre><code class="js">&lt;canvas id=&quot;canvas&quot; width=&quot;800&quot; height=&quot;800&quot;&gt;&lt;/canvas&gt;;var canvas = document.getElementById(&quot;canvas&quot;);var ctx = canvas.getContext(&quot;2d&quot;);ctx.beginPath();ctx.lineWidth = 2;ctx.strokeStyle = &quot;green&quot;; // åœ†å½¢è¾¹æ¡†è‰²ctx.fillStyle = &quot;red&quot;; // åœ†å½¢å¡«å……è‰²ctx.arc(95, 50, 40, 0, 2 * Math.PI);ctx.stroke();</code></pre><p>ç¤ºä¾‹ 3ã€ç»˜åˆ¶çŸ©å½¢ ï¼ˆä»£ç è§ç»˜å›¾æµç¨‹ï¼‰</p><p><strong>3ã€ä½¿ç”¨ canvas å‹ç¼©å›¾ç‰‡</strong></p><pre><code class="html">&lt;!--ç¼–å†™inputæ ‡ç­¾ æŒ‡å®štypeç±»å‹ä¸ºfile--&gt;&lt;input type=&quot;file&quot; id=&quot;upload&quot; /&gt;</code></pre><details><summary>å‹ç¼©å›¾ç‰‡jsä»£ç (ç‚¹å‡»å±•å¼€)</summary><pre><code class="js">// è®¾ç½®ä¸Šä¼ å›¾ç‰‡ç±»å‹  ä¸Šä¼ å›¾ç‰‡çš„å®¹é‡å¤§å°const ACCEPT = [&quot;image/jpg&quot;, &quot;image/png&quot;, &quot;image/jpeg&quot;]; // é™å®šå›¾ç‰‡æ–‡ä»¶ç±»å‹const MAXSIZE = 1024 * 1024 * 3; // é™å®šå›¾ç‰‡æœ€å¤§å®¹é‡const MAXSIZE_STR = &quot;3MB&quot;;function convertImageToBase64(file, cb) &#123;  let reader = new FileReader();  reader.addEventListener(&quot;load&quot;, function (e) &#123;    const base64Image = e.target.result; // è·å–æ–‡ä»¶å†…å®¹ï¼Œç­‰åŒäº reader.result    cb(base64Image);    reader = null;  &#125;);  reader.readAsDataURL(file); // è¯»å– file å¯¹è±¡ä¸­çš„å†…å®¹&#125;// å›¾ç‰‡æ˜¯å¦å‹ç¼©çš„åˆ¤æ–­function compress(base64Image, cb) &#123;  let maxW = 1024;  let maxH = 1024;  const image = new Image();  image.addEventListener(&quot;load&quot;, function () &#123;    let ratio; // å‹ç¼©æ¯”    let needCompress = false; // æ˜¯å¦éœ€è¦å‹ç¼©    if (maxW &lt; image.naturalWidth) &#123;      needCompress = true;      ratio = image.naturalWidth / maxW;      maxH = image.naturalHeight / ratio;    &#125;    if (maxH &lt; image.naturalHeight) &#123;      needCompress = true;      ratio = image.naturalHeight / maxH;      maxW = image.naturalWidth / ratio;    &#125;    if (!needCompress) &#123;      maxW = image.naturalWidth;      maxH = image.naturalHeight;    &#125;    const canvas = document.createElement(&quot;canvas&quot;);    canvas.setAttribute(&quot;id&quot;, &quot;__compress__&quot;);    canvas.width = maxW;    canvas.height = maxH;    canvas.style.visibility = &quot;hidden&quot;;    document.body.append(canvas);    // canvasç”»å¸ƒ    const ctx = canvas.getContext(&quot;2d&quot;);    ctx.clearRect(0, 0, maxW, maxH);    ctx.drawImage(image, 0, 0, maxW, maxH); // æ¸²æŸ“å›¾ç‰‡    const compressImage = canvas.toDataURL(&quot;image/jpeg&quot;, 0.9); // å‹ç¼©å›¾ç‰‡    cb(compressImage);    const _image = new Image();    _image.src = compressImage;    document.body.appendChild(_image);    canvas.remove(); // ç§»é™¤ canvas  &#125;);  image.src = base64Image; // å°†å›¾ç‰‡è®¾ç½®åˆ° image çš„ src å±æ€§ä¸­  document.body.appendChild(image);&#125;// ä¸Šä¼ ç»™æœåŠ¡ç«¯function uploadImage(compressImage) &#123;  console.log(&quot;upload image to server...&quot;, compressImage);&#125;const upload = document.getElementById(&quot;upload&quot;);upload.addEventListener(&quot;change&quot;, function (e) &#123;  const file = e.target.files[0];  console.log(file);  if (!file) &#123;    return;  &#125;  const &#123; type: fileType, size: fileSize &#125; = file;  // å›¾ç‰‡ç±»å‹æ£€æŸ¥  if (!ACCEPT.includes(fileType)) &#123;    alert(&quot;ä¸æ”¯æŒä¸Šä¼ è¯¥æ ¼å¼æ–‡ä»¶ï¼&quot;);    upload.value = &quot;&quot;;    return;  &#125;  // å›¾ç‰‡å¤§å°æ£€æŸ¥  if (fileSize &gt; MAXSIZE) &#123;    alert(&quot;æ–‡ä»¶è¶…å‡º&quot; + MAXSIZE_STR + &quot;ï¼&quot;);    upload.value = &quot;&quot;;    return;  &#125;  // å‹ç¼©æ–‡ä»¶  convertImageToBase64(file, (base64Image) =&gt;    compress(base64Image, uploadImage)  );&#125;);</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>17ã€ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug</title>
      <link href="/2020/02/20/mobile/"/>
      <url>/2020/02/20/mobile/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç§»åŠ¨ç«¯ç‚¹å‡»ä¸€ä¸ªå…ƒç´ è§¦å‘äº‹ä»¶çš„é¡ºåºä¸ºï¼štouchstart â€“&gt; touchmove â€“&gt; touchend â€“&gt; click</p><span id="more"></span><h2 id="ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug"><a href="#ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug" class="headerlink" title="ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug"></a>ç§»åŠ¨ç«¯300mså»¶è¿Ÿåœ¨IOS11ä¸­çš„bug</h2><blockquote><p>è§£å†³æ–¹æ¡ˆ</p></blockquote><p>1ã€ç¦ç”¨ç¼©æ”¾ æ›´æ”¹é»˜è®¤è§†å£å®½åº¦</p><pre><code class="js">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1&quot;&gt;</code></pre><p>2ã€fastclickè§£å†³300mså»¶è¿Ÿé—®é¢˜<br>        é¦–å…ˆï¼Œéœ€è¦å®‰è£…fastclickæ’ä»¶</p><pre><code class="js">npm install fastclick</code></pre><p>3ã€åœ¨main.jsæ–‡ä»¶ä¸­å¼•å…¥fastclickï¼Œç»‘å®šåˆ°bodyä¸Š</p><pre><code class="js">import FastClick from &quot;fastclick&quot;FastClick.attach(document.body);</code></pre><p>è¿™å°±æ˜¯å¸¸ç”¨æ¥è§£å†³ç§»åŠ¨ç«¯300mså»¶è¿Ÿçš„æ–¹æ³•ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•åœ¨iOS11çš„ç³»ç»Ÿä¸­å­˜åœ¨bugã€‚</p><p>4ã€iOS11ç³»ç»Ÿä¸­å‡ºç°çš„bug<br>    åœ¨iOS11ç³»ç»Ÿä¸‹ï¼Œç‚¹å‡»inputè¾“å…¥æ¡†çš„æ—¶å€™ä¼šå‡ºç°ä¸çµæ•çš„ç°è±¡ã€‚</p><blockquote><p>è§£å†³æ–¹æ¡ˆ:</p></blockquote><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="js">&lt;script&gt;FastClick.prototype.focus = function (targetElement) &#123;  var length;  var deviceIsWindowsPhone = navigator.userAgent.indexOf(&quot;Windows Phone&quot;) &gt;= 0;  var deviceIsIos = /iP(ad|hone|od)/.test(navigator.userAgent) &amp;&amp; !deviceIsWindowsPhone;  //å…¼å®¹å¤„ç†:åœ¨iOS7ä¸­ï¼Œæœ‰ä¸€äº›å…ƒç´ ï¼ˆå¦‚dateã€datetimeã€monthç­‰ï¼‰åœ¨setSelectionRangeä¼šå‡ºç°TypeError  //è¿™æ˜¯å› ä¸ºè¿™äº›å…ƒç´ å¹¶æ²¡æœ‰selectionStartå’ŒselectionEndçš„æ•´å‹æ•°å­—å±æ€§ï¼Œæ‰€ä»¥ä¸€æ—¦å¼•ç”¨å°±ä¼šæŠ¥é”™ï¼Œå› æ­¤æ’é™¤è¿™äº›å±æ€§æ‰ä½¿ç”¨setSelectionRangeæ–¹æ³•  if (deviceIsIOS &amp;&amp; targetElement.setSelectionRange &amp;&amp; targetElement.type.indexOf(&#39;date&#39;) !== 0 &amp;&amp; targetElement.type !== &#39;time&#39; &amp;&amp; targetElement.type !== &#39;month&#39;) &#123;    length = targetElement.value.length;    // ä¿®å¤bug ios 11.3ä¸å¼¹å‡ºé”®ç›˜ï¼Œè¿™é‡ŒåŠ ä¸Šèšç„¦ä»£ç ï¼Œè®©å…¶å¼ºåˆ¶èšç„¦å¼¹å‡ºé”®ç›˜    targetElement.setSelectionRange(length, length);  &#125; else &#123;    targetElement.focus();  &#125;&#125;&lt;/script&gt;</code></pre></details><blockquote><p>æ³¨æ„ï¼š<br>setSelectionRangeæ˜¯HTMLInputElementçš„ä¸€ä¸ªæ–¹æ³•,ç”¨æ¥è®¾å®šinput textareçš„å½“å‰æ–‡æœ¬çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚<br>(<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLInputElement/setSelectionRange">MDNæ–‡æ¡£</a>ï¼‰<br>å¯¹setSelectionRangeæ–¹æ³•åªèƒ½ç”¨äºç±»å‹ä¸ºæ–‡æœ¬ã€æœç´¢ã€è¿æ¥ã€ç”µè¯å·ç ã€å¯†ç çš„è¾“å…¥ï¼Œä»¥åŠåœ¨Chrome33å¼€å§‹è®¿é—®å…¶ä½™ç±»å‹çš„å±æ€§å’Œæ–¹æ³•æŠ›å‡ºå¼‚å¸¸ã€‚<br>è¾“å…¥ç±»å‹ä¸ºæ•°å­—æ—¶ä¼šæŠ›å‡ºï¼šâ€œä¸èƒ½ä»â€™HTMLInputElementâ€™ä¸­è¯»å–â€™selectionStartâ€™å±æ€§ï¼šè¾“å…¥å…ƒç´ çš„ç±»å‹(â€˜numberâ€™)ä¸æ”¯æŒé€‰æ‹©ï¼ˆFailed to read the â€˜selectionStartâ€™ property from â€˜HTMLInputElementâ€™: The input elementâ€™s type (â€˜numberâ€™) does not support selectionï¼‰â€ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>16ã€v-cloakè§£å†³é¡µé¢é—ªçƒé—®é¢˜</title>
      <link href="/2020/02/12/v-cloak/"/>
      <url>/2020/02/12/v-cloak/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªæŒ‡ä»¤ä¿æŒåœ¨å…ƒç´ ä¸Šç›´åˆ°å…³è”å®ä¾‹ç»“æŸç¼–è¯‘ã€‚å’ŒCSSè§„åˆ™å¦‚[v-cloak]{ display: none }ä¸€èµ·ç”¨æ—¶ï¼Œè¿™ä¸ªæŒ‡ä»¤å¯ä»¥éšè—æœªç¼–è¯‘çš„ Mustache æ ‡ç­¾ç›´åˆ°å®ä¾‹å‡†å¤‡å®Œæ¯•ã€‚</p><span id="more"></span><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬é¡µé¢æ¨¡æ¿ä¸­çš„æ•°æ®æ˜¯å¼‚æ­¥è·å–çš„ï¼Œåœ¨ç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹ï¼Œæ¸²æŸ“é¡µé¢çš„æ—¶å€™ä¼šå‡ºç°é¡µé¢é—ªçƒçš„æ•ˆæœï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œv-cloak æŒ‡ä»¤ä¿æŒåœ¨å…ƒç´ ä¸Šç›´åˆ°å…³è”å®ä¾‹ç»“æŸç¼–è¯‘ï¼Œåˆ©ç”¨å®ƒçš„ç‰¹æ€§ï¼Œç»“åˆ CSS çš„è§„åˆ™ [v-cloak] { display: none } ä¸€èµ·ä½¿ç”¨å°±å¯ä»¥éšè—æ‰æœªç¼–è¯‘å¥½çš„ Mustache æ ‡ç­¾ï¼Œç›´åˆ°å®ä¾‹å‡†å¤‡å®Œæ¯•ã€‚</p><pre><code class="html">&lt;div class=&quot;#app&quot; v-cloak&gt;    &lt;p&gt;&#123;&#123;value.name&#125;&#125;&lt;/p&gt;&lt;/div&gt;</code></pre><pre><code class="css">[v-cloak] &#123;    display: none;&#125;</code></pre><blockquote><p>éœ€è¦æ³¨æ„ï¼Œè™½ç„¶è§£å†³äº†é—ªçƒçš„é—®é¢˜ï¼Œä½†è¿™æ®µæ—¶é—´å†…å¦‚æœä»€ä¹ˆéƒ½ä¸å¤„ç†çš„è¯ï¼Œä¼šç›´æ¥ç™½å±ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œæˆ‘ä»¬åº”è¯¥åŠ ä¸€ä¸ªloadingåŠ¨ç”»æˆ–è€…éª¨æ¶å±çš„æ•ˆæœï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>15ã€è§£å†³oh-my-zshå¯åŠ¨æ—¶å‡ºç°å¤šè¡Œæç¤º</title>
      <link href="/2020/02/09/oh-my-zsh/"/>
      <url>/2020/02/09/oh-my-zsh/</url>
      
        <content type="html"><![CDATA[<p>oh-my-zshåœ¨å¯åŠ¨æ—¶ï¼Œå‡ºç°å¾ˆå¤šè¡Œæç¤ºï¼Œä»”ç»†é˜…è¯»å‘ç°æ˜¯2ä¸ªæ–‡ä»¶å¤¹æƒé™çš„é—®é¢˜ï¼Œä¿®æ”¹æ–‡ä»¶å¤¹æƒé™ï¼Œæ·»åŠ å‘½ä»¤å³å¯è§£å†³ã€‚</p><span id="more"></span><h3 id="ä¸€ã€ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™"><a href="#ä¸€ã€ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™" class="headerlink" title="ä¸€ã€ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™"></a>ä¸€ã€ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™</h3><pre><code class="js">cd /usr/local/sharesudo chmod 755 zshcd /usr/local/share/zshsudo chmod 755 site-functions</code></pre><h3 id="äºŒã€-zshrcæ·»åŠ å‘½ä»¤"><a href="#äºŒã€-zshrcæ·»åŠ å‘½ä»¤" class="headerlink" title="äºŒã€.zshrcæ·»åŠ å‘½ä»¤"></a>äºŒã€.zshrcæ·»åŠ å‘½ä»¤</h3><pre><code class="js">// æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸‹é¢çš„å‘½ä»¤cd ~sudo vi .zshrc#å†™åœ¨  # User configuration  ä¹‹åZSH_DISABLE_COMPFIX=&quot;true&quot; #ä¿å­˜å¹¶é€€å‡ºesc -&gt; :wq </code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>14ã€æ•´ç†javascriptçŸ¥è¯†(äºŒ)</title>
      <link href="/2020/01/15/javascript-simple2/"/>
      <url>/2020/01/15/javascript-simple2/</url>
      
        <content type="html"><![CDATA[<p>JavaScriptçš„é—­åŒ…ã€ä½œç”¨åŸŸã€åŸå‹é“¾</p><span id="more"></span><h4 id="ä¸€ã€é—­åŒ…"><a href="#ä¸€ã€é—­åŒ…" class="headerlink" title="ä¸€ã€é—­åŒ…"></a>ä¸€ã€é—­åŒ…</h4><h5 id="1ã€ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</h5><blockquote><p>ä¸€ä¸ªå‡½æ•°å’Œå¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆlexical environmentï¼Œè¯æ³•ç¯å¢ƒï¼‰çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·ï¼ˆæˆ–è€…è¯´å‡½æ•°è¢«å¼•ç”¨åŒ…å›´ï¼‰ï¼Œè¿™æ ·çš„ç»„åˆå°±æ˜¯é—­åŒ…ï¼ˆclosureï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<u>é—­åŒ…è®©ä½ å¯ä»¥åœ¨ä¸€ä¸ªå†…å±‚å‡½æ•°ä¸­è®¿é—®åˆ°å…¶å¤–å±‚å‡½æ•°çš„ä½œç”¨åŸŸ</u>ã€‚åœ¨ JavaScript ä¸­ï¼Œæ¯å½“åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œé—­åŒ…å°±ä¼šåœ¨å‡½æ•°åˆ›å»ºçš„åŒæ—¶è¢«åˆ›å»ºå‡ºæ¥ã€‚â€” from MDN</p></blockquote><p>javascripté—­åŒ…çš„æœ¬è´¨æºè‡ª2ç‚¹ï¼šè¯æ³•ä½œç”¨åŸŸå’Œå‡½æ•°å½“åšå€¼ä¼ é€’ã€‚</p><h5 id="2ã€è¯æ³•ä½œç”¨åŸŸ"><a href="#2ã€è¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="2ã€è¯æ³•ä½œç”¨åŸŸ"></a>2ã€è¯æ³•ä½œç”¨åŸŸ</h5><blockquote><p>æŒ‰ç…§ä»£ç çš„ä¹¦å†™æ—¶çš„æ ·å­ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å‡½æ•°å¤–é¢çš„å˜é‡ã€‚å¼•æ“é€šè¿‡æ•°æ®ç»“æ„å’Œç®—æ³•è¡¨ç¤ºä¸€ä¸ªå‡½æ•°ï¼Œä½¿å¾—åœ¨ä»£ç è§£é‡Šæ‰§è¡Œæ—¶æŒ‰ç…§è¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå¯ä»¥è®¿é—®å¤–å›´çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡å°±ç™»è®°åœ¨ç›¸åº”çš„æ•°æ®ç»“æ„ä¸­ã€‚</p></blockquote><pre><code class="js">function init()&#123;    // å±€éƒ¨å˜é‡    var name = &#39;jude&#39;      // å†…éƒ¨å‡½æ•°ï¼Œä¸€ä¸ªé—­åŒ…    function displayName()&#123;        // çˆ¶å‡½æ•°ä¸­å£°æ˜çš„å˜é‡        console.log(name)    &#125;    displayName()&#125;init()</code></pre><p>nameã€displayName()æ˜¯init()å‡½æ•°çš„ä¸€ä¸ªå±€éƒ¨å˜é‡å’Œä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼ŒdisplayName()å‡½æ•°æ²¡æœ‰è‡ªå·±çš„å±€éƒ¨å˜é‡ï¼Œä½†æ˜¯å®ƒå¯ä»¥è®¿é—®åˆ°å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œæ‰€ä»¥displayName()å¯ä»¥ä½¿ç”¨çˆ¶å‡½æ•°init()ä¸­å£°æ˜çš„å˜é‡nameã€‚</p><h5 id="3ã€å‡½æ•°å½“åšå€¼ä¼ é€’"><a href="#3ã€å‡½æ•°å½“åšå€¼ä¼ é€’" class="headerlink" title="3ã€å‡½æ•°å½“åšå€¼ä¼ é€’"></a>3ã€å‡½æ•°å½“åšå€¼ä¼ é€’</h5><blockquote><p>å³æ‰€è°“çš„first classå¯¹è±¡ã€‚å°±æ˜¯å¯ä»¥æŠŠå‡½æ•°å½“ä½œä¸€ä¸ªå€¼æ¥èµ‹å€¼ï¼Œå½“ä½œå‚æ•°ä¼ ç»™åˆ«çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æŠŠå‡½æ•°å½“ä½œä¸€ä¸ªå€¼ returnã€‚ä¸€ä¸ªå‡½æ•°è¢«å½“ä½œå€¼è¿”å›æ—¶ï¼Œä¹Ÿå°±ç›¸å½“äºè¿”å›äº†ä¸€ä¸ªé€šé“ï¼Œè¿™ä¸ªé€šé“å¯ä»¥è®¿é—®è¿™ä¸ªå‡½æ•°è¯æ³•ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œå³å‡½æ•°æ‰€éœ€è¦çš„æ•°æ®ç»“æ„ä¿å­˜äº†ä¸‹æ¥ï¼Œæ•°æ®ç»“æ„ä¸­çš„å€¼åœ¨å¤–å±‚å‡½æ•°æ‰§è¡Œæ—¶åˆ›å»ºï¼Œå¤–å±‚å‡½æ•°æ‰§è¡Œå®Œæ¯•æ—¶ç†å› é”€æ¯ï¼Œä½†ç”±äºå†…éƒ¨å‡½æ•°ä½œä¸ºå€¼è¿”å›å‡ºå»ï¼Œè¿™äº›å€¼å¾—ä»¥ä¿å­˜ä¸‹æ¥ã€‚è€Œä¸”æ— æ³•ç›´æ¥è®¿é—®ï¼Œå¿…é¡»é€šè¿‡è¿”å›çš„å‡½æ•°ã€‚è¿™ä¹Ÿå°±æ˜¯ç§æœ‰æ€§ã€‚</p></blockquote><p>é—­åŒ…çš„å½¢æˆå¾ˆç®€å•ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹å®Œæ¯•åï¼Œè¿”å›å‡½æ•°ï¼Œæˆ–è€…å°†å‡½æ•°å¾—ä»¥ä¿ç•™ä¸‹æ¥ï¼Œå³å½¢æˆé—­åŒ…ã€‚</p><h3 id="4ã€é—­åŒ…çš„ç¼ºç‚¹ï¼šé€ æˆå†…å­˜æ³„æ¼"><a href="#4ã€é—­åŒ…çš„ç¼ºç‚¹ï¼šé€ æˆå†…å­˜æ³„æ¼" class="headerlink" title="4ã€é—­åŒ…çš„ç¼ºç‚¹ï¼šé€ æˆå†…å­˜æ³„æ¼"></a>4ã€é—­åŒ…çš„ç¼ºç‚¹ï¼šé€ æˆå†…å­˜æ³„æ¼</h3><blockquote><p>å¦‚æœä¸€ä¸ªå¾ˆå¤§çš„å¯¹è±¡è¢«å‡½æ•°å¼•ç”¨ï¼Œæœ¬æ¥å‡½æ•°è°ƒç”¨ç»“æŸå°±èƒ½é”€æ¯ï¼Œä½†æ˜¯ç°åœ¨å¼•ç”¨å´è¢«é€šè¿‡é—­åŒ…ä¿å­˜åˆ°äº†å †é‡Œï¼Œè€Œä¸”è¿˜ä¸€ç›´ç”¨ä¸åˆ°ï¼Œé‚£è¿™å—å †å†…å­˜å°±ä¸€ç›´æ²¡æ³•ä½¿ç”¨ï¼Œä¸¥é‡åˆ°ä¸€å®šç¨‹åº¦å°±ç®—æ˜¯å†…å­˜æ³„æ¼äº†ã€‚æ‰€ä»¥é—­åŒ…ä¸è¦ä¹±ç”¨ï¼Œå°‘æ‰“åŒ…ä¸€ç‚¹ä¸œè¥¿åˆ°å †å†…å­˜ã€‚</p></blockquote><h4 id="äºŒã€ä½œç”¨åŸŸ"><a href="#äºŒã€ä½œç”¨åŸŸ" class="headerlink" title="äºŒã€ä½œç”¨åŸŸ"></a>äºŒã€ä½œç”¨åŸŸ</h4><h4 id="1ã€ä½œç”¨åŸŸ"><a href="#1ã€ä½œç”¨åŸŸ" class="headerlink" title="1ã€ä½œç”¨åŸŸ"></a>1ã€ä½œç”¨åŸŸ</h4><blockquote><p>ä½œç”¨åŸŸæ˜¯æŒ‡ç¨‹åºä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œè¯¥ä½ç½®å†³å®šäº†å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿå°±æ˜¯å˜é‡å’Œå‡½æ•°çš„å¯è®¿é—®èŒƒå›´ã€‚</p></blockquote><p>ä½œç”¨åŸŸåˆ†ä¸ºå‡½æ•°ä½œç”¨åŸŸã€å…¨å±€ä½œç”¨åŸŸ</p><blockquote><p>å…¨å±€ä½œç”¨åŸŸï¼šä»£ç åœ¨ç¨‹åºä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®ï¼Œä¾‹å¦‚windowå¯¹è±¡<br>å‡½æ•°ä½œç”¨åŸŸï¼š å›ºå®šä»£ç ç‰‡æ®µä¸­æ‰èƒ½è¢«è®¿é—®</p></blockquote><p>JavaScript å¼•æ“ä¼šæŠŠå†…å­˜åˆ†ä¸ºå‡½æ•°è°ƒç”¨æ ˆã€å…¨å±€ä½œç”¨åŸŸå’Œå †ï¼Œå…¶ä¸­å †ç”¨äºæ”¾ä¸€äº›åŠ¨æ€çš„å¯¹è±¡ï¼Œè°ƒç”¨æ ˆæ¯ä¸€ä¸ªæ ˆå¸§æ”¾ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª local å˜é‡ç¯å¢ƒç”¨äºæ”¾å†…éƒ¨å£°æ˜çš„ä¸€äº›å˜é‡ï¼Œå¦‚æœæ˜¯å¯¹è±¡ï¼Œä¼šåœ¨å †ä¸Šåˆ†é…ç©ºé—´ï¼Œç„¶åæŠŠå¼•ç”¨ä¿å­˜åœ¨æ ˆå¸§çš„ local ç¯å¢ƒä¸­ã€‚å…¨å±€ä½œç”¨åŸŸä¹Ÿæ˜¯ä¸€æ ·ï¼Œåªä¸è¿‡ä¸€èˆ¬ç”¨äºæ”¾é™æ€çš„ä¸€äº›ä¸œè¥¿ï¼Œæœ‰æ—¶å€™ä¹Ÿå«é™æ€åŸŸã€‚</p><p>æ¯ä¸ªæ ˆå¸§çš„æ‰§è¡Œä¸Šä¸‹æ–‡åŒ…å«å‡½æ•°æ‰§è¡Œéœ€è¦è®¿é—®çš„æ‰€æœ‰ç¯å¢ƒï¼ŒåŒ…æ‹¬ local ç¯å¢ƒã€ä½œç”¨åŸŸé“¾ã€thisç­‰ã€‚</p><p>ä½œç”¨åŸŸæœ€å¤§çš„ç”¨å¤„ï¼šéš”ç¦»å˜é‡ï¼Œä¸åŒä½œç”¨åŸŸä¸‹åŒåå˜é‡ä¸ä¼šæœ‰å†²çªã€‚</p><h4 id="2ã€ä½œç”¨åŸŸé“¾"><a href="#2ã€ä½œç”¨åŸŸé“¾" class="headerlink" title="2ã€ä½œç”¨åŸŸé“¾"></a>2ã€ä½œç”¨åŸŸé“¾</h4><blockquote><p>åœ¨ JavaScript é‡Œé¢ï¼Œå‡½æ•°ã€å—ã€æ¨¡å—éƒ½å¯ä»¥å½¢æˆä½œç”¨åŸŸï¼ˆä¸€ä¸ªå­˜æ”¾å˜é‡çš„ç‹¬ç«‹ç©ºé—´ï¼‰ï¼Œä»–ä»¬ä¹‹é—´å¯ä»¥ç›¸äº’åµŒå¥—ï¼Œä½œç”¨åŸŸä¹‹é—´ä¼šå½¢æˆå¼•ç”¨å…³ç³»ï¼Œè¿™æ¡é“¾å«åšä½œç”¨åŸŸé“¾ã€‚</p></blockquote><p>â¼€èˆ¬æƒ…å†µä¸‹ï¼Œå˜é‡å–å€¼åˆ°åˆ›å»ºè¿™ä¸ªå˜é‡çš„å‡½æ•°çš„ä½œâ½¤åŸŸä¸­å–å€¼ï¼Œä½†æ˜¯å¦‚æœåœ¨å½“å‰ä½œâ½¤åŸŸä¸­æ²¡æœ‰æŸ¥åˆ°å€¼ï¼Œå°±ä¼šå‘ä¸Šçº§ä½œâ½¤åŸŸå»æŸ¥ï¼Œç›´åˆ°æŸ¥åˆ°å…¨å±€ä½œâ½¤åŸŸï¼Œè¿™ä¹ˆâ¼€ä¸ªæŸ¥æ‰¾è¿‡ç¨‹å½¢æˆçš„é“¾æ¡å°±å«åšä½œâ½¤åŸŸé“¾ã€‚</p><h4 id="ä¸‰ã€åŸå‹é“¾"><a href="#ä¸‰ã€åŸå‹é“¾" class="headerlink" title="ä¸‰ã€åŸå‹é“¾"></a>ä¸‰ã€åŸå‹é“¾</h4><blockquote><p>å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§æ—¶ï¼Œä¼šå…ˆåœ¨è¿™ä¸ªå¯¹è±¡æœ¬èº«å±æ€§ä¸ŠæŸ¥æ‰¾ï¼Œ å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šå»å®ƒçš„__proto__éšå¼åŸå‹ä¸ŠæŸ¥æ‰¾ï¼Œå³å®ƒçš„æ„é€ å‡½æ•°çš„prototypeï¼Œ å¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ°å°±ä¼šå†åœ¨æ„é€ å‡½æ•°çš„prototypeçš„__proto__ä¸­æŸ¥æ‰¾ï¼Œ è¿™æ ·ä¸€å±‚ä¸€å±‚å‘ä¸ŠæŸ¥æ‰¾å°±ä¼šå½¢æˆä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œæˆ‘ä»¬ç§°ä¸ºåŸå‹é“¾ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>13ã€æ•´ç†javascriptçŸ¥è¯†(ä¸€)</title>
      <link href="/2020/01/12/javascript-simple/"/>
      <url>/2020/01/12/javascript-simple/</url>
      
        <content type="html"><![CDATA[<p>javascript æ•°æ®ç±»å‹ã€ç±»å‹æ£€æµ‹ã€ç±»å‹æ£€æµ‹å‡½æ•°çš„å°è£…ï¼ˆåŒ…æ‹¬çº¯ç²¹å¯¹è±¡ã€ç©ºå¯¹è±¡ã€window å¯¹è±¡ï¼‰ã€‚</p><span id="more"></span><h3 id="ä¸€ã€åŸºç¡€ç±»å‹åŠç±»å‹æ£€æµ‹"><a href="#ä¸€ã€åŸºç¡€ç±»å‹åŠç±»å‹æ£€æµ‹" class="headerlink" title="ä¸€ã€åŸºç¡€ç±»å‹åŠç±»å‹æ£€æµ‹"></a>ä¸€ã€åŸºç¡€ç±»å‹åŠç±»å‹æ£€æµ‹</h3><h4 id="1ã€åŸºç¡€ç±»å‹"><a href="#1ã€åŸºç¡€ç±»å‹" class="headerlink" title="1ã€åŸºç¡€ç±»å‹"></a>1ã€åŸºç¡€ç±»å‹</h4><blockquote><p>JavaScript æ•°æ®ç±»å‹åŒ…æ‹¬ï¼šNullã€Undefinedã€Booleanã€Numberã€Stringã€Symbolã€Bigint(7 ç§åŸå§‹ç±»å‹)ã€Object(å¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬ Object/Array/Date/Function/RegExp ç­‰)</p></blockquote><h4 id="2ã€ç±»å‹æ£€æµ‹"><a href="#2ã€ç±»å‹æ£€æµ‹" class="headerlink" title="2ã€ç±»å‹æ£€æµ‹"></a>2ã€ç±»å‹æ£€æµ‹</h4><h5 id="1-ã€typeof"><a href="#1-ã€typeof" class="headerlink" title="(1)ã€typeof"></a>(1)ã€typeof</h5><blockquote><p>7 ç§åŸå§‹ç±»å‹å¯ä»¥ä½¿ç”¨ typeof æ“ä½œç¬¦æ£€æŸ¥æ•°æ®ç±»å‹ï¼ˆå…¶ä¸­ï¼Œtypeof null === â€˜objectâ€™ï¼‰</p></blockquote><p>æ£€æŸ¥ Object æ´¾ç”Ÿå‡ºæ¥çš„ç»“æ„ç±»å‹ï¼Œä½¿ç”¨ typeof æ˜¯ä¸è¡Œçš„ï¼Œ ä¼šä¸€ç›´ === â€˜objectâ€™,é€šå¸¸ä½¿ç”¨ instanceof æ£€æŸ¥ Object ç§ç±»ï¼ˆè¿™æ ·è¿˜æ˜¯å­˜åœ¨è¯¯å·®ï¼‰ã€‚</p><h5 id="ï¼ˆ2-ã€instanceof"><a href="#ï¼ˆ2-ã€instanceof" class="headerlink" title="ï¼ˆ2)ã€instanceof"></a>ï¼ˆ2)ã€instanceof</h5><blockquote><p>instanceof è¿ç®—ç¬¦æ˜¯ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚</p></blockquote><p>Tips: æ£€æµ‹å¯¹è±¡ä¸æ˜¯æŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹</p><pre><code class="js">if (!(mycar instanceof Car)) &#123;  // do something&#125;// ä¸Šé¢ä»£ç å’Œä¸‹é¢ä»£ç å®Œå…¨ä¸åŒï¼Œä¸‹é¢çš„ä»£ç !mycarä¼šåœ¨instanceofä¹‹å‰è¢«éªŒè¯if (!mycar instanceof Car) &#123;&#125;</code></pre><h5 id="ï¼ˆ3-ã€Object-prototype-toString-call"><a href="#ï¼ˆ3-ã€Object-prototype-toString-call" class="headerlink" title="ï¼ˆ3)ã€Object.prototype.toString().call()"></a>ï¼ˆ3)ã€Object.prototype.toString().call()</h5><blockquote><p>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª toString()æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ toString() æ¥è·å–æ¯ä¸ªå¯¹è±¡çš„ç±»å‹ã€‚ä¸ºäº†æ¯ä¸ªå¯¹è±¡éƒ½èƒ½é€šè¿‡ Object.prototype.toString() æ¥æ£€æµ‹ï¼Œéœ€è¦ä»¥ Function.prototype.call() æˆ–è€… Function.prototype.apply() çš„å½¢å¼æ¥è°ƒç”¨ï¼Œä¼ é€’è¦æ£€æŸ¥çš„å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç§°ä¸º thisArgã€‚</p></blockquote><p>è°ƒç”¨ Object.prototype.toString ä¼šè¿”å›ä¸€ä¸ªç”± â€œ[object â€œ å’Œ class å’Œ â€œ]â€ ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œè€Œ class æ˜¯è¦åˆ¤æ–­çš„å¯¹è±¡çš„å†…éƒ¨å±æ€§ã€‚</p><p>(çœ‹äº†åˆ«äººç¿»è¯‘çš„es5è§„èŒƒï¼Œè®²è§£è¿™ä¸ªtoStringï¼ˆï¼‰å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š)<br>å½“toStringæ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œæ‰§è¡Œæ­¥éª¤ä¸ºï¼š</p><blockquote><p>1ã€å¦‚æœ this å€¼æ˜¯ undefinedï¼Œå°±è¿”å› [object Undefined]<br>2ã€å¦‚æœ this çš„å€¼æ˜¯ nullï¼Œå°±è¿”å› [object Null]<br>3ã€è®© O æˆä¸º ToObject(this) çš„ç»“æœ<br>4ã€è®© class æˆä¸º O çš„å†…éƒ¨å±æ€§ [[Class]] çš„å€¼<br>5ã€æœ€åè¿”å›ç”± â€œ[object â€œ å’Œ class å’Œ â€œ]â€ ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆçš„å­—ç¬¦ä¸²</p></blockquote><pre><code class="js">// ä»¥ä¸‹æ˜¯11ç§ï¼švar number = 1; // [object Number]var string = &quot;123&quot;; // [object String]var boolean = true; // [object Boolean]var und = undefined; // [object Undefined]var nul = null; // [object Null]var obj = &#123; a: 1 &#125;; // [object Object]var array = [1, 2, 3]; // [object Array]var date = new Date(); // [object Date]var error = new Error(); // [object Error]var reg = /a/g; // [object RegExp]var func = function a() &#123;&#125;; // [object Function]function checkType() &#123;  for (var i = 0; i &lt; arguments.length; i++) &#123;    console.log(Object.prototype.toString.call(arguments[i]));  &#125;&#125;checkType(  number,  string,  boolean,  und,  nul,  obj,  array,  date,  error,  reg,  func);// é™¤äº†ä»¥ä¸Š11ç§ï¼Œè¿˜åŒ…æ‹¬console.log(Object.prototype.toString.call(Math)); // [object Math]console.log(Object.prototype.toString.call(JSON)); // [object JSON]// è¿˜å¯ä»¥è¿™æ ·function a() &#123;  console.log(Object.prototype.toString.call(arguments)); // [object Arguments]&#125;a();</code></pre><h5 id="ï¼ˆ4-ã€å°è£…ä¸€ä¸ª-type-å‡½æ•°"><a href="#ï¼ˆ4-ã€å°è£…ä¸€ä¸ª-type-å‡½æ•°" class="headerlink" title="ï¼ˆ4)ã€å°è£…ä¸€ä¸ª type å‡½æ•°"></a>ï¼ˆ4)ã€å°è£…ä¸€ä¸ª type å‡½æ•°</h5><p>å†™ä¸€ä¸ª type å‡½æ•°æ£€æµ‹å„ç§ç±»å‹çš„å€¼,è€ƒè™‘åˆ°å…¼å®¹æ€§ï¼ˆIE6ï¼Œnull å’Œ undefined ä¼šè¢« Obejct.prototype.toString è¯†åˆ«ä¸º[object Obejct]ï¼‰</p><pre><code class="js">var class2type = &#123;&#125;;// ç”Ÿæˆclass2typeæ˜ å°„&quot;Boolean Number String Function Array Date RegExp Object Error&quot;  .split(&quot; &quot;)  .map(function (item, index) &#123;    class2type[&quot;[object &quot; + item + &quot;]&quot;] = item.toLowerCase();  &#125;);function type(obj) &#123;  // ä¸€ç®­åŒé›•  if (obj == null) &#123;    return obj + &quot;&quot;;  &#125;  return typeof obj === &quot;object&quot; || typeof obj === &quot;function&quot;    ? class2type[Object.prototype.toString.call(obj)] || &quot;object&quot;    : typeof obj;&#125;</code></pre><h5 id="ï¼ˆ5-ã€å‡½æ•°ç±»å‹çš„æ£€æµ‹"><a href="#ï¼ˆ5-ã€å‡½æ•°ç±»å‹çš„æ£€æµ‹" class="headerlink" title="ï¼ˆ5)ã€å‡½æ•°ç±»å‹çš„æ£€æµ‹"></a>ï¼ˆ5)ã€å‡½æ•°ç±»å‹çš„æ£€æµ‹</h5><pre><code class="js">// typeå‡½æ•°function isFunction(obj) &#123;  return type(obj) === &quot;function&quot;;&#125;</code></pre><h5 id="ï¼ˆ6-ã€çº¯ç²¹å¯¹è±¡çš„æ£€æµ‹"><a href="#ï¼ˆ6-ã€çº¯ç²¹å¯¹è±¡çš„æ£€æµ‹" class="headerlink" title="ï¼ˆ6)ã€çº¯ç²¹å¯¹è±¡çš„æ£€æµ‹"></a>ï¼ˆ6)ã€çº¯ç²¹å¯¹è±¡çš„æ£€æµ‹</h5><p>ä»€ä¹ˆæ˜¯çº¯ç²¹å¯¹è±¡ï¼Ÿ</p><blockquote><p>è¯¥å¯¹è±¡æ˜¯é€šè¿‡ â€œ{}â€ æˆ– â€œnew Objectâ€ åˆ›å»ºçš„ï¼Œè¯¥å¯¹è±¡å«æœ‰é›¶ä¸ªæˆ–è€…å¤šä¸ªé”®å€¼å¯¹ã€‚</p></blockquote><pre><code class="js">// ä¸Šé¢å†™ type å‡½æ•°æ—¶ï¼Œç”¨æ¥å­˜æ”¾ toString æ˜ å°„ç»“æœçš„å¯¹è±¡var class2type = &#123;&#125;;// ç›¸å½“äº Object.prototype.toStringvar toString = class2type.toString;// ç›¸å½“äº Object.prototype.hasOwnPropertyvar hasOwn = class2type.hasOwnProperty;function isPlainObject(obj) &#123;  var proto, Ctor;  // æ’é™¤æ‰æ˜æ˜¾ä¸æ˜¯objçš„ä»¥åŠä¸€äº›å®¿ä¸»å¯¹è±¡å¦‚Window  if (!obj || toString.call(obj) !== &quot;[object Object]&quot;) &#123;    return false;  &#125;  /**   * getPrototypeOf es5 æ–¹æ³•ï¼Œè·å– obj çš„åŸå‹   * ä»¥ new Object åˆ›å»ºçš„å¯¹è±¡ä¸ºä¾‹çš„è¯   * obj.__proto__ === Object.prototype   */  proto = Object.getPrototypeOf(obj);  // æ²¡æœ‰åŸå‹çš„å¯¹è±¡æ˜¯çº¯ç²¹çš„ï¼ŒObject.create(null) å°±åœ¨è¿™é‡Œè¿”å› true  if (!proto) &#123;    return true;  &#125;  /**   * ä»¥ä¸‹åˆ¤æ–­é€šè¿‡ new Object æ–¹å¼åˆ›å»ºçš„å¯¹è±¡   * åˆ¤æ–­ proto æ˜¯å¦æœ‰ constructor å±æ€§ï¼Œå¦‚æœæœ‰å°±è®© Ctor çš„å€¼ä¸º proto.constructor   * å¦‚æœæ˜¯ Object å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼ŒCtor åœ¨è¿™é‡Œå°±ç­‰äº Object æ„é€ å‡½æ•°   */  Ctor = hasOwn.call(proto, &quot;constructor&quot;) &amp;&amp; proto.constructor;  // åœ¨è¿™é‡Œåˆ¤æ–­ Ctor æ„é€ å‡½æ•°æ˜¯ä¸æ˜¯ Object æ„é€ å‡½æ•°ï¼Œç”¨äºåŒºåˆ†è‡ªå®šä¹‰æ„é€ å‡½æ•°å’Œ Object æ„é€ å‡½æ•°  return (    typeof Ctor === &quot;function&quot; &amp;&amp;    hasOwn.toString.call(Ctor) === hasOwn.toString.call(Object)  );&#125;</code></pre><h5 id="ï¼ˆ7-ã€ç©ºå¯¹è±¡çš„åˆ¤æ–­"><a href="#ï¼ˆ7-ã€ç©ºå¯¹è±¡çš„åˆ¤æ–­" class="headerlink" title="ï¼ˆ7)ã€ç©ºå¯¹è±¡çš„åˆ¤æ–­"></a>ï¼ˆ7)ã€ç©ºå¯¹è±¡çš„åˆ¤æ–­</h5><pre><code class="js">function isEmptyObject(obj) &#123;  var name;  for (name in obj) &#123;    return false;  &#125;  return true;&#125;</code></pre><h5 id="ï¼ˆ8-ã€window-å¯¹è±¡çš„åˆ¤æ–­"><a href="#ï¼ˆ8-ã€window-å¯¹è±¡çš„åˆ¤æ–­" class="headerlink" title="ï¼ˆ8)ã€window å¯¹è±¡çš„åˆ¤æ–­"></a>ï¼ˆ8)ã€window å¯¹è±¡çš„åˆ¤æ–­</h5><pre><code class="js">function isWindow(obj) &#123;  return obj != null &amp;&amp; obj === obj.window;&#125;</code></pre><h5 id="ï¼ˆ9-ã€æ•°ç»„ç±»å‹çš„æ£€æµ‹"><a href="#ï¼ˆ9-ã€æ•°ç»„ç±»å‹çš„æ£€æµ‹" class="headerlink" title="ï¼ˆ9)ã€æ•°ç»„ç±»å‹çš„æ£€æµ‹"></a>ï¼ˆ9)ã€æ•°ç»„ç±»å‹çš„æ£€æµ‹</h5><pre><code class="js">// åˆ¤æ–­Array.isArray()æ–¹æ³•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œä¸å­˜åœ¨å°±ä½¿ç”¨typeå‡½æ•°var isArray =  Array.isArray ||  function (obj) &#123;    return type(obj) === &quot;array&quot;;  &#125;;</code></pre><h5 id="ï¼ˆ10-ã€ç±»æ•°ç»„çš„åˆ¤æ–­"><a href="#ï¼ˆ10-ã€ç±»æ•°ç»„çš„åˆ¤æ–­" class="headerlink" title="ï¼ˆ10)ã€ç±»æ•°ç»„çš„åˆ¤æ–­"></a>ï¼ˆ10)ã€ç±»æ•°ç»„çš„åˆ¤æ–­</h5><p>æ»¡è¶³çš„ä¸‰ä¸ªæ¡ä»¶ï¼š</p><blockquote><p>1ã€æ˜¯æ•°ç»„<br>2ã€é•¿åº¦ä¸º 0<br>3ã€lengths å±æ€§æ˜¯å¤§äº 0 çš„æ•°å­—ç±»å‹ï¼Œå¹¶ä¸” obj[length - 1]å¿…é¡»å­˜åœ¨</p></blockquote><pre><code class="js">function isArrayLike(obj) &#123;  // obj å¿…é¡»æœ‰ lengthå±æ€§  var length = !!obj &amp;&amp; &quot;length&quot; in obj &amp;&amp; obj.length;  var typeRes = type(obj);  // æ’é™¤æ‰å‡½æ•°å’Œ Window å¯¹è±¡  if (typeRes === &quot;function&quot; || isWindow(obj)) &#123;    return false;  &#125;  return (    typeRes === &quot;array&quot; ||    length === 0 ||    (typeof length === &quot;number&quot; &amp;&amp; length &gt; 0 &amp;&amp; length - 1 in obj)  );&#125;</code></pre><p>å‡½æ•°åº“çš„å®ç°ï¼Œå¦‚ï¼šunderscore</p><pre><code class="js">var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;var isArrayLike = function (collection) &#123;  var length = getLength(collection);  return typeof length == &quot;number&quot; &amp;&amp; length &gt;= 0 &amp;&amp; length &lt;= MAX_ARRAY_INDEX;&#125;;</code></pre><h5 id="11-ã€åˆ¤æ–­æ˜¯ä¸æ˜¯-DOM-å…ƒç´ "><a href="#11-ã€åˆ¤æ–­æ˜¯ä¸æ˜¯-DOM-å…ƒç´ " class="headerlink" title="(11)ã€åˆ¤æ–­æ˜¯ä¸æ˜¯ DOM å…ƒç´ "></a>(11)ã€åˆ¤æ–­æ˜¯ä¸æ˜¯ DOM å…ƒç´ </h5><pre><code class="js">var isElement = function (obj) &#123;  return !!(obj &amp;&amp; obj.nodeType === 1);&#125;;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>12ã€ä¸‹æ‹‰æ¡†selecté“¶è¡Œå¡å·æ ¼å¼å¤„ç†</title>
      <link href="/2019/12/29/select/"/>
      <url>/2019/12/29/select/</url>
      
        <content type="html"><![CDATA[<p>é“¶è¡Œå¡å·æ˜¾ç¤ºä¸º 6217 **** 0000 çš„æ ¼å¼</p><span id="more"></span><p>ä»¥é€‰æ‹©é“¶è¡Œå¡ä¸ºä¾‹ï¼š</p><pre><code class="js">    &lt;select v-model=&quot;selected&quot; class=&quot;selected&quot;&gt;        &lt;option disabled value v-show=&quot;showBankCard&quot;&gt;è¯·é€‰æ‹©æç°åˆ°è´¦çš„é“¶è¡Œå¡&lt;/option&gt;        &lt;option            v-for=&quot;item in BankCardList&quot;            :key=&quot;item.id&quot;            v-bind:value=&quot;item.id&quot;        &gt;            &#123;&#123; item.card_no &#125;&#125;        &lt;/option&gt;    &lt;/select&gt;</code></pre><pre><code class="js">item.card_no ? item.card_no.replace(/^(\d&#123;4&#125;)\d+(\d&#123;4&#125;)$/,&quot;$1****$2&quot;):&quot;&quot;// é“¶è¡Œå¡å·æ˜¾ç¤ºä¸º 6217 **** 0000 çš„æ ¼å¼ã€‚</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>11ã€äºŒç»´ç çš„ç”Ÿæˆ</title>
      <link href="/2019/12/28/qrcode/"/>
      <url>/2019/12/28/qrcode/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ qrcode ç”ŸæˆäºŒç»´ç </p><span id="more"></span><p>ä¸€ã€ä¸‹è½½æ’ä»¶ qrcode æ’ä»¶</p><pre><code class="js">    npm install qrcode --save</code></pre><p>äºŒã€åœ¨ main.js ä¸­å¼•ç”¨</p><pre><code class="js">import QRCode from &quot;qrcode&quot;;Vue.use(QRCode);</code></pre><p>ä¸‰ã€ç»„ä»¶ä¸­å¼•å…¥ QRCode</p> <details> <summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary> <pre><code class="html">    &lt;template&gt;        &lt;div&gt;            &lt;div id=&quot;qrcode&quot;&gt;&lt;/div&gt;        &lt;/div&gt;    &lt;/template&gt;</code></pre><pre><code class="js">    &lt;script&gt;      import QRCode from &#39;qrcode&#39;;      mounted()&#123;          this.CreateQrcode();      &#125;,      method:&#123;          setTimeout(() =&gt; &#123;              // è·å–DOMèŠ‚ç‚¹              let dom = document.getElementById(&#39;qrcode);              // è·¯ç”±ä¼ å‚              const res = this.$route.params;              const lbsid = res.id;              // äºŒç»´ç åŒ…å«çš„URL éœ€è¦å°†URLå’Œidåšä¸€ä¸‹å­—ç¬¦ä¸²çš„æ‹¼æ¥              let url = &#39;http://*********&#39;;              let URL = url.concat(lbsid);              let qrCode = new QRCode(dom,&#123;                  width:260, // å›¾åƒå®½åº¦                  height:260,  // å›¾åƒé«˜åº¦                  colorDark:&quot;#000000&quot;,  // å‰æ™¯è‰²                  colorLight:&quot;#ffffff&quot;, // èƒŒæ™¯è‰²                  correctLevel: QRCode.CorrectLevel.H  // å®¹é”™ç­‰çº§              &#125;);              qrCode.clear();              qrCode.makeCode(URL);          &#125;,100)      &#125;    &lt;/script&gt;    &lt;style lang=&quot;less&quot; scoped&gt;        #qrcode &#123;            display: inline-block;            margin-top: 6rem;            img &#123;                width: 60%;                height: 60%;                background-color: #fff; //è®¾ç½®ç™½è‰²èƒŒæ™¯è‰²                padding: 6px; // åˆ©ç”¨paddingçš„ç‰¹æ€§ï¼ŒæŒ¤å‡ºç™½è¾¹  &#125;&#125;    &lt;/style&gt;</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>10ã€å¾®ä¿¡å…¬ä¼—å·ç½‘é¡µä½¿ç”¨popstateäº‹ä»¶</title>
      <link href="/2019/12/23/popstate/"/>
      <url>/2019/12/23/popstate/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä½•åœ¨h5ç§»åŠ¨ç«¯ç¦æ­¢æŸä¸€äº›é¡µé¢ä½¿ç”¨è™šæ‹Ÿè¿”å›é”®ã€‚</p><span id="more"></span><h3 id="1ã€popstateäº‹ä»¶"><a href="#1ã€popstateäº‹ä»¶" class="headerlink" title="1ã€popstateäº‹ä»¶"></a>1ã€popstateäº‹ä»¶</h3><p>MDNä¸Šæ˜¯è¿™æ ·ä»‹ç»popstateçš„ï¼š<br>    å½“æ´»åŠ¨å†å²è®°å½•æ¡ç›®æ›´æ”¹æ—¶ï¼Œå°†è§¦å‘popstateäº‹ä»¶ã€‚å¦‚æœè¢«æ¿€æ´»çš„å†å²è®°å½•æ¡ç›®æ˜¯é€šè¿‡å¯¹history.pushStateï¼ˆï¼‰çš„è°ƒç”¨åˆ›å»ºçš„ï¼Œæˆ–è€…å—åˆ°å¯¹history.replaceStateï¼ˆï¼‰çš„è°ƒç”¨çš„å½±å“ï¼Œpopstateäº‹ä»¶çš„stateå±æ€§åŒ…å«å†å²æ¡ç›®çš„çŠ¶æ€å¯¹è±¡çš„å‰¯æœ¬ã€‚<br>    éœ€è¦æ³¨æ„çš„æ˜¯è°ƒç”¨history.pushState()æˆ–history.replaceState()ä¸ä¼šè§¦å‘popstateäº‹ä»¶ã€‚åªæœ‰åœ¨åšå‡ºæµè§ˆå™¨åŠ¨ä½œæ—¶ï¼Œæ‰ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼Œå¦‚ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨çš„å›é€€æŒ‰é’®ï¼ˆæˆ–è€…åœ¨Javascriptä»£ç ä¸­è°ƒç”¨history.back()æˆ–è€…history.forward()æ–¹æ³•ï¼‰<br>    ä¸åŒçš„æµè§ˆå™¨åœ¨åŠ è½½é¡µé¢æ—¶å¤„ç†popstateäº‹ä»¶çš„å½¢å¼å­˜åœ¨å·®å¼‚ã€‚é¡µé¢åŠ è½½æ—¶Chromeå’ŒSafarié€šå¸¸ä¼šè§¦å‘(emit )popstateäº‹ä»¶ï¼Œä½†Firefoxåˆ™ä¸ä¼šã€‚<br>    æˆ‘è´Ÿè´£çš„ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œåœ¨å¾®ä¿¡å…¬ä¼—å·ç½‘é¡µçš„æŸä¸€ä¸ªé¡µé¢éœ€è¦ç¦æ­¢ä½¿ç”¨å¾®ä¿¡æµè§ˆå™¨çš„è¿”å›é”®ã€‚</p><h3 id="2ã€è§£å†³æ–¹å¼ï¼š"><a href="#2ã€è§£å†³æ–¹å¼ï¼š" class="headerlink" title="2ã€è§£å†³æ–¹å¼ï¼š"></a>2ã€è§£å†³æ–¹å¼ï¼š</h3><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="js">// åœ¨ç¦æ­¢è¿”å›çš„ç»„ä»¶çš„methodsä¸­å†™ä¸€ä¸ªæ–¹æ³•forbidBackforbidBack()&#123;    window.history.pushState(&quot;forward&quot;,null,&quot;#&quot;);    window.history.forward(1);&#125;// ç›‘å¬è¿”å›é”®ï¼Œç¦æ­¢è¿”å›ä¹‹å‰çš„è·¯ç”±if(window.history &amp;&amp; window.history.pushState)&#123;    window.addEventListener(&quot;popstate&quot;,this.forbidBack,false);    this.forbidBack();&#125;//ç¦»å¼€é¡µé¢éœ€è¦é”€æ¯ç›‘å¬window.removeEventListener(&quot;popstate&quot;,this.forbidBack,fasle);</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>9ã€h5æ‰«ç åŠŸèƒ½çš„å®ç°</title>
      <link href="/2019/12/20/h5-scan/"/>
      <url>/2019/12/20/h5-scan/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨H5 API barcodeå®ç°æ‰«ç ã€‚</p><span id="more"></span><pre><code class="html">&lt;template&gt;    &lt;div&gt;        &lt;div @click=&quot;handleCloseScan&quot;&gt;X&lt;/div&gt;        &lt;div class=&quot;scan&quot;&gt;            &lt;div id=&quot;bcid&quot;&gt;&lt;/div&gt;            &lt;div&gt;                &lt;button @click=&quot;handleStartScan&quot;&gt;æ‰« ç &lt;/button&gt;            &lt;/div&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/template&gt;</code></pre><details><summary>ç‚¹å‡»å±•ç¤ºjsä»£ç </summary><pre><code class="js">    &lt;script&gt;        // æ‰«æå¯¹è±¡        var scan = null;        methods:&#123;            // å¼€å§‹æ‰«æ            handleStartScan()&#123;                const that = this;                if(!window.plus) return;                scan = new plus.barcode.Barcode(&#39;bcid&#39;);                // å¼€å§‹æ‰«æ                scan.start();                // æ‰«ç æˆåŠŸä¹‹åçš„å›è°ƒå‡½æ•° typeæ˜¯ç±»å‹ result ç»“æœ                scan.onmarked = function(type,result)&#123;                    const text = &#39;&#39;;                    switch(type)&#123;                        case plus.barcode.QR:                            type = &#39;QR&#39;;                            break;                        case plus.barcode.EAN13:                            type = &quot;EAN13&quot;;                            break;                        case plus.barcode.EAN8:                            type = &quot;EAN8&quot;;                            break;                        default:                            type = &quot;å…¶å®ƒ&quot; + type;                            break;                    &#125;                    result = result.replace(/\n/g,&quot;&quot;);                    const id = result.match(/\d+/)[0];                    that.$router.push(&#123;                        name:&#39;ComponentName&#39;,                        params: &#123;                            id:id                        &#125;                    &#125;);                    scan.close();                &#125;            &#125;,            // å…³é—­æ‰«ææ§ä»¶            handleCloseScan()&#123;                 if(!window.plus) return;                 scan.close();                 this.$router.push(&#39;/&#39;);            &#125;        &#125;&#125;    &lt;/script&gt;</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> h5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>8ã€è§£å†³Vueé¡¹ç›®çƒ­æ›´æ–°æ‰“åŒ…æ—¶é—´è¿‡é•¿</title>
      <link href="/2019/12/11/hot/"/>
      <url>/2019/12/11/hot/</url>
      
        <content type="html"><![CDATA[<p>ç»´æŠ¤å…¬å¸ä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œå‘ç°åœ¨é¡¹ç›®å¯åŠ¨ã€çƒ­æ›´æ–°å’Œæ‰“åŒ…é¡¹ç›®çš„æ—¶å€™ï¼Œæ—¶é—´é•¿çš„â€œæ„Ÿäººâ€ã€‚</p><span id="more"></span><p>å½“ä½ æ”¹åŠ¨é¡¹ç›®çš„ä¸€äº›åœ°æ–¹æƒ³è¦ç«‹å³çœ‹åˆ°æ•ˆæœçš„æ—¶å€™ï¼Œå´å‘ç°çƒ­æ›´æ–°çš„ç¼–è¯‘è¿‡ç¨‹å´èŠ±äº†ä½ å¾ˆé•¿æ—¶é—´ï¼Œâ€œå¿ƒæ€å´©äº†ã€‚ã€‚ã€‚â€ã€‚</p><h3 id="1ã€è§£å†³Vueé¡¹ç›®çƒ­æ›´æ–°æ‰“åŒ…æ—¶é—´è¿‡é•¿"><a href="#1ã€è§£å†³Vueé¡¹ç›®çƒ­æ›´æ–°æ‰“åŒ…æ—¶é—´è¿‡é•¿" class="headerlink" title="1ã€è§£å†³Vueé¡¹ç›®çƒ­æ›´æ–°æ‰“åŒ…æ—¶é—´è¿‡é•¿"></a>1ã€è§£å†³Vueé¡¹ç›®çƒ­æ›´æ–°æ‰“åŒ…æ—¶é—´è¿‡é•¿</h3><p>è§£å†³æ–¹æ³•ï¼š</p><p>1ã€ä½¿ç”¨html-webpack-plugin-for-multihtmlæ’ä»¶</p><p>2ã€åœ¨build-webpack.dev.conf.jsæ–‡ä»¶ä¸­</p><pre><code class="js">    const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);    // æ›¿æ¢æˆ    const HtmlWebpackPlugin = require(&#39;html-webpack-plugin-for-multihtml&#39;);</code></pre><p>3ã€multihtmlCache:true  è§£å†³å¤šé¡µçƒ­éƒ¨ç½²çš„å…³é”®</p><pre><code class="js">for (var pathname in pages) &#123;  // é…ç½®ç”Ÿæˆçš„htmlæ–‡ä»¶ï¼Œå®šä¹‰è·¯å¾„ç­‰  var conf = &#123;    filename: pathname + &#39;.html&#39;,    template: pages[pathname],   // æ¨¡æ¿è·¯å¾„    inject: true,              // jsæ’å…¥ä½ç½®    multihtmlCache: true,    // è§£å†³å¤šé¡µçƒ­éƒ¨ç½²çš„å…³é”® è¿™é‡Œè¿™é‡Œè¿™é‡Œè¿™é‡Œè¿™é‡Œå¾ˆé‡è¦ï¼ï¼ï¼    // necessary to consistently work with multiple chunks via CommonsChunkPlugin    chunksSortMode: &#39;dependency&#39;  &#125;;  if (pathname in devWebpackConfig.entry) &#123;    conf.chunks = [&#39;manifest&#39;,&#39;vendor&#39;, pathname];    conf.hash = false;  &#125;  devWebpackConfig.plugins.push(new HtmlWebpackPlugin(conf));&#125;</code></pre><p>4ã€router.jsä¸­ä½¿ç”¨è·¯ç”±æ‡’åŠ è½½</p><p>è¿™æ—¶å€™å†å¯åŠ¨é¡¹ç›®ï¼Œçƒ­æ›´æ–°ã€ç¼–è¯‘å’Œæ‰“åŒ…çš„é€Ÿåº¦ä¼šå¤§å¤§æå‡ã€‚</p><h3 id="2ã€é¡¹ç›®æ‰“åŒ…ç”±4Må˜ä¸º1M"><a href="#2ã€é¡¹ç›®æ‰“åŒ…ç”±4Må˜ä¸º1M" class="headerlink" title="2ã€é¡¹ç›®æ‰“åŒ…ç”±4Må˜ä¸º1M"></a>2ã€é¡¹ç›®æ‰“åŒ…ç”±4Må˜ä¸º1M</h3><p>å…¬å¸æœ‰ä¸€ä¸ªH5å¾®ä¿¡å…¬ä¼—å·ç½‘é¡µçš„é¡¹ç›®ï¼Œé¡¹ç›®æ‰“åŒ…ä¹‹åæ–‡ä»¶æœ‰4Mï¼›</p><p>ä¿®æ”¹webpack.prod.conf.jsé‡Œçš„UglifyJsPluginï¼Œè¿™é‡Œçš„æ„æ€æ˜¯æ‰“åŒ…åä¸äº§ç”Ÿåç¼€åä¸º.mapçš„æ–‡ä»¶ã€‚</p><pre><code class="javascript">webpack.prod.conf.js    new UglifyJsPlugin(&#123;      uglifyOptions: &#123;        compress: &#123;          warnings: false        &#125;      &#125;,      // sourceMap: config.build.productionSourceMap, å°†è¿™è¡Œä»£ç æ³¨é‡Šæ‰ã€‚      parallel: true    &#125;)</code></pre><p>å¤„ç†åæ‰“åŒ…çš„æ–‡ä»¶çš„å¤§å°ä¸º1M</p>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7ã€markdownè¯­æ³•</title>
      <link href="/2019/12/05/markdown/"/>
      <url>/2019/12/05/markdown/</url>
      
        <content type="html"><![CDATA[<p>markdownè¯­æ³•æ•´ç†</p><span id="more"></span><p>Markdownæ ‡é¢˜</p><p>ä½¿ç”¨#å·æ ‡è®°ï¼Œä½¿ç”¨ # å·å¯è¡¨ç¤º 1-6 çº§æ ‡é¢˜ï¼Œä¸€çº§æ ‡é¢˜å¯¹åº”ä¸€ä¸ª # å·ï¼ŒäºŒçº§æ ‡é¢˜å¯¹åº”ä¸¤ä¸ª # å·ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>1ã€Markdownæ®µè½</p><p>æ®µè½çš„æ¢è¡Œæ˜¯ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šç©ºæ ¼åŠ ä¸Šå›è½¦ã€‚</p><blockquote><p>å­—ä½“:</p></blockquote><pre><code>*æ–œä½“æ–‡æœ¬*</code></pre><pre><code>_æ–œä½“æ–‡æœ¬_</code></pre><pre><code>**ç²—ä½“æ–‡æœ¬**</code></pre><pre><code>__ç²—ä½“æ–‡æœ¬__</code></pre><pre><code>***ç²—æ–œä½“æ–‡æœ¬***</code></pre><pre><code>___ç²—æ–œä½“æ–‡æœ¬___</code></pre><blockquote><p>åˆ†å‰²çº¿</p></blockquote><pre><code>**** * ******- - -----------</code></pre><blockquote><p>åˆ é™¤çº¿ã€ä¸‹åˆ’çº¿ã€è„šæ³¨</p></blockquote><pre><code>~~åˆ é™¤çº¿~~&lt;u&gt;ä¸‹åˆ’çº¿&lt;/u&gt;[^Vue]:Vuejsæ˜¯ç›®å‰æœ€æµè¡Œçš„webå¼€å‘æ¡†æ¶ä¹‹ä¸€ã€‚</code></pre><p>2ã€Markdownåˆ—è¡¨</p><p>Markdown æ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚</p><p>ï¼ˆ1ï¼‰ã€æ— åºåˆ—è¡¨ä½¿ç”¨æ˜Ÿå·(*)ã€åŠ å·(+)æˆ–æ˜¯å‡å·(-)ä½œä¸ºåˆ—è¡¨æ ‡è®°ï¼Œè¿™äº›æ ‡è®°åé¢è¦æ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œç„¶åå†å¡«å†™å†…å®¹ï¼š</p><pre><code>* ç¬¬ä¸€é¡¹* ç¬¬äºŒé¡¹* ç¬¬ä¸‰é¡¹+ ç¬¬ä¸€é¡¹+ ç¬¬äºŒé¡¹+ ç¬¬ä¸‰é¡¹- ç¬¬ä¸€é¡¹- ç¬¬äºŒé¡¹- ç¬¬ä¸‰é¡¹</code></pre><p>ï¼ˆ2ï¼‰ã€æœ‰åºåˆ—è¡¨ï¼šæœ‰åºåˆ—è¡¨ä½¿ç”¨æ•°å­—å¹¶åŠ ä¸Š . å·æ¥è¡¨ç¤ºã€‚</p><pre><code>1. ç¬¬ä¸€é¡¹2. ç¬¬äºŒé¡¹3. ç¬¬ä¸‰é¡¹</code></pre><p>ï¼ˆ3ï¼‰ã€åˆ—è¡¨åµŒå¥—ï¼šåˆ—è¡¨åµŒå¥—åªéœ€åœ¨å­åˆ—è¡¨ä¸­çš„é€‰é¡¹å‰é¢æ·»åŠ å››ä¸ªç©ºæ ¼å³å¯</p><pre><code>1. ç¬¬ä¸€é¡¹ï¼š    - ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´     - ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ 2. ç¬¬äºŒé¡¹ï¼š    - ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´     - ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </code></pre><p>4ã€MarkdownåŒºå—</p><p>Markdown åŒºå—å¼•ç”¨æ˜¯åœ¨æ®µè½å¼€å¤´ä½¿ç”¨ &gt; ç¬¦å· ï¼Œç„¶ååé¢ç´§è·Ÿä¸€ä¸ªç©ºæ ¼ç¬¦å·</p><blockquote><p>åŒºå—çš„åµŒå¥—</p></blockquote><pre><code>&gt; æœ€å¤–å±‚&gt; &gt; ç¬¬ä¸€å±‚åµŒå¥—&gt; &gt; &gt; ç¬¬äºŒå±‚åµŒå¥—</code></pre><blockquote><p>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨</p></blockquote><pre><code>&gt; åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨&gt; 1. ç¬¬ä¸€é¡¹&gt; 2. ç¬¬äºŒé¡¹&gt; + ç¬¬ä¸€é¡¹&gt; + ç¬¬äºŒé¡¹&gt; + ç¬¬ä¸‰é¡¹</code></pre><blockquote><p>åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—</p></blockquote><p>å¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›åŒºå—ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ &gt; å‰æ·»åŠ å››ä¸ªç©ºæ ¼çš„ç¼©è¿›</p><pre><code>* ç¬¬ä¸€é¡¹    &gt; vuejs    &gt; JavaScriptæ¡†æ¶* ç¬¬äºŒé¡¹</code></pre><p>5ã€Markdowné“¾æ¥å’Œå›¾ç‰‡</p><blockquote><p>é“¾æ¥</p></blockquote><pre><code>[é“¾æ¥åç§°](é“¾æ¥åœ°å€)æˆ–è€…&lt;é“¾æ¥åœ°å€&gt;</code></pre><blockquote><p>å›¾ç‰‡</p></blockquote><pre><code>![alt å±æ€§æ–‡æœ¬](å›¾ç‰‡åœ°å€)![alt å±æ€§æ–‡æœ¬](å›¾ç‰‡åœ°å€ &quot;å¯é€‰æ ‡é¢˜&quot;)![RUNOOB å›¾æ ‡](http://static.runoob.com/images/runoob-logo.png)![RUNOOB å›¾æ ‡](http://static.runoob.com/images/runoob-logo.png &quot;RUNOOB&quot;)</code></pre><p>6ã€Markdownè¡¨æ ¼</p><pre><code>|  è¡¨å¤´   | è¡¨å¤´  ||  ----  | ----  || å•å…ƒæ ¼  | å•å…ƒæ ¼ || å•å…ƒæ ¼  | å•å…ƒæ ¼ |</code></pre><p>æˆ‘ä»¬å¯ä»¥è®¾ç½®è¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼š</p><pre><code>-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å³å¯¹é½ã€‚:- è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å·¦å¯¹é½ã€‚:-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…ä¸­å¯¹é½ã€‚</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6ã€Vueå®ç°æ¨¡ç³Šæœç´¢</title>
      <link href="/2019/11/13/mohu-search/"/>
      <url>/2019/11/13/mohu-search/</url>
      
        <content type="html"><![CDATA[<p>åˆ©ç”¨computedè®¡ç®—å±æ€§å®ç°æ¨¡ç³Šæœç´¢</p><span id="more"></span><pre><code class="html">  &lt;div id=&quot;app&quot;&gt;    &lt;input type=&quot;text&quot; placeholder=&quot;æœç´¢&quot; v-model=&quot;sousuo&quot;&gt;    &lt;table border=&quot;1&quot;&gt;      &lt;th&gt;ç¼–å·&lt;/th&gt;      &lt;th&gt;è‹±é›„&lt;/th&gt;      &lt;th&gt;æŠ€èƒ½&lt;/th&gt;      &lt;tr v-for=&quot;(item,index) in sousuo1()&quot; :key=&quot;item.id&quot;&gt;        &lt;td&gt;&#123;&#123;item.id&#125;&#125;&lt;/td&gt;        &lt;td&gt;&#123;&#123;item.name&#125;&#125;&lt;/td&gt;        &lt;td&gt;&#123;&#123;item.jn&#125;&#125;&lt;/td&gt;      &lt;/tr&gt;    &lt;/table&gt;  &lt;/div&gt;</code></pre><p>åˆ©ç”¨computedè®¡ç®—å±æ€§</p><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="javascript">var app = new Vue(&#123;  el: &#39;#app&#39;,  data: &#123;    sousuo: &#39;&#39;,    list: [&#123;        &quot;id&quot;: 1,        &quot;name&quot;: &quot;è‰¾å¸Œ&quot;,        &quot;jn&quot;: &quot;å°„ç®­&quot;      &#125;, &#123;        &quot;id&quot;: 2,        &quot;name&quot;: &quot;ç‹ç‹¸&quot;,        &quot;jn&quot;: &quot;é­…æƒ‘&quot;      &#125;, &#123;        &quot;id&quot;: 3,        &quot;name&quot;: &quot;çŒ´å­&quot;,        &quot;jn&quot;: &quot;æ£å­&quot;      &#125;, &#123;        &quot;id&quot;: 4,        &quot;name&quot;: &quot;ç›–ä¼¦&quot;,        &quot;jn&quot;: &quot;å¤§å®å‰‘&quot;      &#125;, &#123;        &quot;id&quot;: 5,        &quot;name&quot;: &quot;å¾·é‚¦&quot;,        &quot;jn&quot;: &quot;å°–æª&quot;      &#125;, &#123;        &quot;id&quot;: 6,        &quot;name&quot;: &quot;çš‡å­&quot;,        &quot;jn&quot;: &quot;æ——å­&quot;      &#125;,    ]  &#125;,  computed: &#123; //è®¾ç½®è®¡ç®—å±æ€§    Search() &#123;      if (this.sousuo) &#123;        return this.list.filter((value) =&gt; &#123; //è¿‡æ»¤æ•°ç»„å…ƒç´   this.listå°±æ˜¯ä¸Šé¢çš„é‚£ä¸ªæ­»æ•°æ®          return value.name.includes(this.sousuo); // æŸ¥çœ‹value.nameé‡Œé¢åŒ…å«ä¸åŒ…å«è¾“å…¥çš„å­—ä½“          &#125;); //this.sousuoè·Ÿä¸Šé¢çš„è¾“å…¥æ¡†æ˜¯åŒé‡ç»‘å®š      &#125;    &#125;  &#125;,  methods: &#123;    sousuo1() &#123;      if (!this.sousuo) &#123;        return this.list;      &#125;      return this.Search    &#125;  &#125;,&#125;)</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5ã€Vue2åŸºç¡€çŸ¥è¯†</title>
      <link href="/2019/09/26/vue-simple/"/>
      <url>/2019/09/26/vue-simple/</url>
      
        <content type="html"><![CDATA[<p>VueåŸºç¡€çŸ¥è¯†ç‚¹ï¼ŒåŒ…æ‹¬å¸¸ç”¨æŒ‡ä»¤ã€è®¡ç®—å±æ€§ã€ä¾¦å¬å±æ€§ç­‰ã€‚</p><span id="more"></span><h2 id="Vuejså“åº”å¼åŸç†"><a href="#Vuejså“åº”å¼åŸç†" class="headerlink" title="Vuejså“åº”å¼åŸç†"></a>Vuejså“åº”å¼åŸç†</h2><pre><code>ç¼–è¯‘ç»„ä»¶ï¼šå¯¹ç‰¹æ®Šæ ‡è®°çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚åŒå¤§æ‹¬å·éƒ¨åˆ†ï¼‰è¿›è¡Œæ›¿æ¢ä¸ºç›¸åº”çš„æ•°æ®å€¼ã€‚æ”¶é›†ä¾èµ–ï¼šå¯¹äºç¼–è¯‘é˜¶æ®µä¾èµ–çš„æ•°æ®è¿›è¡Œç›‘å¬ï¼ˆè¿™ä¸ªéƒ½æ˜¯é€šè¿‡ watcher å¯¹è±¡å®ç°çš„ï¼‰é€šçŸ¥æ›´æ–°ï¼šå½“æ­¥éª¤2ä¸­ç›‘å¬çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥ watcher è¿›è¡Œé‡æ–°è®¡ç®—ï¼Œè§¦å‘å…³è”è§†å›¾æ›´æ–°ã€‚</code></pre><h2 id="vueä¼˜ç‚¹"><a href="#vueä¼˜ç‚¹" class="headerlink" title="vueä¼˜ç‚¹"></a>vueä¼˜ç‚¹</h2><p>è½»é‡çº§æ¡†æ¶ï¼šåªå…³æ³¨è§†å›¾å±‚ï¼Œæ˜¯ä¸€ä¸ªæ„å»ºæ•°æ®çš„è§†å›¾é›†åˆï¼Œå¤§å°åªæœ‰å‡ åkbï¼›</p><p>ç®€å•æ˜“å­¦ï¼šå›½äººå¼€å‘ï¼Œä¸­æ–‡æ–‡æ¡£ï¼Œä¸å­˜åœ¨è¯­è¨€éšœç¢ ï¼Œæ˜“äºç†è§£å’Œå­¦ä¹ ï¼›</p><p>åŒå‘æ•°æ®ç»‘å®šï¼šä¿ç•™äº†angularçš„ç‰¹ç‚¹ï¼Œåœ¨æ•°æ®æ“ä½œæ–¹é¢æ›´ä¸ºç®€å•ï¼›</p><p>ç»„ä»¶åŒ–ï¼šä¿ç•™äº†reactçš„ä¼˜ç‚¹ï¼Œå®ç°äº†htmlçš„å°è£…å’Œé‡ç”¨ï¼Œåœ¨æ„å»ºå•é¡µé¢åº”ç”¨æ–¹é¢æœ‰ç€ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼›</p><p>è§†å›¾ï¼Œæ•°æ®ï¼Œç»“æ„åˆ†ç¦»ï¼šä½¿æ•°æ®çš„æ›´æ”¹æ›´ä¸ºç®€å•ï¼Œä¸éœ€è¦è¿›è¡Œé€»è¾‘ä»£ç çš„ä¿®æ”¹ï¼Œåªéœ€è¦æ“ä½œæ•°æ®å°±èƒ½å®Œæˆç›¸å…³æ“ä½œï¼›</p><p>è™šæ‹ŸDOMï¼šdomæ“ä½œæ˜¯éå¸¸è€—è´¹æ€§èƒ½çš„ï¼Œä¸å†ä½¿ç”¨åŸç”Ÿçš„domæ“ä½œèŠ‚ç‚¹ï¼Œæå¤§è§£æ”¾domæ“ä½œï¼Œä½†å…·ä½“æ“ä½œçš„è¿˜æ˜¯domä¸è¿‡æ˜¯æ¢äº†å¦ä¸€ç§æ–¹å¼ï¼›</p><p>è¿è¡Œé€Ÿåº¦æ›´å¿«: ç›¸æ¯”è¾ƒä¸reactè€Œè¨€ï¼ŒåŒæ ·æ˜¯æ“ä½œè™šæ‹Ÿdomï¼Œå°±æ€§èƒ½è€Œè¨€ï¼Œvueå­˜åœ¨å¾ˆå¤§çš„ä¼˜åŠ¿ã€‚</p><h2 id="vueç”Ÿå‘½å‘¨æœŸ"><a href="#vueç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="vueç”Ÿå‘½å‘¨æœŸ"></a>vueç”Ÿå‘½å‘¨æœŸ</h2><p>åœ¨beforeCreateé˜¶æ®µï¼Œvueå®ä¾‹çš„æŒ‚è½½å…ƒç´ elå’Œæ•°æ®å¯¹è±¡dataéƒ½ä¸ºundefinedï¼Œè¿˜æœªåˆå§‹åŒ–ã€‚åœ¨createdé˜¶æ®µï¼Œvueå®ä¾‹çš„æ•°æ®å¯¹è±¡dataæœ‰äº†ï¼Œelå’Œæ•°æ®å¯¹è±¡dataéƒ½ä¸ºundefinedï¼Œè¿˜æœªåˆå§‹åŒ–ã€‚</p><p>è½½å…¥å‰/åï¼šåœ¨beforeMounté˜¶æ®µï¼Œvueå®ä¾‹çš„$elå’Œdataéƒ½åˆå§‹åŒ–äº†ï¼Œä½†è¿˜æ˜¯æŒ‚è½½ä¹‹å‰ä¸ºè™šæ‹Ÿçš„domèŠ‚ç‚¹ï¼Œdata.messageè¿˜æœªæ›¿æ¢ã€‚åœ¨mountedé˜¶æ®µï¼Œvueå®ä¾‹æŒ‚è½½å®Œæˆï¼Œdata.messageæˆåŠŸæ¸²æŸ“ã€‚</p><p>æ›´æ–°å‰/åï¼šå½“dataå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘beforeUpdateå’Œupdatedæ–¹æ³•</p><p>é”€æ¯å‰/åï¼šåœ¨æ‰§è¡Œdestroyæ–¹æ³•åï¼Œå¯¹dataçš„æ”¹å˜ä¸ä¼šå†è§¦å‘å‘¨æœŸå‡½æ•°ï¼Œè¯´æ˜æ­¤æ—¶vueå®ä¾‹å·²ç»è§£é™¤äº†äº‹ä»¶ç›‘å¬ä»¥åŠå’Œdomçš„ç»‘å®šï¼Œä½†æ˜¯domç»“æ„ä¾ç„¶å­˜åœ¨</p><h2 id="vueç»„ä»¶ä¸­dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ"><a href="#vueç»„ä»¶ä¸­dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ" class="headerlink" title="vueç»„ä»¶ä¸­dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ"></a>vueç»„ä»¶ä¸­dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ</h2><p>å®˜ç½‘ä¸Šæ˜¯è¿™æ ·å†™çš„ï¼š</p><blockquote><p>ä¸€ä¸ªç»„ä»¶çš„ data é€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æ¯ä¸ªå®ä¾‹å¯ä»¥ç»´æŠ¤ä¸€ä»½è¢«è¿”å›å¯¹è±¡çš„ç‹¬ç«‹çš„æ‹·è´ï¼Œå¦‚æœ Vue æ²¡æœ‰è¿™æ¡è§„åˆ™ï¼Œå¯èƒ½ä¼šå½±å“åˆ°å…¶å®ƒæ‰€æœ‰å®ä¾‹ã€‚</p></blockquote><p>å½“åˆ›å»ºVueå®ä¾‹æ—¶ï¼Œdataå¿…é¡»å£°æ˜ä¸ºè¿”å›ä¸€ä¸ªåˆå§‹æ•°æ®å¯¹è±¡çš„å‡½æ•°ï¼Œå› ä¸ºç»„ä»¶å¯èƒ½è¢«ç”¨æ¥åˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚å¦‚æœ data ä»ç„¶æ˜¯ä¸€ä¸ªçº¯ç²¹çš„å¯¹è±¡ï¼Œåˆ™æ‰€æœ‰çš„å®ä¾‹å°†å…±äº«å¼•ç”¨åŒä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼é€šè¿‡æä¾› data å‡½æ•°ï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹åï¼Œæˆ‘ä»¬èƒ½å¤Ÿè°ƒç”¨ data å‡½æ•°ï¼Œä»è€Œè¿”å›åˆå§‹æ•°æ®çš„ä¸€ä¸ªå…¨æ–°å‰¯æœ¬æ•°æ®å¯¹è±¡ã€‚</p><h2 id="v-ifå’Œv-showæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#v-ifå’Œv-showæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="v-ifå’Œv-showæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>v-ifå’Œv-showæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>v-ifå’Œv-showçœ‹èµ·æ¥ä¼¼ä¹å·®ä¸å¤šï¼Œå½“æ¡ä»¶ä¸æˆç«‹æ—¶ï¼Œå…¶æ‰€å¯¹åº”çš„æ ‡ç­¾å…ƒç´ éƒ½ä¸å¯è§ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªé€‰é¡¹æ˜¯æœ‰åŒºåˆ«çš„:</p><p>1ã€v-ifåœ¨æ¡ä»¶åˆ‡æ¢æ—¶ï¼Œä¼šå¯¹æ ‡ç­¾è¿›è¡Œé€‚å½“çš„åˆ›å»ºå’Œé”€æ¯ï¼Œè€Œv-showåˆ™ä»…åœ¨åˆå§‹åŒ–æ—¶åŠ è½½ä¸€æ¬¡ï¼Œå› æ­¤v-ifçš„å¼€é”€ç›¸å¯¹æ¥è¯´ä¼šæ¯”v-showå¤§ã€‚</p><p>2ã€v-ifæ˜¯æƒ°æ€§çš„ï¼Œåªæœ‰å½“æ¡ä»¶ä¸ºçœŸæ—¶æ‰ä¼šçœŸæ­£æ¸²æŸ“æ ‡ç­¾ï¼›å¦‚æœåˆå§‹æ¡ä»¶ä¸ä¸ºçœŸï¼Œåˆ™v-ifä¸ä¼šå»æ¸²æŸ“æ ‡ç­¾ã€‚v-showåˆ™æ— è®ºåˆå§‹æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œéƒ½ä¼šæ¸²æŸ“æ ‡ç­¾ï¼Œå®ƒä»…ä»…åšçš„åªæ˜¯ç®€å•çš„CSSåˆ‡æ¢ã€‚</p><h2 id="computedå’Œwatchçš„åŒºåˆ«"><a href="#computedå’Œwatchçš„åŒºåˆ«" class="headerlink" title="computedå’Œwatchçš„åŒºåˆ«"></a>computedå’Œwatchçš„åŒºåˆ«</h2><p>è®¡ç®—å±æ€§computedï¼š</p><p>æ”¯æŒç¼“å­˜ï¼Œåªæœ‰ä¾èµ–æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œæ‰ä¼šé‡æ–°è¿›è¡Œè®¡ç®—ä¸æ”¯æŒå¼‚æ­¥ï¼Œå½“computedå†…æœ‰å¼‚æ­¥æ“ä½œæ—¶æ— æ•ˆï¼Œæ— æ³•ç›‘å¬æ•°æ®çš„å˜åŒ–computed å±æ€§å€¼ä¼šé»˜è®¤èµ°ç¼“å­˜ï¼Œè®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„ï¼Œä¹Ÿå°±æ˜¯åŸºäºdataä¸­å£°æ˜è¿‡æˆ–è€…çˆ¶ç»„ä»¶ä¼ é€’çš„propsä¸­çš„æ•°æ®é€šè¿‡è®¡ç®—å¾—åˆ°çš„å€¼å¦‚æœä¸€ä¸ªå±æ€§æ˜¯ç”±å…¶ä»–å±æ€§è®¡ç®—è€Œæ¥çš„ï¼Œè¿™ä¸ªå±æ€§ä¾èµ–å…¶ä»–å±æ€§ï¼Œæ˜¯ä¸€ä¸ªå¤šå¯¹ä¸€æˆ–è€…ä¸€å¯¹ä¸€ï¼Œä¸€èˆ¬ç”¨computedå¦‚æœcomputedå±æ€§å±æ€§å€¼æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¼šèµ°getæ–¹æ³•ï¼›å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å±æ€§çš„å±æ€§å€¼ï¼›åœ¨computedä¸­çš„ï¼Œå±æ€§éƒ½æœ‰ä¸€ä¸ªgetå’Œä¸€ä¸ªsetæ–¹æ³•ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œè°ƒç”¨setæ–¹æ³•ã€‚</p><p>ä¾¦å¬å±æ€§watchï¼š</p><p>ä¸æ”¯æŒç¼“å­˜ï¼Œæ•°æ®å˜ï¼Œç›´æ¥ä¼šè§¦å‘ç›¸åº”çš„æ“ä½œï¼›watchæ”¯æŒå¼‚æ­¥ï¼›ç›‘å¬çš„å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ€æ–°çš„å€¼ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å…¥ä¹‹å‰çš„å€¼ï¼›å½“ä¸€ä¸ªå±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦æ‰§è¡Œå¯¹åº”çš„æ“ä½œï¼›ä¸€å¯¹å¤šï¼›ç›‘å¬æ•°æ®å¿…é¡»æ˜¯dataä¸­å£°æ˜è¿‡æˆ–è€…çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„propsä¸­çš„æ•°æ®ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œè§¦å‘å…¶ä»–æ“ä½œï¼Œå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼š<br>immediateï¼šç»„ä»¶åŠ è½½ç«‹å³è§¦å‘å›è°ƒå‡½æ•°æ‰§è¡Œ</p><pre><code class="js">watch: &#123;  firstName: &#123;    handler(newName, oldName) &#123;      this.fullName = newName + &#39; &#39; + this.lastName;    &#125;,    // ä»£è¡¨åœ¨wacthé‡Œå£°æ˜äº†firstNameè¿™ä¸ªæ–¹æ³•ä¹‹åç«‹å³æ‰§è¡Œhandleræ–¹æ³•    immediate: true  &#125;&#125;</code></pre><p>deep: deepçš„æ„æ€å°±æ˜¯æ·±å…¥è§‚å¯Ÿï¼Œç›‘å¬å™¨ä¼šä¸€å±‚å±‚çš„å¾€ä¸‹éå†ï¼Œç»™å¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½åŠ ä¸Šè¿™ä¸ªç›‘å¬å™¨ï¼Œä½†æ˜¯è¿™æ ·æ€§èƒ½å¼€é”€å°±ä¼šéå¸¸å¤§äº†ï¼Œä»»ä½•ä¿®æ”¹objé‡Œé¢ä»»ä½•ä¸€ä¸ªå±æ€§éƒ½ä¼šè§¦å‘è¿™ä¸ªç›‘å¬å™¨é‡Œçš„ handler</p><pre><code class="js">watch: &#123;  obj: &#123;    handler(newName, oldName) &#123;      console.log(&#39;obj.a changed&#39;);    &#125;,    immediate: true,    deep: true  &#125;&#125;</code></pre><p>ä¼˜åŒ–ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²çš„å½¢å¼ç›‘å¬</p><pre><code class="js">watch: &#123;  &#39;obj.a&#39;: &#123;    handler(newName, oldName) &#123;      console.log(&#39;obj.a changed&#39;);    &#125;,    immediate: true,    // deep: true  &#125;&#125;</code></pre><p>è¿™æ ·Vue.jsæ‰ä¼šä¸€å±‚ä¸€å±‚è§£æä¸‹å»ï¼Œç›´åˆ°é‡åˆ°å±æ€§aï¼Œç„¶åæ‰ç»™aè®¾ç½®ç›‘å¬å‡½æ•°ã€‚</p><h2 id="nextTickæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#nextTickæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="$nextTickæ˜¯ä»€ä¹ˆï¼Ÿ"></a>$nextTickæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>vueå®ç°å“åº”å¼å¹¶ä¸æ˜¯æ•°æ®å‘ç”Ÿå˜åŒ–ådomç«‹å³å˜åŒ–ï¼Œè€Œæ˜¯æŒ‰ç…§ä¸€å®šçš„ç­–ç•¥æ¥è¿›è¡Œdomæ›´æ–°ã€‚<br>nextTick æ˜¯åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œåœ¨ä¿®æ”¹æ•°æ®ä¹‹åä½¿ç”¨nextTickï¼Œåˆ™å¯ä»¥åœ¨å›è°ƒä¸­è·å–æ›´æ–°åçš„ DOM</p><h2 id="v-for-keyçš„ä½œç”¨"><a href="#v-for-keyçš„ä½œç”¨" class="headerlink" title="v-for keyçš„ä½œç”¨"></a>v-for keyçš„ä½œç”¨</h2><p>å½“Vueç”¨ v-for æ­£åœ¨æ›´æ–°å·²æ¸²æŸ“è¿‡çš„å…ƒç´ åˆ—è¡¨æ˜¯ï¼Œå®ƒé»˜è®¤ç”¨â€œå°±åœ°å¤ç”¨â€ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVueå°†ä¸æ˜¯ç§»åŠ¨DOMå…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„æ”¹å˜ï¼Œè€Œæ˜¯ç®€å•å¤ç”¨æ­¤å¤„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒåœ¨ç‰¹å®šç´¢å¼•ä¸‹æ˜¾ç¤ºå·²è¢«æ¸²æŸ“è¿‡çš„æ¯ä¸ªå…ƒç´ ã€‚<br>ä¸ºäº†ç»™Vueä¸€ä¸ªæç¤ºï¼Œä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œé‡ç”¨å’Œé‡æ–°æ’åºç°æœ‰å…ƒç´ ï¼Œä½ éœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€ key å±æ€§ã€‚keyå±æ€§çš„ç±»å‹åªèƒ½ä¸º stringæˆ–è€…numberç±»å‹ã€‚</p><blockquote><p>key çš„ç‰¹æ®Šå±æ€§ä¸»è¦ç”¨åœ¨Vueçš„è™šæ‹ŸDOMç®—æ³•ï¼Œåœ¨æ–°æ—§nodeså¯¹æ¯”æ—¶è¾¨è¯†VNodesã€‚å¦‚æœä¸ä½¿ç”¨ keyï¼ŒVueä¼šä½¿ç”¨ä¸€ç§æœ€å¤§é™åº¦å‡å°‘åŠ¨æ€å…ƒç´ å¹¶ä¸”å°½å¯èƒ½çš„å°è¯•ä¿®å¤/å†åˆ©ç”¨ç›¸åŒç±»å‹å…ƒç´ çš„ç®—æ³•ã€‚ä½¿ç”¨keyï¼Œå®ƒä¼šåŸºäºkeyçš„å˜åŒ–é‡æ–°æ’åˆ—å…ƒç´ é¡ºåºï¼Œå¹¶ä¸”ä¼šç§»é™¤ key ä¸å­˜åœ¨çš„å…ƒç´ ã€‚</p></blockquote><p>v-foræå‡æ€§èƒ½çš„åŸå› :</p><p>keyç›¸åŒæ—¶ï¼Œä¸¤ä¸ªVNodeä¼šç›¸åŒï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„DOMæ›´æ–°ï¼›è€Œä¸”åœ¨diffå†…éƒ¨ï¼Œä¹Ÿä¼šæ ¹æ®keyæ¥è·Ÿè¸ªVNodeã€‚</p><h2 id="åŒå‘æ•°æ®ç»‘å®šåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#åŒå‘æ•°æ®ç»‘å®šåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="åŒå‘æ•°æ®ç»‘å®šåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>åŒå‘æ•°æ®ç»‘å®šåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><blockquote><p>vue.js æ˜¯é‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡Object.defineProperty()æ¥åŠ«æŒå„ä¸ªå±æ€§çš„setterï¼Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒã€‚</p></blockquote><p>ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><p>1ã€éœ€è¦observeçš„æ•°æ®å¯¹è±¡è¿›è¡Œé€’å½’éå†ï¼ŒåŒ…æ‹¬å­å±æ€§å¯¹è±¡çš„å±æ€§ï¼Œéƒ½åŠ ä¸Šsetterå’Œgetterè¿™æ ·çš„è¯ï¼Œç»™è¿™ä¸ªå¯¹è±¡çš„æŸä¸ªå€¼èµ‹å€¼ï¼Œå°±ä¼šè§¦å‘setterï¼Œé‚£ä¹ˆå°±èƒ½ç›‘å¬åˆ°äº†æ•°æ®å˜åŒ–</p><p>2ã€compileè§£ææ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ ç›‘å¬æ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è§†å›¾</p><p>3ã€Watcherè®¢é˜…è€…æ˜¯Observerå’ŒCompileä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯:<br>â‘ åœ¨è‡ªèº«å®ä¾‹åŒ–æ—¶å¾€å±æ€§è®¢é˜…å™¨(dep)é‡Œé¢æ·»åŠ è‡ªå·±<br>â‘¡è‡ªèº«å¿…é¡»æœ‰ä¸€ä¸ªupdate()æ–¹æ³•<br>â‘¢å¾…å±æ€§å˜åŠ¨dep.notice()é€šçŸ¥æ—¶ï¼Œèƒ½è°ƒç”¨è‡ªèº«çš„update()æ–¹æ³•ï¼Œå¹¶è§¦å‘Compileä¸­ç»‘å®šçš„å›è°ƒï¼Œåˆ™åŠŸæˆèº«é€€ã€‚</p><p>4ã€MVVMä½œä¸ºæ•°æ®ç»‘å®šçš„å…¥å£ï¼Œæ•´åˆObserverã€Compileå’ŒWatcherä¸‰è€…ï¼Œé€šè¿‡Observeræ¥ç›‘å¬è‡ªå·±çš„modelæ•°æ®å˜åŒ–ï¼Œé€šè¿‡Compileæ¥è§£æç¼–è¯‘æ¨¡æ¿æŒ‡ä»¤ï¼Œæœ€ç»ˆåˆ©ç”¨Watcheræ­èµ·Observerå’ŒCompileä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ï¼Œè¾¾åˆ°æ•°æ®å˜åŒ– -&gt; è§†å›¾æ›´æ–°ï¼›è§†å›¾äº¤äº’å˜åŒ–(input) -&gt; æ•°æ®modelå˜æ›´çš„åŒå‘ç»‘å®šæ•ˆæœã€‚</p><h2 id="vue-routerè·¯ç”±é¡µé¢ç®¡ç†"><a href="#vue-routerè·¯ç”±é¡µé¢ç®¡ç†" class="headerlink" title="vue-routerè·¯ç”±é¡µé¢ç®¡ç†"></a>vue-routerè·¯ç”±é¡µé¢ç®¡ç†</h2><blockquote><p>Vue Router æ˜¯ Vue.js å®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ã€‚å®ƒå’Œ Vue.js çš„æ ¸å¿ƒæ·±åº¦é›†æˆï¼Œè®©æ„å»ºå•é¡µé¢åº”ç”¨å˜å¾—æ˜“å¦‚åæŒã€‚</p></blockquote><p>åŒ…å«çš„åŠŸèƒ½æœ‰ï¼š</p><p>1ã€åµŒå¥—çš„è·¯ç”±/è§†å›¾è¡¨</p><p>2ã€æ¨¡å—åŒ–çš„ã€åŸºäºç»„ä»¶çš„è·¯ç”±é…ç½®</p><p>3ã€è·¯ç”±å‚æ•°ã€æŸ¥è¯¢ã€é€šé…ç¬¦</p><p>4ã€åŸºäº Vue.js è¿‡æ¸¡ç³»ç»Ÿçš„è§†å›¾è¿‡æ¸¡æ•ˆæœ</p><p>5ã€ç»†ç²’åº¦çš„å¯¼èˆªæ§åˆ¶</p><p>6ã€å¸¦æœ‰è‡ªåŠ¨æ¿€æ´»çš„ CSS class çš„é“¾æ¥</p><p>7ã€HTML5 å†å²æ¨¡å¼æˆ– hash æ¨¡å¼ï¼Œåœ¨ IE9 ä¸­è‡ªåŠ¨é™çº§</p><p>8ã€è‡ªå®šä¹‰çš„æ»šåŠ¨æ¡è¡Œä¸º</p><blockquote><p>1ã€åŠ¨æ€è·¯ç”±åŒ¹é…</p></blockquote><p>ä¾‹å¦‚ï¼šå¯¹ä¸åŒIDçš„ç”¨æˆ·ï¼Œä½¿ç”¨åŒä¸€ä¸ªç»„ä»¶æ¥æ¸²æŸ“ã€‚</p><pre><code class="js">const User = &#123;  template: &quot;&lt;div&gt;User&lt;/div&gt;&quot;&#125;const router = new VueRouter(&#123;  routes: [    // åŠ¨æ€è·¯å¾„å‚æ•° ä»¥å†’å·å¼€å¤´    &#123; path: &#39;/user/:id&#39;, component: User &#125;  ]&#125;)</code></pre><p>è¿™æ ·/user/foo å’Œ /user/bar éƒ½å°†æ˜ å°„åˆ°ç›¸åŒçš„è·¯ç”±Userã€‚</p><p>ä¸€ä¸ªâ€œè·¯å¾„å‚æ•°â€ä½¿ç”¨å†’å· : æ ‡è®°ã€‚å½“åŒ¹é…åˆ°ä¸€ä¸ªè·¯ç”±æ—¶ï¼Œå‚æ•°å€¼ä¼šè¢«è®¾ç½®åˆ° this.$route.paramsï¼Œå¯ä»¥åœ¨æ¯ä¸ªç»„ä»¶å†…ä½¿ç”¨ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–° User çš„æ¨¡æ¿ï¼Œè¾“å‡ºå½“å‰ç”¨æˆ·çš„ IDï¼š</p><pre><code class="js">const User = &#123;  template: &#39;&lt;div&gt;User &#123;&#123; $route.params.id &#125;&#125;&lt;/div&gt;&#39;&#125;</code></pre><blockquote><p>2ã€ç¼–ç¨‹å¼çš„å¯¼èˆª<br>router.push({name:â€â€,params:{}})</p></blockquote><pre><code class="js">  ï¼ˆ1ï¼‰this.$router.push  // å¸¦å‚æ•°  this.$router.push(&#123;    name:&quot;User&quot;,    params:&#123;      userId:&quot;123&quot;    &#125;  &#125;)</code></pre><p>router.push({path:â€â€,query:â€â€})</p><pre><code class="js">  (2) this.$router.push(&#123;    path:&quot;/user&quot;,    query:&#123;      plan:&quot;private&quot;    &#125;  &#125;)</code></pre><p>router.replace()ä½¿ç”¨æ–¹æ³•è·Ÿrouter.push()å¾ˆåƒï¼Œä¸ä¼šå‘historyæ·»åŠ æ–°çºªå½•ï¼Œæ›¿æ¢æ‰å½“å‰çš„historyè®°å½•ã€‚<br>router.go()åœ¨historyè®°å½•ä¸­å‘å‰æˆ–è€…å‘åå¤šå°‘æ­¥ã€‚æ­£æ•°ä¸ºå‘å‰å¤šå°‘æ­¥ï¼Œè´Ÿæ•°ä¸ºå‘åå¤šå°‘æ­¥</p><blockquote><p>3ã€æ»šåŠ¨è¡Œä¸º</p></blockquote><p>ä½¿ç”¨å‰ç«¯è·¯ç”±ï¼Œå½“åˆ‡æ¢åˆ°æ–°è·¯ç”±æ—¶ï¼Œæƒ³è¦é¡µé¢æ»šåˆ°é¡¶éƒ¨ï¼Œæˆ–è€…æ˜¯ä¿æŒåŸå…ˆçš„æ»šåŠ¨ä½ç½®ï¼Œå°±åƒé‡æ–°åŠ è½½é¡µé¢é‚£æ ·ã€‚ vue-router èƒ½åšåˆ°ï¼Œè€Œä¸”æ›´å¥½ï¼Œå®ƒè®©ä½ å¯ä»¥è‡ªå®šä¹‰è·¯ç”±åˆ‡æ¢æ—¶é¡µé¢å¦‚ä½•æ»šåŠ¨ã€‚</p><blockquote><p>æ³¨æ„ï¼šè¿™ä¸ªåŠŸèƒ½åªåœ¨æ”¯æŒ history.pushState çš„æµè§ˆå™¨ä¸­å¯ç”¨ã€‚</p></blockquote><pre><code class="js">scrollBehavior (to, from, savedPosition) &#123;  if (savedPosition) &#123;    return savedPosition  &#125; else &#123;    return &#123; x: 0, y: 0 &#125;  &#125;&#125;</code></pre><blockquote><p>4ã€è·¯ç”±æ‡’åŠ è½½</p></blockquote><p>æœ‰æ—¶å€™æˆ‘ä»¬æƒ³æŠŠæŸä¸ªè·¯ç”±ä¸‹çš„æ‰€æœ‰ç»„ä»¶éƒ½æ‰“åŒ…åœ¨åŒä¸ªå¼‚æ­¥å— (chunk) ä¸­ã€‚åªéœ€è¦ä½¿ç”¨å‘½åchunkï¼Œä¸€ä¸ªç‰¹æ®Šçš„æ³¨é‡Šè¯­æ³•æ¥æä¾›chunk name(éœ€è¦ Webpack &gt; 2.4)ã€‚</p><pre><code class="js">const Foo = () =&gt; import(/* webpackChunkName: &quot;group-foo&quot; */ &#39;./Foo.vue&#39;)const Bar = () =&gt; import(/* webpackChunkName: &quot;group-foo&quot; */ &#39;./Bar.vue&#39;)const Baz = () =&gt; import(/* webpackChunkName: &quot;group-foo&quot; */ &#39;./Baz.vue&#39;)</code></pre><h2 id="è¡¨å•è¾“å…¥æ§åˆ¶"><a href="#è¡¨å•è¾“å…¥æ§åˆ¶" class="headerlink" title="è¡¨å•è¾“å…¥æ§åˆ¶"></a>è¡¨å•è¾“å…¥æ§åˆ¶</h2><blockquote><p>è¡¨å•ä¿®é¥°ç¬¦ï¼šå¦‚æœæ˜¯ç®€å•çš„æ§åˆ¶è¾“å…¥ä¸€å®šæ˜¯æ•°å­—æˆ–è€…å»æ‰ç”¨æˆ·è¾“å…¥çš„æ”¶å°¾ç©ºç™½ç¬¦ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Vue æä¾›çš„è¡¨å•ä¿®é¥°ç¬¦ .number å’Œ .trim</p></blockquote><p>1ã€å¦‚æœæƒ³è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸ºæ•°å€¼ç±»å‹ï¼Œå¯ä»¥ç»™ v-model æ·»åŠ  number ä¿®é¥°ç¬¦ï¼š</p><pre><code class="vue">&lt;input v-model.number=&quot;age&quot; type=&quot;number&quot;&gt;</code></pre><p>2ã€å¦‚æœè¦è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦ï¼Œå¯ä»¥ç»™ v-model æ·»åŠ  trim ä¿®é¥°ç¬¦ï¼š</p><pre><code class="vue">&lt;input v-model.trim=&quot;msg&quot;&gt;</code></pre><blockquote><p>changeäº‹ä»¶:ç»™è¡¨å•ç»‘å®šäº‹ä»¶ï¼Œåœ¨äº‹ä»¶å¤„ç†ä¸­è¿›è¡Œè¡¨å•è¾“å…¥æ§åˆ¶</p></blockquote><pre><code class="html">&lt;input v-model=&quot;value2&quot; type=&quot;text&quot; @change=&quot;inputChange(value2)&quot; /&gt;</code></pre><pre><code class="js">methods: &#123;  inputChange: function(val) &#123;    if (!val) return &#39;&#39;    val = val.toString()    this.value2 = val.charAt(0).toUpperCase() + val.slice(1)  &#125;&#125;</code></pre><blockquote><p>filterè¿‡æ»¤å™¨</p></blockquote><pre><code class="html">&lt;input v-model=&quot;value1&quot;  type=&quot;text&quot; /&gt;</code></pre><pre><code class="js">Vue.filter(&#39;capitalize&#39;, function (value) &#123;  if (!value) return &#39;&#39;  value = value.toString()  return value.charAt(0).toUpperCase() + value.slice(1)&#125;)</code></pre><pre><code class="js">watch: &#123;  value1(val) &#123;     this.value1 = this.$options.filters.capitalize(val);  &#125;&#125;</code></pre><blockquote><p>æŒ‡ä»¤:å£°æ˜ä¸€ä¸ªå…¨å±€æŒ‡ä»¤</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">// åªèƒ½è¾“å…¥æ­£æ•´æ•°,0-9çš„æ•°å­—Vue.directive(&#39;enterIntNumber&#39;, &#123;  inserted: function (el) &#123;    let trigger = (el, type) =&gt; &#123;      const e = document.createEvent(&#39;HTMLEvents&#39;)      e.initEvent(type, true, true)      el.dispatchEvent(e)    &#125;    el.addEventListener(&quot;keyup&quot;, function (e) &#123;      let input = e.target;      let reg = new RegExp(&#39;^\\d&#123;1&#125;\\d*$&#39;);  //æ­£åˆ™éªŒè¯æ˜¯å¦æ˜¯æ•°å­—      let correctReg = new RegExp(&#39;\\d&#123;1&#125;\\d*&#39;);  //æ­£åˆ™è·å–æ˜¯æ•°å­—çš„éƒ¨åˆ†      let matchRes = input.value.match(reg);      if (matchRes === null) &#123;        // è‹¥ä¸æ˜¯çº¯æ•°å­— æŠŠçº¯æ•°å­—éƒ¨åˆ†ç”¨æ­£åˆ™è·å–å‡ºæ¥æ›¿æ¢æ‰        let correctMatchRes = input.value.match(correctReg);        if (correctMatchRes) &#123;          input.value = correctMatchRes[0];        &#125; else &#123;          input.value = &quot;&quot;;        &#125;      &#125;      trigger(input, &#39;input&#39;)    &#125;);  &#125;&#125;);</code></pre></details><pre><code class="html">&lt;!--é™åˆ¶è¾“å…¥æ­£æ•´æ•°--&gt;&lt;input v-enterIntNumber placeholder=&quot;0&quot; type=&quot;number&quot;&gt;</code></pre><h1 id="Vueæ¸²æŸ“ç›®æ ‡å…ƒç´ çš„6ç§æ–¹æ³•"><a href="#Vueæ¸²æŸ“ç›®æ ‡å…ƒç´ çš„6ç§æ–¹æ³•" class="headerlink" title="Vueæ¸²æŸ“ç›®æ ‡å…ƒç´ çš„6ç§æ–¹æ³•"></a>Vueæ¸²æŸ“ç›®æ ‡å…ƒç´ çš„6ç§æ–¹æ³•</h1><p>1ã€ç›´æ¥åˆ›å»ºVueå®ä¾‹</p><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;  &lt;meta charset=&quot;UTF-8&quot;&gt;  &lt;title&gt;vue&lt;/title&gt;&lt;/head&gt;&lt;body&gt;  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;    &lt;!-- è¿™é‡Œç›´æ¥å¼•å…¥cdnæºç  --&gt;  &lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue&quot;&gt;&lt;/script&gt;  &lt;script&gt;  var app = new Vue(&#123;    el: &quot;#app&quot;,    template: &quot;&lt;h1&gt;&#123;&#123;message&#125;&#125;&lt;/h1&gt;&quot;,    data()&#123;      return&#123;        message:&#39;Hello Vue.js!&#39;      &#125;    &#125;  &#125;);  &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;</code></pre></details><p>2ã€Vue.extend</p><blockquote><p>Vue.extend(options) æ–¹å¼æ˜¯ä½¿ç”¨Vueæ„é€ å™¨çš„ä¸€ä¸ªâ€œå­ç±»â€ï¼Œå…¶å‚æ•°åŒVue(options)ä¸€æ¨¡ä¸€æ ·ï¼Œå”¯ä¸€çš„ä¸åŒæ˜¯æ²¡æœ‰ el å±æ€§æ¥æŒ‡å®šæŒ‚è½½çš„DOMå…ƒç´ ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦é€šè¿‡ $mount() æ–¹æ³•ï¼Œæ¥æ‰‹åŠ¨å®ç°æŒ‚è½½ã€‚</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;  &lt;script&gt;  var app = Vue.extend(&#123;    el: &quot;#app&quot;,    template: &#39;&lt;h1&gt;&#123;&#123;msg&#125;&#125;&lt;/h1&gt;&#39;,    data() &#123;      return &#123;        msg: &#39;hello extend&#39;      &#125;    &#125;  &#125;)  // æ³¨æ„è¿™é‡Œ Vue.extend æ–¹å¼æ˜¯ç”Ÿæˆäº†ä¸€ä¸ª Vue å­ç±»ï¼Œæ‰€ä»¥éœ€è¦ newå…³é”®å­—æ¥é‡æ–°åˆ›å»ºï¼Œç„¶åæ‰‹åŠ¨æŒ‚è½½ã€‚  new app().$mount(&#39;#app&#39;);  &lt;/script&gt;</code></pre></details><p>3.Vue.component</p><blockquote><p>Vue.component(id, [definition])æ–¹å¼æ˜¯æ³¨å†Œä¸€ä¸ªåç§°ä¸ºidçš„å…¨å±€ç»„ä»¶ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨è¯¥ç»„ä»¶æ¥ï¼Œå®ç°ç›®æ ‡å…ƒç´ æ¸²æŸ“ã€‚å…¶ä¸­definition å‚æ•°åŒ Vue.extend ä¸­çš„å‚æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œæ–¹æ³•ä¸€æ ·ï¼Œéœ€è¦ä½¿ç”¨$mount()æ–¹æ³•æ‰‹åŠ¨æŒ‚è½½ã€‚</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;  &lt;script&gt;  // var app = Vue.component(&#39;hello&#39;, &#123;  //     template:&#39;&lt;h1&gt;&#123;&#123;msg&#125;&#125;&lt;/h1&gt;&#39;,  //   data() &#123;  //     return &#123;  //       msg: &#39;hello component&#39;  //     &#125;  //   &#125;  // &#125;)  // new app().$mount(&#39;#app&#39;)  //1ã€ æ³¨å†Œç»„ä»¶  Vue.component(&#39;hello&#39;, &#123;    template: &#39;&lt;h1&gt;&#123;&#123;msg&#125;&#125;&lt;/h1&gt;&#39;,    data() &#123;      return &#123;        msg: &#39;hello component&#39;      &#125;    &#125;  &#125;)  // 2ã€åˆ›å»ºVueå®ä¾‹  new Vue(&#123;    el: &quot;#app&quot;,    template: &#39;&lt;hello /&gt;&#39;  &#125;)  &lt;/script&gt;</code></pre><blockquote><p>ä»…ä»…æ³¨å†Œç»„ä»¶å¼ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜è¦é€šè¿‡åˆ›å»ºä¸€ä¸ªVueå®ä¾‹ï¼Œæ‰èƒ½ä½¿ç”¨è¯¥ç»„ä»¶ã€‚</p></blockquote></details><p>4ã€Vue.directiveè‡ªå®šä¹‰æŒ‡ä»¤</p><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">  &lt;div id=&quot;app&quot;&gt;    &lt;div v-hello=&quot;msg&quot;&gt;&lt;/div&gt;  &lt;/div&gt;  &lt;script&gt;  Vue.directive(&#39;hello&#39;, &#123;    bind: function(el, binding) &#123;      el.innerHTML = &quot;&lt;h1&gt;&quot; + binding.value + &quot;&lt;/h1&gt;&quot;    &#125;  &#125;)  new Vue(&#123;    el: &quot;#app&quot;,    data() &#123;      return &#123;        msg: &quot;hello directive è‡ªå®šä¹‰æŒ‡ä»¤&quot;      &#125;    &#125;  &#125;)  &lt;/script&gt;</code></pre></details><p>5ã€Vue.compile</p><blockquote><p>Vue.compile(template) å‚æ•°ä¹Ÿå°±æ˜¯ template æ¨¡æ¿å­—ç¬¦ä¸²å±æ€§ï¼Œç„¶åé€šè¿‡æ›¿æ¢ Vueå®ä¾‹çš„ render å‡½æ•°ï¼Œæ¥å®ç°æ¸²æŸ“ã€‚</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;  &lt;script&gt;      // å‚æ•°å°±æ˜¯templateæ¨¡æ¿å­—ç¬¦ä¸²  ç„¶åé€šè¿‡æ›¿æ¢Vueå®ä¾‹çš„renderå‡½æ•°æ¥å®ç°æ¸²æŸ“  var tpl = Vue.compile(&#39;&lt;h1&gt;&#123;&#123;msg&#125;&#125;&lt;h1&gt;&#39;)  new Vue(&#123;    el: &quot;#app&quot;,    data() &#123;      return &#123;        msg: &quot;hello,compile&quot;      &#125;    &#125;,    render: tpl.render  &#125;)  &lt;/script&gt;</code></pre></details><p>6ã€render</p><blockquote><p>Vueå®ä¾‹åœ¨åˆ›å»ºçš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šè°ƒç”¨ render å‡½æ•°ï¼Œrender å‡½æ•°é»˜è®¤ä¼šä¼ é€’ä¸€ä¸ªå‚æ•°,æˆ‘ä»¬å¯ä»¥é€šè¿‡ createElement æ¥åŠ¨æ€åˆ›å»ºä¸€ä¸ª VNodeï¼Œä»¥æ­¤æ¥æ¸²æŸ“ç›®æ ‡å…ƒç´ </p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;  &lt;script&gt;  new Vue(&#123;    el: &quot;#app&quot;,    data() &#123;      return &#123;        msg: &#39;hello,render&#39;      &#125;    &#125;,    render: function(createElement) &#123;      return createElement(&#39;h1&#39;, this.msg)    &#125;  &#125;)  &lt;/script&gt;</code></pre></details><h1 id="data-computed-watch"><a href="#data-computed-watch" class="headerlink" title="data/computed/watch"></a>data/computed/watch</h1><p>1ã€data</p><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">  &lt;div id=&quot;app&quot;&gt;    &lt;button @click=&quot;addItem&quot;&gt;æ·»åŠ &lt;/button&gt;    &lt;ul&gt;      &lt;li v-for=&quot;(item,index) in list&quot; :key=&quot;index&quot;&gt;        &lt;a :href=&quot;item.url&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/a&gt;      &lt;/li&gt;    &lt;/ul&gt;  &lt;/div&gt;  &lt;script&gt;  var app = new Vue(&#123;    el: &quot;#app&quot;,    data() &#123;      return &#123;        count: 1,        list: [&#123;          name: &#39;vue js&#39;,          url: &#39;https://cn.vuejs.org&#39;        &#125;, &#123;          name: &#39;github&#39;,          url: &#39;https://github.com&#39;        &#125;, &#123;          name: &#39;blog&#39;,          url: &#39;issummer.cn&#39;        &#125;]      &#125;    &#125;,    methods: &#123;      addItem() &#123;        this.count++        this.list.push(&#123;          name: &#39;baidu&#39; + this.count,          url: &#39;https://www.baidu.com&#39;        &#125;)      &#125;    &#125;  &#125;)  &lt;/script&gt;</code></pre></details><p>2ã€computed</p><blockquote><p>computed ä¸­çš„å±æ€§æ˜¯éœ€è¦å…ˆè¿›è¡Œè®¡ç®—ï¼Œç„¶åå†è¿”å›æƒ³è¦çš„æ•°æ®çš„ã€‚å½“æˆ‘ä»¬è¾“å‡ºæŸä¸ªå±æ€§ï¼Œå¿…é¡»ä¾èµ–å¦å¤–ä¸€ä¸ª data ä¸­çš„å±æ€§æ¥åŠ¨æ€è®¡ç®—è·å¾—çš„ï¼Œæ­¤æ—¶ä½¿ç”¨ computed å°±éå¸¸ç®€å•äº†ã€‚</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">  &lt;div id=&quot;app&quot;&gt;      &lt;button @click=&quot;addItem&quot;&gt;æ·»åŠ &lt;/button&gt;      &lt;ul&gt;          &lt;li v-for=&quot;(item,index) in list&quot; :key=&quot;index&quot;&gt;              &lt;a :href=&quot;item.url&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/a&gt;          &lt;/li&gt;      &lt;/ul&gt;  &lt;/div&gt;  &lt;script&gt;  var app = new Vue(&#123;    el: &quot;#app&quot;,    data() &#123;      return &#123;        count: 1,        // è¿™é‡Œæ˜¯åå°æ•°æ®        requestList: [          &#39;vuejs https://cn.vuejs.org&#39;,          &#39;github https://github.com&#39;,          &#39;blog https://issummer.cn&#39;        ]      &#125;    &#125;,    computed: &#123;      list: function() &#123;        var list = []        this.requestList.map(function(item, index) &#123;          var tempArr = item.split(&#39;-&#39;)          list.push(&#123;            name: tempArr[0],            url: tempArr[1]          &#125;)        &#125;)        return list      &#125;    &#125;,    methods: &#123;      addItem() &#123;        this.count++        this.requestList.push(&#39;blog&#39; + this.count + &#39;issummer.cn&#39;)      &#125;    &#125;  &#125;)  &lt;/script&gt;</code></pre></details><blockquote><p>è®¡ç®—æ˜¯å¯ä»¥ä¿®æ”¹çš„,è®¡ç®—å±æ€§ä¸ä»…å¯ä»¥å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ä¸ºä¸€ä¸ªå«æœ‰ get/set å±æ€§çš„å¯¹è±¡ã€‚å½“æˆ‘ä»¬å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°æ˜¯ï¼ŒVue å†…éƒ¨ä¼šé»˜è®¤å°†è¿™ä¸ªå‡½æ•°èµ‹å€¼ç»™ get å±æ€§ï¼Œä¸€èˆ¬ set æ˜¯æœªå®šä¹‰çš„ã€‚å½“æˆ‘ä»¬å®šä¹‰ set å±æ€§åï¼Œå°±å¯ä»¥å¯¹å®ƒè¿›è¡Œä¿®æ”¹äº†ã€‚</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">  &lt;div id=&quot;app&quot;&gt;    &lt;button @click=&quot;changeName&quot;&gt;æ”¹å˜å§“å&lt;/button&gt;    &lt;h2&gt;&#123;&#123; username &#125;&#125;&lt;/h2&gt;  &lt;/div&gt;  &lt;script&gt;  var app = new Vue(&#123;    el: &quot;#app&quot;,    data() &#123;      return &#123;        firstName: &#39;Jude&#39;,        lastName: &#39;Summer&#39;      &#125;    &#125;,    computed: &#123;      username: &#123;        get: function() &#123;          return this.firstName + &#39; &#39; + this.lastName        &#125;,        set: function(newVal) &#123;          var names = newVal.split(&#39; &#39;);          this.firstName = names[0];          this.lastName = names[1];        &#125;      &#125;    &#125;,    methods:&#123;        changeName()&#123;            if(this.username === &#39;Jude Summer&#39;)&#123;                this.username = &quot;YQ&quot;            &#125;else&#123;                this.username = &#39;Jude Summer&#39;            &#125;        &#125;    &#125;  &#125;)  &lt;/script&gt;</code></pre></details><p>3ã€watchä¾¦å¬å™¨</p><blockquote><p>åˆ›å»º Vue åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬è¿˜æåˆ°è¿‡ watch è¿™ä¸ªå±æ€§ï¼Œå®ƒå…¶å®æ˜¯ä¸ªå¯¹è±¡ï¼Œé”®æ˜¯éœ€è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå€¼æ˜¯å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚å€¼ä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•åï¼Œæˆ–è€…åŒ…å«é€‰é¡¹çš„å¯¹è±¡ã€‚å’Œä¸Šé¢çš„è®¡ç®—å±æ€§ç±»ä¼¼ï¼Œä»–å¯ä»¥ç›‘å¬ å€¼/è¡¨è¾¾å¼ çš„å˜åŒ–æ¥æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="html">    &lt;div id=&quot;app&quot;&gt;        &lt;button @click=&quot;changeName&quot;&gt;æ”¹å˜å§“å&lt;/button&gt;        &lt;h2&gt;&#123;&#123; username &#125;&#125;&lt;/h2&gt;    &lt;/div&gt;    &lt;script&gt;        var app = new Vue(&#123;            el: &quot;#app&quot;,            data() &#123;                return &#123;                    firstName: &#39;Jude&#39;,                    lastName: &#39;Summer&#39;,                    username: &#39;Jude Summer&#39;                &#125;            &#125;,            watch: &#123;                firstName: function (val, oldVal) &#123;                    this.username = val + &#39; &#39; + this.lastName;                &#125;,                lastName: function (val, oldVal) &#123;                    this.username = this.firstName + &#39; &#39; + val;                &#125;            &#125;,            methods: &#123;                changeName() &#123;                    if (this.username === &#39;Jude Summer&#39;) &#123;                        this.firstName = &quot;Y&quot;;                        this.lastName = &quot;Q&quot;;                    &#125; else &#123;                        this.firstName = &quot;Jude&quot;;                        this.lastName = &quot;Summer&quot;;                    &#125;                &#125;            &#125;,        &#125;)    &lt;/script&gt;    // ç›‘å¬å¯¹è±¡å±æ€§    &lt;script&gt;        var app = new Vue(&#123;            el: &quot;#app&quot;,            data() &#123;                return &#123;                    userinfo: &#123;                        firstName: &#39;Jude&#39;,                        lastName: &#39;Summer&#39;                    &#125;,                    username: &quot;Jude Summer&quot;                &#125;            &#125;,            watch: &#123;                // æ­¤æ—¶æ— è®ºæˆ‘ä»¬å¦‚ä½•ç‚¹å‡»æŒ‰é’®ï¼Œéƒ½æ— æ³•æ”¹å˜ username çš„å€¼ï¼Œå› ä¸º watch ä¾¦å¬å™¨é»˜è®¤åªæ˜¯ä¾¦å¬è¯¥å¯¹è±¡æœ¬èº«çš„èµ‹å€¼æ“ä½œï¼Œä¹Ÿå°±æ˜¯ç›´æ¥å¯¹ this.userinfo è¿›è¡Œèµ‹å€¼æ“ä½œæ—¶çš„å˜åŒ–ï¼Œå¹¶æœªå¯¹å…¶å†…éƒ¨å±æ€§è¿›è¡Œä¾¦å¬                userinfo: function (val, oldVal) &#123;                    this.username = val.firstName + &#39; &#39; + val.lastName;                &#125;            &#125;,            methods: &#123;                changeName: function () &#123;                    if (this.username === &#39;Jude Summer&#39;) &#123;                        this.userinfo.firstName = &#39;Y&#39;                        this.userinfo.lastName = &#39;Q&#39;                    &#125; else &#123;                        this.userinfo.firstName = &quot;Jude&quot;                        this.userinfo.lastName = &quot;Summer&quot;                    &#125;                &#125;            &#125;,        &#125;)    &lt;/script&gt;    // ä¸Šé¢çš„æ–¹æ³•æ˜¯æ— æ³•ä¿®æ”¹usernameçš„å€¼ å› ä¸º watch ä¾¦å¬å™¨é»˜è®¤åªæ˜¯ä¾¦å¬è¯¥å¯¹è±¡æœ¬èº«çš„èµ‹å€¼æ“ä½œï¼Œä¹Ÿå°±æ˜¯ç›´æ¥å¯¹ this.userinfo è¿›è¡Œèµ‹å€¼æ“ä½œæ—¶çš„å˜åŒ–ï¼Œå¹¶æœªå¯¹å…¶å†…éƒ¨å±æ€§è¿›è¡Œä¾¦å¬ã€‚å®é™…ä¸Šå¯¹äºä¾¦å¬çš„å€¼æ˜¯å¯ä»¥ä¸ºä¸€ä¸ªå¯¹è±¡çš„ï¼Œå®ƒè¿˜æœ‰ä¸ª deep å±æ€§ï¼Œç”¨æ¥è®¾ç½®æ˜¯å¦ä¾¦å¬å†…éƒ¨å±æ€§çš„å˜åŒ–ï¼Œè€Œå›è°ƒå‡½æ•°æ˜¯é€šè¿‡ handler æ¥è®¾ç½®çš„     &lt;script&gt;        var app = new Vue(&#123;            el: &quot;#app&quot;,            data() &#123;                return &#123;                    userinfo: &#123;                        firstName: &#39;Jude&#39;,                        lastName: &#39;Summer&#39;                    &#125;,                    username: &quot;Jude Summer&quot;                &#125;            &#125;,            watch: &#123;                // deppå±æ€§ç”¨æ¥ä¾¦å¬å†…éƒ¨å±æ€§å˜åŒ–ï¼Œå›è°ƒå‡½æ•°æ˜¯é€šè¿‡handeræ¥è®¾ç½®                // é€‚ç”¨äºéæ•´ä½“èµ‹å€¼  ä¹Ÿå°±æ˜¯é€‚ç”¨äºå±€éƒ¨ä¿®æ”¹å±æ€§ï¼Œè¿™ä¸ªæ—¶å€™é€šè¿‡è®¾ç½®deepå±æ€§ä¸ºtrueï¼Œæ¥è¾¾åˆ°ä¾¦å¬ç›®çš„ã€‚                userinfo: &#123;                    deep: true,                    handler: function (val, oldVal) &#123;                        this.username = val.firstName + &quot; &quot; + val.lastName;                    &#125;                &#125;            &#125;,            methods: &#123;                // ä¿®æ”¹åå­—                changeName: function () &#123;                    if (this.username === &#39;Jude Summer&#39;) &#123;                        this.userinfo.firstName = &#39;Y&#39;                        this.userinfo.lastName = &#39;Q&#39;                    &#125; else &#123;                        this.userinfo.firstName = &quot;Jude&quot;                        this.userinfo.lastName = &quot;Summer&quot;                    &#125;                &#125;            &#125;,        &#125;)    &lt;/script&gt;    // å†™æˆå¯¹è±¡å±æ€§è®¿é—®è¡¨è¾¾å¼çš„    å½“ä¾¦å¬å¯¹è±¡åŒ…å«å¾ˆå¤šå±æ€§ï¼Œè€Œæˆ‘ä»¬åªæ˜¯éœ€è¦ç›‘å¬å…¶ä¸­çš„ä¸€ä¸ªæˆ–æŸå‡ ä¸ªå±æ€§ï¼Œè¿™æ—¶å¦‚æœæˆ‘ä»¬é€šè¿‡è¿™ç§æ–¹å¼ä¾¦å¬æ‰€æœ‰å†…éƒ¨å±æ€§çš„å˜åŒ–ï¼Œè‡ªç„¶å°±ä¼šé€ æˆå†…å­˜çš„æµªè´¹ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åªä¾¦å¬å•ä¸€å†…éƒ¨å±æ€§çš„å˜åŒ–    &lt;script&gt;        var app = new Vue(&#123;            el: &quot;#app&quot;,            data() &#123;                return &#123;                    userinfo: &#123;                        firstName: &#39;Jude&#39;,                        lastName: &#39;Summer&#39;                    &#125;,                    username: &quot;Jude Summer&quot;                &#125;            &#125;,            watch: &#123;                // ä¾¦å¬å¯¹è±¡çš„æŸä¸ªå±æ€§                &#39;userinfo.lastName&#39;:function(val,oldVal)&#123;                    this.username = this.userinfo.firstName + &#39; &#39; + val;                &#125;            &#125;,            methods: &#123;                // ä¿®æ”¹åå­—                changeName: function () &#123;                    if (this.username === &#39;Jude Summer&#39;) &#123;                        // this.userinfo.firstName = &#39;Y&#39;                        this.userinfo.lastName = &#39;Q&#39;                    &#125; else &#123;                        // this.userinfo.firstName = &quot;Jude&quot;                        this.userinfo.lastName = &quot;Summer&quot;                    &#125;                &#125;            &#125;,        &#125;)    &lt;/script&gt;</code></pre></details><h1 id="v-onå¯¹è±¡è¯­æ³•"><a href="#v-onå¯¹è±¡è¯­æ³•" class="headerlink" title="v-onå¯¹è±¡è¯­æ³•"></a>v-onå¯¹è±¡è¯­æ³•</h1><blockquote><p>ç»‘å®šäº‹ä»¶ç›‘å¬å™¨ã€‚äº‹ä»¶ç±»å‹ç”±å‚æ•°æŒ‡å®šã€‚è¡¨è¾¾å¼å¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•çš„åå­—æˆ–ä¸€ä¸ªå†…è”è¯­å¥ï¼Œå¦‚æœæ²¡æœ‰ä¿®é¥°ç¬¦ä¹Ÿå¯ä»¥çœç•¥ã€‚</p></blockquote><p>é€šå¸¸çš„å†™æ³•ï¼š</p><pre><code class="html">&lt;button @click=&quot;handleClick&quot;&gt;&lt;/button&gt;</code></pre><p>å¯¹è±¡è¯­æ³•: </p><pre><code class="html">&lt;div v-on=&quot;&#123; mouseenter: ShowInfo, mouseleave: HideInfo &#125;&quot;&gt;  &lt;div&gt;æˆ‘æ˜¯title&lt;/div&gt;  &lt;div v-show=&quot;ShowWrapper&quot;&gt;æˆ‘æ˜¯æ˜¾ç¤ºçš„å†…å®¹ï¼&lt;/div&gt;&lt;/div&gt;</code></pre><h1 id="axiosçš„å°è£…"><a href="#axiosçš„å°è£…" class="headerlink" title="axiosçš„å°è£…"></a>axiosçš„å°è£…</h1><h1 id="router-link"><a href="#router-link" class="headerlink" title="router-link"></a>router-link</h1><blockquote><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å°†router-linkæ¸²æŸ“æˆæŸç§æ ‡ç­¾ï¼Œä¾‹å¦‚<code>&lt;li&gt;&lt;/li&gt;</code>ä½¿ç”¨ tag prop ç±»æŒ‡å®šä½•ç§æ ‡ç­¾ï¼ŒåŒæ ·å®ƒè¿˜æ˜¯ä¼šç›‘å¬ç‚¹å‡»ï¼Œè§¦å‘å¯¼èˆª</p></blockquote><p>ç¤ºä¾‹:</p><pre><code class="html">&lt;ul class=&quot;nav-list&quot;&gt;  &lt;router-link tag=&quot;li&quot; to=&quot;home&quot;&gt;home&lt;/router-link&gt;&lt;/ul&gt;&lt;!-- æ¸²æŸ“çš„ç»“æœä¸º --&gt;&lt;li&gt;home&lt;/li&gt;</code></pre><h1 id="v-slot"><a href="#v-slot" class="headerlink" title="v-slot"></a>v-slot</h1><blockquote><p>å¯æ”¾ç½®åœ¨å‡½æ•°å‚æ•°ä½ç½®çš„ JavaScript è¡¨è¾¾å¼ (åœ¨æ”¯æŒçš„ç¯å¢ƒä¸‹å¯ä½¿ç”¨è§£æ„)ã€‚å¯é€‰ï¼Œå³åªéœ€è¦åœ¨ä¸ºæ’æ§½ä¼ å…¥ prop çš„æ—¶å€™ä½¿ç”¨ã€‚æä¾›å…·åæ’æ§½æˆ–éœ€è¦æ¥æ”¶ prop çš„æ’æ§½ã€‚</p></blockquote><pre><code class="html">&lt;!-- çˆ¶ç»„ä»¶ --&gt;&lt;template&gt;    &lt;div class=&quot;common-card&quot;&gt;    &lt;div class=&quot;title&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/div&gt;    &lt;div class=&quot;value&quot;&gt;&#123;&#123; value &#125;&#125;&lt;/div&gt;    &lt;div class=&quot;chart&quot;&gt;      &lt;slot&gt;&lt;/slot&gt;    &lt;/div&gt;    &lt;div class=&quot;line&quot;&gt;&lt;/div&gt;    &lt;div class=&quot;total&quot;&gt;      &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><pre><code class="html">&lt;!-- å­ç»„ä»¶ --&gt;  &lt;common-card title=&quot;ä»Šæ—¥äº¤æ˜“ç”¨æˆ·æ•°&quot; :value=&quot;1234567890&quot;&gt;    &lt;template&gt;      &lt;v-chart :options=&quot;getOptions()&quot; /&gt;    &lt;/template&gt;    &lt;template v-slot:footer&gt;      &lt;span&gt;é€€è´§ç‡&lt;/span&gt;      &lt;span class=&quot;emphasis&quot;&gt;12%&lt;/span&gt;    &lt;/template&gt;  &lt;/common-card&gt;</code></pre><h1 id="props"><a href="#props" class="headerlink" title="props"></a>props</h1><blockquote><p>props å¯ä»¥æ˜¯æ•°ç»„æˆ–å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶æ¥è‡ªçˆ¶ç»„ä»¶çš„æ•°æ®ã€‚props å¯ä»¥æ˜¯ç®€å•çš„æ•°ç»„ï¼Œæˆ–è€…ä½¿ç”¨å¯¹è±¡ä½œä¸ºæ›¿ä»£ï¼Œå¯¹è±¡å…è®¸é…ç½®é«˜çº§é€‰é¡¹ï¼Œå¦‚ç±»å‹æ£€æµ‹ã€è‡ªå®šä¹‰éªŒè¯å’Œè®¾ç½®é»˜è®¤å€¼ã€‚</p></blockquote><blockquote><p>å¸¸ç”¨äºçˆ¶ç»„ä»¶ä¸å­ç»„ä»¶çš„é€šä¿¡<br>å¯¹è±¡è¯­æ³•é€‰é¡¹åŒ…æ‹¬:</p></blockquote><p>1ã€typeï¼šåŸç”Ÿæ„é€ å‡½æ•°çš„ä¸€ç§ï¼šStringã€Numberã€Booleanã€Arrayã€Objectã€Dateã€Functionã€Symbolã€ä»»ä½•è‡ªå®šä¹‰æ„é€ å‡½æ•°ã€‚</p><p>2ã€default: any é»˜è®¤å€¼</p><p>3ã€required:Boolean è¯¥propæ˜¯å¦æ˜¯å¿…å¡«é¡¹</p><p>4ã€validator: Function æ ¡éªŒå‡½æ•°</p><pre><code class="js">  props: &#123;    // æ£€æµ‹ç±»å‹    title: String,    // æ£€æµ‹ç±»å‹ + å…¶ä»–éªŒè¯    age: &#123;      type: Number, //ç±»å‹      default: 0,// é»˜è®¤å€¼      required: true,// æ˜¯å¦æ˜¯å¿…å¡«é¡¹      // æ ¡éªŒå‡½æ•°      validator: function (value) &#123;        return value &gt;= 0      &#125;    &#125;  &#125;</code></pre><h1 id="mixin-æ··å…¥"><a href="#mixin-æ··å…¥" class="headerlink" title="mixin æ··å…¥"></a>mixin æ··å…¥</h1><blockquote><p>æ··å…¥ (mixin) æä¾›äº†ä¸€ç§éå¸¸çµæ´»çš„æ–¹å¼ï¼Œæ¥åˆ†å‘ Vue ç»„ä»¶ä¸­çš„å¯å¤ç”¨åŠŸèƒ½ã€‚ä¸€ä¸ªæ··å…¥å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ã€‚å½“ç»„ä»¶ä½¿ç”¨æ··å…¥å¯¹è±¡æ—¶ï¼Œæ‰€æœ‰æ··å…¥å¯¹è±¡çš„é€‰é¡¹å°†è¢«â€œæ··åˆâ€è¿›å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚</p></blockquote><p>1ã€å®ç°åŸç†</p><blockquote><p>å°†ç”¨æˆ·ä¼ å…¥çš„å¯¹è±¡ä¸ Vue è‡ªèº«çš„optionså±æ€§åˆå¹¶ï¼Œåˆå¹¶åçš„å¯¹è±¡å°†ä¼šè¦†ç›–åŸæ¥çš„Vue.optionsã€‚å› ä¸º mixin æ–¹æ³•ä¿®æ”¹äº†Vue.optionså±æ€§ï¼Œä¹‹ååˆ›å»ºçš„æ¯ä¸ªå®ä¾‹éƒ½ä¼šç”¨åˆ°è¯¥å±æ€§ï¼Œæ‰€ä»¥ä¼šå½±å“åˆ›å»ºçš„æ¯ä¸ªå®ä¾‹ã€‚</p></blockquote><p>æ³¨æ„ï¼šå¦‚æœç”¨æˆ·ä¼ å…¥çš„å¯¹è±¡ä¸ç»„ä»¶æœ‰ç›¸åŒçš„æ•°æ®å¯¹è±¡ï¼Œå°†ä¼šå‘ç”Ÿåˆå¹¶ï¼Œå¹¶ä¸”éµå¾ªç»„ä»¶æ•°æ®ä¼˜å…ˆçš„åŸåˆ™ã€‚å¯¹äºé’©å­å‡½æ•°æ¥è¯´ï¼Œå¦‚æœç›¸åŒï¼Œå°†ä¼šåˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥éƒ½ä¼šè¢«è°ƒç”¨ï¼Œåªæ˜¯æ··å…¥å¯¹è±¡çš„é’©å­ä¼šè¢«å…ˆè°ƒç”¨ã€‚å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹ï¼Œä¾‹å¦‚ methodsã€components å’Œ directivesï¼Œå°†è¢«åˆå¹¶ä¸ºåŒä¸€ä¸ªå¯¹è±¡ã€‚ä¸¤ä¸ªå¯¹è±¡é”®åå†²çªæ—¶ï¼Œå–ç»„ä»¶å¯¹è±¡çš„é”®å€¼å¯¹ã€‚</p><pre><code class="js">// vueæºç  vue/src/core/global-api/mixin.jsimport &#123; mergeOptions &#125; from &#39;../util/index&#39;export function initMixin (Vue: GlobalAPI) &#123;  Vue.mixin = function (mixin: Object) &#123;    this.options = mergeOptions(this.options, mixin)    return this  &#125;&#125;</code></pre><p>2ã€å¦‚ä½•ç†è§£mixin?</p><p>å¯ä»¥å°†mixinç†è§£ä¸ºæ•°ç»„ï¼Œæ•°ç»„ä¸­æœ‰å•ä¸ªæˆ–è€…å¤šä¸ªmixinï¼Œmixinçš„æœ¬è´¨å°±æ˜¯jså¯¹è±¡ï¼Œæ‹¥æœ‰Vueå®ä¾‹çš„æ‰€æœ‰å±æ€§ï¼Œä¾‹å¦‚ï¼šdata,created,methodsç­‰ï¼Œè¿˜å¯ä»¥åœ¨mixinä¸­å†æ¬¡åµŒå¥—mixin</p><p>æ³¨æ„ï¼šåœ¨ç»„ä»¶ä¸­å¼•å…¥çš„æ–¹å¼ä¸º <code>mixins:[myMixin]</code></p><p>3ã€mixinçš„å®ç°</p><blockquote><p>å½“Vueåœ¨å®ä¾‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨mergeOptionså‡½æ•°è¿›è¡Œoptionsçš„åˆå¹¶</p></blockquote><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">// vueæºç  core/util/options.jsexport function mergeOptions(  parent: Object,  child: Object,  vm?: Component): Object &#123;  ...  // å¦‚æœæœ‰ child.extends é€’å½’è°ƒç”¨ mergeOptions å®ç°å±æ€§æ‹·è´  const extendsFrom = child.extends  if (extendsFrom) &#123;    parent = mergeOptions(parent, extendsFrom, vm)  &#125;  // å¦‚æœæœ‰ child.mixins é€’å½’è°ƒç”¨ mergeOptions å®ç°å±æ€§æ‹·è´  if (child.mixins) &#123;    for (let i = 0, l = child.mixins.length; i &lt; l; i++) &#123;      parent = mergeOptions(parent, child.mixins[i], vm)    &#125;  &#125;  // ç”³æ˜ options ç©ºå¯¹è±¡ï¼Œç”¨æ¥ä¿å­˜å±æ€§æ‹·è´ç»“æœ  const options = &#123;&#125;  let key  // éå† parent å¯¹è±¡ï¼Œè°ƒç”¨ mergeField è¿›è¡Œå±æ€§æ‹·è´  for (key in parent) &#123;    mergeField(key)  &#125;  // éå† child å¯¹è±¡ï¼Œè°ƒç”¨ mergeField è¿›è¡Œå±æ€§æ‹·è´  for (key in child) &#123;    if (!hasOwn(parent, key)) &#123;      mergeField(key)    &#125;  &#125;  // å±æ€§æ‹·è´å®ç°æ–¹æ³• mergeField å‡½æ•°æ¥æ”¶ä¸€ä¸ª keyï¼Œé¦–å…ˆä¼šç”³æ˜ strat å˜é‡ï¼Œå¦‚æœ strats[key] ä¸ºçœŸï¼Œå°±å°† strats[key] èµ‹å€¼ç»™ stratã€‚  function mergeField(key) &#123;    // ç©¿é€èµ‹å€¼ï¼Œé»˜è®¤ä¸º defaultStrat    const strat = strats[key] || defaultStrat    options[key] = strat(parent[key], child[key], vm, key)  &#125;  return options&#125;</code></pre></details><blockquote><p>vue ä¸­ mixins çš„ä¼˜å…ˆçº§ï¼Œcomponent &gt; mixins &gt; extendsã€‚</p></blockquote><h1 id="è¾¹ç•Œå¤„ç†ï¼šinject-provide"><a href="#è¾¹ç•Œå¤„ç†ï¼šinject-provide" class="headerlink" title="è¾¹ç•Œå¤„ç†ï¼šinject/provide"></a>è¾¹ç•Œå¤„ç†ï¼šinject/provide</h1><p>ç±»å‹ï¼š</p><blockquote><p>provideï¼šObject | () =&gt; Object</p></blockquote><blockquote><p>injectï¼šArray<string> | { [key: string]: string | Symbol | Object }</p></blockquote><p>provideå’Œinjectéœ€è¦ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥å…è®¸ä¸€ä¸ªç¥–å…ˆç»„ä»¶å‘å…¶æ‰€æœ‰å­å­™åä»£æ³¨å…¥ä¸€ä¸ªä¾èµ–ï¼Œä¸ç®¡ç»„ä»¶çš„å±‚æ¬¡æœ‰å¤šæ·±ï¼Œå¹¶åœ¨å…¶ä¸Šä¸‹æ¸¸å…³ç³»æˆç«‹çš„æ—¶é—´é‡Œå§‹ç»ˆç”Ÿæ•ˆã€‚</p><p>åŒreactçš„ä¸Šä¸‹æ–‡ç‰¹æ€§ç›¸ä¼¼</p><details><summary>ç‚¹å‡»å±•ç¤ºä»£ç </summary><pre><code class="js">// çˆ¶çº§ç»„ä»¶æä¾› &#39;foo&#39;var Provider = &#123;  provide: &#123;    foo: &#39;bar&#39;  &#125;,  // ...&#125;// å­ç»„ä»¶æ³¨å…¥ &#39;foo&#39;var Child = &#123;  inject: [&#39;foo&#39;],  created () &#123;    console.log(this.foo) // =&gt; &quot;bar&quot;  &#125;  // ...&#125;</code></pre></details><h1 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h1><blockquote><p>Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚ç®€å•çš„è¯´ï¼Œvuexå°±æ˜¯ä¸€ä¸ªçŠ¶æ€ç®¡ç†å™¨ã€‚</p></blockquote><p>å¼€å‘è¿‡ç¨‹ï¼Œé€šå¸¸ä¼šé‡åˆ°å¤šä¸ªè§†å›¾ä¾èµ–åŒä¸€ä¸ªçŠ¶æ€ï¼Œä¸åŒè§†å›¾çš„è¡Œä¸ºéœ€è¦å˜æ›´ä¸ºåŒä¸€çŠ¶æ€ï¼ˆä¾‹å¦‚ï¼šåå°ç®¡ç†ç³»ç»Ÿçš„ä¾§è¾¹æ çš„æ”¶ç¼©åŠŸèƒ½ã€‚ï¼‰</p><p>Vuexçš„æ ¸å¿ƒå°±æ˜¯storeï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªä»“åº“å®¹å™¨ï¼ŒåŒ…å«äº†é©±åŠ¨åº”ç”¨çš„æ•°æ®æºï¼ˆstateï¼‰ï¼Œä¸åŒäºå•çº¯çš„å…¨å±€å¯¹è±¡ï¼Œvuexçš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ï¼Œå½“ Vueç»„ä»¶ä» store ä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œè‹¥ store ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”åœ°å¾—åˆ°é«˜æ•ˆæ›´æ–°ã€‚</p><p>ä¸èƒ½ç›´æ¥æ”¹å˜ store ä¸­çš„çŠ¶æ€ï¼Œæ”¹å˜ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¯æ˜¾å¼åœ°æäº¤ (commit) mutationã€‚è¿™æ ·ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œè®©æˆ‘ä»¬èƒ½å¤Ÿå®ç°ä¸€äº›å·¥å…·å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°äº†è§£æˆ‘ä»¬çš„åº”ç”¨ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4ã€DOMContentLoaded</title>
      <link href="/2019/08/18/DOMContentLoaded/"/>
      <url>/2019/08/18/DOMContentLoaded/</url>
      
        <content type="html"><![CDATA[<p>DOMContentLoadedé¡¾åæ€ä¹‰å°±æ˜¯DOMå†…å®¹åŠ è½½å®Œæ¯•ã€‚</p><span id="more"></span><p>å½“åˆå§‹çš„ HTML æ–‡æ¡£è¢«å®Œå…¨åŠ è½½å’Œè§£æå®Œæˆä¹‹åï¼ŒDOMContentLoaded äº‹ä»¶è¢«è§¦å‘ï¼Œè€Œæ— éœ€ç­‰å¾…æ ·å¼è¡¨ã€å›¾åƒå’Œå­æ¡†æ¶çš„å®Œå…¨åŠ è½½ã€‚å¦ä¸€ä¸ªä¸åŒçš„äº‹ä»¶ load åº”è¯¥ä»…ç”¨äºæ£€æµ‹ä¸€ä¸ªå®Œå…¨åŠ è½½çš„é¡µé¢ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªå¸¸è§çš„é”™è¯¯ï¼Œå°±æ˜¯åœ¨æœ¬åº”ä½¿ç”¨ DOMContentLoaded ä¼šæ›´åŠ åˆé€‚çš„æƒ…å†µä¸‹ï¼Œå´é€‰æ‹©ä½¿ç”¨ loadï¼Œæ‰€ä»¥è¦è°¨æ…ã€‚<br>æ³¨æ„ï¼šDOMContentLoaded äº‹ä»¶å¿…é¡»ç­‰å¾…å…¶æ‰€å±scriptä¹‹å‰çš„æ ·å¼è¡¨åŠ è½½è§£æå®Œæˆæ‰ä¼šè§¦å‘ã€‚</p><p>åœ¨Vueé¡¹ç›®çš„App.vueä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è®¾ç½®å­—ä½“ã€‚</p><p>1ã€è·å–HTMLå…ƒç´ ï¼›</p><p>2ã€æ ¹æ®å±å¹•å®½åº¦åŠ¨æ€è®¡ç®—fontSize</p><p>3ã€å½“fontSizeå¤§äº50æ—¶ï¼Œè®¾ç½®æœ€å¤§å€¼ä¸º50</p><p>4ã€è®¾ç½®HTMLçš„fontSizeå±æ€§ï¼Œä½¿remç”Ÿæ•ˆï¼Œ1rem = fontSize + â€œpxâ€</p><pre><code class="js">&lt;script&gt;// DOMContentLoaded äº‹ä»¶å¿…é¡»ç­‰å¾…å…¶æ‰€å±scriptä¹‹å‰çš„æ ·å¼è¡¨åŠ è½½è§£æå®Œæˆæ‰ä¼šè§¦å‘ã€‚  document.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; &#123;    // è·å–htmlå…ƒç´     const html = document.querySelector(&#39;html&#39;)    // æ ¹æ®å±å¹•å®½åº¦åŠ¨æ€è®¡ç®—fontSize    let fontSize = window.innerWidth / 10    // å½“fontSizeå¤§äº50æ—¶ï¼Œè®¾ç½®æœ€å¤§å€¼ä¸º50    fontSize = fontSize &gt; 50 ? 50 : fontSize    // è®¾ç½®htmlçš„fontSizeå±æ€§ï¼Œä½¿remç”Ÿæ•ˆï¼Œ1rem = fontSize + &#39;px&#39;    html.style.fontSize = fontSize + &#39;px&#39;  &#125;)&lt;/script&gt;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3ã€å¦‚ä½•ä½¿ç”¨CSSç”»ä¸‰è§’å½¢?</title>
      <link href="/2019/06/20/css/"/>
      <url>/2019/06/20/css/</url>
      
        <content type="html"><![CDATA[<p>ä¸‰è§’å½¢çš„ç”»æ³•,ä¸€èˆ¬ç»å¸¸ä½¿ç”¨ä¸‰è§’å½¢ä½œä¸ºæç¤ºæ¡†ã€ä¸‹æ‹‰èœå•ç­‰åŠŸèƒ½ã€‚</p><span id="more"></span><h2 id="ä¸€ã€CSSç”»ä¸‰è§’å½¢å®ç°æ–¹å¼"><a href="#ä¸€ã€CSSç”»ä¸‰è§’å½¢å®ç°æ–¹å¼" class="headerlink" title="ä¸€ã€CSSç”»ä¸‰è§’å½¢å®ç°æ–¹å¼"></a>ä¸€ã€CSSç”»ä¸‰è§’å½¢å®ç°æ–¹å¼</h2><p>1ã€HTMLç»“æ„</p><pre><code class="html">&lt;div class=&quot;item0&quot;&gt;&lt;/div&gt;&lt;div class=&quot;item1&quot;&gt;&lt;/div&gt;&lt;div class=&quot;item2&quot;&gt;&lt;/div&gt;&lt;div class=&quot;item3&quot;&gt;&lt;/div&gt;</code></pre><p>2ã€å°†ç±»åä¸ºitemçš„å—çº§å…ƒç´ çš„widthã€heightè®¾ç½®ä¸º0</p><pre><code class="css">.item0&#123;    width:0;    height:0;&#125;</code></pre><p>3ã€å°†ç±»åä¸ºitemçš„å…ƒç´ çš„3ä¸ªborderçš„é¢œè‰²è®¾ç½®ä¸ºtransparentï¼Œç®­å¤´æŒ‡å‘çš„å¯¹é¢borderè®¾ç½®é¢œè‰²ï¼›</p><pre><code class="css">.item0&#123;    width: 0px;    height: 0px;    border-left: 50px solid transparent;    border-right: 50px solid transparent;    border-top: 50px solid transparent;    border-bottom: 80px solid blue;    background: white;&#125;</code></pre><p>ä¸Šé¢çš„ä¸ºæ–¹å‘å‘ä¸Šçš„ä¸‰è§’å½¢<br>4ã€ä¾æ¬¡ç±»æ¨å¯ä»¥ç”»å‡ºæ–¹å‘å‘å·¦ã€å³ã€ä¸‹çš„ä¸‰è§’å½¢</p><pre><code class="css">.item1&#123;    width: 0px;    height: 0px;    border-left: 50px solid transparent;    border-right: 50px solid transparent;    border-top: 80px solid green;    border-bottom: 50px solid transparent;    background: white;&#125;.item2&#123;    width: 0px;    height: 0px;    border-left: 50px solid transparent;    border-right: 80px solid violet;    border-top: 50px solid transparent;    border-bottom: 50px solid transparent;    background: white;&#125;.item3&#123;    width: 0px;    height: 0px;    border-left: 80px solid purple;    border-right: 50px solid transparent;    border-top: 50px solid transparent;    border-bottom: 50px solid transparent;    background: white;&#125;</code></pre><h2 id="äºŒã€ç½‘é¡µå˜æˆç°è‰²çš„æ–¹æ³•ï¼š"><a href="#äºŒã€ç½‘é¡µå˜æˆç°è‰²çš„æ–¹æ³•ï¼š" class="headerlink" title="äºŒã€ç½‘é¡µå˜æˆç°è‰²çš„æ–¹æ³•ï¼š"></a>äºŒã€ç½‘é¡µå˜æˆç°è‰²çš„æ–¹æ³•ï¼š</h2><pre><code class="css">html&#123;    filter: grayscale(100%);    -webkit-filter: grayscale(100%);    -moz-filter: grayscale(100%);    -ms-filter: grayscale(100%);    -o-filter: grayscale(100%);&#125;</code></pre><h2 id="ä¸‰ã€positionå®šä½"><a href="#ä¸‰ã€positionå®šä½" class="headerlink" title="ä¸‰ã€positionå®šä½"></a>ä¸‰ã€positionå®šä½</h2><blockquote><p>static: é»˜è®¤å€¼<br>relative: ç›¸å¯¹å®šä½ ç›¸å¯¹äºè‡ªèº«åŸæœ‰ä½ç½®è¿›è¡Œåç§»ï¼Œä»å¤„äºæ ‡å‡†æ–‡æ¡£æµä¸­<br>absolute: ç»å¯¹å®šä½ ç›¸å¯¹äºæœ€è¿‘çš„å·²å®šä½çš„ç¥–å…ˆå…ƒç´ <br>fixed: å›ºå®šå®šä½ ç›¸å¯¹äºè§†çª—æ¥å®šä½</p></blockquote><h2 id="å››ã€æµ®åŠ¨ã€æ¸…æ¥šæµ®åŠ¨"><a href="#å››ã€æµ®åŠ¨ã€æ¸…æ¥šæµ®åŠ¨" class="headerlink" title="å››ã€æµ®åŠ¨ã€æ¸…æ¥šæµ®åŠ¨"></a>å››ã€æµ®åŠ¨ã€æ¸…æ¥šæµ®åŠ¨</h2><pre><code class="css">display: table;content:&quot;&quot;;clear:both;</code></pre><h2 id="äº”ã€å›æµå’Œé‡ç»˜"><a href="#äº”ã€å›æµå’Œé‡ç»˜" class="headerlink" title="äº”ã€å›æµå’Œé‡ç»˜"></a>äº”ã€å›æµå’Œé‡ç»˜</h2><blockquote><p>å›æµä¸€å®šé‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šå›æµ</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2ã€å¾®ä¿¡å°ç¨‹åºcheckbox-group</title>
      <link href="/2019/01/20/check-group/"/>
      <url>/2019/01/20/check-group/</url>
      
        <content type="html"><![CDATA[<p>checkbox-groupå¤šé¡¹é€‰æ‹©å™¨ï¼Œå†…éƒ¨ç”±å¤šä¸ªcheckboxç»„æˆï¼›<br>å±æ€§bindchange   è¯´æ˜checkbox-groupä¸­é€‰ä¸­é¡¹å‘ç”Ÿæ”¹å˜æ—¶è§¦å‘ change äº‹ä»¶ï¼Œdetail = {value:[é€‰ä¸­çš„checkboxçš„valueçš„æ•°ç»„]};</p><span id="more"></span><pre><code class="html">&lt;checkbox-group  class=&quot;checkbox_group&quot; bindchange=&quot;checkboxChange&quot;&gt;    &lt;label class=&quot;checkbox&quot; wx:for=&quot;&#123;&#123;items&#125;&#125;&quot; wx:key=&quot;item&quot;&gt;        &lt;checkbox value=&quot;&#123;&#123;item.value&#125;&#125;&quot;  checked=&quot;&#123;&#123;item.checked&#125;&#125;&quot; /&gt;        &#123;&#123;item.value&#125;&#125;    &lt;/label&gt;&lt;/checkbox-group&gt;</code></pre><p>æ¯ä¸€æ¬¡ä¿®æ”¹é€‰ä¸­é¡¹ï¼Œéƒ½éœ€è¦ä¸€ä¸ªç©ºæ•°ç»„å»å­˜æ”¾é€‰ä¸­é¡¹ã€‚</p><details><summary>ç‚¹æˆ‘å±•ç¤ºä»£ç </summary><pre><code class="js">  checkboxChange(e) &#123;    const items = this.data.items;     const values = e.detail.value;    // è®¾ç½®é€‰ä¸­çš„æ•°ç»„ä¸ºç©º  é€‰ä¸­çš„id pushåˆ°æ•°ç»„é‡Œé¢    this.data.vehicle_arr = [];    for (let i = 0, lenI = items.length; i &lt; lenI; ++i) &#123;      items[i].checked = false // éå†itemsï¼Œè®©æ‰€æœ‰çš„é€‰ä¸­çŠ¶æ€éƒ½ä¸ºfalse      for (let j = 0, lenJ = values.length; j &lt; lenJ; ++j) &#123;        if (items[i].value === values[j]) &#123;          items[i].checked = true;          const List = items[i].name.toString().split();          for (let k in List) &#123;            this.data.vehicle_arr.push(List[k]);          &#125;        &#125;      &#125;    &#125;    // é€‰ä¸­çš„id    this.data.unique = [...new Set(this.data.vehicle_arr)];    this.setData(&#123;      driverarr: e.detail.value.join(&quot;,&quot;), // å¤šé€‰çš„æ•°ç»„      items,    &#125;);  &#125;,</code></pre></details>]]></content>
      
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1ã€Hexoå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2019/01/02/hello-world/"/>
      <url>/2019/01/02/hello-world/</url>
      
        <content type="html"><![CDATA[<p>hexoå¸¸ç”¨å‘½ä»¤</p><span id="more"></span><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="æ–°å»ºæ–‡ä»¶"><a href="#æ–°å»ºæ–‡ä»¶" class="headerlink" title="æ–°å»ºæ–‡ä»¶"></a>æ–°å»ºæ–‡ä»¶</h3><pre><code class="js">$ hexo new &quot;My New Post&quot;</code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="å¯åŠ¨æœ¬åœ°æœåŠ¡"><a href="#å¯åŠ¨æœ¬åœ°æœåŠ¡" class="headerlink" title="å¯åŠ¨æœ¬åœ°æœåŠ¡"></a>å¯åŠ¨æœ¬åœ°æœåŠ¡</h3><pre><code class="js">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="ç”Ÿæˆæœ¬åœ°é™æ€æ–‡ä»¶"><a href="#ç”Ÿæˆæœ¬åœ°é™æ€æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆæœ¬åœ°é™æ€æ–‡ä»¶"></a>ç”Ÿæˆæœ¬åœ°é™æ€æ–‡ä»¶</h3><pre><code class="js">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="å‘å¸ƒ"><a href="#å‘å¸ƒ" class="headerlink" title="å‘å¸ƒ"></a>å‘å¸ƒ</h3><pre><code class="bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><!-- æ‰“åŒ…ä¸Šä¼ å‘å¸ƒå‘½ä»¤ --><p>æ‰“åŒ…å‘å¸ƒçš„å‘½ä»¤è¡Œå¯ä»¥ç›´æ¥è¿™æ ·å†™ï¼š</p><pre><code class="bash">hexo g &amp;&amp; hexo d</code></pre>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
