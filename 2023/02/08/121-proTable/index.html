<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>121ã€ProTable</title><meta name="description" content="å‘¦å‘¦é¹¿é¸£ï¼Œé£Ÿé‡ä¹‹è‹¹"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="ProTable æ˜¯åŸºäº Vue3.2 + Element-Plus äºŒæ¬¡å°è£… el-table,é¦–å…ˆæˆ‘ä»¬åœ¨å°è£… ProTable ç»„ä»¶çš„æ—¶å€™ï¼Œåœ¨ä¸å½±å“ el-table åŸæœ‰çš„å±æ€§ã€äº‹ä»¶ã€æ–¹æ³•çš„å‰æä¸‹ï¼Œç„¶ååœ¨å…¶åŸºç¡€ä¸ŠåšäºŒæ¬¡å°è£…ã€‚



ProTable ç»„ä»¶ç›®å‰ä½¿ç”¨å±æ€§é€ä¼ è¿›è¡Œé‡æ„ï¼Œæ”¯æŒ el-table &amp;amp;&amp;amp; el-table-column æ‰€æœ‰å±æ€§ã€äº‹ä»¶ã€æ–¹æ³•çš„è°ƒç”¨ã€‚ProTable ç»„ä»¶ä¸Šçš„ç»‘å®šçš„æ‰€æœ‰å±æ€§å’Œäº‹ä»¶éƒ½ä¼šé€šè¿‡ v-bind=&amp;quot;$attrs&amp;quot; é€ä¼ åˆ° el-table ä¸Šã€‚ProTable ç»„ä»¶å†…éƒ¨æš´éœ²äº† el-table DOMï¼Œå¯é€šè¿‡ proTable.value.element.æ–¹æ³•å è°ƒç”¨å…¶æ–¹æ³•ã€‚

æ€è·¯æŠŠä¸€ä¸ªè¡¨æ ¼é¡µé¢æ‰€æœ‰é‡å¤çš„åŠŸèƒ½ ï¼ˆè¡¨æ ¼å¤šé€‰ã€æŸ¥.."><meta name="generator" content="Hexo 7.0.0"></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Jude's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">121ã€ProTable</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">ç‚¹å‡»è¿”å›é¡¶éƒ¨</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/about">å…³äº</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/about">å…³äº</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-text">æ€è·¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81ProTable-%E5%8A%9F%E8%83%BD"><span class="toc-text">ä¸€ã€ProTable åŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81ProTable-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-text">äºŒã€ProTable éœ€æ±‚åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E8%A1%A8%E6%A0%BC%E6%90%9C%E7%B4%A2%E5%8C%BA"><span class="toc-text">1ã€è¡¨æ ¼æœç´¢åŒº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%A1%A8%E6%A0%BC%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E6%8C%89%E9%92%AE"><span class="toc-text">2ã€è¡¨æ ¼æ•°æ®æ“ä½œæŒ‰é’®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E8%A1%A8%E6%A0%BC%E5%8A%9F%E8%83%BD%E6%8C%89%E9%92%AE"><span class="toc-text">3ã€è¡¨æ ¼åŠŸèƒ½æŒ‰é’®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E8%A1%A8%E6%A0%BC%E4%B8%BB%E4%BD%93%E5%86%85%E5%AE%B9%E5%B1%95%E7%A4%BA%E5%8C%BA%E5%9F%9F"><span class="toc-text">4ã€è¡¨æ ¼ä¸»ä½“å†…å®¹å±•ç¤ºåŒºåŸŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E8%A1%A8%E6%A0%BC%E5%88%86%E9%A1%B5"><span class="toc-text">5ã€è¡¨æ ¼åˆ†é¡µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Hooks-%E5%87%BD%E6%95%B0"><span class="toc-text">ä¸‰ã€Hooks å‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81useTable"><span class="toc-text">1ã€useTable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81useSelection"><span class="toc-text">2ã€useSelection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81useDownload"><span class="toc-text">3ã€useDownload</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81useHandledata"><span class="toc-text">4ã€useHandledata</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81ProTable-%E7%BB%84%E4%BB%B6%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81"><span class="toc-text">å››ã€ProTable ç»„ä»¶éƒ¨åˆ†ä»£ç </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ProTable-vue"><span class="toc-text">ProTable.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TableColumn-vue"><span class="toc-text">TableColumn.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-ProTable-%E7%BB%84%E4%BB%B6"><span class="toc-text">ä½¿ç”¨ ProTable ç»„ä»¶</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/vue3"><i class="tag post-item-tag">vue3</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">121ã€ProTable</h1><time class="has-text-grey" datetime="2023-02-08T12:00:00.000Z">2023-02-08</time><article class="mt-2 post-content"><p>ProTable æ˜¯åŸºäº Vue3.2 + Element-Plus äºŒæ¬¡å°è£… el-table,é¦–å…ˆæˆ‘ä»¬åœ¨å°è£… ProTable ç»„ä»¶çš„æ—¶å€™ï¼Œåœ¨ä¸å½±å“ el-table åŸæœ‰çš„å±æ€§ã€äº‹ä»¶ã€æ–¹æ³•çš„å‰æä¸‹ï¼Œç„¶ååœ¨å…¶åŸºç¡€ä¸ŠåšäºŒæ¬¡å°è£…ã€‚</p>
<span id="more"></span>

<blockquote>
<p><code>ProTable ç»„ä»¶ç›®å‰ä½¿ç”¨å±æ€§é€ä¼ è¿›è¡Œé‡æ„ï¼Œæ”¯æŒ el-table &amp;&amp; el-table-column æ‰€æœ‰å±æ€§ã€äº‹ä»¶ã€æ–¹æ³•çš„è°ƒç”¨ã€‚ProTable ç»„ä»¶ä¸Šçš„ç»‘å®šçš„æ‰€æœ‰å±æ€§å’Œäº‹ä»¶éƒ½ä¼šé€šè¿‡ v-bind=&quot;$attrs&quot; é€ä¼ åˆ° el-table ä¸Šã€‚ProTable ç»„ä»¶å†…éƒ¨æš´éœ²äº† el-table DOMï¼Œå¯é€šè¿‡ proTable.value.element.æ–¹æ³•å è°ƒç”¨å…¶æ–¹æ³•ã€‚</code></p>
</blockquote>
<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æŠŠä¸€ä¸ªè¡¨æ ¼é¡µé¢æ‰€æœ‰é‡å¤çš„åŠŸèƒ½ ï¼ˆè¡¨æ ¼å¤šé€‰ã€æŸ¥è¯¢ã€é‡ç½®ã€åˆ·æ–°ã€åˆ†é¡µã€æ•°æ®æ“ä½œäºŒæ¬¡ç¡®è®¤ã€æ–‡ä»¶ä¸‹è½½ã€æ–‡ä»¶ä¸Šä¼ ï¼‰ éƒ½å°è£…æˆ Hooks å‡½æ•°é’©å­æˆ–ç»„ä»¶ï¼Œç„¶ååœ¨ ProTable ç»„ä»¶ä¸­ä½¿ç”¨è¿™äº›å‡½æ•°é’©å­æˆ–ç»„ä»¶ã€‚åœ¨é¡µé¢ä¸­ä½¿ç”¨çš„æ—¶ï¼Œåªéœ€ä¼ ç»™ ProTable å½“å‰è¡¨æ ¼æ•°æ®çš„è¯·æ±‚ APIã€è¡¨æ ¼é…ç½®é¡¹ columns å°±è¡Œäº†ï¼Œæ•°æ®ä¼ è¾“éƒ½ä½¿ç”¨ ä½œç”¨åŸŸæ’æ§½ æˆ– tsx è¯­æ³•ä» ProTable ä¼ é€’ç»™çˆ¶ç»„ä»¶å°±èƒ½åœ¨é¡µé¢ä¸Šè·å–åˆ°äº†ã€‚</p>
<h2 id="ä¸€ã€ProTable-åŠŸèƒ½"><a href="#ä¸€ã€ProTable-åŠŸèƒ½" class="headerlink" title="ä¸€ã€ProTable åŠŸèƒ½"></a>ä¸€ã€ProTable åŠŸèƒ½</h2><p>1ã€è¡¨æ ¼å†…å®¹è‡ªé€‚åº”å±å¹•å®½é«˜ï¼Œæº¢å‡ºå†…å®¹è¡¨æ ¼å†…éƒ¨æ»šåŠ¨ï¼ˆflex å¸ƒå±€ï¼‰<br>2ã€è¡¨æ ¼æœç´¢ã€é‡ç½®ã€åˆ†é¡µæŸ¥è¯¢ Hooks å°è£… ï¼ˆé¡µé¢ä½¿ç”¨ä¸ä¼šå­˜åœ¨ä»»ä½•æœç´¢ã€é‡ç½®ã€åˆ†é¡µæŸ¥è¯¢é€»è¾‘ï¼‰<br>3ã€è¡¨æ ¼æ•°æ®æ“ä½œ Hooks å°è£… ï¼ˆå•æ¡æ•°æ®åˆ é™¤ã€æ‰¹é‡åˆ é™¤ã€é‡ç½®å¯†ç ã€çŠ¶æ€åˆ‡æ¢ç­‰æ“ä½œï¼‰<br>4ã€è¡¨æ ¼æ•°æ®å¤šé€‰ Hooks å°è£… ï¼ˆæ”¯æŒç°è·¨é¡µå‹¾é€‰æ•°æ®ï¼‰<br>5ã€è¡¨æ ¼æ•°æ®å¯¼å…¥ç»„ä»¶ã€å¯¼å‡º Hooks å°è£…<br>6ã€è¡¨æ ¼æœç´¢åŒºåŸŸä½¿ç”¨ Grid å¸ƒå±€é‡æ„ï¼Œæ”¯æŒè‡ªå®šä¹‰å“åº”å¼é…ç½®<br>7ã€è¡¨æ ¼åˆ†é¡µç»„ä»¶å°è£…ï¼ˆPaginationï¼‰<br>8ã€è¡¨æ ¼æ•°æ®åˆ·æ–°ã€åˆ—æ˜¾éšã€åˆ—æ’åºã€æœç´¢åŒºåŸŸæ˜¾éšè®¾ç½®<br>9ã€è¡¨æ ¼æ•°æ®æ‰“å°åŠŸèƒ½ï¼ˆå¯å‹¾é€‰è¡Œæ•°æ®ã€éšè—åˆ—æ‰“å°ï¼‰<br>10ã€è¡¨æ ¼é…ç½®æ”¯æŒå¤šçº§ propï¼ˆç¤ºä¾‹ &#x3D;&#x3D;&gt; prop: user.detail.nameï¼‰<br>11ã€å•å…ƒæ ¼å†…å®¹æ ¼å¼åŒ–ã€tag æ ‡ç­¾æ˜¾ç¤ºï¼ˆæœ‰å­—å…¸ enum ä¼šæ ¹æ®å­—å…¸ enum è‡ªåŠ¨æ ¼å¼åŒ–ï¼‰<br>12ã€æ”¯æŒå¤šçº§è¡¨å¤´ã€è¡¨å¤´å†…å®¹è‡ªå®šä¹‰æ¸²æŸ“ï¼ˆæ”¯æŒä½œç”¨åŸŸæ’æ§½ã€tsx è¯­æ³•ã€h å‡½æ•°ï¼‰<br>13ã€æ”¯æŒå•å…ƒæ ¼å†…å®¹è‡ªå®šä¹‰æ¸²æŸ“ï¼ˆæ”¯æŒä½œç”¨åŸŸæ’æ§½ã€tsx è¯­æ³•ã€h å‡½æ•°ï¼‰<br>14ã€é…åˆ TreeFilterã€SelectFilter ç»„ä»¶ä½¿ç”¨æ›´ä½³</p>
<h2 id="äºŒã€ProTable-éœ€æ±‚åˆ†æ"><a href="#äºŒã€ProTable-éœ€æ±‚åˆ†æ" class="headerlink" title="äºŒã€ProTable éœ€æ±‚åˆ†æ"></a>äºŒã€ProTable éœ€æ±‚åˆ†æ</h2><p>ProTable ä¸»è¦åˆ†ä¸ºäº”ä¸ªæ¨¡å—ï¼š</p>
<h3 id="1ã€è¡¨æ ¼æœç´¢åŒº"><a href="#1ã€è¡¨æ ¼æœç´¢åŒº" class="headerlink" title="1ã€è¡¨æ ¼æœç´¢åŒº"></a>1ã€è¡¨æ ¼æœç´¢åŒº</h3><blockquote>
<p>æœç´¢åŒºåŸŸçš„å­—æ®µéƒ½æ˜¯å­˜åœ¨äºè¡¨æ ¼å½“ä¸­çš„ï¼Œå¹¶ä¸”æ¯ä¸ªé¡µé¢çš„æœç´¢ã€é‡ç½®æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„é€»è¾‘ï¼Œåªæ˜¯ä¸åŒçš„æŸ¥è¯¢å‚æ•°è€Œå·²ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ä¼ è¡¨æ ¼é…ç½®é¡¹ columns æ—¶ï¼Œç›´æ¥æŒ‡å®šæŸä¸ª column çš„ search é…ç½®ï¼Œå°±èƒ½æŠŠè¯¥é¡¹å˜ä¸ºæœç´¢é¡¹ï¼Œç„¶åä½¿ç”¨ el å­—æ®µå¯ä»¥æŒ‡å®šæœç´¢æ¡†çš„ç±»å‹ï¼Œæœ€åæŠŠè¡¨æ ¼çš„æœç´¢æ–¹æ³•éƒ½å°è£…æˆ Hooks é’©å­å‡½æ•°ã€‚é¡µé¢ä¸Šå®Œå…¨å°±ä¸ä¼šå­˜åœ¨ä»»ä½•æœç´¢ã€é‡ç½®é€»è¾‘äº†ã€‚</p>
</blockquote>
<p>é€šè¿‡ component :is åŠ¨æ€ç»„ä»¶ &amp;&amp; v-bind å±æ€§é€ä¼ å®ç°ï¼Œå°†ç”¨æˆ·ä¼ é€’çš„å‚æ•°å…¨éƒ¨é€ä¼ åˆ°ç»„ä»¶ä¸Šï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ ¹æ® element å®˜æ–¹æ–‡æ¡£åœ¨ props ä¸­ä¼ é€’å‚æ•°äº†ã€‚</p>
<pre><code class="vue">&lt;template&gt;
  &lt;component
    :is=&quot;column.search?.render ?? `el-$&#123;column.search?.el&#125;`&quot;
    v-bind=&quot;&#123; ...handleSearchProps, ...placeholder, searchParam, clearable &#125;&quot;
    v-model.trim=&quot;searchParam[column.search?.key ?? handleProp(column.prop!)]&quot;
    :data=&quot;column.search?.el === &#39;tree-select&#39; ? columnEnum : []&quot;
    :options=&quot;[&#39;cascader&#39;, &#39;select-v2&#39;].includes(column.search?.el!) ? columnEnum : []&quot;
  &gt;
    &lt;template #default=&quot;&#123; data &#125;&quot; v-if=&quot;column.search?.el === &#39;cascader&#39;&quot;&gt;
      &lt;span&gt;&#123;&#123; data[fieldNames.label] &#125;&#125;&lt;/span&gt;
    &lt;/template&gt;
    &lt;template v-if=&quot;column.search?.el === &#39;select&#39;&quot;&gt;
      &lt;component
        :is=&quot;`el-option`&quot;
        v-for=&quot;(col, index) in columnEnum&quot;
        :key=&quot;index&quot;
        :label=&quot;col[fieldNames.label]&quot;
        :value=&quot;col[fieldNames.value]&quot;
      &gt;&lt;/component&gt;
    &lt;/template&gt;
    &lt;slot v-else&gt;&lt;/slot&gt;
  &lt;/component&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot; name=&quot;SearchFormItem&quot;&gt;
import &#123; computed, inject, ref &#125; from &quot;vue&quot;;
import &#123; handleProp &#125; from &quot;@/utils&quot;;
import &#123; ColumnProps &#125; from &quot;@/components/ProTable/interface&quot;;

interface SearchFormItem &#123;
  column: ColumnProps;
  searchParam: &#123; [key: string]: any &#125;;
&#125;
const props = defineProps&lt;SearchFormItem&gt;();

// åˆ¤æ–­ fieldNames è®¾ç½® label &amp;&amp; value &amp;&amp; children çš„ key å€¼
const fieldNames = computed(() =&gt; &#123;
  return &#123;
    label: props.column.fieldNames?.label ?? &quot;label&quot;,
    value: props.column.fieldNames?.value ?? &quot;value&quot;,
    children: props.column.fieldNames?.children ?? &quot;children&quot;,
  &#125;;
&#125;);

// æ¥æ”¶ enumMap (el ä¸º select-v2 éœ€å•ç‹¬å¤„ç† enumData)
const enumMap = inject(&quot;enumMap&quot;, ref(new Map()));
const columnEnum = computed(() =&gt; &#123;
  let enumData = enumMap.value.get(props.column.prop);
  if (!enumData) return [];
  if (props.column.search?.el === &quot;select-v2&quot; &amp;&amp; props.column.fieldNames) &#123;
    enumData = enumData.map((item: &#123; [key: string]: any &#125;) =&gt; &#123;
      return &#123;
        ...item,
        label: item[fieldNames.value.label],
        value: item[fieldNames.value.value],
      &#125;;
    &#125;);
  &#125;
  return enumData;
&#125;);

// å¤„ç†é€ä¼ çš„ searchProps (el ä¸º tree-selectã€cascader çš„æ—¶å€™éœ€è¦ç»™ä¸‹é»˜è®¤ label &amp;&amp; value &amp;&amp; children)
const handleSearchProps = computed(() =&gt; &#123;
  const label = fieldNames.value.label;
  const value = fieldNames.value.value;
  const children = fieldNames.value.children;
  const searchEl = props.column.search?.el;
  let searchProps = props.column.search?.props ?? &#123;&#125;;
  if (searchEl === &quot;tree-select&quot;) &#123;
    searchProps = &#123;
      ...searchProps,
      props: &#123; ...searchProps.props, label, children &#125;,
      nodeKey: value,
    &#125;;
  &#125;
  if (searchEl === &quot;cascader&quot;) &#123;
    searchProps = &#123;
      ...searchProps,
      props: &#123; ...searchProps.props, label, value, children &#125;,
    &#125;;
  &#125;
  return searchProps;
&#125;);

// å¤„ç†é»˜è®¤ placeholder
const placeholder = computed(() =&gt; &#123;
  const search = props.column.search;
  if (
    [&quot;datetimerange&quot;, &quot;daterange&quot;, &quot;monthrange&quot;].includes(
      search?.props?.type
    ) ||
    search?.props?.isRange
  ) &#123;
    return &#123;
      rangeSeparator: &quot;è‡³&quot;,
      startPlaceholder: &quot;å¼€å§‹æ—¶é—´&quot;,
      endPlaceholder: &quot;ç»“æŸæ—¶é—´&quot;,
    &#125;;
  &#125;
  const placeholder =
    search?.props?.placeholder ??
    (search?.el?.includes(&quot;input&quot;) ? &quot;è¯·è¾“å…¥&quot; : &quot;è¯·é€‰æ‹©&quot;);
  return &#123; placeholder &#125;;
&#125;);

// æ˜¯å¦æœ‰æ¸…é™¤æŒ‰é’® (å½“æœç´¢é¡¹æœ‰é»˜è®¤å€¼æ—¶ï¼Œæ¸…é™¤æŒ‰é’®ä¸æ˜¾ç¤º)
const clearable = computed(() =&gt; &#123;
  const search = props.column.search;
  return (
    search?.props?.clearable ??
    (search?.defaultValue == null || search?.defaultValue == undefined)
  );
&#125;);
&lt;/script&gt;
</code></pre>
<p>è¡¨æ ¼æœç´¢é¡¹å¯ä»¥ä½¿ç”¨ tsx ç»„ä»¶è‡ªå®šä¹‰æ¸²æŸ“</p>
<pre><code class="vue">&lt;script setup lang=&quot;tsx&quot;&gt;
const columns: ColumnProps[] = [
  &#123;
    prop: &quot;user.detail.age&quot;,
    label: &quot;å¹´é¾„&quot;,
    search: &#123;
      // è‡ªå®šä¹‰ search ç»„ä»¶
      render: (&#123; searchParam &#125;) =&gt; &#123;
        return (
          &lt;div class=&quot;flx-center&quot;&gt;
            &lt;el-input
              vModel_trim=&#123;searchParam.minAge&#125;
              placeholder=&quot;æœ€å°å¹´é¾„&quot;
              style=&#123;&#123; width: "50%" &#125;&#125;
            /&gt;
            &lt;span class=&quot;mr10 ml10&quot;&gt;-&lt;/span&gt;
            &lt;el-input
              vModel_trim=&#123;searchParam.maxAge&#125;
              placeholder=&quot;æœ€å¤§å¹´é¾„&quot;
              style=&#123;&#123; width: "50%" &#125;&#125;
            /&gt;
          &lt;/div&gt;
        );
      &#125;,
    &#125;,
  &#125;,
];
&lt;/script&gt;
</code></pre>
<h3 id="2ã€è¡¨æ ¼æ•°æ®æ“ä½œæŒ‰é’®"><a href="#2ã€è¡¨æ ¼æ•°æ®æ“ä½œæŒ‰é’®" class="headerlink" title="2ã€è¡¨æ ¼æ•°æ®æ“ä½œæŒ‰é’®"></a>2ã€è¡¨æ ¼æ•°æ®æ“ä½œæŒ‰é’®</h3><blockquote>
<p>è¡¨æ ¼æ•°æ®æ“ä½œæŒ‰é’®åŸºæœ¬ä¸Šæ¯ä¸ªé¡µé¢éƒ½ä¼šä¸ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ ä½œç”¨åŸŸæ’æ§½ æ¥å®Œæˆæ¯ä¸ªé¡µé¢çš„æ•°æ®æ“ä½œæŒ‰é’®åŒºåŸŸï¼Œä½œç”¨åŸŸæ’æ§½ å¯ä»¥å°†è¡¨æ ¼å¤šé€‰æ•°æ®ä¿¡æ¯ä» ProTable çš„ Hooks å¤šé€‰é’©å­å‡½æ•°ä¸­ä¼ åˆ°é¡µé¢ä¸Šä½¿ç”¨ã€‚<br>scope æ•°æ®ä¸­åŒ…å«ï¼šselectedListï¼ˆå½“å‰é€‰æ‹©çš„æ•°æ®ï¼‰ã€selectedListIdsï¼ˆå½“å‰é€‰æ‹©çš„æ•°æ® idï¼‰ã€isSelectedï¼ˆå½“å‰æ˜¯å¦é€‰ä¸­çš„æ•°æ®ï¼‰</p>
</blockquote>
<pre><code class="vue">&lt;!-- ProTable ä¸­ tableHeader æ’æ§½ --&gt;
&lt;slot
  name=&quot;tableHeader&quot;
  :selectList=&quot;selectedList&quot;
  :selectedListIds=&quot;selectedListIds&quot;
  :isSelected=&quot;isSelected&quot;
&gt;&lt;/slot&gt;

&lt;!-- é¡µé¢ä½¿ç”¨ --&gt;
&lt;template #tableHeader=&quot;scope&quot;&gt;
  &lt;el-button type=&quot;primary&quot; :icon=&quot;CirclePlus&quot; @click=&quot;openDrawer(&#39;æ–°å¢&#39;)&quot;
    &gt;æ–°å¢ç”¨æˆ·&lt;/el-button
  &gt;
  &lt;el-button type=&quot;primary&quot; :icon=&quot;Upload&quot; plain @click=&quot;batchAdd&quot;
    &gt;æ‰¹é‡æ·»åŠ ç”¨æˆ·&lt;/el-button
  &gt;
  &lt;el-button type=&quot;primary&quot; :icon=&quot;Download&quot; plain @click=&quot;downloadFile&quot;
    &gt;å¯¼å‡ºç”¨æˆ·æ•°æ®&lt;/el-button
  &gt;
  &lt;el-button
    type=&quot;danger&quot;
    :icon=&quot;Delete&quot;
    plain
    @click=&quot;batchDelete(scope.selectedListIds)&quot;
    :disabled=&quot;!scope.isSelected&quot;
    &gt;æ‰¹é‡åˆ é™¤ç”¨æˆ·&lt;/el-button
  &gt;
&lt;/template&gt;
</code></pre>
<h3 id="3ã€è¡¨æ ¼åŠŸèƒ½æŒ‰é’®"><a href="#3ã€è¡¨æ ¼åŠŸèƒ½æŒ‰é’®" class="headerlink" title="3ã€è¡¨æ ¼åŠŸèƒ½æŒ‰é’®"></a>3ã€è¡¨æ ¼åŠŸèƒ½æŒ‰é’®</h3><blockquote>
<p>è¡¨æ ¼åŠŸèƒ½æŒ‰é’®åŒ…æ‹¬ï¼šè¡¨æ ¼æ•°æ®åˆ·æ–°ï¼ˆä¸€ç›´ä¼šæºå¸¦å½“å‰æŸ¥è¯¢å’Œåˆ†é¡µæ¡ä»¶ï¼‰ã€è¡¨æ ¼æ•°æ®æ‰“å°ã€è¡¨æ ¼åˆ—è®¾ç½®ï¼ˆåˆ—æ˜¾éšã€åˆ—æ’åºï¼‰ã€è¡¨æ ¼æœç´¢åŒºåŸŸæ˜¾éšï¼ˆæ–¹ä¾¿å±•ç¤ºæ›´å¤šçš„æ•°æ®ä¿¡æ¯ï¼‰ã€‚ å¯é€šè¿‡ toolButton å±æ€§æ§åˆ¶è¿™å—åŒºåŸŸçš„æ˜¾éšã€‚<br>è¡¨æ ¼æ‰“å°åŸºäº PrintJs å®ç°ï¼Œå›  PrintJs ä¸æ”¯æŒå¤šçº§è¡¨å¤´æ‰“å°ï¼Œæ‰€ä»¥å½“é¡µé¢å­˜åœ¨å¤šçº§è¡¨å¤´æ—¶ï¼Œåªä¼šæ‰“å°æœ€åä¸€çº§è¡¨å¤´ã€‚è¡¨æ ¼æ‰“å°åŠŸèƒ½å¯æ ¹æ®æ˜¾ç¤ºçš„åˆ—å’Œå‹¾é€‰çš„æ•°æ®åŠ¨æ€æ‰“å°ï¼Œé»˜è®¤æ‰“å°å½“å‰æ˜¾ç¤ºçš„æ‰€æœ‰æ•°æ®ã€‚</p>
</blockquote>
<h3 id="4ã€è¡¨æ ¼ä¸»ä½“å†…å®¹å±•ç¤ºåŒºåŸŸ"><a href="#4ã€è¡¨æ ¼ä¸»ä½“å†…å®¹å±•ç¤ºåŒºåŸŸ" class="headerlink" title="4ã€è¡¨æ ¼ä¸»ä½“å†…å®¹å±•ç¤ºåŒºåŸŸ"></a>4ã€è¡¨æ ¼ä¸»ä½“å†…å®¹å±•ç¤ºåŒºåŸŸ</h3><p>è¿™é‡Œæ˜¯æœ€é‡è¦çš„æ•°æ®å±•ç¤ºåŒºåŸŸï¼Œè¡¨å¤´å’Œå•å…ƒæ ¼å†…å®¹å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“ï¼Œè¡¨å¤´æ”¯æŒ headerRender æ–¹æ³•ï¼ˆé¿å…ä¸ el-table-column ä¸Šçš„å±æ€§é‡åå¯¼è‡´æŠ¥é”™ï¼‰ã€ä½œç”¨åŸŸæ’æ§½ï¼ˆcolumn.prop + â€˜Headerâ€™ï¼‰ä¸¤ç§æ–¹å¼è‡ªå®šä¹‰ï¼Œå•å…ƒæ ¼å†…å®¹æ”¯æŒ render æ–¹æ³•å’Œä½œç”¨åŸŸæ’æ§½ï¼ˆcolumn ä¸Šçš„ prop å±æ€§ï¼‰ä¸¤ç§æ–¹å¼è‡ªå®šä¹‰ã€‚</p>
<p>ä½œç”¨åŸŸæ’æ§½ï¼š</p>
<pre><code class="vue">&lt;!-- ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½è‡ªå®šä¹‰å•å…ƒæ ¼å†…å®¹ username --&gt;
&lt;template #username=&quot;scope&quot;&gt;
  &#123;&#123; scope.row.username &#125;&#125;
&lt;/template&gt;

&lt;!-- ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½è‡ªå®šä¹‰è¡¨å¤´å†…å®¹ username --&gt;
&lt;template #usernameHeader=&quot;scope&quot;&gt;
  &lt;el-button
    type=&quot;primary&quot;
    @click=&quot;ElMessage.success(&#39;æˆ‘æ˜¯é€šè¿‡ä½œç”¨åŸŸæ’æ§½æ¸²æŸ“çš„è¡¨å¤´&#39;)&quot;
  &gt;
    &#123;&#123; scope.column.label &#125;&#125;
  &lt;/el-button&gt;
&lt;/template&gt;
</code></pre>
<p>tsx è¯­æ³•ï¼š</p>
<pre><code class="vue">&lt;script setup lang=&quot;tsx&quot;&gt;
const columns: ColumnProps[] = [
 &#123;
    prop: &quot;username&quot;,
    label: &quot;ç”¨æˆ·å§“å&quot;,
    // ä½¿ç”¨ headerRender è‡ªå®šä¹‰è¡¨å¤´
    headerRender: scope =&gt; &#123;
      return (
        &lt;el-button
          type=&quot;primary&quot;
          onClick=&#123;() =&gt; &#123;
            ElMessage.success(&quot;æˆ‘æ˜¯é€šè¿‡ tsx è¯­æ³•æ¸²æŸ“çš„è¡¨å¤´&quot;);
          &#125;&#125;
        &gt;
          &#123;scope.column.label&#125;
        &lt;/el-button&gt;
      );
    &#125;
  &#125;,
  &#123;
    prop: &quot;status&quot;,
    label: &quot;ç”¨æˆ·çŠ¶æ€&quot;,
    // ä½¿ç”¨ render è‡ªå®šä¹‰è¡¨æ ¼å†…å®¹
    render: scope =&gt; &#123;
      return (
          &lt;el-switch
            model-value=&#123;scope.row.status&#125;
            active-text=&#123;scope.row.status ? &quot;å¯ç”¨&quot; : &quot;ç¦ç”¨&quot;&#125;
            active-value=&#123;1&#125;
            inactive-value=&#123;0&#125;
            onClick=&#123;() =&gt; changeStatus(scope.row)&#125;
          /&gt;
        )
      );
    &#125;
  &#125;,
];
&lt;/script&gt;
</code></pre>
<blockquote>
<p>å¦‚æœä½ æƒ³ä½¿ç”¨ el-table çš„ä»»ä½•å±æ€§ã€äº‹ä»¶ï¼Œç›®å‰é€šè¿‡å±æ€§é€ä¼ éƒ½èƒ½æ”¯æŒã€‚</p>
</blockquote>
<pre><code class="vue">&lt;template&gt;
  &lt;el-table ref=&quot;tableRef&quot; v-bind=&quot;$attrs&quot;&gt; &lt;/el-table&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot; name=&quot;ProTable&quot;&gt;
import &#123; ref &#125; from &quot;vue&quot;;
import &#123; ElTable &#125; from &quot;element-plus&quot;;

const tableRef = ref&lt;InstanceType&lt;typeof ElTable&gt;&gt;();

defineExpose(&#123; element: tableRef &#125;);
&lt;/script&gt;
</code></pre>
<h3 id="5ã€è¡¨æ ¼åˆ†é¡µ"><a href="#5ã€è¡¨æ ¼åˆ†é¡µ" class="headerlink" title="5ã€è¡¨æ ¼åˆ†é¡µ"></a>5ã€è¡¨æ ¼åˆ†é¡µ</h3><p>è¡¨æ ¼åˆ†é¡µçš„å°è£…å¯ä»¥ä½¿ ProTable é¡µé¢ä¸å­˜åœ¨åˆ†é¡µé€»è¾‘ã€‚</p>
<pre><code class="vue">&lt;template&gt;
  &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;
  &lt;el-pagination
    :background=&quot;true&quot;
    :current-page=&quot;pageable.pageNum&quot;
    :page-size=&quot;pageable.pageSize&quot;
    :page-sizes=&quot;[10, 25, 50, 100]&quot;
    :total=&quot;pageable.total&quot;
    layout=&quot;total, sizes, prev, pager, next, jumper&quot;
    @size-change=&quot;handleSizeChange&quot;
    @current-change=&quot;handleCurrentChange&quot;
  &gt;&lt;/el-pagination&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot; name=&quot;Pagination&quot;&gt;
interface Pageable &#123;
  pageNum: number;
  pageSize: number;
  total: number;
&#125;

interface PaginationProps &#123;
  pageable: Pageable;
  handleSizeChange: (size: number) =&gt; void;
  handleCurrentChange: (currentPage: number) =&gt; void;
&#125;

defineProps&lt;PaginationProps&gt;();
&lt;/script&gt;
</code></pre>
<h2 id="ä¸‰ã€Hooks-å‡½æ•°"><a href="#ä¸‰ã€Hooks-å‡½æ•°" class="headerlink" title="ä¸‰ã€Hooks å‡½æ•°"></a>ä¸‰ã€Hooks å‡½æ•°</h2><h3 id="1ã€useTable"><a href="#1ã€useTable" class="headerlink" title="1ã€useTable"></a>1ã€useTable</h3><pre><code class="ts">import &#123; Table &#125; from &quot;./interface&quot;;
import &#123; reactive, computed, toRefs &#125; from &quot;vue&quot;;

/**
 * @description table é¡µé¢æ“ä½œæ–¹æ³•å°è£…
 * @param &#123;Function&#125; api è·å–è¡¨æ ¼æ•°æ® api æ–¹æ³• (å¿…ä¼ )
 * @param &#123;Object&#125; initParam è·å–æ•°æ®åˆå§‹åŒ–å‚æ•° (éå¿…ä¼ ï¼Œé»˜è®¤ä¸º&#123;&#125;)
 * @param &#123;Boolean&#125; isPageable æ˜¯å¦æœ‰åˆ†é¡µ (éå¿…ä¼ ï¼Œé»˜è®¤ä¸ºtrue)
 * @param &#123;Function&#125; dataCallBack å¯¹åå°è¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†çš„æ–¹æ³• (éå¿…ä¼ )
 * */
export const useTable = (
  api?: (params: any) =&gt; Promise&lt;any&gt;,
  initParam: object = &#123;&#125;,
  isPageable: boolean = true,
  dataCallBack?: (data: any) =&gt; any,
  requestError?: (error: any) =&gt; void
) =&gt; &#123;
  const state = reactive&lt;Table.TableStateProps&gt;(&#123;
    // è¡¨æ ¼æ•°æ®
    tableData: [],
    // åˆ†é¡µæ•°æ®
    pageable: &#123;
      // å½“å‰é¡µæ•°
      pageNum: 1,
      // æ¯é¡µæ˜¾ç¤ºæ¡æ•°
      pageSize: 10,
      // æ€»æ¡æ•°
      total: 0,
    &#125;,
    // æŸ¥è¯¢å‚æ•°(åªåŒ…æ‹¬æŸ¥è¯¢)
    searchParam: &#123;&#125;,
    // åˆå§‹åŒ–é»˜è®¤çš„æŸ¥è¯¢å‚æ•°
    searchInitParam: &#123;&#125;,
    // æ€»å‚æ•°(åŒ…å«åˆ†é¡µå’ŒæŸ¥è¯¢å‚æ•°)
    totalParam: &#123;&#125;,
  &#125;);

  /**
   * @description åˆ†é¡µæŸ¥è¯¢å‚æ•°(åªåŒ…æ‹¬åˆ†é¡µå’Œè¡¨æ ¼å­—æ®µæ’åº,å…¶ä»–æ’åºæ–¹å¼å¯è‡ªè¡Œé…ç½®)
   * */
  const pageParam = computed(&#123;
    get: () =&gt; &#123;
      return &#123;
        pageNum: state.pageable.pageNum,
        pageSize: state.pageable.pageSize,
      &#125;;
    &#125;,
    set: (newVal: any) =&gt; &#123;
      console.log(&quot;æˆ‘æ˜¯åˆ†é¡µæ›´æ–°ä¹‹åçš„å€¼&quot;, newVal);
    &#125;,
  &#125;);

  /**
   * @description è·å–è¡¨æ ¼æ•°æ®
   * @return void
   * */
  const getTableList = async () =&gt; &#123;
    if (!api) return;
    try &#123;
      // å…ˆæŠŠåˆå§‹åŒ–å‚æ•°å’Œåˆ†é¡µå‚æ•°æ”¾åˆ°æ€»å‚æ•°é‡Œé¢
      Object.assign(
        state.totalParam,
        initParam,
        isPageable ? pageParam.value : &#123;&#125;
      );
      let &#123; data &#125; = await api(&#123;
        ...state.searchInitParam,
        ...state.totalParam,
      &#125;);
      dataCallBack &amp;&amp; (data = dataCallBack(data));
      state.tableData = isPageable ? data.list : data;
      // è§£æ„åå°è¿”å›çš„åˆ†é¡µæ•°æ® (å¦‚æœæœ‰åˆ†é¡µæ›´æ–°åˆ†é¡µä¿¡æ¯)
      const &#123; pageNum, pageSize, total &#125; = data;
      isPageable &amp;&amp; updatePageable(&#123; pageNum, pageSize, total &#125;);
    &#125; catch (error) &#123;
      requestError &amp;&amp; requestError(error);
    &#125;
  &#125;;

  /**
   * @description æ›´æ–°æŸ¥è¯¢å‚æ•°
   * @return void
   * */
  const updatedTotalParam = () =&gt; &#123;
    state.totalParam = &#123;&#125;;
    // å¤„ç†æŸ¥è¯¢å‚æ•°ï¼Œå¯ä»¥ç»™æŸ¥è¯¢å‚æ•°åŠ è‡ªå®šä¹‰å‰ç¼€æ“ä½œ
    let nowSearchParam: &#123; [key: string]: any &#125; = &#123;&#125;;
    // é˜²æ­¢æ‰‹åŠ¨æ¸…ç©ºè¾“å…¥æ¡†æºå¸¦å‚æ•°ï¼ˆè¿™é‡Œå¯ä»¥è‡ªå®šä¹‰æŸ¥è¯¢å‚æ•°å‰ç¼€ï¼‰
    for (let key in state.searchParam) &#123;
      // * æŸäº›æƒ…å†µä¸‹å‚æ•°ä¸º false/0 ä¹Ÿåº”è¯¥æºå¸¦å‚æ•°
      if (
        state.searchParam[key] ||
        state.searchParam[key] === false ||
        state.searchParam[key] === 0
      ) &#123;
        nowSearchParam[key] = state.searchParam[key];
      &#125;
    &#125;
    Object.assign(
      state.totalParam,
      nowSearchParam,
      isPageable ? pageParam.value : &#123;&#125;
    );
  &#125;;

  /**
   * @description æ›´æ–°åˆ†é¡µä¿¡æ¯
   * @param &#123;Object&#125; resPageable åå°è¿”å›çš„åˆ†é¡µæ•°æ®
   * @return void
   * */
  const updatePageable = (resPageable: Table.Pageable) =&gt; &#123;
    Object.assign(state.pageable, resPageable);
  &#125;;

  /**
   * @description è¡¨æ ¼æ•°æ®æŸ¥è¯¢
   * @return void
   * */
  const search = () =&gt; &#123;
    state.pageable.pageNum = 1;
    updatedTotalParam();
    getTableList();
  &#125;;

  /**
   * @description è¡¨æ ¼æ•°æ®é‡ç½®
   * @return void
   * */
  const reset = () =&gt; &#123;
    state.pageable.pageNum = 1;
    state.searchParam = &#123;&#125;;
    // é‡ç½®æœç´¢è¡¨å•çš„æ—¶ï¼Œå¦‚æœæœ‰é»˜è®¤æœç´¢å‚æ•°ï¼Œåˆ™é‡ç½®é»˜è®¤çš„æœç´¢å‚æ•°
    Object.keys(state.searchInitParam).forEach((key) =&gt; &#123;
      state.searchParam[key] = state.searchInitParam[key];
    &#125;);
    updatedTotalParam();
    getTableList();
  &#125;;

  /**
   * @description æ¯é¡µæ¡æ•°æ”¹å˜
   * @param &#123;Number&#125; val å½“å‰æ¡æ•°
   * @return void
   * */
  const handleSizeChange = (val: number) =&gt; &#123;
    state.pageable.pageNum = 1;
    state.pageable.pageSize = val;
    getTableList();
  &#125;;

  /**
   * @description å½“å‰é¡µæ”¹å˜
   * @param &#123;Number&#125; val å½“å‰é¡µ
   * @return void
   * */
  const handleCurrentChange = (val: number) =&gt; &#123;
    state.pageable.pageNum = val;
    getTableList();
  &#125;;

  return &#123;
    ...toRefs(state),
    getTableList,
    search,
    reset,
    handleSizeChange,
    handleCurrentChange,
    updatedTotalParam,
  &#125;;
&#125;;
</code></pre>
<h3 id="2ã€useSelection"><a href="#2ã€useSelection" class="headerlink" title="2ã€useSelection"></a>2ã€useSelection</h3><pre><code class="ts">import &#123; ref, computed &#125; from &quot;vue&quot;;

/**
 * @description è¡¨æ ¼å¤šé€‰æ•°æ®æ“ä½œ
 * @param &#123;String&#125; rowKey å½“è¡¨æ ¼å¯ä»¥å¤šé€‰æ—¶ï¼Œæ‰€æŒ‡å®šçš„ id
 * */
export const useSelection = (rowKey: string = &quot;id&quot;) =&gt; &#123;
  const isSelected = ref&lt;boolean&gt;(false);
  const selectedList = ref&lt;&#123; [key: string]: any &#125;[]&gt;([]);

  // å½“å‰é€‰ä¸­çš„æ‰€æœ‰ ids æ•°ç»„
  const selectedListIds = computed((): string[] =&gt; &#123;
    let ids: string[] = [];
    selectedList.value.forEach((item) =&gt; ids.push(item[rowKey]));
    return ids;
  &#125;);

  /**
   * @description å¤šé€‰æ“ä½œ
   * @param &#123;Array&#125; rowArr å½“å‰é€‰æ‹©çš„æ‰€æœ‰æ•°æ®
   * @return void
   */
  const selectionChange = (rowArr: &#123; [key: string]: any &#125;[]) =&gt; &#123;
    rowArr.length ? (isSelected.value = true) : (isSelected.value = false);
    selectedList.value = rowArr;
  &#125;;

  return &#123;
    isSelected,
    selectedList,
    selectedListIds,
    selectionChange,
  &#125;;
&#125;;
</code></pre>
<h3 id="3ã€useDownload"><a href="#3ã€useDownload" class="headerlink" title="3ã€useDownload"></a>3ã€useDownload</h3><pre><code class="ts">import &#123; ElNotification &#125; from &quot;element-plus&quot;;

/**
 * @description æ¥æ”¶æ•°æ®æµç”Ÿæˆ blobï¼Œåˆ›å»ºé“¾æ¥ï¼Œä¸‹è½½æ–‡ä»¶
 * @param &#123;Function&#125; api å¯¼å‡ºè¡¨æ ¼çš„apiæ–¹æ³• (å¿…ä¼ )
 * @param &#123;String&#125; tempName å¯¼å‡ºçš„æ–‡ä»¶å (å¿…ä¼ )
 * @param &#123;Object&#125; params å¯¼å‡ºçš„å‚æ•° (é»˜è®¤&#123;&#125;)
 * @param &#123;Boolean&#125; isNotify æ˜¯å¦æœ‰å¯¼å‡ºæ¶ˆæ¯æç¤º (é»˜è®¤ä¸º true)
 * @param &#123;String&#125; fileType å¯¼å‡ºçš„æ–‡ä»¶æ ¼å¼ (é»˜è®¤ä¸º.xlsx)
 * */
export const useDownload = async (
  api: (param: any) =&gt; Promise&lt;any&gt;,
  tempName: string,
  params: any = &#123;&#125;,
  isNotify: boolean = true,
  fileType: string = &quot;.xlsx&quot;
) =&gt; &#123;
  if (isNotify) &#123;
    ElNotification(&#123;
      title: &quot;æ¸©é¦¨æç¤º&quot;,
      message: &quot;å¦‚æœæ•°æ®åºå¤§ä¼šå¯¼è‡´ä¸‹è½½ç¼“æ…¢å“¦ï¼Œè¯·æ‚¨è€å¿ƒç­‰å¾…ï¼&quot;,
      type: &quot;info&quot;,
      duration: 3000,
    &#125;);
  &#125;
  try &#123;
    const res = await api(params);
    const blob = new Blob([res]);
    // å…¼å®¹ edge ä¸æ”¯æŒ createObjectURL æ–¹æ³•
    if (&quot;msSaveOrOpenBlob&quot; in navigator)
      return window.navigator.msSaveOrOpenBlob(blob, tempName + fileType);
    const blobUrl = window.URL.createObjectURL(blob);
    const exportFile = document.createElement(&quot;a&quot;);
    exportFile.style.display = &quot;none&quot;;
    exportFile.download = `$&#123;tempName&#125;$&#123;fileType&#125;`;
    exportFile.href = blobUrl;
    document.body.appendChild(exportFile);
    exportFile.click();
    // å»é™¤ä¸‹è½½å¯¹ url çš„å½±å“
    document.body.removeChild(exportFile);
    window.URL.revokeObjectURL(blobUrl);
  &#125; catch (error) &#123;
    console.log(error);
  &#125;
&#125;;
</code></pre>
<h3 id="4ã€useHandledata"><a href="#4ã€useHandledata" class="headerlink" title="4ã€useHandledata"></a>4ã€useHandledata</h3><pre><code class="ts">import &#123; ElMessageBox, ElMessage &#125; from &quot;element-plus&quot;;
import &#123; HandleData &#125; from &quot;./interface&quot;;

/**
 * @description æ“ä½œå•æ¡æ•°æ®ä¿¡æ¯ (äºŒæ¬¡ç¡®è®¤ã€åˆ é™¤ã€ç¦ç”¨ã€å¯ç”¨ã€é‡ç½®å¯†ç ã€‘)
 * @param &#123;Function&#125; api æ“ä½œæ•°æ®æ¥å£çš„apiæ–¹æ³• (å¿…ä¼ )
 * @param &#123;Object&#125; params æºå¸¦çš„æ“ä½œæ•°æ®å‚æ•° &#123;id,params&#125; (å¿…ä¼ )
 * @param &#123;String&#125; message æç¤ºä¿¡æ¯ (å¿…ä¼ )
 * @param &#123;String&#125; confirmType iconç±»å‹ (ä¸å¿…ä¼ ,é»˜è®¤ä¸º warning)
 * @returns &#123;Promise&#125;
 */
export const useHandleData = (
  api: (params: any) =&gt; Promise&lt;any&gt;,
  params: any = &#123;&#125;,
  message: string,
  confirmType: HandleData.MessageType = &quot;warning&quot;
) =&gt; &#123;
  return new Promise((resolve, reject) =&gt; &#123;
    ElMessageBox.confirm(`æ˜¯å¦$&#123;message&#125;?`, &quot;æ¸©é¦¨æç¤º&quot;, &#123;
      confirmButtonText: &quot;ç¡®å®š&quot;,
      cancelButtonText: &quot;å–æ¶ˆ&quot;,
      type: confirmType,
      draggable: true,
    &#125;).then(async () =&gt; &#123;
      const res = await api(params);
      if (!res) return reject(false);
      ElMessage(&#123;
        type: &quot;success&quot;,
        message: `$&#123;message&#125;æˆåŠŸ!`,
      &#125;);
      resolve(true);
    &#125;);
  &#125;);
&#125;;
</code></pre>
<h2 id="å››ã€ProTable-ç»„ä»¶éƒ¨åˆ†ä»£ç "><a href="#å››ã€ProTable-ç»„ä»¶éƒ¨åˆ†ä»£ç " class="headerlink" title="å››ã€ProTable ç»„ä»¶éƒ¨åˆ†ä»£ç "></a>å››ã€ProTable ç»„ä»¶éƒ¨åˆ†ä»£ç </h2><h3 id="ProTable-vue"><a href="#ProTable-vue" class="headerlink" title="ProTable.vue"></a>ProTable.vue</h3><pre><code class="vue">&lt;template&gt;
  &lt;!-- æŸ¥è¯¢è¡¨å• card --&gt;
  &lt;SearchForm
    :search=&quot;search&quot;
    :reset=&quot;reset&quot;
    :columns=&quot;searchColumns&quot;
    :search-param=&quot;searchParam&quot;
    :search-col=&quot;searchCol&quot;
    v-show=&quot;isShowSearch&quot;
  /&gt;

  &lt;!-- è¡¨æ ¼å†…å®¹ card --&gt;
  &lt;div class=&quot;card table-main&quot;&gt;
    &lt;!-- è¡¨æ ¼å¤´éƒ¨ æ“ä½œæŒ‰é’® --&gt;
    &lt;div class=&quot;table-header&quot;&gt;
      &lt;div class=&quot;header-button-lf&quot;&gt;
        &lt;slot
          name=&quot;tableHeader&quot;
          :selectedListIds=&quot;selectedListIds&quot;
          :selectedList=&quot;selectedList&quot;
          :isSelected=&quot;isSelected&quot;
        /&gt;
      &lt;/div&gt;
      &lt;div class=&quot;header-button-ri&quot; v-if=&quot;toolButton&quot;&gt;
        &lt;slot name=&quot;toolButton&quot;&gt;
          &lt;el-button :icon=&quot;Refresh&quot; circle @click=&quot;getTableList&quot; /&gt;
          &lt;el-button
            :icon=&quot;Printer&quot;
            circle
            v-if=&quot;columns.length&quot;
            @click=&quot;print&quot;
          /&gt;
          &lt;el-button
            :icon=&quot;Operation&quot;
            circle
            v-if=&quot;columns.length&quot;
            @click=&quot;openColSetting&quot;
          /&gt;
          &lt;el-button
            :icon=&quot;Search&quot;
            circle
            v-if=&quot;searchColumns.length&quot;
            @click=&quot;isShowSearch = !isShowSearch&quot;
          /&gt;
        &lt;/slot&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- è¡¨æ ¼ä¸»ä½“ --&gt;
    &lt;el-table
      ref=&quot;tableRef&quot;
      v-bind=&quot;$attrs&quot;
      :data=&quot;data ?? tableData&quot;
      :border=&quot;border&quot;
      :row-key=&quot;rowKey&quot;
      @selection-change=&quot;selectionChange&quot;
    &gt;
      &lt;!-- é»˜è®¤æ’æ§½ --&gt;
      &lt;slot&gt;&lt;/slot&gt;
      &lt;template v-for=&quot;item in tableColumns&quot; :key=&quot;item&quot;&gt;
        &lt;!-- selection || index || expand --&gt;
        &lt;el-table-column
          v-bind=&quot;item&quot;
          :align=&quot;item.align ?? &#39;center&#39;&quot;
          :reserve-selection=&quot;item.type == &#39;selection&#39;&quot;
          v-if=&quot;
            item.type &amp;&amp; [&#39;selection&#39;, &#39;index&#39;, &#39;expand&#39;].includes(item.type)
          &quot;
        &gt;
          &lt;template #default=&quot;scope&quot; v-if=&quot;item.type == &#39;expand&#39;&quot;&gt;
            &lt;component :is=&quot;item.render&quot; v-bind=&quot;scope&quot; v-if=&quot;item.render&quot;&gt;
            &lt;/component&gt;
            &lt;slot :name=&quot;item.type&quot; v-bind=&quot;scope&quot; v-else&gt;&lt;/slot&gt;
          &lt;/template&gt;
        &lt;/el-table-column&gt;
        &lt;!-- other --&gt;
        &lt;TableColumn
          v-if=&quot;!item.type &amp;&amp; item.prop &amp;&amp; item.isShow&quot;
          :column=&quot;item&quot;
        &gt;
          &lt;template v-for=&quot;slot in Object.keys($slots)&quot; #[slot]=&quot;scope&quot;&gt;
            &lt;slot :name=&quot;slot&quot; v-bind=&quot;scope&quot;&gt;&lt;/slot&gt;
          &lt;/template&gt;
        &lt;/TableColumn&gt;
      &lt;/template&gt;
      &lt;!-- æ’å…¥è¡¨æ ¼æœ€åä¸€è¡Œä¹‹åçš„æ’æ§½ --&gt;
      &lt;template #append&gt;
        &lt;slot name=&quot;append&quot;&gt; &lt;/slot&gt;
      &lt;/template&gt;
      &lt;!-- æ— æ•°æ® --&gt;
      &lt;template #empty&gt;
        &lt;div class=&quot;table-empty&quot;&gt;
          &lt;slot name=&quot;empty&quot;&gt;
            &lt;img src=&quot;@/assets/images/notData.png&quot; alt=&quot;notData&quot; /&gt;
            &lt;div&gt;æš‚æ— æ•°æ®&lt;/div&gt;
          &lt;/slot&gt;
        &lt;/div&gt;
      &lt;/template&gt;
    &lt;/el-table&gt;
    &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;
    &lt;slot name=&quot;pagination&quot;&gt;
      &lt;Pagination
        v-if=&quot;pagination&quot;
        :pageable=&quot;pageable&quot;
        :handle-size-change=&quot;handleSizeChange&quot;
        :handle-current-change=&quot;handleCurrentChange&quot;
      /&gt;
    &lt;/slot&gt;
  &lt;/div&gt;
  &lt;!-- åˆ—è®¾ç½® --&gt;
  &lt;ColSetting v-if=&quot;toolButton&quot; ref=&quot;colRef&quot; v-model:col-setting=&quot;colSetting&quot; /&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot; name=&quot;ProTable&quot;&gt;
import &#123; ref, watch, computed, provide, onMounted &#125; from &quot;vue&quot;;
import &#123; ElTable &#125; from &quot;element-plus&quot;;
import &#123; useTable &#125; from &quot;@/hooks/useTable&quot;;
import &#123; useSelection &#125; from &quot;@/hooks/useSelection&quot;;
import &#123; BreakPoint &#125; from &quot;@/components/Grid/interface&quot;;
import &#123; ColumnProps &#125; from &quot;@/components/ProTable/interface&quot;;
import &#123; Refresh, Printer, Operation, Search &#125; from &quot;@element-plus/icons-vue&quot;;
import &#123;
  filterEnum,
  formatValue,
  handleProp,
  handleRowAccordingToProp,
&#125; from &quot;@/utils&quot;;
import SearchForm from &quot;@/components/SearchForm/index.vue&quot;;
import Pagination from &quot;./components/Pagination.vue&quot;;
import ColSetting from &quot;./components/ColSetting.vue&quot;;
import TableColumn from &quot;./components/TableColumn.vue&quot;;
import printJS from &quot;print-js&quot;;

export interface ProTableProps &#123;
  columns: ColumnProps[]; // åˆ—é…ç½®é¡¹  ==&gt; å¿…ä¼ 
  data?: any[]; // é™æ€ table data æ•°æ®ï¼Œè‹¥å­˜åœ¨åˆ™ä¸ä¼šä½¿ç”¨ requestApi è¿”å›çš„ data ==&gt; éå¿…ä¼ 
  requestApi?: (params: any) =&gt; Promise&lt;any&gt;; // è¯·æ±‚è¡¨æ ¼æ•°æ®çš„ api ==&gt; éå¿…ä¼ 
  requestAuto?: boolean; // æ˜¯å¦è‡ªåŠ¨æ‰§è¡Œè¯·æ±‚ api ==&gt; éå¿…ä¼ ï¼ˆé»˜è®¤ä¸ºtrueï¼‰
  requestError?: (params: any) =&gt; void; // è¡¨æ ¼ api è¯·æ±‚é”™è¯¯ç›‘å¬ ==&gt; éå¿…ä¼ 
  dataCallback?: (data: any) =&gt; any; // è¿”å›æ•°æ®çš„å›è°ƒå‡½æ•°ï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œå¤„ç† ==&gt; éå¿…ä¼ 
  title?: string; // è¡¨æ ¼æ ‡é¢˜ï¼Œç›®å‰åªåœ¨æ‰“å°çš„æ—¶å€™ç”¨åˆ° ==&gt; éå¿…ä¼ 
  pagination?: boolean; // æ˜¯å¦éœ€è¦åˆ†é¡µç»„ä»¶ ==&gt; éå¿…ä¼ ï¼ˆé»˜è®¤ä¸ºtrueï¼‰
  initParam?: any; // åˆå§‹åŒ–è¯·æ±‚å‚æ•° ==&gt; éå¿…ä¼ ï¼ˆé»˜è®¤ä¸º&#123;&#125;ï¼‰
  border?: boolean; // æ˜¯å¦å¸¦æœ‰çºµå‘è¾¹æ¡† ==&gt; éå¿…ä¼ ï¼ˆé»˜è®¤ä¸ºtrueï¼‰
  toolButton?: boolean; // æ˜¯å¦æ˜¾ç¤ºè¡¨æ ¼åŠŸèƒ½æŒ‰é’® ==&gt; éå¿…ä¼ ï¼ˆé»˜è®¤ä¸ºtrueï¼‰
  rowKey?: string; // è¡Œæ•°æ®çš„ Keyï¼Œç”¨æ¥ä¼˜åŒ– Table çš„æ¸²æŸ“ï¼Œå½“è¡¨æ ¼æ•°æ®å¤šé€‰æ—¶ï¼Œæ‰€æŒ‡å®šçš„ id ==&gt; éå¿…ä¼ ï¼ˆé»˜è®¤ä¸º idï¼‰
  searchCol?: number | Record&lt;BreakPoint, number&gt;; // è¡¨æ ¼æœç´¢é¡¹ æ¯åˆ—å æ¯”é…ç½® ==&gt; éå¿…ä¼  &#123; xs: 1, sm: 2, md: 2, lg: 3, xl: 4 &#125;
&#125;

// æ¥å—çˆ¶ç»„ä»¶å‚æ•°ï¼Œé…ç½®é»˜è®¤å€¼
const props = withDefaults(defineProps&lt;ProTableProps&gt;(), &#123;
  columns: () =&gt; [],
  requestAuto: true,
  pagination: true,
  initParam: &#123;&#125;,
  border: true,
  toolButton: true,
  rowKey: &quot;id&quot;,
  searchCol: () =&gt; (&#123; xs: 1, sm: 2, md: 2, lg: 3, xl: 4 &#125;),
&#125;);

// æ˜¯å¦æ˜¾ç¤ºæœç´¢æ¨¡å—
const isShowSearch = ref(true);

// è¡¨æ ¼ DOM å…ƒç´ 
const tableRef = ref&lt;InstanceType&lt;typeof ElTable&gt;&gt;();

// è¡¨æ ¼å¤šé€‰ Hooks
const &#123; selectionChange, selectedList, selectedListIds, isSelected &#125; =
  useSelection(props.rowKey);

// è¡¨æ ¼æ“ä½œ Hooks
const &#123;
  tableData,
  pageable,
  searchParam,
  searchInitParam,
  getTableList,
  search,
  reset,
  handleSizeChange,
  handleCurrentChange,
&#125; = useTable(
  props.requestApi,
  props.initParam,
  props.pagination,
  props.dataCallback,
  props.requestError
);

// æ¸…ç©ºé€‰ä¸­æ•°æ®åˆ—è¡¨
const clearSelection = () =&gt; tableRef.value!.clearSelection();

// åˆå§‹åŒ–è¯·æ±‚
onMounted(() =&gt; props.requestAuto &amp;&amp; getTableList());

// ç›‘å¬é¡µé¢ initParam æ”¹åŒ–ï¼Œé‡æ–°è·å–è¡¨æ ¼æ•°æ®
watch(() =&gt; props.initParam, getTableList, &#123; deep: true &#125;);

// æ¥æ”¶ columns å¹¶è®¾ç½®ä¸ºå“åº”å¼
const tableColumns = ref&lt;ColumnProps[]&gt;(props.columns);

// å®šä¹‰ enumMap å­˜å‚¨ enum å€¼ï¼ˆé¿å…å¼‚æ­¥è¯·æ±‚æ— æ³•æ ¼å¼åŒ–å•å…ƒæ ¼å†…å®¹ || æ— æ³•å¡«å……æœç´¢ä¸‹æ‹‰é€‰æ‹©ï¼‰
const enumMap = ref(new Map&lt;string, &#123; [key: string]: any &#125;[]&gt;());
provide(&quot;enumMap&quot;, enumMap);
const setEnumMap = async (col: ColumnProps) =&gt; &#123;
  if (!col.enum) return;
  // å¦‚æœå½“å‰ enum ä¸ºåå°æ•°æ®éœ€è¦è¯·æ±‚æ•°æ®ï¼Œåˆ™è°ƒç”¨è¯¥è¯·æ±‚æ¥å£ï¼Œå¹¶å­˜å‚¨åˆ° enumMap
  if (typeof col.enum !== &quot;function&quot;)
    return enumMap.value.set(col.prop!, col.enum!);
  const &#123; data &#125; = await col.enum();
  enumMap.value.set(col.prop!, data);
&#125;;

// æ‰å¹³åŒ– columns
const flatColumnsFunc = (
  columns: ColumnProps[],
  flatArr: ColumnProps[] = []
) =&gt; &#123;
  columns.forEach(async (col) =&gt; &#123;
    if (col._children?.length) flatArr.push(...flatColumnsFunc(col._children));
    flatArr.push(col);

    // ç»™æ¯ä¸€é¡¹ column æ·»åŠ  isShow &amp;&amp; isFilterEnum é»˜è®¤å±æ€§
    col.isShow = col.isShow ?? true;
    col.isFilterEnum = col.isFilterEnum ?? true;

    // è®¾ç½® enumMap
    setEnumMap(col);
  &#125;);
  return flatArr.filter((item) =&gt; !item._children?.length);
&#125;;

// flatColumns
const flatColumns = ref&lt;ColumnProps[]&gt;();
flatColumns.value = flatColumnsFunc(tableColumns.value);

// è¿‡æ»¤éœ€è¦æœç´¢çš„é…ç½®é¡¹
const searchColumns = flatColumns.value.filter(
  (item) =&gt; item.search?.el || item.search?.render
);

// è®¾ç½®æœç´¢è¡¨å•æ’åºé»˜è®¤å€¼ &amp;&amp; è®¾ç½®æœç´¢è¡¨å•é¡¹çš„é»˜è®¤å€¼
searchColumns.forEach((column, index) =&gt; &#123;
  column.search!.order = column.search!.order ?? index + 2;
  if (
    column.search?.defaultValue !== undefined &amp;&amp;
    column.search?.defaultValue !== null
  ) &#123;
    searchInitParam.value[column.search.key ?? handleProp(column.prop!)] =
      column.search?.defaultValue;
    searchParam.value[column.search.key ?? handleProp(column.prop!)] =
      column.search?.defaultValue;
  &#125;
&#125;);

// æ’åºæœç´¢è¡¨å•é¡¹
searchColumns.sort((a, b) =&gt; a.search!.order! - b.search!.order!);

// åˆ—è®¾ç½® ==&gt; è¿‡æ»¤æ‰ä¸éœ€è¦è®¾ç½®çš„åˆ—
const colRef = ref();
const colSetting = tableColumns.value!.filter(
  (item) =&gt;
    ![&quot;selection&quot;, &quot;index&quot;, &quot;expand&quot;].includes(item.type!) &amp;&amp;
    item.prop !== &quot;operation&quot; &amp;&amp;
    item.isShow
);
const openColSetting = () =&gt; colRef.value.openColSetting();

// ğŸ™…â€â™€ï¸ ä¸éœ€è¦æ‰“å°å¯ä»¥æŠŠä»¥ä¸‹æ–¹æ³•åˆ é™¤ï¼Œæ‰“å°åŠŸèƒ½ç›®å‰å­˜åœ¨å¾ˆå¤š bug
// å¤„ç†æ‰“å°æ•°æ®ï¼ˆæŠŠåå°è¿”å›çš„å€¼æ ¹æ® enum åšè½¬æ¢ï¼‰
const printData = computed(() =&gt; &#123;
  const handleData = props.data ?? tableData.value;
  const printDataList = JSON.parse(
    JSON.stringify(selectedList.value.length ? selectedList.value : handleData)
  );
  // æ‰¾å‡ºéœ€è¦è½¬æ¢æ•°æ®çš„åˆ—ï¼ˆæœ‰ enum || å¤šçº§ prop &amp;&amp; éœ€è¦æ ¹æ® enum æ ¼å¼åŒ–ï¼‰
  const needTransformCol = flatColumns.value!.filter(
    (item) =&gt;
      (item.enum || (item.prop &amp;&amp; item.prop.split(&quot;.&quot;).length &gt; 1)) &amp;&amp;
      item.isFilterEnum
  );
  needTransformCol.forEach((colItem) =&gt; &#123;
    printDataList.forEach((tableItem: &#123; [key: string]: any &#125;) =&gt; &#123;
      tableItem[handleProp(colItem.prop!)] =
        colItem.prop!.split(&quot;.&quot;).length &gt; 1 &amp;&amp; !colItem.enum
          ? formatValue(handleRowAccordingToProp(tableItem, colItem.prop!))
          : filterEnum(
              handleRowAccordingToProp(tableItem, colItem.prop!),
              enumMap.value.get(colItem.prop!),
              colItem.fieldNames
            );
      for (const key in tableItem) &#123;
        if (tableItem[key] === null)
          tableItem[key] = formatValue(tableItem[key]);
      &#125;
    &#125;);
  &#125;);
  return printDataList;
&#125;);

// æ‰“å°è¡¨æ ¼æ•°æ®ï¼ˆğŸ’¥ å¤šçº§è¡¨å¤´æ•°æ®æ‰“å°æ—¶ï¼Œåªèƒ½æ‰å¹³åŒ–æˆä¸€ç»´æ•°ç»„ï¼ŒprintJs ä¸æ”¯æŒå¤šçº§è¡¨å¤´æ‰“å°ï¼‰
const print = () =&gt; &#123;
  const header = `&lt;div style=&quot;text-align: center&quot;&gt;&lt;h2&gt;$&#123;props.title&#125;&lt;/h2&gt;&lt;/div&gt;`;
  const gridHeaderStyle =
    &quot;border: 1px solid #ebeef5;height: 45px;color: #232425;text-align: center;background-color: #fafafa;&quot;;
  const gridStyle =
    &quot;border: 1px solid #ebeef5;height: 40px;color: #494b4e;text-align: center&quot;;
  printJS(&#123;
    printable: printData.value,
    header: props.title &amp;&amp; header,
    properties: flatColumns
      .value!.filter(
        (item) =&gt;
          ![&quot;selection&quot;, &quot;index&quot;, &quot;expand&quot;].includes(item.type!) &amp;&amp;
          item.isShow &amp;&amp;
          item.prop !== &quot;operation&quot;
      )
      .map((item: ColumnProps) =&gt; (&#123;
        field: handleProp(item.prop!),
        displayName: item.label,
      &#125;)),
    type: &quot;json&quot;,
    gridHeaderStyle,
    gridStyle,
  &#125;);
&#125;;

// æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å‚æ•°å’Œæ–¹æ³•(å¤–éƒ¨éœ€è¦ä»€ä¹ˆï¼Œéƒ½å¯ä»¥ä»è¿™é‡Œæš´éœ²å‡ºå»)
defineExpose(&#123;
  element: tableRef,
  tableData,
  pageable,
  searchParam,
  searchInitParam,
  getTableList,
  search,
  reset,
  handleSizeChange,
  handleCurrentChange,
  clearSelection,
  enumMap,
  isSelected,
  selectedList,
  selectedListIds,
&#125;);
&lt;/script&gt;
</code></pre>
<h3 id="TableColumn-vue"><a href="#TableColumn-vue" class="headerlink" title="TableColumn.vue"></a>TableColumn.vue</h3><pre><code class="vue">&lt;template&gt;
  &lt;RenderTableColumn v-bind=&quot;column&quot; /&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;tsx&quot; name=&quot;TableColumn&quot;&gt;
import &#123; inject, ref, useSlots &#125; from &quot;vue&quot;;
import &#123;
  ColumnProps,
  RenderScope,
  HeaderRenderScope,
&#125; from &quot;@/components/ProTable/interface&quot;;
import &#123;
  filterEnum,
  formatValue,
  handleProp,
  handleRowAccordingToProp,
&#125; from &quot;@/utils&quot;;

defineProps&lt;&#123; column: ColumnProps &#125;&gt;();

const slots = useSlots();

const enumMap = inject(&quot;enumMap&quot;, ref(new Map()));

// æ¸²æŸ“è¡¨æ ¼æ•°æ®
const renderCellData = (item: ColumnProps, scope: RenderScope&lt;any&gt;) =&gt; &#123;
  return enumMap.value.get(item.prop) &amp;&amp; item.isFilterEnum
    ? filterEnum(
        handleRowAccordingToProp(scope.row, item.prop!),
        enumMap.value.get(item.prop)!,
        item.fieldNames
      )
    : formatValue(handleRowAccordingToProp(scope.row, item.prop!));
&#125;;

// è·å– tag ç±»å‹
const getTagType = (item: ColumnProps, scope: RenderScope&lt;any&gt;) =&gt; &#123;
  return filterEnum(
    handleRowAccordingToProp(scope.row, item.prop!),
    enumMap.value.get(item.prop),
    item.fieldNames,
    &quot;tag&quot;
  );
&#125;;

const RenderTableColumn = (item: ColumnProps) =&gt; &#123;
  return (
    &lt;&gt;
      &#123;item.isShow &amp;&amp; (
        &lt;el-table-column
          &#123;...item&#125;
          align=&#123;item.align ?? &quot;center&quot;&#125;
          showOverflowTooltip=&#123;
            item.showOverflowTooltip ?? item.prop !== &quot;operation&quot;
          &#125;
        &gt;
          &#123;&#123;
            default: (scope: RenderScope<any>) => &#123;
              if (item._children)
                return item._children.map((child) => RenderTableColumn(child));
              if (item.render) return item.render(scope);
              if (slots[handleProp(item.prop!)])
                return slots[handleProp(item.prop!)]!(scope);
              if (item.tag)
                return (
                  <el-tag type=&#123;getTagType(item, scope)&#125;>
                    &#123;renderCellData(item, scope)&#125;
                  </el-tag>
                );
              return renderCellData(item, scope);
            &#125;,
            header: (scope: HeaderRenderScope<any>) => &#123;
              if (item.headerRender) return item.headerRender(scope);
              if (slots[`$&#123;handleProp(item.prop!)&#125;Header`])
                return slots[`$&#123;handleProp(item.prop!)&#125;Header`]!(scope);
              return item.label;
            &#125;,
          &#125;&#125;
        &lt;/el-table-column&gt;
      )&#125;
    &lt;/&gt;
  );
&#125;;
&lt;/script&gt;
</code></pre>
<h3 id="ä½¿ç”¨-ProTable-ç»„ä»¶"><a href="#ä½¿ç”¨-ProTable-ç»„ä»¶" class="headerlink" title="ä½¿ç”¨ ProTable ç»„ä»¶"></a>ä½¿ç”¨ ProTable ç»„ä»¶</h3><pre><code class="vue">&lt;template&gt;
  &lt;div class=&quot;table-box&quot;&gt;
    &lt;ProTable
      ref=&quot;proTable&quot;
      title=&quot;ç”¨æˆ·åˆ—è¡¨&quot;
      :columns=&quot;columns&quot;
      :request-api=&quot;getTableList&quot;
      :init-param=&quot;initParam&quot;
      :data-callback=&quot;dataCallback&quot;
    &gt;
      &lt;!-- è¡¨æ ¼ header æŒ‰é’® --&gt;
      &lt;template #tableHeader=&quot;scope&quot;&gt;
        &lt;el-button
          type=&quot;primary&quot;
          :icon=&quot;CirclePlus&quot;
          @click=&quot;openDrawer(&#39;æ–°å¢&#39;)&quot;
          v-auth=&quot;&#39;add&#39;&quot;
          &gt;æ–°å¢ç”¨æˆ·&lt;/el-button
        &gt;
        &lt;el-button
          type=&quot;primary&quot;
          :icon=&quot;Upload&quot;
          plain
          @click=&quot;batchAdd&quot;
          v-auth=&quot;&#39;batchAdd&#39;&quot;
          &gt;æ‰¹é‡æ·»åŠ ç”¨æˆ·&lt;/el-button
        &gt;
        &lt;el-button
          type=&quot;primary&quot;
          :icon=&quot;Download&quot;
          plain
          @click=&quot;downloadFile&quot;
          v-auth=&quot;&#39;export&#39;&quot;
          &gt;å¯¼å‡ºç”¨æˆ·æ•°æ®&lt;/el-button
        &gt;
        &lt;el-button type=&quot;primary&quot; plain @click=&quot;toDetail&quot;
          &gt;To å­é›†è¯¦æƒ…é¡µé¢&lt;/el-button
        &gt;
        &lt;el-button
          type=&quot;danger&quot;
          :icon=&quot;Delete&quot;
          plain
          @click=&quot;batchDelete(scope.selectedListIds)&quot;
          :disabled=&quot;!scope.isSelected&quot;
        &gt;
          æ‰¹é‡åˆ é™¤ç”¨æˆ·
        &lt;/el-button&gt;
      &lt;/template&gt;
      &lt;!-- Expand --&gt;
      &lt;template #expand=&quot;scope&quot;&gt;
        &#123;&#123; scope.row &#125;&#125;
      &lt;/template&gt;
      &lt;!-- usernameHeader --&gt;
      &lt;template #usernameHeader=&quot;scope&quot;&gt;
        &lt;el-button
          type=&quot;primary&quot;
          @click=&quot;ElMessage.success(&#39;æˆ‘æ˜¯é€šè¿‡ä½œç”¨åŸŸæ’æ§½æ¸²æŸ“çš„è¡¨å¤´&#39;)&quot;
        &gt;
          &#123;&#123; scope.column.label &#125;&#125;
        &lt;/el-button&gt;
      &lt;/template&gt;
      &lt;!-- createTime --&gt;
      &lt;template #createTime=&quot;scope&quot;&gt;
        &lt;el-button
          type=&quot;primary&quot;
          link
          @click=&quot;ElMessage.success(&#39;æˆ‘æ˜¯é€šè¿‡ä½œç”¨åŸŸæ’æ§½æ¸²æŸ“çš„å†…å®¹&#39;)&quot;
        &gt;
          &#123;&#123; scope.row.createTime &#125;&#125;
        &lt;/el-button&gt;
      &lt;/template&gt;
      &lt;!-- è¡¨æ ¼æ“ä½œ --&gt;
      &lt;template #operation=&quot;scope&quot;&gt;
        &lt;el-button
          type=&quot;primary&quot;
          link
          :icon=&quot;View&quot;
          @click=&quot;openDrawer(&#39;æŸ¥çœ‹&#39;, scope.row)&quot;
          &gt;æŸ¥çœ‹&lt;/el-button
        &gt;
        &lt;el-button
          type=&quot;primary&quot;
          link
          :icon=&quot;EditPen&quot;
          @click=&quot;openDrawer(&#39;ç¼–è¾‘&#39;, scope.row)&quot;
          &gt;ç¼–è¾‘&lt;/el-button
        &gt;
        &lt;el-button
          type=&quot;primary&quot;
          link
          :icon=&quot;Refresh&quot;
          @click=&quot;resetPass(scope.row)&quot;
          &gt;é‡ç½®å¯†ç &lt;/el-button
        &gt;
        &lt;el-button
          type=&quot;primary&quot;
          link
          :icon=&quot;Delete&quot;
          @click=&quot;deleteAccount(scope.row)&quot;
          &gt;åˆ é™¤&lt;/el-button
        &gt;
      &lt;/template&gt;
    &lt;/ProTable&gt;
    &lt;UserDrawer ref=&quot;drawerRef&quot; /&gt;
    &lt;ImportExcel ref=&quot;dialogRef&quot; /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;tsx&quot; name=&quot;useProTable&quot;&gt;
import &#123; ref, reactive &#125; from &quot;vue&quot;;
import &#123; useRouter &#125; from &quot;vue-router&quot;;
import &#123; User &#125; from &quot;@/api/interface&quot;;
import &#123; useHandleData &#125; from &quot;@/hooks/useHandleData&quot;;
import &#123; useDownload &#125; from &quot;@/hooks/useDownload&quot;;
import &#123; useAuthButtons &#125; from &quot;@/hooks/useAuthButtons&quot;;
import &#123; ElMessage, ElMessageBox &#125; from &quot;element-plus&quot;;
import ProTable from &quot;@/components/ProTable/index.vue&quot;;
import ImportExcel from &quot;@/components/ImportExcel/index.vue&quot;;
import UserDrawer from &quot;@/views/proTable/components/UserDrawer.vue&quot;;
import &#123;
  ProTableInstance,
  ColumnProps,
  HeaderRenderScope,
&#125; from &quot;@/components/ProTable/interface&quot;;
import &#123;
  CirclePlus,
  Delete,
  EditPen,
  Download,
  Upload,
  View,
  Refresh,
&#125; from &quot;@element-plus/icons-vue&quot;;
import &#123;
  getUserList,
  deleteUser,
  editUser,
  addUser,
  changeUserStatus,
  resetUserPassWord,
  exportUserInfo,
  BatchAddUser,
  getUserStatus,
  getUserGender,
&#125; from &quot;@/api/modules/user&quot;;

const router = useRouter();

// è·³è½¬è¯¦æƒ…é¡µ
const toDetail = () =&gt; &#123;
  router.push(
    `/proTable/useProTable/detail/$&#123;Math.random().toFixed(
      3
    )&#125;?params=detail-page`
  );
&#125;;

// è·å– ProTable å…ƒç´ ï¼Œè°ƒç”¨å…¶è·å–åˆ·æ–°æ•°æ®æ–¹æ³•ï¼ˆè¿˜èƒ½è·å–åˆ°å½“å‰æŸ¥è¯¢å‚æ•°ï¼Œæ–¹ä¾¿å¯¼å‡ºæºå¸¦å‚æ•°ï¼‰
const proTable = ref&lt;ProTableInstance&gt;();

// å¦‚æœè¡¨æ ¼éœ€è¦åˆå§‹åŒ–è¯·æ±‚å‚æ•°ï¼Œç›´æ¥å®šä¹‰ä¼ ç»™ ProTable(ä¹‹åæ¯æ¬¡è¯·æ±‚éƒ½ä¼šè‡ªåŠ¨å¸¦ä¸Šè¯¥å‚æ•°ï¼Œæ­¤å‚æ•°æ›´æ”¹ä¹‹åä¹Ÿä¼šä¸€ç›´å¸¦ä¸Šï¼Œæ”¹å˜æ­¤å‚æ•°ä¼šè‡ªåŠ¨åˆ·æ–°è¡¨æ ¼æ•°æ®)
const initParam = reactive(&#123; type: 1 &#125;);

// dataCallback æ˜¯å¯¹äºè¿”å›çš„è¡¨æ ¼æ•°æ®åšå¤„ç†ï¼Œå¦‚æœä½ åå°è¿”å›çš„æ•°æ®ä¸æ˜¯ list &amp;&amp; total &amp;&amp; pageNum &amp;&amp; pageSize è¿™äº›å­—æ®µï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œå¤„ç†æˆè¿™äº›å­—æ®µ
// æˆ–è€…ç›´æ¥å» hooks/useTable.ts æ–‡ä»¶ä¸­æŠŠå­—æ®µæ”¹ä¸ºä½ åç«¯å¯¹åº”çš„å°±è¡Œ
const dataCallback = (data: any) =&gt; &#123;
  return &#123;
    list: data.list,
    total: data.total,
    pageNum: data.pageNum,
    pageSize: data.pageSize,
  &#125;;
&#125;;

// å¦‚æœä½ æƒ³åœ¨è¯·æ±‚ä¹‹å‰å¯¹å½“å‰è¯·æ±‚å‚æ•°åšä¸€äº›æ“ä½œï¼Œå¯ä»¥è‡ªå®šä¹‰å¦‚ä¸‹å‡½æ•°ï¼šparams ä¸ºå½“å‰æ‰€æœ‰çš„è¯·æ±‚å‚æ•°ï¼ˆåŒ…æ‹¬åˆ†é¡µï¼‰ï¼Œæœ€åè¿”å›è¯·æ±‚åˆ—è¡¨æ¥å£
// é»˜è®¤ä¸åšæ“ä½œå°±ç›´æ¥åœ¨ ProTable ç»„ä»¶ä¸Šç»‘å®š	:requestApi=&quot;getUserList&quot;
const getTableList = (params: any) =&gt; &#123;
  let newParams = JSON.parse(JSON.stringify(params));
  newParams.createTime &amp;&amp; (newParams.startTime = newParams.createTime[0]);
  newParams.createTime &amp;&amp; (newParams.endTime = newParams.createTime[1]);
  delete newParams.createTime;
  return getUserList(newParams);
&#125;;

// é¡µé¢æŒ‰é’®æƒé™ï¼ˆæŒ‰é’®æƒé™æ—¢å¯ä»¥ä½¿ç”¨ hooksï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ v-auth æŒ‡ä»¤ï¼ŒæŒ‡ä»¤é€‚åˆç›´æ¥ç»‘å®šåœ¨æŒ‰é’®ä¸Šï¼Œhooks é€‚åˆæ ¹æ®æŒ‰é’®æƒé™æ˜¾ç¤ºä¸åŒçš„å†…å®¹ï¼‰
const &#123; BUTTONS &#125; = useAuthButtons();

// è‡ªå®šä¹‰æ¸²æŸ“è¡¨å¤´ï¼ˆä½¿ç”¨tsxè¯­æ³•ï¼‰
const headerRender = (scope: HeaderRenderScope&lt;User.ResUserList&gt;) =&gt; &#123;
  return (
    &lt;el-button
      type=&quot;primary&quot;
      onClick=&#123;() =&gt; ElMessage.success(&quot;æˆ‘æ˜¯é€šè¿‡ tsx è¯­æ³•æ¸²æŸ“çš„è¡¨å¤´&quot;)&#125;
    &gt;
      &#123;scope.column.label&#125;
    &lt;/el-button&gt;
  );
&#125;;

// è¡¨æ ¼é…ç½®é¡¹
const columns: ColumnProps&lt;User.ResUserList&gt;[] = [
  &#123; type: &quot;selection&quot;, fixed: &quot;left&quot;, width: 80 &#125;,
  &#123; type: &quot;index&quot;, label: &quot;#&quot;, width: 80 &#125;,
  &#123; type: &quot;expand&quot;, label: &quot;Expand&quot;, width: 100 &#125;,
  &#123;
    prop: &quot;username&quot;,
    label: &quot;ç”¨æˆ·å§“å&quot;,
    search: &#123; el: &quot;input&quot; &#125;,
    render: (scope) =&gt; &#123;
      return (
        &lt;el-button
          type=&quot;primary&quot;
          link
          onClick=&#123;() =&gt; ElMessage.success(&quot;æˆ‘æ˜¯é€šè¿‡ tsx è¯­æ³•æ¸²æŸ“çš„å†…å®¹&quot;)&#125;
        &gt;
          &#123;scope.row.username&#125;
        &lt;/el-button&gt;
      );
    &#125;,
  &#125;,
  &#123;
    prop: &quot;gender&quot;,
    label: &quot;æ€§åˆ«&quot;,
    // å­—å…¸æ•°æ®
    // enum: genderType,
    // å­—å…¸è¯·æ±‚ä¸å¸¦å‚æ•°
    enum: getUserGender,
    // å­—å…¸è¯·æ±‚æºå¸¦å‚æ•°
    // enum: () =&gt; getUserGender(&#123; id: 1 &#125;),
    search: &#123; el: &quot;select&quot;, props: &#123; filterable: true &#125; &#125;,
    fieldNames: &#123; label: &quot;genderLabel&quot;, value: &quot;genderValue&quot; &#125;,
  &#125;,
  &#123;
    // å¤šçº§ prop
    prop: &quot;user.detail.age&quot;,
    label: &quot;å¹´é¾„&quot;,
    search: &#123;
      // è‡ªå®šä¹‰ search æ˜¾ç¤ºå†…å®¹
      render: (&#123; searchParam &#125;) =&gt; &#123;
        return (
          &lt;div class=&quot;flx-center&quot;&gt;
            &lt;el-input vModel_trim=&#123;searchParam.minAge&#125; placeholder=&quot;æœ€å°å¹´é¾„&quot; /&gt;
            &lt;span class=&quot;mr10 ml10&quot;&gt;-&lt;/span&gt;
            &lt;el-input vModel_trim=&#123;searchParam.maxAge&#125; placeholder=&quot;æœ€å¤§å¹´é¾„&quot; /&gt;
          &lt;/div&gt;
        );
      &#125;,
    &#125;,
  &#125;,
  &#123; prop: &quot;idCard&quot;, label: &quot;èº«ä»½è¯å·&quot;, search: &#123; el: &quot;input&quot; &#125; &#125;,
  &#123; prop: &quot;email&quot;, label: &quot;é‚®ç®±&quot; &#125;,
  &#123; prop: &quot;address&quot;, label: &quot;å±…ä½åœ°å€&quot; &#125;,
  &#123;
    prop: &quot;status&quot;,
    label: &quot;ç”¨æˆ·çŠ¶æ€&quot;,
    enum: getUserStatus,
    search: &#123; el: &quot;tree-select&quot;, props: &#123; filterable: true &#125; &#125;,
    fieldNames: &#123; label: &quot;userLabel&quot;, value: &quot;userStatus&quot; &#125;,
    render: (scope) =&gt; &#123;
      return (
        &lt;&gt;
          &#123;BUTTONS.value.status ? (
            &lt;el-switch
              model-value=&#123;scope.row.status&#125;
              active-text=&#123;scope.row.status ? &quot;å¯ç”¨&quot; : &quot;ç¦ç”¨&quot;&#125;
              active-value=&#123;1&#125;
              inactive-value=&#123;0&#125;
              onClick=&#123;() =&gt; changeStatus(scope.row)&#125;
            /&gt;
          ) : (
            &lt;el-tag type=&#123;scope.row.status ? &quot;success&quot; : &quot;danger&quot;&#125;&gt;
              &#123;scope.row.status ? &quot;å¯ç”¨&quot; : &quot;ç¦ç”¨&quot;&#125;
            &lt;/el-tag&gt;
          )&#125;
        &lt;/&gt;
      );
    &#125;,
  &#125;,
  &#123;
    prop: &quot;createTime&quot;,
    label: &quot;åˆ›å»ºæ—¶é—´&quot;,
    headerRender,
    width: 180,
    search: &#123;
      el: &quot;date-picker&quot;,
      span: 2,
      props: &#123; type: &quot;datetimerange&quot;, valueFormat: &quot;YYYY-MM-DD HH:mm:ss&quot; &#125;,
      defaultValue: [&quot;2022-11-12 11:35:00&quot;, &quot;2022-12-12 11:35:00&quot;],
    &#125;,
  &#125;,
  &#123; prop: &quot;operation&quot;, label: &quot;æ“ä½œ&quot;, fixed: &quot;right&quot;, width: 330 &#125;,
];

// åˆ é™¤ç”¨æˆ·ä¿¡æ¯
const deleteAccount = async (params: User.ResUserList) =&gt; &#123;
  await useHandleData(
    deleteUser,
    &#123; id: [params.id] &#125;,
    `åˆ é™¤ã€$&#123;params.username&#125;ã€‘ç”¨æˆ·`
  );
  proTable.value?.getTableList();
&#125;;

// æ‰¹é‡åˆ é™¤ç”¨æˆ·ä¿¡æ¯
const batchDelete = async (id: string[]) =&gt; &#123;
  await useHandleData(deleteUser, &#123; id &#125;, &quot;åˆ é™¤æ‰€é€‰ç”¨æˆ·ä¿¡æ¯&quot;);
  proTable.value?.clearSelection();
  proTable.value?.getTableList();
&#125;;

// é‡ç½®ç”¨æˆ·å¯†ç 
const resetPass = async (params: User.ResUserList) =&gt; &#123;
  await useHandleData(
    resetUserPassWord,
    &#123; id: params.id &#125;,
    `é‡ç½®ã€$&#123;params.username&#125;ã€‘ç”¨æˆ·å¯†ç `
  );
  proTable.value?.getTableList();
&#125;;

// åˆ‡æ¢ç”¨æˆ·çŠ¶æ€
const changeStatus = async (row: User.ResUserList) =&gt; &#123;
  await useHandleData(
    changeUserStatus,
    &#123; id: row.id, status: row.status == 1 ? 0 : 1 &#125;,
    `åˆ‡æ¢ã€$&#123;row.username&#125;ã€‘ç”¨æˆ·çŠ¶æ€`
  );
  proTable.value?.getTableList();
&#125;;

// å¯¼å‡ºç”¨æˆ·åˆ—è¡¨
const downloadFile = async () =&gt; &#123;
  ElMessageBox.confirm(&quot;ç¡®è®¤å¯¼å‡ºç”¨æˆ·æ•°æ®?&quot;, &quot;æ¸©é¦¨æç¤º&quot;, &#123;
    type: &quot;warning&quot;,
  &#125;).then(() =&gt;
    useDownload(exportUserInfo, &quot;ç”¨æˆ·åˆ—è¡¨&quot;, proTable.value?.searchParam)
  );
&#125;;

// æ‰¹é‡æ·»åŠ ç”¨æˆ·
const dialogRef = ref&lt;InstanceType&lt;typeof ImportExcel&gt; | null&gt;(null);
const batchAdd = () =&gt; &#123;
  const params = &#123;
    title: &quot;ç”¨æˆ·&quot;,
    tempApi: exportUserInfo,
    importApi: BatchAddUser,
    getTableList: proTable.value?.getTableList,
  &#125;;
  dialogRef.value?.acceptParams(params);
&#125;;

// æ‰“å¼€ drawer(æ–°å¢ã€æŸ¥çœ‹ã€ç¼–è¾‘)
const drawerRef = ref&lt;InstanceType&lt;typeof UserDrawer&gt; | null&gt;(null);
const openDrawer = (title: string, row: Partial&lt;User.ResUserList&gt; = &#123;&#125;) =&gt; &#123;
  const params = &#123;
    title,
    isView: title === &quot;æŸ¥çœ‹&quot;,
    row: &#123; ...row &#125;,
    api: title === &quot;æ–°å¢&quot; ? addUser : title === &quot;ç¼–è¾‘&quot; ? editUser : undefined,
    getTableList: proTable.value?.getTableList,
  &#125;;
  drawerRef.value?.acceptParams(params);
&#125;;
&lt;/script&gt;
</code></pre>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2023/02/18/122-vue/" title="122ã€ã€ŠVuejsè®¾è®¡ä¸å®ç°ã€‹- éœæ˜¥é˜³ï¼šè¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶(ä¸€)"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">ä¸Šä¸€é¡µ: 122ã€ã€ŠVuejsè®¾è®¡ä¸å®ç°ã€‹- éœæ˜¥é˜³ï¼šè¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶(ä¸€)</span></a><a class="button is-default" href="/2023/02/03/120-github/" title="120ã€gitæäº¤ä»£ç ç»ˆç«¯å‡ºç°â€œEnter passphrase for key â€˜/Users/yq/.ssh/id_rsaâ€"><span class="has-text-weight-semibold">ä¸‹ä¸€é¡µ: 120ã€gitæäº¤ä»£ç ç»ˆç«¯å‡ºç°â€œEnter passphrase for key â€˜/Users/yq/.ssh/id_rsaâ€</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/Jude"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- çŸ¥ä¹--><a title="zhihu" target="_blank" rel="noopener nofollow" href="//zhihu.com/https://www.zhihu.com/hot"><i class="iconfont icon-zhihu"></i></a><!-- é¢†è‹±--><!-- è„¸ä¹¦--></section><p><span>Copyright Â©</span><span> Jude 2023</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span>è®°ä½æ˜¨æ—¥çš„ç¾å¥½ï¼Œè¿‡å¥½ä»Šæ—¥çš„ç”Ÿæ´»ï¼Œæ†§æ†¬æ˜å¤©çš„åˆ°æ¥</span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>